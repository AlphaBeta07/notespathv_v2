var sj=Object.defineProperty;var F1=s=>{throw TypeError(s)};var rj=(s,e,t)=>e in s?sj(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var te=(s,e,t)=>rj(s,typeof e!="symbol"?e+"":e,t),$x=(s,e,t)=>e.has(s)||F1("Cannot "+t);var u=(s,e,t)=>($x(s,e,"read from private field"),t?t.call(s):e.get(s)),k=(s,e,t)=>e.has(s)?F1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),S=(s,e,t,n)=>($x(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),P=(s,e,t)=>($x(s,e,"access private method"),t);var un=(s,e,t,n)=>({set _(r){S(s,e,r,t)},get _(){return u(s,e,n)}});function ij(s,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in s)){const i=Object.getOwnPropertyDescriptor(n,r);i&&Object.defineProperty(s,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function zA(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ux={exports:{}},mp={},Vx={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1;function oj(){if(B1)return Ge;B1=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function g(U){return U===null||typeof U!="object"?null:(U=m&&U[m]||U["@@iterator"],typeof U=="function"?U:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function A(U,q,oe){this.props=U,this.context=q,this.refs=x,this.updater=oe||v}A.prototype.isReactComponent={},A.prototype.setState=function(U,q){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,q,"setState")},A.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function E(){}E.prototype=A.prototype;function R(U,q,oe){this.props=U,this.context=q,this.refs=x,this.updater=oe||v}var C=R.prototype=new E;C.constructor=R,b(C,A.prototype),C.isPureReactComponent=!0;var D=Array.isArray,N=Object.prototype.hasOwnProperty,I={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function F(U,q,oe){var de,Ce={},Re=null,he=null;if(q!=null)for(de in q.ref!==void 0&&(he=q.ref),q.key!==void 0&&(Re=""+q.key),q)N.call(q,de)&&!j.hasOwnProperty(de)&&(Ce[de]=q[de]);var Fe=arguments.length-2;if(Fe===1)Ce.children=oe;else if(1<Fe){for(var ze=Array(Fe),Ze=0;Ze<Fe;Ze++)ze[Ze]=arguments[Ze+2];Ce.children=ze}if(U&&U.defaultProps)for(de in Fe=U.defaultProps,Fe)Ce[de]===void 0&&(Ce[de]=Fe[de]);return{$$typeof:s,type:U,key:Re,ref:he,props:Ce,_owner:I.current}}function W(U,q){return{$$typeof:s,type:U.type,key:q,ref:U.ref,props:U.props,_owner:U._owner}}function K(U){return typeof U=="object"&&U!==null&&U.$$typeof===s}function J(U){var q={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(oe){return q[oe]})}var ie=/\/+/g;function ce(U,q){return typeof U=="object"&&U!==null&&U.key!=null?J(""+U.key):q.toString(36)}function Y(U,q,oe,de,Ce){var Re=typeof U;(Re==="undefined"||Re==="boolean")&&(U=null);var he=!1;if(U===null)he=!0;else switch(Re){case"string":case"number":he=!0;break;case"object":switch(U.$$typeof){case s:case e:he=!0}}if(he)return he=U,Ce=Ce(he),U=de===""?"."+ce(he,0):de,D(Ce)?(oe="",U!=null&&(oe=U.replace(ie,"$&/")+"/"),Y(Ce,q,oe,"",function(Ze){return Ze})):Ce!=null&&(K(Ce)&&(Ce=W(Ce,oe+(!Ce.key||he&&he.key===Ce.key?"":(""+Ce.key).replace(ie,"$&/")+"/")+U)),q.push(Ce)),1;if(he=0,de=de===""?".":de+":",D(U))for(var Fe=0;Fe<U.length;Fe++){Re=U[Fe];var ze=de+ce(Re,Fe);he+=Y(Re,q,oe,ze,Ce)}else if(ze=g(U),typeof ze=="function")for(U=ze.call(U),Fe=0;!(Re=U.next()).done;)Re=Re.value,ze=de+ce(Re,Fe++),he+=Y(Re,q,oe,ze,Ce);else if(Re==="object")throw q=String(U),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return he}function ue(U,q,oe){if(U==null)return U;var de=[],Ce=0;return Y(U,de,"","",function(Re){return q.call(oe,Re,Ce++)}),de}function Z(U){if(U._status===-1){var q=U._result;q=q(),q.then(function(oe){(U._status===0||U._status===-1)&&(U._status=1,U._result=oe)},function(oe){(U._status===0||U._status===-1)&&(U._status=2,U._result=oe)}),U._status===-1&&(U._status=0,U._result=q)}if(U._status===1)return U._result.default;throw U._result}var X={current:null},V={transition:null},re={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:V,ReactCurrentOwner:I};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Ge.Children={map:ue,forEach:function(U,q,oe){ue(U,function(){q.apply(this,arguments)},oe)},count:function(U){var q=0;return ue(U,function(){q++}),q},toArray:function(U){return ue(U,function(q){return q})||[]},only:function(U){if(!K(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ge.Component=A,Ge.Fragment=t,Ge.Profiler=r,Ge.PureComponent=R,Ge.StrictMode=n,Ge.Suspense=h,Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Ge.act=ne,Ge.cloneElement=function(U,q,oe){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var de=b({},U.props),Ce=U.key,Re=U.ref,he=U._owner;if(q!=null){if(q.ref!==void 0&&(Re=q.ref,he=I.current),q.key!==void 0&&(Ce=""+q.key),U.type&&U.type.defaultProps)var Fe=U.type.defaultProps;for(ze in q)N.call(q,ze)&&!j.hasOwnProperty(ze)&&(de[ze]=q[ze]===void 0&&Fe!==void 0?Fe[ze]:q[ze])}var ze=arguments.length-2;if(ze===1)de.children=oe;else if(1<ze){Fe=Array(ze);for(var Ze=0;Ze<ze;Ze++)Fe[Ze]=arguments[Ze+2];de.children=Fe}return{$$typeof:s,type:U.type,key:Ce,ref:Re,props:de,_owner:he}},Ge.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:i,_context:U},U.Consumer=U},Ge.createElement=F,Ge.createFactory=function(U){var q=F.bind(null,U);return q.type=U,q},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(U){return{$$typeof:l,render:U}},Ge.isValidElement=K,Ge.lazy=function(U){return{$$typeof:p,_payload:{_status:-1,_result:U},_init:Z}},Ge.memo=function(U,q){return{$$typeof:d,type:U,compare:q===void 0?null:q}},Ge.startTransition=function(U){var q=V.transition;V.transition={};try{U()}finally{V.transition=q}},Ge.unstable_act=ne,Ge.useCallback=function(U,q){return X.current.useCallback(U,q)},Ge.useContext=function(U){return X.current.useContext(U)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(U){return X.current.useDeferredValue(U)},Ge.useEffect=function(U,q){return X.current.useEffect(U,q)},Ge.useId=function(){return X.current.useId()},Ge.useImperativeHandle=function(U,q,oe){return X.current.useImperativeHandle(U,q,oe)},Ge.useInsertionEffect=function(U,q){return X.current.useInsertionEffect(U,q)},Ge.useLayoutEffect=function(U,q){return X.current.useLayoutEffect(U,q)},Ge.useMemo=function(U,q){return X.current.useMemo(U,q)},Ge.useReducer=function(U,q,oe){return X.current.useReducer(U,q,oe)},Ge.useRef=function(U){return X.current.useRef(U)},Ge.useState=function(U){return X.current.useState(U)},Ge.useSyncExternalStore=function(U,q,oe){return X.current.useSyncExternalStore(U,q,oe)},Ge.useTransition=function(){return X.current.useTransition()},Ge.version="18.3.1",Ge}var $1;function Lw(){return $1||($1=1,Vx.exports=oj()),Vx.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1;function aj(){if(U1)return mp;U1=1;var s=Lw(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,h,d){var p,m={},g=null,v=null;d!==void 0&&(g=""+d),h.key!==void 0&&(g=""+h.key),h.ref!==void 0&&(v=h.ref);for(p in h)n.call(h,p)&&!i.hasOwnProperty(p)&&(m[p]=h[p]);if(l&&l.defaultProps)for(p in h=l.defaultProps,h)m[p]===void 0&&(m[p]=h[p]);return{$$typeof:e,type:l,key:g,ref:v,props:m,_owner:r.current}}return mp.Fragment=t,mp.jsx=o,mp.jsxs=o,mp}var V1;function lj(){return V1||(V1=1,Ux.exports=aj()),Ux.exports}var T=lj(),M=Lw();const IR=zA(M),cj=ij({__proto__:null,default:IR},[M]);var Rv={},zx={exports:{}},_s={},Hx={exports:{}},Wx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z1;function uj(){return z1||(z1=1,(function(s){function e(V,re){var ne=V.length;V.push(re);e:for(;0<ne;){var U=ne-1>>>1,q=V[U];if(0<r(q,re))V[U]=re,V[ne]=q,ne=U;else break e}}function t(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var re=V[0],ne=V.pop();if(ne!==re){V[0]=ne;e:for(var U=0,q=V.length,oe=q>>>1;U<oe;){var de=2*(U+1)-1,Ce=V[de],Re=de+1,he=V[Re];if(0>r(Ce,ne))Re<q&&0>r(he,Ce)?(V[U]=he,V[Re]=ne,U=Re):(V[U]=Ce,V[de]=ne,U=de);else if(Re<q&&0>r(he,ne))V[U]=he,V[Re]=ne,U=Re;else break e}}return re}function r(V,re){var ne=V.sortIndex-re.sortIndex;return ne!==0?ne:V.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();s.unstable_now=function(){return o.now()-l}}var h=[],d=[],p=1,m=null,g=3,v=!1,b=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(V){for(var re=t(d);re!==null;){if(re.callback===null)n(d);else if(re.startTime<=V)n(d),re.sortIndex=re.expirationTime,e(h,re);else break;re=t(d)}}function D(V){if(x=!1,C(V),!b)if(t(h)!==null)b=!0,Z(N);else{var re=t(d);re!==null&&X(D,re.startTime-V)}}function N(V,re){b=!1,x&&(x=!1,E(F),F=-1),v=!0;var ne=g;try{for(C(re),m=t(h);m!==null&&(!(m.expirationTime>re)||V&&!J());){var U=m.callback;if(typeof U=="function"){m.callback=null,g=m.priorityLevel;var q=U(m.expirationTime<=re);re=s.unstable_now(),typeof q=="function"?m.callback=q:m===t(h)&&n(h),C(re)}else n(h);m=t(h)}if(m!==null)var oe=!0;else{var de=t(d);de!==null&&X(D,de.startTime-re),oe=!1}return oe}finally{m=null,g=ne,v=!1}}var I=!1,j=null,F=-1,W=5,K=-1;function J(){return!(s.unstable_now()-K<W)}function ie(){if(j!==null){var V=s.unstable_now();K=V;var re=!0;try{re=j(!0,V)}finally{re?ce():(I=!1,j=null)}}else I=!1}var ce;if(typeof R=="function")ce=function(){R(ie)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ue=Y.port2;Y.port1.onmessage=ie,ce=function(){ue.postMessage(null)}}else ce=function(){A(ie,0)};function Z(V){j=V,I||(I=!0,ce())}function X(V,re){F=A(function(){V(s.unstable_now())},re)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(V){V.callback=null},s.unstable_continueExecution=function(){b||v||(b=!0,Z(N))},s.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<V?Math.floor(1e3/V):5},s.unstable_getCurrentPriorityLevel=function(){return g},s.unstable_getFirstCallbackNode=function(){return t(h)},s.unstable_next=function(V){switch(g){case 1:case 2:case 3:var re=3;break;default:re=g}var ne=g;g=re;try{return V()}finally{g=ne}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(V,re){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ne=g;g=V;try{return re()}finally{g=ne}},s.unstable_scheduleCallback=function(V,re,ne){var U=s.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?U+ne:U):ne=U,V){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=ne+q,V={id:p++,callback:re,priorityLevel:V,startTime:ne,expirationTime:q,sortIndex:-1},ne>U?(V.sortIndex=ne,e(d,V),t(h)===null&&V===t(d)&&(x?(E(F),F=-1):x=!0,X(D,ne-U))):(V.sortIndex=q,e(h,V),b||v||(b=!0,Z(N))),V},s.unstable_shouldYield=J,s.unstable_wrapCallback=function(V){var re=g;return function(){var ne=g;g=re;try{return V.apply(this,arguments)}finally{g=ne}}}})(Wx)),Wx}var H1;function hj(){return H1||(H1=1,Hx.exports=uj()),Hx.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1;function dj(){if(W1)return _s;W1=1;var s=Lw(),e=hj();function t(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function i(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(r[a]=c,a=0;a<c.length;a++)n.add(c[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function g(a){return h.call(m,a)?!0:h.call(p,a)?!1:d.test(a)?m[a]=!0:(p[a]=!0,!1)}function v(a,c,f,y){if(f!==null&&f.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function b(a,c,f,y){if(c===null||typeof c>"u"||v(a,c,f,y))return!0;if(y)return!1;if(f!==null)switch(f.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function x(a,c,f,y,w,_,L){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=w,this.mustUseProperty=f,this.propertyName=a,this.type=c,this.sanitizeURL=_,this.removeEmptyString=L}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){A[a]=new x(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];A[c]=new x(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){A[a]=new x(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){A[a]=new x(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){A[a]=new x(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){A[a]=new x(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){A[a]=new x(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){A[a]=new x(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){A[a]=new x(a,5,!1,a.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function R(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(E,R);A[c]=new x(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(E,R);A[c]=new x(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(E,R);A[c]=new x(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){A[a]=new x(a,1,!1,a.toLowerCase(),null,!1,!1)}),A.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){A[a]=new x(a,1,!1,a.toLowerCase(),null,!0,!0)});function C(a,c,f,y){var w=A.hasOwnProperty(c)?A[c]:null;(w!==null?w.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,f,w,y)&&(f=null),y||w===null?g(c)&&(f===null?a.removeAttribute(c):a.setAttribute(c,""+f)):w.mustUseProperty?a[w.propertyName]=f===null?w.type===3?!1:"":f:(c=w.attributeName,y=w.attributeNamespace,f===null?a.removeAttribute(c):(w=w.type,f=w===3||w===4&&f===!0?"":""+f,y?a.setAttributeNS(y,c,f):a.setAttribute(c,f))))}var D=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),I=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),J=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),V=Symbol.iterator;function re(a){return a===null||typeof a!="object"?null:(a=V&&a[V]||a["@@iterator"],typeof a=="function"?a:null)}var ne=Object.assign,U;function q(a){if(U===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);U=c&&c[1]||""}return`
`+U+a}var oe=!1;function de(a,c){if(!a||oe)return"";oe=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(G){var y=G}Reflect.construct(a,[],c)}else{try{c.call()}catch(G){y=G}a.call(c.prototype)}else{try{throw Error()}catch(G){y=G}a()}}catch(G){if(G&&y&&typeof G.stack=="string"){for(var w=G.stack.split(`
`),_=y.stack.split(`
`),L=w.length-1,O=_.length-1;1<=L&&0<=O&&w[L]!==_[O];)O--;for(;1<=L&&0<=O;L--,O--)if(w[L]!==_[O]){if(L!==1||O!==1)do if(L--,O--,0>O||w[L]!==_[O]){var B=`
`+w[L].replace(" at new "," at ");return a.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",a.displayName)),B}while(1<=L&&0<=O);break}}}finally{oe=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?q(a):""}function Ce(a){switch(a.tag){case 5:return q(a.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return a=de(a.type,!1),a;case 11:return a=de(a.type.render,!1),a;case 1:return a=de(a.type,!0),a;default:return""}}function Re(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case j:return"Fragment";case I:return"Portal";case W:return"Profiler";case F:return"StrictMode";case ce:return"Suspense";case Y:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case J:return(a.displayName||"Context")+".Consumer";case K:return(a._context.displayName||"Context")+".Provider";case ie:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ue:return c=a.displayName||null,c!==null?c:Re(a.type)||"Memo";case Z:c=a._payload,a=a._init;try{return Re(a(c))}catch{}}return null}function he(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(c);case 8:return c===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Fe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ze(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ze(a){var c=ze(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),y=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var w=f.get,_=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return w.call(this)},set:function(L){y=""+L,_.call(this,L)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return y},setValue:function(L){y=""+L},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function We(a){a._valueTracker||(a._valueTracker=Ze(a))}function Pn(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),y="";return a&&(y=ze(a)?a.checked?"true":"false":a.value),a=y,a!==f?(c.setValue(a),!0):!1}function rt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function nt(a,c){var f=c.checked;return ne({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function Ct(a,c){var f=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;f=Fe(c.value!=null?c.value:f),a._wrapperState={initialChecked:y,initialValue:f,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Rn(a,c){c=c.checked,c!=null&&C(a,"checked",c,!1)}function $t(a,c){Rn(a,c);var f=Fe(c.value),y=c.type;if(f!=null)y==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(y==="submit"||y==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?Lf(a,c.type,f):c.hasOwnProperty("defaultValue")&&Lf(a,c.type,Fe(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function vy(a,c,f){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,f||c===a.value||(a.value=c),a.defaultValue=c}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function Lf(a,c,f){(c!=="number"||rt(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var Qi=Array.isArray;function ca(a,c,f,y){if(a=a.options,c){c={};for(var w=0;w<f.length;w++)c["$"+f[w]]=!0;for(f=0;f<a.length;f++)w=c.hasOwnProperty("$"+a[f].value),a[f].selected!==w&&(a[f].selected=w),w&&y&&(a[f].defaultSelected=!0)}else{for(f=""+Fe(f),c=null,w=0;w<a.length;w++){if(a[w].value===f){a[w].selected=!0,y&&(a[w].defaultSelected=!0);return}c!==null||a[w].disabled||(c=a[w])}c!==null&&(c.selected=!0)}}function ua(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function wy(a,c){var f=c.value;if(f==null){if(f=c.children,c=c.defaultValue,f!=null){if(c!=null)throw Error(t(92));if(Qi(f)){if(1<f.length)throw Error(t(93));f=f[0]}c=f}c==null&&(c=""),f=c}a._wrapperState={initialValue:Fe(f)}}function by(a,c){var f=Fe(c.value),y=Fe(c.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),c.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),y!=null&&(a.defaultValue=""+y)}function xy(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Sy(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Df(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Sy(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Os,Zi=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,f,y,w){MSApp.execUnsafeLocalFunction(function(){return a(c,f,y,w)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(Os=Os||document.createElement("div"),Os.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Os.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function ys(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var eo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aO=["Webkit","ms","Moz","O"];Object.keys(eo).forEach(function(a){aO.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),eo[c]=eo[a]})});function ZE(a,c,f){return c==null||typeof c=="boolean"||c===""?"":f||typeof c!="number"||c===0||eo.hasOwnProperty(a)&&eo[a]?(""+c).trim():c+"px"}function ek(a,c){a=a.style;for(var f in c)if(c.hasOwnProperty(f)){var y=f.indexOf("--")===0,w=ZE(f,c[f],y);f==="float"&&(f="cssFloat"),y?a.setProperty(f,w):a[f]=w}}var lO=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qw(a,c){if(c){if(lO[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function Zw(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eb=null;function tb(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var nb=null,Ou=null,ju=null;function tk(a){if(a=ep(a)){if(typeof nb!="function")throw Error(t(280));var c=a.stateNode;c&&(c=Wy(c),nb(a.stateNode,a.type,c))}}function nk(a){Ou?ju?ju.push(a):ju=[a]:Ou=a}function sk(){if(Ou){var a=Ou,c=ju;if(ju=Ou=null,tk(a),c)for(a=0;a<c.length;a++)tk(c[a])}}function rk(a,c){return a(c)}function ik(){}var sb=!1;function ok(a,c,f){if(sb)return a(c,f);sb=!0;try{return rk(a,c,f)}finally{sb=!1,(Ou!==null||ju!==null)&&(ik(),sk())}}function Mf(a,c){var f=a.stateNode;if(f===null)return null;var y=Wy(f);if(y===null)return null;f=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(t(231,c,typeof f));return f}var rb=!1;if(l)try{var Nf={};Object.defineProperty(Nf,"passive",{get:function(){rb=!0}}),window.addEventListener("test",Nf,Nf),window.removeEventListener("test",Nf,Nf)}catch{rb=!1}function cO(a,c,f,y,w,_,L,O,B){var G=Array.prototype.slice.call(arguments,3);try{c.apply(f,G)}catch(ee){this.onError(ee)}}var If=!1,_y=null,Ay=!1,ib=null,uO={onError:function(a){If=!0,_y=a}};function hO(a,c,f,y,w,_,L,O,B){If=!1,_y=null,cO.apply(uO,arguments)}function dO(a,c,f,y,w,_,L,O,B){if(hO.apply(this,arguments),If){if(If){var G=_y;If=!1,_y=null}else throw Error(t(198));Ay||(Ay=!0,ib=G)}}function Bl(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function ak(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function lk(a){if(Bl(a)!==a)throw Error(t(188))}function fO(a){var c=a.alternate;if(!c){if(c=Bl(a),c===null)throw Error(t(188));return c!==a?null:a}for(var f=a,y=c;;){var w=f.return;if(w===null)break;var _=w.alternate;if(_===null){if(y=w.return,y!==null){f=y;continue}break}if(w.child===_.child){for(_=w.child;_;){if(_===f)return lk(w),a;if(_===y)return lk(w),c;_=_.sibling}throw Error(t(188))}if(f.return!==y.return)f=w,y=_;else{for(var L=!1,O=w.child;O;){if(O===f){L=!0,f=w,y=_;break}if(O===y){L=!0,y=w,f=_;break}O=O.sibling}if(!L){for(O=_.child;O;){if(O===f){L=!0,f=_,y=w;break}if(O===y){L=!0,y=_,f=w;break}O=O.sibling}if(!L)throw Error(t(189))}}if(f.alternate!==y)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:c}function ck(a){return a=fO(a),a!==null?uk(a):null}function uk(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=uk(a);if(c!==null)return c;a=a.sibling}return null}var hk=e.unstable_scheduleCallback,dk=e.unstable_cancelCallback,pO=e.unstable_shouldYield,mO=e.unstable_requestPaint,Xt=e.unstable_now,gO=e.unstable_getCurrentPriorityLevel,ob=e.unstable_ImmediatePriority,fk=e.unstable_UserBlockingPriority,Ey=e.unstable_NormalPriority,yO=e.unstable_LowPriority,pk=e.unstable_IdlePriority,ky=null,mi=null;function vO(a){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(ky,a,void 0,(a.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:xO,wO=Math.log,bO=Math.LN2;function xO(a){return a>>>=0,a===0?32:31-(wO(a)/bO|0)|0}var Cy=64,Ty=4194304;function Of(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Py(a,c){var f=a.pendingLanes;if(f===0)return 0;var y=0,w=a.suspendedLanes,_=a.pingedLanes,L=f&268435455;if(L!==0){var O=L&~w;O!==0?y=Of(O):(_&=L,_!==0&&(y=Of(_)))}else L=f&~w,L!==0?y=Of(L):_!==0&&(y=Of(_));if(y===0)return 0;if(c!==0&&c!==y&&(c&w)===0&&(w=y&-y,_=c&-c,w>=_||w===16&&(_&4194240)!==0))return c;if((y&4)!==0&&(y|=f&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=y;0<c;)f=31-Fr(c),w=1<<f,y|=a[f],c&=~w;return y}function SO(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _O(a,c){for(var f=a.suspendedLanes,y=a.pingedLanes,w=a.expirationTimes,_=a.pendingLanes;0<_;){var L=31-Fr(_),O=1<<L,B=w[L];B===-1?((O&f)===0||(O&y)!==0)&&(w[L]=SO(O,c)):B<=c&&(a.expiredLanes|=O),_&=~O}}function ab(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function mk(){var a=Cy;return Cy<<=1,(Cy&4194240)===0&&(Cy=64),a}function lb(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function jf(a,c,f){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Fr(c),a[c]=f}function AO(a,c){var f=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<f;){var w=31-Fr(f),_=1<<w;c[w]=0,y[w]=-1,a[w]=-1,f&=~_}}function cb(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var y=31-Fr(f),w=1<<y;w&c|a[y]&c&&(a[y]|=c),f&=~w}}var it=0;function gk(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var yk,ub,vk,wk,bk,hb=!1,Ry=[],ha=null,da=null,fa=null,Ff=new Map,Bf=new Map,pa=[],EO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xk(a,c){switch(a){case"focusin":case"focusout":ha=null;break;case"dragenter":case"dragleave":da=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":Ff.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bf.delete(c.pointerId)}}function $f(a,c,f,y,w,_){return a===null||a.nativeEvent!==_?(a={blockedOn:c,domEventName:f,eventSystemFlags:y,nativeEvent:_,targetContainers:[w]},c!==null&&(c=ep(c),c!==null&&ub(c)),a):(a.eventSystemFlags|=y,c=a.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),a)}function kO(a,c,f,y,w){switch(c){case"focusin":return ha=$f(ha,a,c,f,y,w),!0;case"dragenter":return da=$f(da,a,c,f,y,w),!0;case"mouseover":return fa=$f(fa,a,c,f,y,w),!0;case"pointerover":var _=w.pointerId;return Ff.set(_,$f(Ff.get(_)||null,a,c,f,y,w)),!0;case"gotpointercapture":return _=w.pointerId,Bf.set(_,$f(Bf.get(_)||null,a,c,f,y,w)),!0}return!1}function Sk(a){var c=$l(a.target);if(c!==null){var f=Bl(c);if(f!==null){if(c=f.tag,c===13){if(c=ak(f),c!==null){a.blockedOn=c,bk(a.priority,function(){vk(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ly(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=fb(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var y=new f.constructor(f.type,f);eb=y,f.target.dispatchEvent(y),eb=null}else return c=ep(f),c!==null&&ub(c),a.blockedOn=f,!1;c.shift()}return!0}function _k(a,c,f){Ly(a)&&f.delete(c)}function CO(){hb=!1,ha!==null&&Ly(ha)&&(ha=null),da!==null&&Ly(da)&&(da=null),fa!==null&&Ly(fa)&&(fa=null),Ff.forEach(_k),Bf.forEach(_k)}function Uf(a,c){a.blockedOn===c&&(a.blockedOn=null,hb||(hb=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,CO)))}function Vf(a){function c(w){return Uf(w,a)}if(0<Ry.length){Uf(Ry[0],a);for(var f=1;f<Ry.length;f++){var y=Ry[f];y.blockedOn===a&&(y.blockedOn=null)}}for(ha!==null&&Uf(ha,a),da!==null&&Uf(da,a),fa!==null&&Uf(fa,a),Ff.forEach(c),Bf.forEach(c),f=0;f<pa.length;f++)y=pa[f],y.blockedOn===a&&(y.blockedOn=null);for(;0<pa.length&&(f=pa[0],f.blockedOn===null);)Sk(f),f.blockedOn===null&&pa.shift()}var Fu=D.ReactCurrentBatchConfig,Dy=!0;function TO(a,c,f,y){var w=it,_=Fu.transition;Fu.transition=null;try{it=1,db(a,c,f,y)}finally{it=w,Fu.transition=_}}function PO(a,c,f,y){var w=it,_=Fu.transition;Fu.transition=null;try{it=4,db(a,c,f,y)}finally{it=w,Fu.transition=_}}function db(a,c,f,y){if(Dy){var w=fb(a,c,f,y);if(w===null)Rb(a,c,y,My,f),xk(a,y);else if(kO(w,a,c,f,y))y.stopPropagation();else if(xk(a,y),c&4&&-1<EO.indexOf(a)){for(;w!==null;){var _=ep(w);if(_!==null&&yk(_),_=fb(a,c,f,y),_===null&&Rb(a,c,y,My,f),_===w)break;w=_}w!==null&&y.stopPropagation()}else Rb(a,c,y,null,f)}}var My=null;function fb(a,c,f,y){if(My=null,a=tb(y),a=$l(a),a!==null)if(c=Bl(a),c===null)a=null;else if(f=c.tag,f===13){if(a=ak(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return My=a,null}function Ak(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gO()){case ob:return 1;case fk:return 4;case Ey:case yO:return 16;case pk:return 536870912;default:return 16}default:return 16}}var ma=null,pb=null,Ny=null;function Ek(){if(Ny)return Ny;var a,c=pb,f=c.length,y,w="value"in ma?ma.value:ma.textContent,_=w.length;for(a=0;a<f&&c[a]===w[a];a++);var L=f-a;for(y=1;y<=L&&c[f-y]===w[_-y];y++);return Ny=w.slice(a,1<y?1-y:void 0)}function Iy(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Oy(){return!0}function kk(){return!1}function js(a){function c(f,y,w,_,L){this._reactName=f,this._targetInst=w,this.type=y,this.nativeEvent=_,this.target=L,this.currentTarget=null;for(var O in a)a.hasOwnProperty(O)&&(f=a[O],this[O]=f?f(_):_[O]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Oy:kk,this.isPropagationStopped=kk,this}return ne(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Oy)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Oy)},persist:function(){},isPersistent:Oy}),c}var Bu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mb=js(Bu),zf=ne({},Bu,{view:0,detail:0}),RO=js(zf),gb,yb,Hf,jy=ne({},zf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wb,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Hf&&(Hf&&a.type==="mousemove"?(gb=a.screenX-Hf.screenX,yb=a.screenY-Hf.screenY):yb=gb=0,Hf=a),gb)},movementY:function(a){return"movementY"in a?a.movementY:yb}}),Ck=js(jy),LO=ne({},jy,{dataTransfer:0}),DO=js(LO),MO=ne({},zf,{relatedTarget:0}),vb=js(MO),NO=ne({},Bu,{animationName:0,elapsedTime:0,pseudoElement:0}),IO=js(NO),OO=ne({},Bu,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),jO=js(OO),FO=ne({},Bu,{data:0}),Tk=js(FO),BO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$O={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VO(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=UO[a])?!!c[a]:!1}function wb(){return VO}var zO=ne({},zf,{key:function(a){if(a.key){var c=BO[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Iy(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?$O[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wb,charCode:function(a){return a.type==="keypress"?Iy(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Iy(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),HO=js(zO),WO=ne({},jy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pk=js(WO),GO=ne({},zf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wb}),qO=js(GO),KO=ne({},Bu,{propertyName:0,elapsedTime:0,pseudoElement:0}),XO=js(KO),YO=ne({},jy,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),JO=js(YO),QO=[9,13,27,32],bb=l&&"CompositionEvent"in window,Wf=null;l&&"documentMode"in document&&(Wf=document.documentMode);var ZO=l&&"TextEvent"in window&&!Wf,Rk=l&&(!bb||Wf&&8<Wf&&11>=Wf),Lk=" ",Dk=!1;function Mk(a,c){switch(a){case"keyup":return QO.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nk(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var $u=!1;function e2(a,c){switch(a){case"compositionend":return Nk(c);case"keypress":return c.which!==32?null:(Dk=!0,Lk);case"textInput":return a=c.data,a===Lk&&Dk?null:a;default:return null}}function t2(a,c){if($u)return a==="compositionend"||!bb&&Mk(a,c)?(a=Ek(),Ny=pb=ma=null,$u=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Rk&&c.locale!=="ko"?null:c.data;default:return null}}var n2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ik(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!n2[a.type]:c==="textarea"}function Ok(a,c,f,y){nk(y),c=Vy(c,"onChange"),0<c.length&&(f=new mb("onChange","change",null,f,y),a.push({event:f,listeners:c}))}var Gf=null,qf=null;function s2(a){eC(a,0)}function Fy(a){var c=Wu(a);if(Pn(c))return a}function r2(a,c){if(a==="change")return c}var jk=!1;if(l){var xb;if(l){var Sb="oninput"in document;if(!Sb){var Fk=document.createElement("div");Fk.setAttribute("oninput","return;"),Sb=typeof Fk.oninput=="function"}xb=Sb}else xb=!1;jk=xb&&(!document.documentMode||9<document.documentMode)}function Bk(){Gf&&(Gf.detachEvent("onpropertychange",$k),qf=Gf=null)}function $k(a){if(a.propertyName==="value"&&Fy(qf)){var c=[];Ok(c,qf,a,tb(a)),ok(s2,c)}}function i2(a,c,f){a==="focusin"?(Bk(),Gf=c,qf=f,Gf.attachEvent("onpropertychange",$k)):a==="focusout"&&Bk()}function o2(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Fy(qf)}function a2(a,c){if(a==="click")return Fy(c)}function l2(a,c){if(a==="input"||a==="change")return Fy(c)}function c2(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Br=typeof Object.is=="function"?Object.is:c2;function Kf(a,c){if(Br(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),y=Object.keys(c);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var w=f[y];if(!h.call(c,w)||!Br(a[w],c[w]))return!1}return!0}function Uk(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Vk(a,c){var f=Uk(a);a=0;for(var y;f;){if(f.nodeType===3){if(y=a+f.textContent.length,a<=c&&y>=c)return{node:f,offset:c-a};a=y}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Uk(f)}}function zk(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?zk(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function Hk(){for(var a=window,c=rt();c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=rt(a.document)}return c}function _b(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function u2(a){var c=Hk(),f=a.focusedElem,y=a.selectionRange;if(c!==f&&f&&f.ownerDocument&&zk(f.ownerDocument.documentElement,f)){if(y!==null&&_b(f)){if(c=y.start,a=y.end,a===void 0&&(a=c),"selectionStart"in f)f.selectionStart=c,f.selectionEnd=Math.min(a,f.value.length);else if(a=(c=f.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var w=f.textContent.length,_=Math.min(y.start,w);y=y.end===void 0?_:Math.min(y.end,w),!a.extend&&_>y&&(w=y,y=_,_=w),w=Vk(f,_);var L=Vk(f,y);w&&L&&(a.rangeCount!==1||a.anchorNode!==w.node||a.anchorOffset!==w.offset||a.focusNode!==L.node||a.focusOffset!==L.offset)&&(c=c.createRange(),c.setStart(w.node,w.offset),a.removeAllRanges(),_>y?(a.addRange(c),a.extend(L.node,L.offset)):(c.setEnd(L.node,L.offset),a.addRange(c)))}}for(c=[],a=f;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<c.length;f++)a=c[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var h2=l&&"documentMode"in document&&11>=document.documentMode,Uu=null,Ab=null,Xf=null,Eb=!1;function Wk(a,c,f){var y=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Eb||Uu==null||Uu!==rt(y)||(y=Uu,"selectionStart"in y&&_b(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Xf&&Kf(Xf,y)||(Xf=y,y=Vy(Ab,"onSelect"),0<y.length&&(c=new mb("onSelect","select",null,c,f),a.push({event:c,listeners:y}),c.target=Uu)))}function By(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var Vu={animationend:By("Animation","AnimationEnd"),animationiteration:By("Animation","AnimationIteration"),animationstart:By("Animation","AnimationStart"),transitionend:By("Transition","TransitionEnd")},kb={},Gk={};l&&(Gk=document.createElement("div").style,"AnimationEvent"in window||(delete Vu.animationend.animation,delete Vu.animationiteration.animation,delete Vu.animationstart.animation),"TransitionEvent"in window||delete Vu.transitionend.transition);function $y(a){if(kb[a])return kb[a];if(!Vu[a])return a;var c=Vu[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in Gk)return kb[a]=c[f];return a}var qk=$y("animationend"),Kk=$y("animationiteration"),Xk=$y("animationstart"),Yk=$y("transitionend"),Jk=new Map,Qk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ga(a,c){Jk.set(a,c),i(c,[a])}for(var Cb=0;Cb<Qk.length;Cb++){var Tb=Qk[Cb],d2=Tb.toLowerCase(),f2=Tb[0].toUpperCase()+Tb.slice(1);ga(d2,"on"+f2)}ga(qk,"onAnimationEnd"),ga(Kk,"onAnimationIteration"),ga(Xk,"onAnimationStart"),ga("dblclick","onDoubleClick"),ga("focusin","onFocus"),ga("focusout","onBlur"),ga(Yk,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yf));function Zk(a,c,f){var y=a.type||"unknown-event";a.currentTarget=f,dO(y,c,void 0,a),a.currentTarget=null}function eC(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var y=a[f],w=y.event;y=y.listeners;e:{var _=void 0;if(c)for(var L=y.length-1;0<=L;L--){var O=y[L],B=O.instance,G=O.currentTarget;if(O=O.listener,B!==_&&w.isPropagationStopped())break e;Zk(w,O,G),_=B}else for(L=0;L<y.length;L++){if(O=y[L],B=O.instance,G=O.currentTarget,O=O.listener,B!==_&&w.isPropagationStopped())break e;Zk(w,O,G),_=B}}}if(Ay)throw a=ib,Ay=!1,ib=null,a}function At(a,c){var f=c[Ob];f===void 0&&(f=c[Ob]=new Set);var y=a+"__bubble";f.has(y)||(tC(c,a,2,!1),f.add(y))}function Pb(a,c,f){var y=0;c&&(y|=4),tC(f,a,y,c)}var Uy="_reactListening"+Math.random().toString(36).slice(2);function Jf(a){if(!a[Uy]){a[Uy]=!0,n.forEach(function(f){f!=="selectionchange"&&(p2.has(f)||Pb(f,!1,a),Pb(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Uy]||(c[Uy]=!0,Pb("selectionchange",!1,c))}}function tC(a,c,f,y){switch(Ak(c)){case 1:var w=TO;break;case 4:w=PO;break;default:w=db}f=w.bind(null,c,f,a),w=void 0,!rb||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),y?w!==void 0?a.addEventListener(c,f,{capture:!0,passive:w}):a.addEventListener(c,f,!0):w!==void 0?a.addEventListener(c,f,{passive:w}):a.addEventListener(c,f,!1)}function Rb(a,c,f,y,w){var _=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var L=y.tag;if(L===3||L===4){var O=y.stateNode.containerInfo;if(O===w||O.nodeType===8&&O.parentNode===w)break;if(L===4)for(L=y.return;L!==null;){var B=L.tag;if((B===3||B===4)&&(B=L.stateNode.containerInfo,B===w||B.nodeType===8&&B.parentNode===w))return;L=L.return}for(;O!==null;){if(L=$l(O),L===null)return;if(B=L.tag,B===5||B===6){y=_=L;continue e}O=O.parentNode}}y=y.return}ok(function(){var G=_,ee=tb(f),se=[];e:{var Q=Jk.get(a);if(Q!==void 0){var fe=mb,we=a;switch(a){case"keypress":if(Iy(f)===0)break e;case"keydown":case"keyup":fe=HO;break;case"focusin":we="focus",fe=vb;break;case"focusout":we="blur",fe=vb;break;case"beforeblur":case"afterblur":fe=vb;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Ck;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=DO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=qO;break;case qk:case Kk:case Xk:fe=IO;break;case Yk:fe=XO;break;case"scroll":fe=RO;break;case"wheel":fe=JO;break;case"copy":case"cut":case"paste":fe=jO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Pk}var _e=(c&4)!==0,Yt=!_e&&a==="scroll",z=_e?Q!==null?Q+"Capture":null:Q;_e=[];for(var $=G,H;$!==null;){H=$;var ae=H.stateNode;if(H.tag===5&&ae!==null&&(H=ae,z!==null&&(ae=Mf($,z),ae!=null&&_e.push(Qf($,ae,H)))),Yt)break;$=$.return}0<_e.length&&(Q=new fe(Q,we,null,f,ee),se.push({event:Q,listeners:_e}))}}if((c&7)===0){e:{if(Q=a==="mouseover"||a==="pointerover",fe=a==="mouseout"||a==="pointerout",Q&&f!==eb&&(we=f.relatedTarget||f.fromElement)&&($l(we)||we[to]))break e;if((fe||Q)&&(Q=ee.window===ee?ee:(Q=ee.ownerDocument)?Q.defaultView||Q.parentWindow:window,fe?(we=f.relatedTarget||f.toElement,fe=G,we=we?$l(we):null,we!==null&&(Yt=Bl(we),we!==Yt||we.tag!==5&&we.tag!==6)&&(we=null)):(fe=null,we=G),fe!==we)){if(_e=Ck,ae="onMouseLeave",z="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&(_e=Pk,ae="onPointerLeave",z="onPointerEnter",$="pointer"),Yt=fe==null?Q:Wu(fe),H=we==null?Q:Wu(we),Q=new _e(ae,$+"leave",fe,f,ee),Q.target=Yt,Q.relatedTarget=H,ae=null,$l(ee)===G&&(_e=new _e(z,$+"enter",we,f,ee),_e.target=H,_e.relatedTarget=Yt,ae=_e),Yt=ae,fe&&we)t:{for(_e=fe,z=we,$=0,H=_e;H;H=zu(H))$++;for(H=0,ae=z;ae;ae=zu(ae))H++;for(;0<$-H;)_e=zu(_e),$--;for(;0<H-$;)z=zu(z),H--;for(;$--;){if(_e===z||z!==null&&_e===z.alternate)break t;_e=zu(_e),z=zu(z)}_e=null}else _e=null;fe!==null&&nC(se,Q,fe,_e,!1),we!==null&&Yt!==null&&nC(se,Yt,we,_e,!0)}}e:{if(Q=G?Wu(G):window,fe=Q.nodeName&&Q.nodeName.toLowerCase(),fe==="select"||fe==="input"&&Q.type==="file")var Ee=r2;else if(Ik(Q))if(jk)Ee=l2;else{Ee=o2;var Te=i2}else(fe=Q.nodeName)&&fe.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(Ee=a2);if(Ee&&(Ee=Ee(a,G))){Ok(se,Ee,f,ee);break e}Te&&Te(a,Q,G),a==="focusout"&&(Te=Q._wrapperState)&&Te.controlled&&Q.type==="number"&&Lf(Q,"number",Q.value)}switch(Te=G?Wu(G):window,a){case"focusin":(Ik(Te)||Te.contentEditable==="true")&&(Uu=Te,Ab=G,Xf=null);break;case"focusout":Xf=Ab=Uu=null;break;case"mousedown":Eb=!0;break;case"contextmenu":case"mouseup":case"dragend":Eb=!1,Wk(se,f,ee);break;case"selectionchange":if(h2)break;case"keydown":case"keyup":Wk(se,f,ee)}var Pe;if(bb)e:{switch(a){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else $u?Mk(a,f)&&(Ne="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Ne="onCompositionStart");Ne&&(Rk&&f.locale!=="ko"&&($u||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&$u&&(Pe=Ek()):(ma=ee,pb="value"in ma?ma.value:ma.textContent,$u=!0)),Te=Vy(G,Ne),0<Te.length&&(Ne=new Tk(Ne,a,null,f,ee),se.push({event:Ne,listeners:Te}),Pe?Ne.data=Pe:(Pe=Nk(f),Pe!==null&&(Ne.data=Pe)))),(Pe=ZO?e2(a,f):t2(a,f))&&(G=Vy(G,"onBeforeInput"),0<G.length&&(ee=new Tk("onBeforeInput","beforeinput",null,f,ee),se.push({event:ee,listeners:G}),ee.data=Pe))}eC(se,c)})}function Qf(a,c,f){return{instance:a,listener:c,currentTarget:f}}function Vy(a,c){for(var f=c+"Capture",y=[];a!==null;){var w=a,_=w.stateNode;w.tag===5&&_!==null&&(w=_,_=Mf(a,f),_!=null&&y.unshift(Qf(a,_,w)),_=Mf(a,c),_!=null&&y.push(Qf(a,_,w))),a=a.return}return y}function zu(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function nC(a,c,f,y,w){for(var _=c._reactName,L=[];f!==null&&f!==y;){var O=f,B=O.alternate,G=O.stateNode;if(B!==null&&B===y)break;O.tag===5&&G!==null&&(O=G,w?(B=Mf(f,_),B!=null&&L.unshift(Qf(f,B,O))):w||(B=Mf(f,_),B!=null&&L.push(Qf(f,B,O)))),f=f.return}L.length!==0&&a.push({event:c,listeners:L})}var m2=/\r\n?/g,g2=/\u0000|\uFFFD/g;function sC(a){return(typeof a=="string"?a:""+a).replace(m2,`
`).replace(g2,"")}function zy(a,c,f){if(c=sC(c),sC(a)!==c&&f)throw Error(t(425))}function Hy(){}var Lb=null,Db=null;function Mb(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Nb=typeof setTimeout=="function"?setTimeout:void 0,y2=typeof clearTimeout=="function"?clearTimeout:void 0,rC=typeof Promise=="function"?Promise:void 0,v2=typeof queueMicrotask=="function"?queueMicrotask:typeof rC<"u"?function(a){return rC.resolve(null).then(a).catch(w2)}:Nb;function w2(a){setTimeout(function(){throw a})}function Ib(a,c){var f=c,y=0;do{var w=f.nextSibling;if(a.removeChild(f),w&&w.nodeType===8)if(f=w.data,f==="/$"){if(y===0){a.removeChild(w),Vf(c);return}y--}else f!=="$"&&f!=="$?"&&f!=="$!"||y++;f=w}while(f);Vf(c)}function ya(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function iC(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}var Hu=Math.random().toString(36).slice(2),gi="__reactFiber$"+Hu,Zf="__reactProps$"+Hu,to="__reactContainer$"+Hu,Ob="__reactEvents$"+Hu,b2="__reactListeners$"+Hu,x2="__reactHandles$"+Hu;function $l(a){var c=a[gi];if(c)return c;for(var f=a.parentNode;f;){if(c=f[to]||f[gi]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=iC(a);a!==null;){if(f=a[gi])return f;a=iC(a)}return c}a=f,f=a.parentNode}return null}function ep(a){return a=a[gi]||a[to],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Wu(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Wy(a){return a[Zf]||null}var jb=[],Gu=-1;function va(a){return{current:a}}function Et(a){0>Gu||(a.current=jb[Gu],jb[Gu]=null,Gu--)}function vt(a,c){Gu++,jb[Gu]=a.current,a.current=c}var wa={},Wn=va(wa),vs=va(!1),Ul=wa;function qu(a,c){var f=a.type.contextTypes;if(!f)return wa;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var w={},_;for(_ in f)w[_]=c[_];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=w),w}function ws(a){return a=a.childContextTypes,a!=null}function Gy(){Et(vs),Et(Wn)}function oC(a,c,f){if(Wn.current!==wa)throw Error(t(168));vt(Wn,c),vt(vs,f)}function aC(a,c,f){var y=a.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return f;y=y.getChildContext();for(var w in y)if(!(w in c))throw Error(t(108,he(a)||"Unknown",w));return ne({},f,y)}function qy(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||wa,Ul=Wn.current,vt(Wn,a),vt(vs,vs.current),!0}function lC(a,c,f){var y=a.stateNode;if(!y)throw Error(t(169));f?(a=aC(a,c,Ul),y.__reactInternalMemoizedMergedChildContext=a,Et(vs),Et(Wn),vt(Wn,a)):Et(vs),vt(vs,f)}var no=null,Ky=!1,Fb=!1;function cC(a){no===null?no=[a]:no.push(a)}function S2(a){Ky=!0,cC(a)}function ba(){if(!Fb&&no!==null){Fb=!0;var a=0,c=it;try{var f=no;for(it=1;a<f.length;a++){var y=f[a];do y=y(!0);while(y!==null)}no=null,Ky=!1}catch(w){throw no!==null&&(no=no.slice(a+1)),hk(ob,ba),w}finally{it=c,Fb=!1}}return null}var Ku=[],Xu=0,Xy=null,Yy=0,pr=[],mr=0,Vl=null,so=1,ro="";function zl(a,c){Ku[Xu++]=Yy,Ku[Xu++]=Xy,Xy=a,Yy=c}function uC(a,c,f){pr[mr++]=so,pr[mr++]=ro,pr[mr++]=Vl,Vl=a;var y=so;a=ro;var w=32-Fr(y)-1;y&=~(1<<w),f+=1;var _=32-Fr(c)+w;if(30<_){var L=w-w%5;_=(y&(1<<L)-1).toString(32),y>>=L,w-=L,so=1<<32-Fr(c)+w|f<<w|y,ro=_+a}else so=1<<_|f<<w|y,ro=a}function Bb(a){a.return!==null&&(zl(a,1),uC(a,1,0))}function $b(a){for(;a===Xy;)Xy=Ku[--Xu],Ku[Xu]=null,Yy=Ku[--Xu],Ku[Xu]=null;for(;a===Vl;)Vl=pr[--mr],pr[mr]=null,ro=pr[--mr],pr[mr]=null,so=pr[--mr],pr[mr]=null}var Fs=null,Bs=null,Tt=!1,$r=null;function hC(a,c){var f=wr(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=a,c=a.deletions,c===null?(a.deletions=[f],a.flags|=16):c.push(f)}function dC(a,c){switch(a.tag){case 5:var f=a.type;return c=c.nodeType!==1||f.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,Fs=a,Bs=ya(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,Fs=a,Bs=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(f=Vl!==null?{id:so,overflow:ro}:null,a.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=wr(18,null,null,0),f.stateNode=c,f.return=a,a.child=f,Fs=a,Bs=null,!0):!1;default:return!1}}function Ub(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Vb(a){if(Tt){var c=Bs;if(c){var f=c;if(!dC(a,c)){if(Ub(a))throw Error(t(418));c=ya(f.nextSibling);var y=Fs;c&&dC(a,c)?hC(y,f):(a.flags=a.flags&-4097|2,Tt=!1,Fs=a)}}else{if(Ub(a))throw Error(t(418));a.flags=a.flags&-4097|2,Tt=!1,Fs=a}}}function fC(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Fs=a}function Jy(a){if(a!==Fs)return!1;if(!Tt)return fC(a),Tt=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!Mb(a.type,a.memoizedProps)),c&&(c=Bs)){if(Ub(a))throw pC(),Error(t(418));for(;c;)hC(a,c),c=ya(c.nextSibling)}if(fC(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(c===0){Bs=ya(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++}a=a.nextSibling}Bs=null}}else Bs=Fs?ya(a.stateNode.nextSibling):null;return!0}function pC(){for(var a=Bs;a;)a=ya(a.nextSibling)}function Yu(){Bs=Fs=null,Tt=!1}function zb(a){$r===null?$r=[a]:$r.push(a)}var _2=D.ReactCurrentBatchConfig;function tp(a,c,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var y=f.stateNode}if(!y)throw Error(t(147,a));var w=y,_=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===_?c.ref:(c=function(L){var O=w.refs;L===null?delete O[_]:O[_]=L},c._stringRef=_,c)}if(typeof a!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,a))}return a}function Qy(a,c){throw a=Object.prototype.toString.call(c),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function mC(a){var c=a._init;return c(a._payload)}function gC(a){function c(z,$){if(a){var H=z.deletions;H===null?(z.deletions=[$],z.flags|=16):H.push($)}}function f(z,$){if(!a)return null;for(;$!==null;)c(z,$),$=$.sibling;return null}function y(z,$){for(z=new Map;$!==null;)$.key!==null?z.set($.key,$):z.set($.index,$),$=$.sibling;return z}function w(z,$){return z=Ta(z,$),z.index=0,z.sibling=null,z}function _(z,$,H){return z.index=H,a?(H=z.alternate,H!==null?(H=H.index,H<$?(z.flags|=2,$):H):(z.flags|=2,$)):(z.flags|=1048576,$)}function L(z){return a&&z.alternate===null&&(z.flags|=2),z}function O(z,$,H,ae){return $===null||$.tag!==6?($=Nx(H,z.mode,ae),$.return=z,$):($=w($,H),$.return=z,$)}function B(z,$,H,ae){var Ee=H.type;return Ee===j?ee(z,$,H.props.children,ae,H.key):$!==null&&($.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===Z&&mC(Ee)===$.type)?(ae=w($,H.props),ae.ref=tp(z,$,H),ae.return=z,ae):(ae=Sv(H.type,H.key,H.props,null,z.mode,ae),ae.ref=tp(z,$,H),ae.return=z,ae)}function G(z,$,H,ae){return $===null||$.tag!==4||$.stateNode.containerInfo!==H.containerInfo||$.stateNode.implementation!==H.implementation?($=Ix(H,z.mode,ae),$.return=z,$):($=w($,H.children||[]),$.return=z,$)}function ee(z,$,H,ae,Ee){return $===null||$.tag!==7?($=Jl(H,z.mode,ae,Ee),$.return=z,$):($=w($,H),$.return=z,$)}function se(z,$,H){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Nx(""+$,z.mode,H),$.return=z,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case N:return H=Sv($.type,$.key,$.props,null,z.mode,H),H.ref=tp(z,null,$),H.return=z,H;case I:return $=Ix($,z.mode,H),$.return=z,$;case Z:var ae=$._init;return se(z,ae($._payload),H)}if(Qi($)||re($))return $=Jl($,z.mode,H,null),$.return=z,$;Qy(z,$)}return null}function Q(z,$,H,ae){var Ee=$!==null?$.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return Ee!==null?null:O(z,$,""+H,ae);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case N:return H.key===Ee?B(z,$,H,ae):null;case I:return H.key===Ee?G(z,$,H,ae):null;case Z:return Ee=H._init,Q(z,$,Ee(H._payload),ae)}if(Qi(H)||re(H))return Ee!==null?null:ee(z,$,H,ae,null);Qy(z,H)}return null}function fe(z,$,H,ae,Ee){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return z=z.get(H)||null,O($,z,""+ae,Ee);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case N:return z=z.get(ae.key===null?H:ae.key)||null,B($,z,ae,Ee);case I:return z=z.get(ae.key===null?H:ae.key)||null,G($,z,ae,Ee);case Z:var Te=ae._init;return fe(z,$,H,Te(ae._payload),Ee)}if(Qi(ae)||re(ae))return z=z.get(H)||null,ee($,z,ae,Ee,null);Qy($,ae)}return null}function we(z,$,H,ae){for(var Ee=null,Te=null,Pe=$,Ne=$=0,bn=null;Pe!==null&&Ne<H.length;Ne++){Pe.index>Ne?(bn=Pe,Pe=null):bn=Pe.sibling;var et=Q(z,Pe,H[Ne],ae);if(et===null){Pe===null&&(Pe=bn);break}a&&Pe&&et.alternate===null&&c(z,Pe),$=_(et,$,Ne),Te===null?Ee=et:Te.sibling=et,Te=et,Pe=bn}if(Ne===H.length)return f(z,Pe),Tt&&zl(z,Ne),Ee;if(Pe===null){for(;Ne<H.length;Ne++)Pe=se(z,H[Ne],ae),Pe!==null&&($=_(Pe,$,Ne),Te===null?Ee=Pe:Te.sibling=Pe,Te=Pe);return Tt&&zl(z,Ne),Ee}for(Pe=y(z,Pe);Ne<H.length;Ne++)bn=fe(Pe,z,Ne,H[Ne],ae),bn!==null&&(a&&bn.alternate!==null&&Pe.delete(bn.key===null?Ne:bn.key),$=_(bn,$,Ne),Te===null?Ee=bn:Te.sibling=bn,Te=bn);return a&&Pe.forEach(function(Pa){return c(z,Pa)}),Tt&&zl(z,Ne),Ee}function _e(z,$,H,ae){var Ee=re(H);if(typeof Ee!="function")throw Error(t(150));if(H=Ee.call(H),H==null)throw Error(t(151));for(var Te=Ee=null,Pe=$,Ne=$=0,bn=null,et=H.next();Pe!==null&&!et.done;Ne++,et=H.next()){Pe.index>Ne?(bn=Pe,Pe=null):bn=Pe.sibling;var Pa=Q(z,Pe,et.value,ae);if(Pa===null){Pe===null&&(Pe=bn);break}a&&Pe&&Pa.alternate===null&&c(z,Pe),$=_(Pa,$,Ne),Te===null?Ee=Pa:Te.sibling=Pa,Te=Pa,Pe=bn}if(et.done)return f(z,Pe),Tt&&zl(z,Ne),Ee;if(Pe===null){for(;!et.done;Ne++,et=H.next())et=se(z,et.value,ae),et!==null&&($=_(et,$,Ne),Te===null?Ee=et:Te.sibling=et,Te=et);return Tt&&zl(z,Ne),Ee}for(Pe=y(z,Pe);!et.done;Ne++,et=H.next())et=fe(Pe,z,Ne,et.value,ae),et!==null&&(a&&et.alternate!==null&&Pe.delete(et.key===null?Ne:et.key),$=_(et,$,Ne),Te===null?Ee=et:Te.sibling=et,Te=et);return a&&Pe.forEach(function(nj){return c(z,nj)}),Tt&&zl(z,Ne),Ee}function Yt(z,$,H,ae){if(typeof H=="object"&&H!==null&&H.type===j&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case N:e:{for(var Ee=H.key,Te=$;Te!==null;){if(Te.key===Ee){if(Ee=H.type,Ee===j){if(Te.tag===7){f(z,Te.sibling),$=w(Te,H.props.children),$.return=z,z=$;break e}}else if(Te.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===Z&&mC(Ee)===Te.type){f(z,Te.sibling),$=w(Te,H.props),$.ref=tp(z,Te,H),$.return=z,z=$;break e}f(z,Te);break}else c(z,Te);Te=Te.sibling}H.type===j?($=Jl(H.props.children,z.mode,ae,H.key),$.return=z,z=$):(ae=Sv(H.type,H.key,H.props,null,z.mode,ae),ae.ref=tp(z,$,H),ae.return=z,z=ae)}return L(z);case I:e:{for(Te=H.key;$!==null;){if($.key===Te)if($.tag===4&&$.stateNode.containerInfo===H.containerInfo&&$.stateNode.implementation===H.implementation){f(z,$.sibling),$=w($,H.children||[]),$.return=z,z=$;break e}else{f(z,$);break}else c(z,$);$=$.sibling}$=Ix(H,z.mode,ae),$.return=z,z=$}return L(z);case Z:return Te=H._init,Yt(z,$,Te(H._payload),ae)}if(Qi(H))return we(z,$,H,ae);if(re(H))return _e(z,$,H,ae);Qy(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,$!==null&&$.tag===6?(f(z,$.sibling),$=w($,H),$.return=z,z=$):(f(z,$),$=Nx(H,z.mode,ae),$.return=z,z=$),L(z)):f(z,$)}return Yt}var Ju=gC(!0),yC=gC(!1),Zy=va(null),ev=null,Qu=null,Hb=null;function Wb(){Hb=Qu=ev=null}function Gb(a){var c=Zy.current;Et(Zy),a._currentValue=c}function qb(a,c,f){for(;a!==null;){var y=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),a===f)break;a=a.return}}function Zu(a,c){ev=a,Hb=Qu=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(bs=!0),a.firstContext=null)}function gr(a){var c=a._currentValue;if(Hb!==a)if(a={context:a,memoizedValue:c,next:null},Qu===null){if(ev===null)throw Error(t(308));Qu=a,ev.dependencies={lanes:0,firstContext:a}}else Qu=Qu.next=a;return c}var Hl=null;function Kb(a){Hl===null?Hl=[a]:Hl.push(a)}function vC(a,c,f,y){var w=c.interleaved;return w===null?(f.next=f,Kb(c)):(f.next=w.next,w.next=f),c.interleaved=f,io(a,y)}function io(a,c){a.lanes|=c;var f=a.alternate;for(f!==null&&(f.lanes|=c),f=a,a=a.return;a!==null;)a.childLanes|=c,f=a.alternate,f!==null&&(f.childLanes|=c),f=a,a=a.return;return f.tag===3?f.stateNode:null}var xa=!1;function Xb(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wC(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function oo(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function Sa(a,c,f){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Ye&2)!==0){var w=y.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),y.pending=c,io(a,f)}return w=y.interleaved,w===null?(c.next=c,Kb(y)):(c.next=w.next,w.next=c),y.interleaved=c,io(a,f)}function tv(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var y=c.lanes;y&=a.pendingLanes,f|=y,c.lanes=f,cb(a,f)}}function bC(a,c){var f=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var w=null,_=null;if(f=f.firstBaseUpdate,f!==null){do{var L={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};_===null?w=_=L:_=_.next=L,f=f.next}while(f!==null);_===null?w=_=c:_=_.next=c}else w=_=c;f={baseState:y.baseState,firstBaseUpdate:w,lastBaseUpdate:_,shared:y.shared,effects:y.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}function nv(a,c,f,y){var w=a.updateQueue;xa=!1;var _=w.firstBaseUpdate,L=w.lastBaseUpdate,O=w.shared.pending;if(O!==null){w.shared.pending=null;var B=O,G=B.next;B.next=null,L===null?_=G:L.next=G,L=B;var ee=a.alternate;ee!==null&&(ee=ee.updateQueue,O=ee.lastBaseUpdate,O!==L&&(O===null?ee.firstBaseUpdate=G:O.next=G,ee.lastBaseUpdate=B))}if(_!==null){var se=w.baseState;L=0,ee=G=B=null,O=_;do{var Q=O.lane,fe=O.eventTime;if((y&Q)===Q){ee!==null&&(ee=ee.next={eventTime:fe,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var we=a,_e=O;switch(Q=c,fe=f,_e.tag){case 1:if(we=_e.payload,typeof we=="function"){se=we.call(fe,se,Q);break e}se=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=_e.payload,Q=typeof we=="function"?we.call(fe,se,Q):we,Q==null)break e;se=ne({},se,Q);break e;case 2:xa=!0}}O.callback!==null&&O.lane!==0&&(a.flags|=64,Q=w.effects,Q===null?w.effects=[O]:Q.push(O))}else fe={eventTime:fe,lane:Q,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ee===null?(G=ee=fe,B=se):ee=ee.next=fe,L|=Q;if(O=O.next,O===null){if(O=w.shared.pending,O===null)break;Q=O,O=Q.next,Q.next=null,w.lastBaseUpdate=Q,w.shared.pending=null}}while(!0);if(ee===null&&(B=se),w.baseState=B,w.firstBaseUpdate=G,w.lastBaseUpdate=ee,c=w.shared.interleaved,c!==null){w=c;do L|=w.lane,w=w.next;while(w!==c)}else _===null&&(w.shared.lanes=0);ql|=L,a.lanes=L,a.memoizedState=se}}function xC(a,c,f){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var y=a[c],w=y.callback;if(w!==null){if(y.callback=null,y=f,typeof w!="function")throw Error(t(191,w));w.call(y)}}}var np={},yi=va(np),sp=va(np),rp=va(np);function Wl(a){if(a===np)throw Error(t(174));return a}function Yb(a,c){switch(vt(rp,c),vt(sp,a),vt(yi,np),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Df(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=Df(c,a)}Et(yi),vt(yi,c)}function eh(){Et(yi),Et(sp),Et(rp)}function SC(a){Wl(rp.current);var c=Wl(yi.current),f=Df(c,a.type);c!==f&&(vt(sp,a),vt(yi,f))}function Jb(a){sp.current===a&&(Et(yi),Et(sp))}var Mt=va(0);function sv(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Qb=[];function Zb(){for(var a=0;a<Qb.length;a++)Qb[a]._workInProgressVersionPrimary=null;Qb.length=0}var rv=D.ReactCurrentDispatcher,ex=D.ReactCurrentBatchConfig,Gl=0,Nt=null,ln=null,vn=null,iv=!1,ip=!1,op=0,A2=0;function Gn(){throw Error(t(321))}function tx(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!Br(a[f],c[f]))return!1;return!0}function nx(a,c,f,y,w,_){if(Gl=_,Nt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,rv.current=a===null||a.memoizedState===null?T2:P2,a=f(y,w),ip){_=0;do{if(ip=!1,op=0,25<=_)throw Error(t(301));_+=1,vn=ln=null,c.updateQueue=null,rv.current=R2,a=f(y,w)}while(ip)}if(rv.current=lv,c=ln!==null&&ln.next!==null,Gl=0,vn=ln=Nt=null,iv=!1,c)throw Error(t(300));return a}function sx(){var a=op!==0;return op=0,a}function vi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Nt.memoizedState=vn=a:vn=vn.next=a,vn}function yr(){if(ln===null){var a=Nt.alternate;a=a!==null?a.memoizedState:null}else a=ln.next;var c=vn===null?Nt.memoizedState:vn.next;if(c!==null)vn=c,ln=a;else{if(a===null)throw Error(t(310));ln=a,a={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},vn===null?Nt.memoizedState=vn=a:vn=vn.next=a}return vn}function ap(a,c){return typeof c=="function"?c(a):c}function rx(a){var c=yr(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var y=ln,w=y.baseQueue,_=f.pending;if(_!==null){if(w!==null){var L=w.next;w.next=_.next,_.next=L}y.baseQueue=w=_,f.pending=null}if(w!==null){_=w.next,y=y.baseState;var O=L=null,B=null,G=_;do{var ee=G.lane;if((Gl&ee)===ee)B!==null&&(B=B.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),y=G.hasEagerState?G.eagerState:a(y,G.action);else{var se={lane:ee,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};B===null?(O=B=se,L=y):B=B.next=se,Nt.lanes|=ee,ql|=ee}G=G.next}while(G!==null&&G!==_);B===null?L=y:B.next=O,Br(y,c.memoizedState)||(bs=!0),c.memoizedState=y,c.baseState=L,c.baseQueue=B,f.lastRenderedState=y}if(a=f.interleaved,a!==null){w=a;do _=w.lane,Nt.lanes|=_,ql|=_,w=w.next;while(w!==a)}else w===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function ix(a){var c=yr(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var y=f.dispatch,w=f.pending,_=c.memoizedState;if(w!==null){f.pending=null;var L=w=w.next;do _=a(_,L.action),L=L.next;while(L!==w);Br(_,c.memoizedState)||(bs=!0),c.memoizedState=_,c.baseQueue===null&&(c.baseState=_),f.lastRenderedState=_}return[_,y]}function _C(){}function AC(a,c){var f=Nt,y=yr(),w=c(),_=!Br(y.memoizedState,w);if(_&&(y.memoizedState=w,bs=!0),y=y.queue,ox(CC.bind(null,f,y,a),[a]),y.getSnapshot!==c||_||vn!==null&&vn.memoizedState.tag&1){if(f.flags|=2048,lp(9,kC.bind(null,f,y,w,c),void 0,null),wn===null)throw Error(t(349));(Gl&30)!==0||EC(f,c,w)}return w}function EC(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=Nt.updateQueue,c===null?(c={lastEffect:null,stores:null},Nt.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function kC(a,c,f,y){c.value=f,c.getSnapshot=y,TC(c)&&PC(a)}function CC(a,c,f){return f(function(){TC(c)&&PC(a)})}function TC(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!Br(a,f)}catch{return!0}}function PC(a){var c=io(a,1);c!==null&&Hr(c,a,1,-1)}function RC(a){var c=vi();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ap,lastRenderedState:a},c.queue=a,a=a.dispatch=C2.bind(null,Nt,a),[c.memoizedState,a]}function lp(a,c,f,y){return a={tag:a,create:c,destroy:f,deps:y,next:null},c=Nt.updateQueue,c===null?(c={lastEffect:null,stores:null},Nt.updateQueue=c,c.lastEffect=a.next=a):(f=c.lastEffect,f===null?c.lastEffect=a.next=a:(y=f.next,f.next=a,a.next=y,c.lastEffect=a)),a}function LC(){return yr().memoizedState}function ov(a,c,f,y){var w=vi();Nt.flags|=a,w.memoizedState=lp(1|c,f,void 0,y===void 0?null:y)}function av(a,c,f,y){var w=yr();y=y===void 0?null:y;var _=void 0;if(ln!==null){var L=ln.memoizedState;if(_=L.destroy,y!==null&&tx(y,L.deps)){w.memoizedState=lp(c,f,_,y);return}}Nt.flags|=a,w.memoizedState=lp(1|c,f,_,y)}function DC(a,c){return ov(8390656,8,a,c)}function ox(a,c){return av(2048,8,a,c)}function MC(a,c){return av(4,2,a,c)}function NC(a,c){return av(4,4,a,c)}function IC(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function OC(a,c,f){return f=f!=null?f.concat([a]):null,av(4,4,IC.bind(null,c,a),f)}function ax(){}function jC(a,c){var f=yr();c=c===void 0?null:c;var y=f.memoizedState;return y!==null&&c!==null&&tx(c,y[1])?y[0]:(f.memoizedState=[a,c],a)}function FC(a,c){var f=yr();c=c===void 0?null:c;var y=f.memoizedState;return y!==null&&c!==null&&tx(c,y[1])?y[0]:(a=a(),f.memoizedState=[a,c],a)}function BC(a,c,f){return(Gl&21)===0?(a.baseState&&(a.baseState=!1,bs=!0),a.memoizedState=f):(Br(f,c)||(f=mk(),Nt.lanes|=f,ql|=f,a.baseState=!0),c)}function E2(a,c){var f=it;it=f!==0&&4>f?f:4,a(!0);var y=ex.transition;ex.transition={};try{a(!1),c()}finally{it=f,ex.transition=y}}function $C(){return yr().memoizedState}function k2(a,c,f){var y=ka(a);if(f={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null},UC(a))VC(c,f);else if(f=vC(a,c,f,y),f!==null){var w=os();Hr(f,a,y,w),zC(f,c,y)}}function C2(a,c,f){var y=ka(a),w={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null};if(UC(a))VC(c,w);else{var _=a.alternate;if(a.lanes===0&&(_===null||_.lanes===0)&&(_=c.lastRenderedReducer,_!==null))try{var L=c.lastRenderedState,O=_(L,f);if(w.hasEagerState=!0,w.eagerState=O,Br(O,L)){var B=c.interleaved;B===null?(w.next=w,Kb(c)):(w.next=B.next,B.next=w),c.interleaved=w;return}}catch{}finally{}f=vC(a,c,w,y),f!==null&&(w=os(),Hr(f,a,y,w),zC(f,c,y))}}function UC(a){var c=a.alternate;return a===Nt||c!==null&&c===Nt}function VC(a,c){ip=iv=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function zC(a,c,f){if((f&4194240)!==0){var y=c.lanes;y&=a.pendingLanes,f|=y,c.lanes=f,cb(a,f)}}var lv={readContext:gr,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},T2={readContext:gr,useCallback:function(a,c){return vi().memoizedState=[a,c===void 0?null:c],a},useContext:gr,useEffect:DC,useImperativeHandle:function(a,c,f){return f=f!=null?f.concat([a]):null,ov(4194308,4,IC.bind(null,c,a),f)},useLayoutEffect:function(a,c){return ov(4194308,4,a,c)},useInsertionEffect:function(a,c){return ov(4,2,a,c)},useMemo:function(a,c){var f=vi();return c=c===void 0?null:c,a=a(),f.memoizedState=[a,c],a},useReducer:function(a,c,f){var y=vi();return c=f!==void 0?f(c):c,y.memoizedState=y.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},y.queue=a,a=a.dispatch=k2.bind(null,Nt,a),[y.memoizedState,a]},useRef:function(a){var c=vi();return a={current:a},c.memoizedState=a},useState:RC,useDebugValue:ax,useDeferredValue:function(a){return vi().memoizedState=a},useTransition:function(){var a=RC(!1),c=a[0];return a=E2.bind(null,a[1]),vi().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,f){var y=Nt,w=vi();if(Tt){if(f===void 0)throw Error(t(407));f=f()}else{if(f=c(),wn===null)throw Error(t(349));(Gl&30)!==0||EC(y,c,f)}w.memoizedState=f;var _={value:f,getSnapshot:c};return w.queue=_,DC(CC.bind(null,y,_,a),[a]),y.flags|=2048,lp(9,kC.bind(null,y,_,f,c),void 0,null),f},useId:function(){var a=vi(),c=wn.identifierPrefix;if(Tt){var f=ro,y=so;f=(y&~(1<<32-Fr(y)-1)).toString(32)+f,c=":"+c+"R"+f,f=op++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=A2++,c=":"+c+"r"+f.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},P2={readContext:gr,useCallback:jC,useContext:gr,useEffect:ox,useImperativeHandle:OC,useInsertionEffect:MC,useLayoutEffect:NC,useMemo:FC,useReducer:rx,useRef:LC,useState:function(){return rx(ap)},useDebugValue:ax,useDeferredValue:function(a){var c=yr();return BC(c,ln.memoizedState,a)},useTransition:function(){var a=rx(ap)[0],c=yr().memoizedState;return[a,c]},useMutableSource:_C,useSyncExternalStore:AC,useId:$C,unstable_isNewReconciler:!1},R2={readContext:gr,useCallback:jC,useContext:gr,useEffect:ox,useImperativeHandle:OC,useInsertionEffect:MC,useLayoutEffect:NC,useMemo:FC,useReducer:ix,useRef:LC,useState:function(){return ix(ap)},useDebugValue:ax,useDeferredValue:function(a){var c=yr();return ln===null?c.memoizedState=a:BC(c,ln.memoizedState,a)},useTransition:function(){var a=ix(ap)[0],c=yr().memoizedState;return[a,c]},useMutableSource:_C,useSyncExternalStore:AC,useId:$C,unstable_isNewReconciler:!1};function Ur(a,c){if(a&&a.defaultProps){c=ne({},c),a=a.defaultProps;for(var f in a)c[f]===void 0&&(c[f]=a[f]);return c}return c}function lx(a,c,f,y){c=a.memoizedState,f=f(y,c),f=f==null?c:ne({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var cv={isMounted:function(a){return(a=a._reactInternals)?Bl(a)===a:!1},enqueueSetState:function(a,c,f){a=a._reactInternals;var y=os(),w=ka(a),_=oo(y,w);_.payload=c,f!=null&&(_.callback=f),c=Sa(a,_,w),c!==null&&(Hr(c,a,w,y),tv(c,a,w))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var y=os(),w=ka(a),_=oo(y,w);_.tag=1,_.payload=c,f!=null&&(_.callback=f),c=Sa(a,_,w),c!==null&&(Hr(c,a,w,y),tv(c,a,w))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=os(),y=ka(a),w=oo(f,y);w.tag=2,c!=null&&(w.callback=c),c=Sa(a,w,y),c!==null&&(Hr(c,a,y,f),tv(c,a,y))}};function HC(a,c,f,y,w,_,L){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,_,L):c.prototype&&c.prototype.isPureReactComponent?!Kf(f,y)||!Kf(w,_):!0}function WC(a,c,f){var y=!1,w=wa,_=c.contextType;return typeof _=="object"&&_!==null?_=gr(_):(w=ws(c)?Ul:Wn.current,y=c.contextTypes,_=(y=y!=null)?qu(a,w):wa),c=new c(f,_),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=cv,a.stateNode=c,c._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=w,a.__reactInternalMemoizedMaskedChildContext=_),c}function GC(a,c,f,y){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,y),c.state!==a&&cv.enqueueReplaceState(c,c.state,null)}function cx(a,c,f,y){var w=a.stateNode;w.props=f,w.state=a.memoizedState,w.refs={},Xb(a);var _=c.contextType;typeof _=="object"&&_!==null?w.context=gr(_):(_=ws(c)?Ul:Wn.current,w.context=qu(a,_)),w.state=a.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(lx(a,c,_,f),w.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(c=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),c!==w.state&&cv.enqueueReplaceState(w,w.state,null),nv(a,f,w,y),w.state=a.memoizedState),typeof w.componentDidMount=="function"&&(a.flags|=4194308)}function th(a,c){try{var f="",y=c;do f+=Ce(y),y=y.return;while(y);var w=f}catch(_){w=`
Error generating stack: `+_.message+`
`+_.stack}return{value:a,source:c,stack:w,digest:null}}function ux(a,c,f){return{value:a,source:null,stack:f??null,digest:c??null}}function hx(a,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var L2=typeof WeakMap=="function"?WeakMap:Map;function qC(a,c,f){f=oo(-1,f),f.tag=3,f.payload={element:null};var y=c.value;return f.callback=function(){gv||(gv=!0,kx=y),hx(a,c)},f}function KC(a,c,f){f=oo(-1,f),f.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var w=c.value;f.payload=function(){return y(w)},f.callback=function(){hx(a,c)}}var _=a.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(f.callback=function(){hx(a,c),typeof y!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var L=c.stack;this.componentDidCatch(c.value,{componentStack:L!==null?L:""})}),f}function XC(a,c,f){var y=a.pingCache;if(y===null){y=a.pingCache=new L2;var w=new Set;y.set(c,w)}else w=y.get(c),w===void 0&&(w=new Set,y.set(c,w));w.has(f)||(w.add(f),a=W2.bind(null,a,c,f),c.then(a,a))}function YC(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function JC(a,c,f,y,w){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=oo(-1,1),c.tag=2,Sa(f,c,1))),f.lanes|=1),a):(a.flags|=65536,a.lanes=w,a)}var D2=D.ReactCurrentOwner,bs=!1;function is(a,c,f,y){c.child=a===null?yC(c,null,f,y):Ju(c,a.child,f,y)}function QC(a,c,f,y,w){f=f.render;var _=c.ref;return Zu(c,w),y=nx(a,c,f,y,_,w),f=sx(),a!==null&&!bs?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~w,ao(a,c,w)):(Tt&&f&&Bb(c),c.flags|=1,is(a,c,y,w),c.child)}function ZC(a,c,f,y,w){if(a===null){var _=f.type;return typeof _=="function"&&!Mx(_)&&_.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=_,e1(a,c,_,y,w)):(a=Sv(f.type,null,y,c,c.mode,w),a.ref=c.ref,a.return=c,c.child=a)}if(_=a.child,(a.lanes&w)===0){var L=_.memoizedProps;if(f=f.compare,f=f!==null?f:Kf,f(L,y)&&a.ref===c.ref)return ao(a,c,w)}return c.flags|=1,a=Ta(_,y),a.ref=c.ref,a.return=c,c.child=a}function e1(a,c,f,y,w){if(a!==null){var _=a.memoizedProps;if(Kf(_,y)&&a.ref===c.ref)if(bs=!1,c.pendingProps=y=_,(a.lanes&w)!==0)(a.flags&131072)!==0&&(bs=!0);else return c.lanes=a.lanes,ao(a,c,w)}return dx(a,c,f,y,w)}function t1(a,c,f){var y=c.pendingProps,w=y.children,_=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(sh,$s),$s|=f;else{if((f&1073741824)===0)return a=_!==null?_.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,vt(sh,$s),$s|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=_!==null?_.baseLanes:f,vt(sh,$s),$s|=y}else _!==null?(y=_.baseLanes|f,c.memoizedState=null):y=f,vt(sh,$s),$s|=y;return is(a,c,w,f),c.child}function n1(a,c){var f=c.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function dx(a,c,f,y,w){var _=ws(f)?Ul:Wn.current;return _=qu(c,_),Zu(c,w),f=nx(a,c,f,y,_,w),y=sx(),a!==null&&!bs?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~w,ao(a,c,w)):(Tt&&y&&Bb(c),c.flags|=1,is(a,c,f,w),c.child)}function s1(a,c,f,y,w){if(ws(f)){var _=!0;qy(c)}else _=!1;if(Zu(c,w),c.stateNode===null)hv(a,c),WC(c,f,y),cx(c,f,y,w),y=!0;else if(a===null){var L=c.stateNode,O=c.memoizedProps;L.props=O;var B=L.context,G=f.contextType;typeof G=="object"&&G!==null?G=gr(G):(G=ws(f)?Ul:Wn.current,G=qu(c,G));var ee=f.getDerivedStateFromProps,se=typeof ee=="function"||typeof L.getSnapshotBeforeUpdate=="function";se||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(O!==y||B!==G)&&GC(c,L,y,G),xa=!1;var Q=c.memoizedState;L.state=Q,nv(c,y,L,w),B=c.memoizedState,O!==y||Q!==B||vs.current||xa?(typeof ee=="function"&&(lx(c,f,ee,y),B=c.memoizedState),(O=xa||HC(c,f,O,y,Q,B,G))?(se||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(c.flags|=4194308)):(typeof L.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=B),L.props=y,L.state=B,L.context=G,y=O):(typeof L.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{L=c.stateNode,wC(a,c),O=c.memoizedProps,G=c.type===c.elementType?O:Ur(c.type,O),L.props=G,se=c.pendingProps,Q=L.context,B=f.contextType,typeof B=="object"&&B!==null?B=gr(B):(B=ws(f)?Ul:Wn.current,B=qu(c,B));var fe=f.getDerivedStateFromProps;(ee=typeof fe=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(O!==se||Q!==B)&&GC(c,L,y,B),xa=!1,Q=c.memoizedState,L.state=Q,nv(c,y,L,w);var we=c.memoizedState;O!==se||Q!==we||vs.current||xa?(typeof fe=="function"&&(lx(c,f,fe,y),we=c.memoizedState),(G=xa||HC(c,f,G,y,Q,we,B)||!1)?(ee||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(y,we,B),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(y,we,B)),typeof L.componentDidUpdate=="function"&&(c.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof L.componentDidUpdate!="function"||O===a.memoizedProps&&Q===a.memoizedState||(c.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||O===a.memoizedProps&&Q===a.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=we),L.props=y,L.state=we,L.context=B,y=G):(typeof L.componentDidUpdate!="function"||O===a.memoizedProps&&Q===a.memoizedState||(c.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||O===a.memoizedProps&&Q===a.memoizedState||(c.flags|=1024),y=!1)}return fx(a,c,f,y,_,w)}function fx(a,c,f,y,w,_){n1(a,c);var L=(c.flags&128)!==0;if(!y&&!L)return w&&lC(c,f,!1),ao(a,c,_);y=c.stateNode,D2.current=c;var O=L&&typeof f.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,a!==null&&L?(c.child=Ju(c,a.child,null,_),c.child=Ju(c,null,O,_)):is(a,c,O,_),c.memoizedState=y.state,w&&lC(c,f,!0),c.child}function r1(a){var c=a.stateNode;c.pendingContext?oC(a,c.pendingContext,c.pendingContext!==c.context):c.context&&oC(a,c.context,!1),Yb(a,c.containerInfo)}function i1(a,c,f,y,w){return Yu(),zb(w),c.flags|=256,is(a,c,f,y),c.child}var px={dehydrated:null,treeContext:null,retryLane:0};function mx(a){return{baseLanes:a,cachePool:null,transitions:null}}function o1(a,c,f){var y=c.pendingProps,w=Mt.current,_=!1,L=(c.flags&128)!==0,O;if((O=L)||(O=a!==null&&a.memoizedState===null?!1:(w&2)!==0),O?(_=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(w|=1),vt(Mt,w&1),a===null)return Vb(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(L=y.children,a=y.fallback,_?(y=c.mode,_=c.child,L={mode:"hidden",children:L},(y&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=L):_=_v(L,y,0,null),a=Jl(a,y,f,null),_.return=c,a.return=c,_.sibling=a,c.child=_,c.child.memoizedState=mx(f),c.memoizedState=px,a):gx(c,L));if(w=a.memoizedState,w!==null&&(O=w.dehydrated,O!==null))return M2(a,c,L,y,O,w,f);if(_){_=y.fallback,L=c.mode,w=a.child,O=w.sibling;var B={mode:"hidden",children:y.children};return(L&1)===0&&c.child!==w?(y=c.child,y.childLanes=0,y.pendingProps=B,c.deletions=null):(y=Ta(w,B),y.subtreeFlags=w.subtreeFlags&14680064),O!==null?_=Ta(O,_):(_=Jl(_,L,f,null),_.flags|=2),_.return=c,y.return=c,y.sibling=_,c.child=y,y=_,_=c.child,L=a.child.memoizedState,L=L===null?mx(f):{baseLanes:L.baseLanes|f,cachePool:null,transitions:L.transitions},_.memoizedState=L,_.childLanes=a.childLanes&~f,c.memoizedState=px,y}return _=a.child,a=_.sibling,y=Ta(_,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=f),y.return=c,y.sibling=null,a!==null&&(f=c.deletions,f===null?(c.deletions=[a],c.flags|=16):f.push(a)),c.child=y,c.memoizedState=null,y}function gx(a,c){return c=_v({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function uv(a,c,f,y){return y!==null&&zb(y),Ju(c,a.child,null,f),a=gx(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function M2(a,c,f,y,w,_,L){if(f)return c.flags&256?(c.flags&=-257,y=ux(Error(t(422))),uv(a,c,L,y)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(_=y.fallback,w=c.mode,y=_v({mode:"visible",children:y.children},w,0,null),_=Jl(_,w,L,null),_.flags|=2,y.return=c,_.return=c,y.sibling=_,c.child=y,(c.mode&1)!==0&&Ju(c,a.child,null,L),c.child.memoizedState=mx(L),c.memoizedState=px,_);if((c.mode&1)===0)return uv(a,c,L,null);if(w.data==="$!"){if(y=w.nextSibling&&w.nextSibling.dataset,y)var O=y.dgst;return y=O,_=Error(t(419)),y=ux(_,y,void 0),uv(a,c,L,y)}if(O=(L&a.childLanes)!==0,bs||O){if(y=wn,y!==null){switch(L&-L){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(y.suspendedLanes|L))!==0?0:w,w!==0&&w!==_.retryLane&&(_.retryLane=w,io(a,w),Hr(y,a,w,-1))}return Dx(),y=ux(Error(t(421))),uv(a,c,L,y)}return w.data==="$?"?(c.flags|=128,c.child=a.child,c=G2.bind(null,a),w._reactRetry=c,null):(a=_.treeContext,Bs=ya(w.nextSibling),Fs=c,Tt=!0,$r=null,a!==null&&(pr[mr++]=so,pr[mr++]=ro,pr[mr++]=Vl,so=a.id,ro=a.overflow,Vl=c),c=gx(c,y.children),c.flags|=4096,c)}function a1(a,c,f){a.lanes|=c;var y=a.alternate;y!==null&&(y.lanes|=c),qb(a.return,c,f)}function yx(a,c,f,y,w){var _=a.memoizedState;_===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:w}:(_.isBackwards=c,_.rendering=null,_.renderingStartTime=0,_.last=y,_.tail=f,_.tailMode=w)}function l1(a,c,f){var y=c.pendingProps,w=y.revealOrder,_=y.tail;if(is(a,c,y.children,f),y=Mt.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&a1(a,f,c);else if(a.tag===19)a1(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(vt(Mt,y),(c.mode&1)===0)c.memoizedState=null;else switch(w){case"forwards":for(f=c.child,w=null;f!==null;)a=f.alternate,a!==null&&sv(a)===null&&(w=f),f=f.sibling;f=w,f===null?(w=c.child,c.child=null):(w=f.sibling,f.sibling=null),yx(c,!1,w,f,_);break;case"backwards":for(f=null,w=c.child,c.child=null;w!==null;){if(a=w.alternate,a!==null&&sv(a)===null){c.child=w;break}a=w.sibling,w.sibling=f,f=w,w=a}yx(c,!0,f,null,_);break;case"together":yx(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function hv(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function ao(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),ql|=c.lanes,(f&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(t(153));if(c.child!==null){for(a=c.child,f=Ta(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=Ta(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function N2(a,c,f){switch(c.tag){case 3:r1(c),Yu();break;case 5:SC(c);break;case 1:ws(c.type)&&qy(c);break;case 4:Yb(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,w=c.memoizedProps.value;vt(Zy,y._currentValue),y._currentValue=w;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(vt(Mt,Mt.current&1),c.flags|=128,null):(f&c.child.childLanes)!==0?o1(a,c,f):(vt(Mt,Mt.current&1),a=ao(a,c,f),a!==null?a.sibling:null);vt(Mt,Mt.current&1);break;case 19:if(y=(f&c.childLanes)!==0,(a.flags&128)!==0){if(y)return l1(a,c,f);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),vt(Mt,Mt.current),y)break;return null;case 22:case 23:return c.lanes=0,t1(a,c,f)}return ao(a,c,f)}var c1,vx,u1,h1;c1=function(a,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},vx=function(){},u1=function(a,c,f,y){var w=a.memoizedProps;if(w!==y){a=c.stateNode,Wl(yi.current);var _=null;switch(f){case"input":w=nt(a,w),y=nt(a,y),_=[];break;case"select":w=ne({},w,{value:void 0}),y=ne({},y,{value:void 0}),_=[];break;case"textarea":w=ua(a,w),y=ua(a,y),_=[];break;default:typeof w.onClick!="function"&&typeof y.onClick=="function"&&(a.onclick=Hy)}Qw(f,y);var L;f=null;for(G in w)if(!y.hasOwnProperty(G)&&w.hasOwnProperty(G)&&w[G]!=null)if(G==="style"){var O=w[G];for(L in O)O.hasOwnProperty(L)&&(f||(f={}),f[L]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(r.hasOwnProperty(G)?_||(_=[]):(_=_||[]).push(G,null));for(G in y){var B=y[G];if(O=w!=null?w[G]:void 0,y.hasOwnProperty(G)&&B!==O&&(B!=null||O!=null))if(G==="style")if(O){for(L in O)!O.hasOwnProperty(L)||B&&B.hasOwnProperty(L)||(f||(f={}),f[L]="");for(L in B)B.hasOwnProperty(L)&&O[L]!==B[L]&&(f||(f={}),f[L]=B[L])}else f||(_||(_=[]),_.push(G,f)),f=B;else G==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,O=O?O.__html:void 0,B!=null&&O!==B&&(_=_||[]).push(G,B)):G==="children"?typeof B!="string"&&typeof B!="number"||(_=_||[]).push(G,""+B):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(r.hasOwnProperty(G)?(B!=null&&G==="onScroll"&&At("scroll",a),_||O===B||(_=[])):(_=_||[]).push(G,B))}f&&(_=_||[]).push("style",f);var G=_;(c.updateQueue=G)&&(c.flags|=4)}},h1=function(a,c,f,y){f!==y&&(c.flags|=4)};function cp(a,c){if(!Tt)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function qn(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,y=0;if(c)for(var w=a.child;w!==null;)f|=w.lanes|w.childLanes,y|=w.subtreeFlags&14680064,y|=w.flags&14680064,w.return=a,w=w.sibling;else for(w=a.child;w!==null;)f|=w.lanes|w.childLanes,y|=w.subtreeFlags,y|=w.flags,w.return=a,w=w.sibling;return a.subtreeFlags|=y,a.childLanes=f,c}function I2(a,c,f){var y=c.pendingProps;switch($b(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(c),null;case 1:return ws(c.type)&&Gy(),qn(c),null;case 3:return y=c.stateNode,eh(),Et(vs),Et(Wn),Zb(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(Jy(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,$r!==null&&(Px($r),$r=null))),vx(a,c),qn(c),null;case 5:Jb(c);var w=Wl(rp.current);if(f=c.type,a!==null&&c.stateNode!=null)u1(a,c,f,y,w),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(t(166));return qn(c),null}if(a=Wl(yi.current),Jy(c)){y=c.stateNode,f=c.type;var _=c.memoizedProps;switch(y[gi]=c,y[Zf]=_,a=(c.mode&1)!==0,f){case"dialog":At("cancel",y),At("close",y);break;case"iframe":case"object":case"embed":At("load",y);break;case"video":case"audio":for(w=0;w<Yf.length;w++)At(Yf[w],y);break;case"source":At("error",y);break;case"img":case"image":case"link":At("error",y),At("load",y);break;case"details":At("toggle",y);break;case"input":Ct(y,_),At("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!_.multiple},At("invalid",y);break;case"textarea":wy(y,_),At("invalid",y)}Qw(f,_),w=null;for(var L in _)if(_.hasOwnProperty(L)){var O=_[L];L==="children"?typeof O=="string"?y.textContent!==O&&(_.suppressHydrationWarning!==!0&&zy(y.textContent,O,a),w=["children",O]):typeof O=="number"&&y.textContent!==""+O&&(_.suppressHydrationWarning!==!0&&zy(y.textContent,O,a),w=["children",""+O]):r.hasOwnProperty(L)&&O!=null&&L==="onScroll"&&At("scroll",y)}switch(f){case"input":We(y),vy(y,_,!0);break;case"textarea":We(y),xy(y);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(y.onclick=Hy)}y=w,c.updateQueue=y,y!==null&&(c.flags|=4)}else{L=w.nodeType===9?w:w.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Sy(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=L.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof y.is=="string"?a=L.createElement(f,{is:y.is}):(a=L.createElement(f),f==="select"&&(L=a,y.multiple?L.multiple=!0:y.size&&(L.size=y.size))):a=L.createElementNS(a,f),a[gi]=c,a[Zf]=y,c1(a,c,!1,!1),c.stateNode=a;e:{switch(L=Zw(f,y),f){case"dialog":At("cancel",a),At("close",a),w=y;break;case"iframe":case"object":case"embed":At("load",a),w=y;break;case"video":case"audio":for(w=0;w<Yf.length;w++)At(Yf[w],a);w=y;break;case"source":At("error",a),w=y;break;case"img":case"image":case"link":At("error",a),At("load",a),w=y;break;case"details":At("toggle",a),w=y;break;case"input":Ct(a,y),w=nt(a,y),At("invalid",a);break;case"option":w=y;break;case"select":a._wrapperState={wasMultiple:!!y.multiple},w=ne({},y,{value:void 0}),At("invalid",a);break;case"textarea":wy(a,y),w=ua(a,y),At("invalid",a);break;default:w=y}Qw(f,w),O=w;for(_ in O)if(O.hasOwnProperty(_)){var B=O[_];_==="style"?ek(a,B):_==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&Zi(a,B)):_==="children"?typeof B=="string"?(f!=="textarea"||B!=="")&&ys(a,B):typeof B=="number"&&ys(a,""+B):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(r.hasOwnProperty(_)?B!=null&&_==="onScroll"&&At("scroll",a):B!=null&&C(a,_,B,L))}switch(f){case"input":We(a),vy(a,y,!1);break;case"textarea":We(a),xy(a);break;case"option":y.value!=null&&a.setAttribute("value",""+Fe(y.value));break;case"select":a.multiple=!!y.multiple,_=y.value,_!=null?ca(a,!!y.multiple,_,!1):y.defaultValue!=null&&ca(a,!!y.multiple,y.defaultValue,!0);break;default:typeof w.onClick=="function"&&(a.onclick=Hy)}switch(f){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return qn(c),null;case 6:if(a&&c.stateNode!=null)h1(a,c,a.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(t(166));if(f=Wl(rp.current),Wl(yi.current),Jy(c)){if(y=c.stateNode,f=c.memoizedProps,y[gi]=c,(_=y.nodeValue!==f)&&(a=Fs,a!==null))switch(a.tag){case 3:zy(y.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&zy(y.nodeValue,f,(a.mode&1)!==0)}_&&(c.flags|=4)}else y=(f.nodeType===9?f:f.ownerDocument).createTextNode(y),y[gi]=c,c.stateNode=y}return qn(c),null;case 13:if(Et(Mt),y=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Tt&&Bs!==null&&(c.mode&1)!==0&&(c.flags&128)===0)pC(),Yu(),c.flags|=98560,_=!1;else if(_=Jy(c),y!==null&&y.dehydrated!==null){if(a===null){if(!_)throw Error(t(318));if(_=c.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[gi]=c}else Yu(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;qn(c),_=!1}else $r!==null&&(Px($r),$r=null),_=!0;if(!_)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=f,c):(y=y!==null,y!==(a!==null&&a.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(Mt.current&1)!==0?cn===0&&(cn=3):Dx())),c.updateQueue!==null&&(c.flags|=4),qn(c),null);case 4:return eh(),vx(a,c),a===null&&Jf(c.stateNode.containerInfo),qn(c),null;case 10:return Gb(c.type._context),qn(c),null;case 17:return ws(c.type)&&Gy(),qn(c),null;case 19:if(Et(Mt),_=c.memoizedState,_===null)return qn(c),null;if(y=(c.flags&128)!==0,L=_.rendering,L===null)if(y)cp(_,!1);else{if(cn!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(L=sv(a),L!==null){for(c.flags|=128,cp(_,!1),y=L.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=f,f=c.child;f!==null;)_=f,a=y,_.flags&=14680066,L=_.alternate,L===null?(_.childLanes=0,_.lanes=a,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=L.childLanes,_.lanes=L.lanes,_.child=L.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=L.memoizedProps,_.memoizedState=L.memoizedState,_.updateQueue=L.updateQueue,_.type=L.type,a=L.dependencies,_.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return vt(Mt,Mt.current&1|2),c.child}a=a.sibling}_.tail!==null&&Xt()>rh&&(c.flags|=128,y=!0,cp(_,!1),c.lanes=4194304)}else{if(!y)if(a=sv(L),a!==null){if(c.flags|=128,y=!0,f=a.updateQueue,f!==null&&(c.updateQueue=f,c.flags|=4),cp(_,!0),_.tail===null&&_.tailMode==="hidden"&&!L.alternate&&!Tt)return qn(c),null}else 2*Xt()-_.renderingStartTime>rh&&f!==1073741824&&(c.flags|=128,y=!0,cp(_,!1),c.lanes=4194304);_.isBackwards?(L.sibling=c.child,c.child=L):(f=_.last,f!==null?f.sibling=L:c.child=L,_.last=L)}return _.tail!==null?(c=_.tail,_.rendering=c,_.tail=c.sibling,_.renderingStartTime=Xt(),c.sibling=null,f=Mt.current,vt(Mt,y?f&1|2:f&1),c):(qn(c),null);case 22:case 23:return Lx(),y=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?($s&1073741824)!==0&&(qn(c),c.subtreeFlags&6&&(c.flags|=8192)):qn(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function O2(a,c){switch($b(c),c.tag){case 1:return ws(c.type)&&Gy(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return eh(),Et(vs),Et(Wn),Zb(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return Jb(c),null;case 13:if(Et(Mt),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(t(340));Yu()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Et(Mt),null;case 4:return eh(),null;case 10:return Gb(c.type._context),null;case 22:case 23:return Lx(),null;case 24:return null;default:return null}}var dv=!1,Kn=!1,j2=typeof WeakSet=="function"?WeakSet:Set,ye=null;function nh(a,c){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(y){Ut(a,c,y)}else f.current=null}function wx(a,c,f){try{f()}catch(y){Ut(a,c,y)}}var d1=!1;function F2(a,c){if(Lb=Dy,a=Hk(),_b(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var y=f.getSelection&&f.getSelection();if(y&&y.rangeCount!==0){f=y.anchorNode;var w=y.anchorOffset,_=y.focusNode;y=y.focusOffset;try{f.nodeType,_.nodeType}catch{f=null;break e}var L=0,O=-1,B=-1,G=0,ee=0,se=a,Q=null;t:for(;;){for(var fe;se!==f||w!==0&&se.nodeType!==3||(O=L+w),se!==_||y!==0&&se.nodeType!==3||(B=L+y),se.nodeType===3&&(L+=se.nodeValue.length),(fe=se.firstChild)!==null;)Q=se,se=fe;for(;;){if(se===a)break t;if(Q===f&&++G===w&&(O=L),Q===_&&++ee===y&&(B=L),(fe=se.nextSibling)!==null)break;se=Q,Q=se.parentNode}se=fe}f=O===-1||B===-1?null:{start:O,end:B}}else f=null}f=f||{start:0,end:0}}else f=null;for(Db={focusedElem:a,selectionRange:f},Dy=!1,ye=c;ye!==null;)if(c=ye,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,ye=a;else for(;ye!==null;){c=ye;try{var we=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var _e=we.memoizedProps,Yt=we.memoizedState,z=c.stateNode,$=z.getSnapshotBeforeUpdate(c.elementType===c.type?_e:Ur(c.type,_e),Yt);z.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var H=c.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){Ut(c,c.return,ae)}if(a=c.sibling,a!==null){a.return=c.return,ye=a;break}ye=c.return}return we=d1,d1=!1,we}function up(a,c,f){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var w=y=y.next;do{if((w.tag&a)===a){var _=w.destroy;w.destroy=void 0,_!==void 0&&wx(c,f,_)}w=w.next}while(w!==y)}}function fv(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&a)===a){var y=f.create;f.destroy=y()}f=f.next}while(f!==c)}}function bx(a){var c=a.ref;if(c!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof c=="function"?c(a):c.current=a}}function f1(a){var c=a.alternate;c!==null&&(a.alternate=null,f1(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[gi],delete c[Zf],delete c[Ob],delete c[b2],delete c[x2])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function p1(a){return a.tag===5||a.tag===3||a.tag===4}function m1(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||p1(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function xx(a,c,f){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(a,c):f.insertBefore(a,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(a,f)):(c=f,c.appendChild(a)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Hy));else if(y!==4&&(a=a.child,a!==null))for(xx(a,c,f),a=a.sibling;a!==null;)xx(a,c,f),a=a.sibling}function Sx(a,c,f){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(y!==4&&(a=a.child,a!==null))for(Sx(a,c,f),a=a.sibling;a!==null;)Sx(a,c,f),a=a.sibling}var Ln=null,Vr=!1;function _a(a,c,f){for(f=f.child;f!==null;)g1(a,c,f),f=f.sibling}function g1(a,c,f){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(ky,f)}catch{}switch(f.tag){case 5:Kn||nh(f,c);case 6:var y=Ln,w=Vr;Ln=null,_a(a,c,f),Ln=y,Vr=w,Ln!==null&&(Vr?(a=Ln,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):Ln.removeChild(f.stateNode));break;case 18:Ln!==null&&(Vr?(a=Ln,f=f.stateNode,a.nodeType===8?Ib(a.parentNode,f):a.nodeType===1&&Ib(a,f),Vf(a)):Ib(Ln,f.stateNode));break;case 4:y=Ln,w=Vr,Ln=f.stateNode.containerInfo,Vr=!0,_a(a,c,f),Ln=y,Vr=w;break;case 0:case 11:case 14:case 15:if(!Kn&&(y=f.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){w=y=y.next;do{var _=w,L=_.destroy;_=_.tag,L!==void 0&&((_&2)!==0||(_&4)!==0)&&wx(f,c,L),w=w.next}while(w!==y)}_a(a,c,f);break;case 1:if(!Kn&&(nh(f,c),y=f.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=f.memoizedProps,y.state=f.memoizedState,y.componentWillUnmount()}catch(O){Ut(f,c,O)}_a(a,c,f);break;case 21:_a(a,c,f);break;case 22:f.mode&1?(Kn=(y=Kn)||f.memoizedState!==null,_a(a,c,f),Kn=y):_a(a,c,f);break;default:_a(a,c,f)}}function y1(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new j2),c.forEach(function(y){var w=q2.bind(null,a,y);f.has(y)||(f.add(y),y.then(w,w))})}}function zr(a,c){var f=c.deletions;if(f!==null)for(var y=0;y<f.length;y++){var w=f[y];try{var _=a,L=c,O=L;e:for(;O!==null;){switch(O.tag){case 5:Ln=O.stateNode,Vr=!1;break e;case 3:Ln=O.stateNode.containerInfo,Vr=!0;break e;case 4:Ln=O.stateNode.containerInfo,Vr=!0;break e}O=O.return}if(Ln===null)throw Error(t(160));g1(_,L,w),Ln=null,Vr=!1;var B=w.alternate;B!==null&&(B.return=null),w.return=null}catch(G){Ut(w,c,G)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)v1(c,a),c=c.sibling}function v1(a,c){var f=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(zr(c,a),wi(a),y&4){try{up(3,a,a.return),fv(3,a)}catch(_e){Ut(a,a.return,_e)}try{up(5,a,a.return)}catch(_e){Ut(a,a.return,_e)}}break;case 1:zr(c,a),wi(a),y&512&&f!==null&&nh(f,f.return);break;case 5:if(zr(c,a),wi(a),y&512&&f!==null&&nh(f,f.return),a.flags&32){var w=a.stateNode;try{ys(w,"")}catch(_e){Ut(a,a.return,_e)}}if(y&4&&(w=a.stateNode,w!=null)){var _=a.memoizedProps,L=f!==null?f.memoizedProps:_,O=a.type,B=a.updateQueue;if(a.updateQueue=null,B!==null)try{O==="input"&&_.type==="radio"&&_.name!=null&&Rn(w,_),Zw(O,L);var G=Zw(O,_);for(L=0;L<B.length;L+=2){var ee=B[L],se=B[L+1];ee==="style"?ek(w,se):ee==="dangerouslySetInnerHTML"?Zi(w,se):ee==="children"?ys(w,se):C(w,ee,se,G)}switch(O){case"input":$t(w,_);break;case"textarea":by(w,_);break;case"select":var Q=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!_.multiple;var fe=_.value;fe!=null?ca(w,!!_.multiple,fe,!1):Q!==!!_.multiple&&(_.defaultValue!=null?ca(w,!!_.multiple,_.defaultValue,!0):ca(w,!!_.multiple,_.multiple?[]:"",!1))}w[Zf]=_}catch(_e){Ut(a,a.return,_e)}}break;case 6:if(zr(c,a),wi(a),y&4){if(a.stateNode===null)throw Error(t(162));w=a.stateNode,_=a.memoizedProps;try{w.nodeValue=_}catch(_e){Ut(a,a.return,_e)}}break;case 3:if(zr(c,a),wi(a),y&4&&f!==null&&f.memoizedState.isDehydrated)try{Vf(c.containerInfo)}catch(_e){Ut(a,a.return,_e)}break;case 4:zr(c,a),wi(a);break;case 13:zr(c,a),wi(a),w=a.child,w.flags&8192&&(_=w.memoizedState!==null,w.stateNode.isHidden=_,!_||w.alternate!==null&&w.alternate.memoizedState!==null||(Ex=Xt())),y&4&&y1(a);break;case 22:if(ee=f!==null&&f.memoizedState!==null,a.mode&1?(Kn=(G=Kn)||ee,zr(c,a),Kn=G):zr(c,a),wi(a),y&8192){if(G=a.memoizedState!==null,(a.stateNode.isHidden=G)&&!ee&&(a.mode&1)!==0)for(ye=a,ee=a.child;ee!==null;){for(se=ye=ee;ye!==null;){switch(Q=ye,fe=Q.child,Q.tag){case 0:case 11:case 14:case 15:up(4,Q,Q.return);break;case 1:nh(Q,Q.return);var we=Q.stateNode;if(typeof we.componentWillUnmount=="function"){y=Q,f=Q.return;try{c=y,we.props=c.memoizedProps,we.state=c.memoizedState,we.componentWillUnmount()}catch(_e){Ut(y,f,_e)}}break;case 5:nh(Q,Q.return);break;case 22:if(Q.memoizedState!==null){x1(se);continue}}fe!==null?(fe.return=Q,ye=fe):x1(se)}ee=ee.sibling}e:for(ee=null,se=a;;){if(se.tag===5){if(ee===null){ee=se;try{w=se.stateNode,G?(_=w.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(O=se.stateNode,B=se.memoizedProps.style,L=B!=null&&B.hasOwnProperty("display")?B.display:null,O.style.display=ZE("display",L))}catch(_e){Ut(a,a.return,_e)}}}else if(se.tag===6){if(ee===null)try{se.stateNode.nodeValue=G?"":se.memoizedProps}catch(_e){Ut(a,a.return,_e)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===a)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===a)break e;for(;se.sibling===null;){if(se.return===null||se.return===a)break e;ee===se&&(ee=null),se=se.return}ee===se&&(ee=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:zr(c,a),wi(a),y&4&&y1(a);break;case 21:break;default:zr(c,a),wi(a)}}function wi(a){var c=a.flags;if(c&2){try{e:{for(var f=a.return;f!==null;){if(p1(f)){var y=f;break e}f=f.return}throw Error(t(160))}switch(y.tag){case 5:var w=y.stateNode;y.flags&32&&(ys(w,""),y.flags&=-33);var _=m1(a);Sx(a,_,w);break;case 3:case 4:var L=y.stateNode.containerInfo,O=m1(a);xx(a,O,L);break;default:throw Error(t(161))}}catch(B){Ut(a,a.return,B)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function B2(a,c,f){ye=a,w1(a)}function w1(a,c,f){for(var y=(a.mode&1)!==0;ye!==null;){var w=ye,_=w.child;if(w.tag===22&&y){var L=w.memoizedState!==null||dv;if(!L){var O=w.alternate,B=O!==null&&O.memoizedState!==null||Kn;O=dv;var G=Kn;if(dv=L,(Kn=B)&&!G)for(ye=w;ye!==null;)L=ye,B=L.child,L.tag===22&&L.memoizedState!==null?S1(w):B!==null?(B.return=L,ye=B):S1(w);for(;_!==null;)ye=_,w1(_),_=_.sibling;ye=w,dv=O,Kn=G}b1(a)}else(w.subtreeFlags&8772)!==0&&_!==null?(_.return=w,ye=_):b1(a)}}function b1(a){for(;ye!==null;){var c=ye;if((c.flags&8772)!==0){var f=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Kn||fv(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!Kn)if(f===null)y.componentDidMount();else{var w=c.elementType===c.type?f.memoizedProps:Ur(c.type,f.memoizedProps);y.componentDidUpdate(w,f.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var _=c.updateQueue;_!==null&&xC(c,_,y);break;case 3:var L=c.updateQueue;if(L!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=c.child.stateNode;break;case 1:f=c.child.stateNode}xC(c,L,f)}break;case 5:var O=c.stateNode;if(f===null&&c.flags&4){f=O;var B=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&f.focus();break;case"img":B.src&&(f.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var G=c.alternate;if(G!==null){var ee=G.memoizedState;if(ee!==null){var se=ee.dehydrated;se!==null&&Vf(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Kn||c.flags&512&&bx(c)}catch(Q){Ut(c,c.return,Q)}}if(c===a){ye=null;break}if(f=c.sibling,f!==null){f.return=c.return,ye=f;break}ye=c.return}}function x1(a){for(;ye!==null;){var c=ye;if(c===a){ye=null;break}var f=c.sibling;if(f!==null){f.return=c.return,ye=f;break}ye=c.return}}function S1(a){for(;ye!==null;){var c=ye;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{fv(4,c)}catch(B){Ut(c,f,B)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var w=c.return;try{y.componentDidMount()}catch(B){Ut(c,w,B)}}var _=c.return;try{bx(c)}catch(B){Ut(c,_,B)}break;case 5:var L=c.return;try{bx(c)}catch(B){Ut(c,L,B)}}}catch(B){Ut(c,c.return,B)}if(c===a){ye=null;break}var O=c.sibling;if(O!==null){O.return=c.return,ye=O;break}ye=c.return}}var $2=Math.ceil,pv=D.ReactCurrentDispatcher,_x=D.ReactCurrentOwner,vr=D.ReactCurrentBatchConfig,Ye=0,wn=null,tn=null,Dn=0,$s=0,sh=va(0),cn=0,hp=null,ql=0,mv=0,Ax=0,dp=null,xs=null,Ex=0,rh=1/0,lo=null,gv=!1,kx=null,Aa=null,yv=!1,Ea=null,vv=0,fp=0,Cx=null,wv=-1,bv=0;function os(){return(Ye&6)!==0?Xt():wv!==-1?wv:wv=Xt()}function ka(a){return(a.mode&1)===0?1:(Ye&2)!==0&&Dn!==0?Dn&-Dn:_2.transition!==null?(bv===0&&(bv=mk()),bv):(a=it,a!==0||(a=window.event,a=a===void 0?16:Ak(a.type)),a)}function Hr(a,c,f,y){if(50<fp)throw fp=0,Cx=null,Error(t(185));jf(a,f,y),((Ye&2)===0||a!==wn)&&(a===wn&&((Ye&2)===0&&(mv|=f),cn===4&&Ca(a,Dn)),Ss(a,y),f===1&&Ye===0&&(c.mode&1)===0&&(rh=Xt()+500,Ky&&ba()))}function Ss(a,c){var f=a.callbackNode;_O(a,c);var y=Py(a,a===wn?Dn:0);if(y===0)f!==null&&dk(f),a.callbackNode=null,a.callbackPriority=0;else if(c=y&-y,a.callbackPriority!==c){if(f!=null&&dk(f),c===1)a.tag===0?S2(A1.bind(null,a)):cC(A1.bind(null,a)),v2(function(){(Ye&6)===0&&ba()}),f=null;else{switch(gk(y)){case 1:f=ob;break;case 4:f=fk;break;case 16:f=Ey;break;case 536870912:f=pk;break;default:f=Ey}f=D1(f,_1.bind(null,a))}a.callbackPriority=c,a.callbackNode=f}}function _1(a,c){if(wv=-1,bv=0,(Ye&6)!==0)throw Error(t(327));var f=a.callbackNode;if(ih()&&a.callbackNode!==f)return null;var y=Py(a,a===wn?Dn:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||c)c=xv(a,y);else{c=y;var w=Ye;Ye|=2;var _=k1();(wn!==a||Dn!==c)&&(lo=null,rh=Xt()+500,Xl(a,c));do try{z2();break}catch(O){E1(a,O)}while(!0);Wb(),pv.current=_,Ye=w,tn!==null?c=0:(wn=null,Dn=0,c=cn)}if(c!==0){if(c===2&&(w=ab(a),w!==0&&(y=w,c=Tx(a,w))),c===1)throw f=hp,Xl(a,0),Ca(a,y),Ss(a,Xt()),f;if(c===6)Ca(a,y);else{if(w=a.current.alternate,(y&30)===0&&!U2(w)&&(c=xv(a,y),c===2&&(_=ab(a),_!==0&&(y=_,c=Tx(a,_))),c===1))throw f=hp,Xl(a,0),Ca(a,y),Ss(a,Xt()),f;switch(a.finishedWork=w,a.finishedLanes=y,c){case 0:case 1:throw Error(t(345));case 2:Yl(a,xs,lo);break;case 3:if(Ca(a,y),(y&130023424)===y&&(c=Ex+500-Xt(),10<c)){if(Py(a,0)!==0)break;if(w=a.suspendedLanes,(w&y)!==y){os(),a.pingedLanes|=a.suspendedLanes&w;break}a.timeoutHandle=Nb(Yl.bind(null,a,xs,lo),c);break}Yl(a,xs,lo);break;case 4:if(Ca(a,y),(y&4194240)===y)break;for(c=a.eventTimes,w=-1;0<y;){var L=31-Fr(y);_=1<<L,L=c[L],L>w&&(w=L),y&=~_}if(y=w,y=Xt()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*$2(y/1960))-y,10<y){a.timeoutHandle=Nb(Yl.bind(null,a,xs,lo),y);break}Yl(a,xs,lo);break;case 5:Yl(a,xs,lo);break;default:throw Error(t(329))}}}return Ss(a,Xt()),a.callbackNode===f?_1.bind(null,a):null}function Tx(a,c){var f=dp;return a.current.memoizedState.isDehydrated&&(Xl(a,c).flags|=256),a=xv(a,c),a!==2&&(c=xs,xs=f,c!==null&&Px(c)),a}function Px(a){xs===null?xs=a:xs.push.apply(xs,a)}function U2(a){for(var c=a;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var y=0;y<f.length;y++){var w=f[y],_=w.getSnapshot;w=w.value;try{if(!Br(_(),w))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ca(a,c){for(c&=~Ax,c&=~mv,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var f=31-Fr(c),y=1<<f;a[f]=-1,c&=~y}}function A1(a){if((Ye&6)!==0)throw Error(t(327));ih();var c=Py(a,0);if((c&1)===0)return Ss(a,Xt()),null;var f=xv(a,c);if(a.tag!==0&&f===2){var y=ab(a);y!==0&&(c=y,f=Tx(a,y))}if(f===1)throw f=hp,Xl(a,0),Ca(a,c),Ss(a,Xt()),f;if(f===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,Yl(a,xs,lo),Ss(a,Xt()),null}function Rx(a,c){var f=Ye;Ye|=1;try{return a(c)}finally{Ye=f,Ye===0&&(rh=Xt()+500,Ky&&ba())}}function Kl(a){Ea!==null&&Ea.tag===0&&(Ye&6)===0&&ih();var c=Ye;Ye|=1;var f=vr.transition,y=it;try{if(vr.transition=null,it=1,a)return a()}finally{it=y,vr.transition=f,Ye=c,(Ye&6)===0&&ba()}}function Lx(){$s=sh.current,Et(sh)}function Xl(a,c){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,y2(f)),tn!==null)for(f=tn.return;f!==null;){var y=f;switch($b(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Gy();break;case 3:eh(),Et(vs),Et(Wn),Zb();break;case 5:Jb(y);break;case 4:eh();break;case 13:Et(Mt);break;case 19:Et(Mt);break;case 10:Gb(y.type._context);break;case 22:case 23:Lx()}f=f.return}if(wn=a,tn=a=Ta(a.current,null),Dn=$s=c,cn=0,hp=null,Ax=mv=ql=0,xs=dp=null,Hl!==null){for(c=0;c<Hl.length;c++)if(f=Hl[c],y=f.interleaved,y!==null){f.interleaved=null;var w=y.next,_=f.pending;if(_!==null){var L=_.next;_.next=w,y.next=L}f.pending=y}Hl=null}return a}function E1(a,c){do{var f=tn;try{if(Wb(),rv.current=lv,iv){for(var y=Nt.memoizedState;y!==null;){var w=y.queue;w!==null&&(w.pending=null),y=y.next}iv=!1}if(Gl=0,vn=ln=Nt=null,ip=!1,op=0,_x.current=null,f===null||f.return===null){cn=1,hp=c,tn=null;break}e:{var _=a,L=f.return,O=f,B=c;if(c=Dn,O.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var G=B,ee=O,se=ee.tag;if((ee.mode&1)===0&&(se===0||se===11||se===15)){var Q=ee.alternate;Q?(ee.updateQueue=Q.updateQueue,ee.memoizedState=Q.memoizedState,ee.lanes=Q.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var fe=YC(L);if(fe!==null){fe.flags&=-257,JC(fe,L,O,_,c),fe.mode&1&&XC(_,G,c),c=fe,B=G;var we=c.updateQueue;if(we===null){var _e=new Set;_e.add(B),c.updateQueue=_e}else we.add(B);break e}else{if((c&1)===0){XC(_,G,c),Dx();break e}B=Error(t(426))}}else if(Tt&&O.mode&1){var Yt=YC(L);if(Yt!==null){(Yt.flags&65536)===0&&(Yt.flags|=256),JC(Yt,L,O,_,c),zb(th(B,O));break e}}_=B=th(B,O),cn!==4&&(cn=2),dp===null?dp=[_]:dp.push(_),_=L;do{switch(_.tag){case 3:_.flags|=65536,c&=-c,_.lanes|=c;var z=qC(_,B,c);bC(_,z);break e;case 1:O=B;var $=_.type,H=_.stateNode;if((_.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Aa===null||!Aa.has(H)))){_.flags|=65536,c&=-c,_.lanes|=c;var ae=KC(_,O,c);bC(_,ae);break e}}_=_.return}while(_!==null)}T1(f)}catch(Ee){c=Ee,tn===f&&f!==null&&(tn=f=f.return);continue}break}while(!0)}function k1(){var a=pv.current;return pv.current=lv,a===null?lv:a}function Dx(){(cn===0||cn===3||cn===2)&&(cn=4),wn===null||(ql&268435455)===0&&(mv&268435455)===0||Ca(wn,Dn)}function xv(a,c){var f=Ye;Ye|=2;var y=k1();(wn!==a||Dn!==c)&&(lo=null,Xl(a,c));do try{V2();break}catch(w){E1(a,w)}while(!0);if(Wb(),Ye=f,pv.current=y,tn!==null)throw Error(t(261));return wn=null,Dn=0,cn}function V2(){for(;tn!==null;)C1(tn)}function z2(){for(;tn!==null&&!pO();)C1(tn)}function C1(a){var c=L1(a.alternate,a,$s);a.memoizedProps=a.pendingProps,c===null?T1(a):tn=c,_x.current=null}function T1(a){var c=a;do{var f=c.alternate;if(a=c.return,(c.flags&32768)===0){if(f=I2(f,c,$s),f!==null){tn=f;return}}else{if(f=O2(f,c),f!==null){f.flags&=32767,tn=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{cn=6,tn=null;return}}if(c=c.sibling,c!==null){tn=c;return}tn=c=a}while(c!==null);cn===0&&(cn=5)}function Yl(a,c,f){var y=it,w=vr.transition;try{vr.transition=null,it=1,H2(a,c,f,y)}finally{vr.transition=w,it=y}return null}function H2(a,c,f,y){do ih();while(Ea!==null);if((Ye&6)!==0)throw Error(t(327));f=a.finishedWork;var w=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var _=f.lanes|f.childLanes;if(AO(a,_),a===wn&&(tn=wn=null,Dn=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||yv||(yv=!0,D1(Ey,function(){return ih(),null})),_=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||_){_=vr.transition,vr.transition=null;var L=it;it=1;var O=Ye;Ye|=4,_x.current=null,F2(a,f),v1(f,a),u2(Db),Dy=!!Lb,Db=Lb=null,a.current=f,B2(f),mO(),Ye=O,it=L,vr.transition=_}else a.current=f;if(yv&&(yv=!1,Ea=a,vv=w),_=a.pendingLanes,_===0&&(Aa=null),vO(f.stateNode),Ss(a,Xt()),c!==null)for(y=a.onRecoverableError,f=0;f<c.length;f++)w=c[f],y(w.value,{componentStack:w.stack,digest:w.digest});if(gv)throw gv=!1,a=kx,kx=null,a;return(vv&1)!==0&&a.tag!==0&&ih(),_=a.pendingLanes,(_&1)!==0?a===Cx?fp++:(fp=0,Cx=a):fp=0,ba(),null}function ih(){if(Ea!==null){var a=gk(vv),c=vr.transition,f=it;try{if(vr.transition=null,it=16>a?16:a,Ea===null)var y=!1;else{if(a=Ea,Ea=null,vv=0,(Ye&6)!==0)throw Error(t(331));var w=Ye;for(Ye|=4,ye=a.current;ye!==null;){var _=ye,L=_.child;if((ye.flags&16)!==0){var O=_.deletions;if(O!==null){for(var B=0;B<O.length;B++){var G=O[B];for(ye=G;ye!==null;){var ee=ye;switch(ee.tag){case 0:case 11:case 15:up(8,ee,_)}var se=ee.child;if(se!==null)se.return=ee,ye=se;else for(;ye!==null;){ee=ye;var Q=ee.sibling,fe=ee.return;if(f1(ee),ee===G){ye=null;break}if(Q!==null){Q.return=fe,ye=Q;break}ye=fe}}}var we=_.alternate;if(we!==null){var _e=we.child;if(_e!==null){we.child=null;do{var Yt=_e.sibling;_e.sibling=null,_e=Yt}while(_e!==null)}}ye=_}}if((_.subtreeFlags&2064)!==0&&L!==null)L.return=_,ye=L;else e:for(;ye!==null;){if(_=ye,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:up(9,_,_.return)}var z=_.sibling;if(z!==null){z.return=_.return,ye=z;break e}ye=_.return}}var $=a.current;for(ye=$;ye!==null;){L=ye;var H=L.child;if((L.subtreeFlags&2064)!==0&&H!==null)H.return=L,ye=H;else e:for(L=$;ye!==null;){if(O=ye,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:fv(9,O)}}catch(Ee){Ut(O,O.return,Ee)}if(O===L){ye=null;break e}var ae=O.sibling;if(ae!==null){ae.return=O.return,ye=ae;break e}ye=O.return}}if(Ye=w,ba(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(ky,a)}catch{}y=!0}return y}finally{it=f,vr.transition=c}}return!1}function P1(a,c,f){c=th(f,c),c=qC(a,c,1),a=Sa(a,c,1),c=os(),a!==null&&(jf(a,1,c),Ss(a,c))}function Ut(a,c,f){if(a.tag===3)P1(a,a,f);else for(;c!==null;){if(c.tag===3){P1(c,a,f);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Aa===null||!Aa.has(y))){a=th(f,a),a=KC(c,a,1),c=Sa(c,a,1),a=os(),c!==null&&(jf(c,1,a),Ss(c,a));break}}c=c.return}}function W2(a,c,f){var y=a.pingCache;y!==null&&y.delete(c),c=os(),a.pingedLanes|=a.suspendedLanes&f,wn===a&&(Dn&f)===f&&(cn===4||cn===3&&(Dn&130023424)===Dn&&500>Xt()-Ex?Xl(a,0):Ax|=f),Ss(a,c)}function R1(a,c){c===0&&((a.mode&1)===0?c=1:(c=Ty,Ty<<=1,(Ty&130023424)===0&&(Ty=4194304)));var f=os();a=io(a,c),a!==null&&(jf(a,c,f),Ss(a,f))}function G2(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),R1(a,f)}function q2(a,c){var f=0;switch(a.tag){case 13:var y=a.stateNode,w=a.memoizedState;w!==null&&(f=w.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(c),R1(a,f)}var L1;L1=function(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps||vs.current)bs=!0;else{if((a.lanes&f)===0&&(c.flags&128)===0)return bs=!1,N2(a,c,f);bs=(a.flags&131072)!==0}else bs=!1,Tt&&(c.flags&1048576)!==0&&uC(c,Yy,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;hv(a,c),a=c.pendingProps;var w=qu(c,Wn.current);Zu(c,f),w=nx(null,c,y,a,w,f);var _=sx();return c.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,ws(y)?(_=!0,qy(c)):_=!1,c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Xb(c),w.updater=cv,c.stateNode=w,w._reactInternals=c,cx(c,y,a,f),c=fx(null,c,y,!0,_,f)):(c.tag=0,Tt&&_&&Bb(c),is(null,c,w,f),c=c.child),c;case 16:y=c.elementType;e:{switch(hv(a,c),a=c.pendingProps,w=y._init,y=w(y._payload),c.type=y,w=c.tag=X2(y),a=Ur(y,a),w){case 0:c=dx(null,c,y,a,f);break e;case 1:c=s1(null,c,y,a,f);break e;case 11:c=QC(null,c,y,a,f);break e;case 14:c=ZC(null,c,y,Ur(y.type,a),f);break e}throw Error(t(306,y,""))}return c;case 0:return y=c.type,w=c.pendingProps,w=c.elementType===y?w:Ur(y,w),dx(a,c,y,w,f);case 1:return y=c.type,w=c.pendingProps,w=c.elementType===y?w:Ur(y,w),s1(a,c,y,w,f);case 3:e:{if(r1(c),a===null)throw Error(t(387));y=c.pendingProps,_=c.memoizedState,w=_.element,wC(a,c),nv(c,y,null,f);var L=c.memoizedState;if(y=L.element,_.isDehydrated)if(_={element:y,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},c.updateQueue.baseState=_,c.memoizedState=_,c.flags&256){w=th(Error(t(423)),c),c=i1(a,c,y,f,w);break e}else if(y!==w){w=th(Error(t(424)),c),c=i1(a,c,y,f,w);break e}else for(Bs=ya(c.stateNode.containerInfo.firstChild),Fs=c,Tt=!0,$r=null,f=yC(c,null,y,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Yu(),y===w){c=ao(a,c,f);break e}is(a,c,y,f)}c=c.child}return c;case 5:return SC(c),a===null&&Vb(c),y=c.type,w=c.pendingProps,_=a!==null?a.memoizedProps:null,L=w.children,Mb(y,w)?L=null:_!==null&&Mb(y,_)&&(c.flags|=32),n1(a,c),is(a,c,L,f),c.child;case 6:return a===null&&Vb(c),null;case 13:return o1(a,c,f);case 4:return Yb(c,c.stateNode.containerInfo),y=c.pendingProps,a===null?c.child=Ju(c,null,y,f):is(a,c,y,f),c.child;case 11:return y=c.type,w=c.pendingProps,w=c.elementType===y?w:Ur(y,w),QC(a,c,y,w,f);case 7:return is(a,c,c.pendingProps,f),c.child;case 8:return is(a,c,c.pendingProps.children,f),c.child;case 12:return is(a,c,c.pendingProps.children,f),c.child;case 10:e:{if(y=c.type._context,w=c.pendingProps,_=c.memoizedProps,L=w.value,vt(Zy,y._currentValue),y._currentValue=L,_!==null)if(Br(_.value,L)){if(_.children===w.children&&!vs.current){c=ao(a,c,f);break e}}else for(_=c.child,_!==null&&(_.return=c);_!==null;){var O=_.dependencies;if(O!==null){L=_.child;for(var B=O.firstContext;B!==null;){if(B.context===y){if(_.tag===1){B=oo(-1,f&-f),B.tag=2;var G=_.updateQueue;if(G!==null){G=G.shared;var ee=G.pending;ee===null?B.next=B:(B.next=ee.next,ee.next=B),G.pending=B}}_.lanes|=f,B=_.alternate,B!==null&&(B.lanes|=f),qb(_.return,f,c),O.lanes|=f;break}B=B.next}}else if(_.tag===10)L=_.type===c.type?null:_.child;else if(_.tag===18){if(L=_.return,L===null)throw Error(t(341));L.lanes|=f,O=L.alternate,O!==null&&(O.lanes|=f),qb(L,f,c),L=_.sibling}else L=_.child;if(L!==null)L.return=_;else for(L=_;L!==null;){if(L===c){L=null;break}if(_=L.sibling,_!==null){_.return=L.return,L=_;break}L=L.return}_=L}is(a,c,w.children,f),c=c.child}return c;case 9:return w=c.type,y=c.pendingProps.children,Zu(c,f),w=gr(w),y=y(w),c.flags|=1,is(a,c,y,f),c.child;case 14:return y=c.type,w=Ur(y,c.pendingProps),w=Ur(y.type,w),ZC(a,c,y,w,f);case 15:return e1(a,c,c.type,c.pendingProps,f);case 17:return y=c.type,w=c.pendingProps,w=c.elementType===y?w:Ur(y,w),hv(a,c),c.tag=1,ws(y)?(a=!0,qy(c)):a=!1,Zu(c,f),WC(c,y,w),cx(c,y,w,f),fx(null,c,y,!0,a,f);case 19:return l1(a,c,f);case 22:return t1(a,c,f)}throw Error(t(156,c.tag))};function D1(a,c){return hk(a,c)}function K2(a,c,f,y){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(a,c,f,y){return new K2(a,c,f,y)}function Mx(a){return a=a.prototype,!(!a||!a.isReactComponent)}function X2(a){if(typeof a=="function")return Mx(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ie)return 11;if(a===ue)return 14}return 2}function Ta(a,c){var f=a.alternate;return f===null?(f=wr(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function Sv(a,c,f,y,w,_){var L=2;if(y=a,typeof a=="function")Mx(a)&&(L=1);else if(typeof a=="string")L=5;else e:switch(a){case j:return Jl(f.children,w,_,c);case F:L=8,w|=8;break;case W:return a=wr(12,f,c,w|2),a.elementType=W,a.lanes=_,a;case ce:return a=wr(13,f,c,w),a.elementType=ce,a.lanes=_,a;case Y:return a=wr(19,f,c,w),a.elementType=Y,a.lanes=_,a;case X:return _v(f,w,_,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case K:L=10;break e;case J:L=9;break e;case ie:L=11;break e;case ue:L=14;break e;case Z:L=16,y=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return c=wr(L,f,c,w),c.elementType=a,c.type=y,c.lanes=_,c}function Jl(a,c,f,y){return a=wr(7,a,y,c),a.lanes=f,a}function _v(a,c,f,y){return a=wr(22,a,y,c),a.elementType=X,a.lanes=f,a.stateNode={isHidden:!1},a}function Nx(a,c,f){return a=wr(6,a,null,c),a.lanes=f,a}function Ix(a,c,f){return c=wr(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function Y2(a,c,f,y,w){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lb(0),this.expirationTimes=lb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lb(0),this.identifierPrefix=y,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function Ox(a,c,f,y,w,_,L,O,B){return a=new Y2(a,c,f,O,B),c===1?(c=1,_===!0&&(c|=8)):c=0,_=wr(3,null,null,c),a.current=_,_.stateNode=a,_.memoizedState={element:y,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xb(_),a}function J2(a,c,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:y==null?null:""+y,children:a,containerInfo:c,implementation:f}}function M1(a){if(!a)return wa;a=a._reactInternals;e:{if(Bl(a)!==a||a.tag!==1)throw Error(t(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(ws(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(a.tag===1){var f=a.type;if(ws(f))return aC(a,f,c)}return c}function N1(a,c,f,y,w,_,L,O,B){return a=Ox(f,y,!0,a,w,_,L,O,B),a.context=M1(null),f=a.current,y=os(),w=ka(f),_=oo(y,w),_.callback=c??null,Sa(f,_,w),a.current.lanes=w,jf(a,w,y),Ss(a,y),a}function Av(a,c,f,y){var w=c.current,_=os(),L=ka(w);return f=M1(f),c.context===null?c.context=f:c.pendingContext=f,c=oo(_,L),c.payload={element:a},y=y===void 0?null:y,y!==null&&(c.callback=y),a=Sa(w,c,L),a!==null&&(Hr(a,w,L,_),tv(a,w,L)),L}function Ev(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function I1(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function jx(a,c){I1(a,c),(a=a.alternate)&&I1(a,c)}function Q2(){return null}var O1=typeof reportError=="function"?reportError:function(a){console.error(a)};function Fx(a){this._internalRoot=a}kv.prototype.render=Fx.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(t(409));Av(a,c,null,null)},kv.prototype.unmount=Fx.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Kl(function(){Av(null,a,null,null)}),c[to]=null}};function kv(a){this._internalRoot=a}kv.prototype.unstable_scheduleHydration=function(a){if(a){var c=wk();a={blockedOn:null,target:a,priority:c};for(var f=0;f<pa.length&&c!==0&&c<pa[f].priority;f++);pa.splice(f,0,a),f===0&&Sk(a)}};function Bx(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Cv(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function j1(){}function Z2(a,c,f,y,w){if(w){if(typeof y=="function"){var _=y;y=function(){var G=Ev(L);_.call(G)}}var L=N1(c,y,a,0,null,!1,!1,"",j1);return a._reactRootContainer=L,a[to]=L.current,Jf(a.nodeType===8?a.parentNode:a),Kl(),L}for(;w=a.lastChild;)a.removeChild(w);if(typeof y=="function"){var O=y;y=function(){var G=Ev(B);O.call(G)}}var B=Ox(a,0,!1,null,null,!1,!1,"",j1);return a._reactRootContainer=B,a[to]=B.current,Jf(a.nodeType===8?a.parentNode:a),Kl(function(){Av(c,B,f,y)}),B}function Tv(a,c,f,y,w){var _=f._reactRootContainer;if(_){var L=_;if(typeof w=="function"){var O=w;w=function(){var B=Ev(L);O.call(B)}}Av(c,L,a,w)}else L=Z2(f,c,a,w,y);return Ev(L)}yk=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var f=Of(c.pendingLanes);f!==0&&(cb(c,f|1),Ss(c,Xt()),(Ye&6)===0&&(rh=Xt()+500,ba()))}break;case 13:Kl(function(){var y=io(a,1);if(y!==null){var w=os();Hr(y,a,1,w)}}),jx(a,1)}},ub=function(a){if(a.tag===13){var c=io(a,134217728);if(c!==null){var f=os();Hr(c,a,134217728,f)}jx(a,134217728)}},vk=function(a){if(a.tag===13){var c=ka(a),f=io(a,c);if(f!==null){var y=os();Hr(f,a,c,y)}jx(a,c)}},wk=function(){return it},bk=function(a,c){var f=it;try{return it=a,c()}finally{it=f}},nb=function(a,c,f){switch(c){case"input":if($t(a,f),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<f.length;c++){var y=f[c];if(y!==a&&y.form===a.form){var w=Wy(y);if(!w)throw Error(t(90));Pn(y),$t(y,w)}}}break;case"textarea":by(a,f);break;case"select":c=f.value,c!=null&&ca(a,!!f.multiple,c,!1)}},rk=Rx,ik=Kl;var ej={usingClientEntryPoint:!1,Events:[ep,Wu,Wy,nk,sk,Rx]},pp={findFiberByHostInstance:$l,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tj={bundleType:pp.bundleType,version:pp.version,rendererPackageName:pp.rendererPackageName,rendererConfig:pp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=ck(a),a===null?null:a.stateNode},findFiberByHostInstance:pp.findFiberByHostInstance||Q2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pv.isDisabled&&Pv.supportsFiber)try{ky=Pv.inject(tj),mi=Pv}catch{}}return _s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ej,_s.createPortal=function(a,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bx(c))throw Error(t(200));return J2(a,c,null,f)},_s.createRoot=function(a,c){if(!Bx(a))throw Error(t(299));var f=!1,y="",w=O1;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),c=Ox(a,1,!1,null,null,f,!1,y,w),a[to]=c.current,Jf(a.nodeType===8?a.parentNode:a),new Fx(c)},_s.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=ck(c),a=a===null?null:a.stateNode,a},_s.flushSync=function(a){return Kl(a)},_s.hydrate=function(a,c,f){if(!Cv(c))throw Error(t(200));return Tv(null,a,c,!0,f)},_s.hydrateRoot=function(a,c,f){if(!Bx(a))throw Error(t(405));var y=f!=null&&f.hydratedSources||null,w=!1,_="",L=O1;if(f!=null&&(f.unstable_strictMode===!0&&(w=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onRecoverableError!==void 0&&(L=f.onRecoverableError)),c=N1(c,null,a,1,f??null,w,!1,_,L),a[to]=c.current,Jf(a),y)for(a=0;a<y.length;a++)f=y[a],w=f._getVersion,w=w(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,w]:c.mutableSourceEagerHydrationData.push(f,w);return new kv(c)},_s.render=function(a,c,f){if(!Cv(c))throw Error(t(200));return Tv(null,a,c,!1,f)},_s.unmountComponentAtNode=function(a){if(!Cv(a))throw Error(t(40));return a._reactRootContainer?(Kl(function(){Tv(null,null,a,!1,function(){a._reactRootContainer=null,a[to]=null})}),!0):!1},_s.unstable_batchedUpdates=Rx,_s.unstable_renderSubtreeIntoContainer=function(a,c,f,y){if(!Cv(f))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Tv(a,c,f,!1,y)},_s.version="18.3.1-next-f1338f8080-20240426",_s}var G1;function OR(){if(G1)return zx.exports;G1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),zx.exports=dj(),zx.exports}var q1;function fj(){if(q1)return Rv;q1=1;var s=OR();return Rv.createRoot=s.createRoot,Rv.hydrateRoot=s.hydrateRoot,Rv}var pj=fj();const mj=zA(pj);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var K1="popstate";function gj(s={}){function e(n,r){let{pathname:i,search:o,hash:l}=n.location;return NS("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:em(r)}return vj(e,t,null,s)}function Dt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function di(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yj(){return Math.random().toString(36).substring(2,10)}function X1(s,e){return{usr:s.state,key:s.key,idx:e}}function NS(s,e,t=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?wf(e):e,state:t,key:e&&e.key||n||yj()}}function em({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function wf(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substring(n),s=s.substring(0,n)),s&&(e.pathname=s)}return e}function vj(s,e,t,n={}){let{window:r=document.defaultView,v5Compat:i=!1}=n,o=r.history,l="POP",h=null,d=p();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function p(){return(o.state||{idx:null}).idx}function m(){l="POP";let A=p(),E=A==null?null:A-d;d=A,h&&h({action:l,location:x.location,delta:E})}function g(A,E){l="PUSH";let R=NS(x.location,A,E);d=p()+1;let C=X1(R,d),D=x.createHref(R);try{o.pushState(C,"",D)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(D)}i&&h&&h({action:l,location:x.location,delta:1})}function v(A,E){l="REPLACE";let R=NS(x.location,A,E);d=p();let C=X1(R,d),D=x.createHref(R);o.replaceState(C,"",D),i&&h&&h({action:l,location:x.location,delta:0})}function b(A){return wj(A)}let x={get action(){return l},get location(){return s(r,o)},listen(A){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(K1,m),h=A,()=>{r.removeEventListener(K1,m),h=null}},createHref(A){return e(r,A)},createURL:b,encodeLocation(A){let E=b(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:v,go(A){return o.go(A)}};return x}function wj(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Dt(t,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:em(s);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function jR(s,e,t="/"){return bj(s,e,t,!1)}function bj(s,e,t,n){let r=typeof e=="string"?wf(e):e,i=ta(r.pathname||"/",t);if(i==null)return null;let o=FR(s);xj(o);let l=null;for(let h=0;l==null&&h<o.length;++h){let d=Dj(i);l=Rj(o[h],d,n)}return l}function FR(s,e=[],t=[],n="",r=!1){let i=(o,l,h=r,d)=>{let p={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&h)return;Dt(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let m=Qo([n,p.relativePath]),g=t.concat(p);o.children&&o.children.length>0&&(Dt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),FR(o.children,e,g,m,h)),!(o.path==null&&!o.index)&&e.push({path:m,score:Tj(m,o.index),routesMeta:g})};return s.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))i(o,l);else for(let d of BR(o.path))i(o,l,!0,d)}),e}function BR(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let o=BR(n.join("/")),l=[];return l.push(...o.map(h=>h===""?i:[i,h].join("/"))),r&&l.push(...o),l.map(h=>s.startsWith("/")&&h===""?"/":h)}function xj(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:Pj(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var Sj=/^:[\w-]+$/,_j=3,Aj=2,Ej=1,kj=10,Cj=-2,Y1=s=>s==="*";function Tj(s,e){let t=s.split("/"),n=t.length;return t.some(Y1)&&(n+=Cj),e&&(n+=Aj),t.filter(r=>!Y1(r)).reduce((r,i)=>r+(Sj.test(i)?_j:i===""?Ej:kj),n)}function Pj(s,e){return s.length===e.length&&s.slice(0,-1).every((n,r)=>n===e[r])?s[s.length-1]-e[e.length-1]:0}function Rj(s,e,t=!1){let{routesMeta:n}=s,r={},i="/",o=[];for(let l=0;l<n.length;++l){let h=n[l],d=l===n.length-1,p=i==="/"?e:e.slice(i.length)||"/",m=$0({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},p),g=h.route;if(!m&&d&&t&&!n[n.length-1].route.index&&(m=$0({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!m)return null;Object.assign(r,m.params),o.push({params:r,pathname:Qo([i,m.pathname]),pathnameBase:Oj(Qo([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Qo([i,m.pathnameBase]))}return o}function $0(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=Lj(s.path,s.caseSensitive,s.end),r=e.match(t);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((d,{paramName:p,isOptional:m},g)=>{if(p==="*"){let b=l[g]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const v=l[g];return m&&!v?d[p]=void 0:d[p]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:s}}function Lj(s,e=!1,t=!0){di(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],r="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,h)=>(n.push({paramName:l,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),r+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":s!==""&&s!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function Dj(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return di(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function ta(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}var Mj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Nj(s,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof s=="string"?wf(s):s,i;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?i=J1(t.substring(1),"/"):i=J1(t,e)):i=e,{pathname:i,search:jj(n),hash:Fj(r)}}function J1(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Gx(s,e,t,n){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ij(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function HA(s){let e=Ij(s);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function WA(s,e,t,n=!1){let r;typeof s=="string"?r=wf(s):(r={...s},Dt(!r.pathname||!r.pathname.includes("?"),Gx("?","pathname","search",r)),Dt(!r.pathname||!r.pathname.includes("#"),Gx("#","pathname","hash",r)),Dt(!r.search||!r.search.includes("#"),Gx("#","search","hash",r)));let i=s===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=t;else{let m=e.length-1;if(!n&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;r.pathname=g.join("/")}l=m>=0?e[m]:"/"}let h=Nj(r,l),d=o&&o!=="/"&&o.endsWith("/"),p=(i||o===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(d||p)&&(h.pathname+="/"),h}var Qo=s=>s.join("/").replace(/\/\/+/g,"/"),Oj=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),jj=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Fj=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,Bj=class{constructor(s,e,t,n=!1){this.status=s,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function $j(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function Uj(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var $R=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function UR(s,e){let t=s;if(typeof t!="string"||!Mj.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,r=!1;if($R)try{let i=new URL(window.location.href),o=t.startsWith("//")?new URL(i.protocol+t):new URL(t),l=ta(o.pathname,e);o.origin===i.origin&&l!=null?t=l+o.search+o.hash:r=!0}catch{di(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:r,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var VR=["POST","PUT","PATCH","DELETE"];new Set(VR);var Vj=["GET",...VR];new Set(Vj);var bf=M.createContext(null);bf.displayName="DataRouter";var Dw=M.createContext(null);Dw.displayName="DataRouterState";var zj=M.createContext(!1),zR=M.createContext({isTransitioning:!1});zR.displayName="ViewTransition";var Hj=M.createContext(new Map);Hj.displayName="Fetchers";var Wj=M.createContext(null);Wj.displayName="Await";var fr=M.createContext(null);fr.displayName="Navigation";var ny=M.createContext(null);ny.displayName="Location";var jr=M.createContext({outlet:null,matches:[],isDataRoute:!1});jr.displayName="Route";var GA=M.createContext(null);GA.displayName="RouteError";var HR="REACT_ROUTER_ERROR",Gj="REDIRECT",qj="ROUTE_ERROR_RESPONSE";function Kj(s){if(s.startsWith(`${HR}:${Gj}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Xj(s){if(s.startsWith(`${HR}:${qj}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Bj(e.status,e.statusText,e.data)}catch{}}function Yj(s,{relative:e}={}){Dt(xf(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=M.useContext(fr),{hash:r,pathname:i,search:o}=ry(s,{relative:e}),l=i;return t!=="/"&&(l=i==="/"?t:Qo([t,i])),n.createHref({pathname:l,search:o,hash:r})}function xf(){return M.useContext(ny)!=null}function aa(){return Dt(xf(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(ny).location}var WR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function GR(s){M.useContext(fr).static||M.useLayoutEffect(s)}function sy(){let{isDataRoute:s}=M.useContext(jr);return s?dF():Jj()}function Jj(){Dt(xf(),"useNavigate() may be used only in the context of a <Router> component.");let s=M.useContext(bf),{basename:e,navigator:t}=M.useContext(fr),{matches:n}=M.useContext(jr),{pathname:r}=aa(),i=JSON.stringify(HA(n)),o=M.useRef(!1);return GR(()=>{o.current=!0}),M.useCallback((h,d={})=>{if(di(o.current,WR),!o.current)return;if(typeof h=="number"){t.go(h);return}let p=WA(h,JSON.parse(i),r,d.relative==="path");s==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Qo([e,p.pathname])),(d.replace?t.replace:t.push)(p,d.state,d)},[e,t,i,r,s])}var Qj=M.createContext(null);function Zj(s){let e=M.useContext(jr).outlet;return M.useMemo(()=>e&&M.createElement(Qj.Provider,{value:s},e),[e,s])}function eF(){let{matches:s}=M.useContext(jr),e=s[s.length-1];return e?e.params:{}}function ry(s,{relative:e}={}){let{matches:t}=M.useContext(jr),{pathname:n}=aa(),r=JSON.stringify(HA(t));return M.useMemo(()=>WA(s,JSON.parse(r),n,e==="path"),[s,r,n,e])}function tF(s,e){return qR(s,e)}function qR(s,e,t,n,r){var R;Dt(xf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=M.useContext(fr),{matches:o}=M.useContext(jr),l=o[o.length-1],h=l?l.params:{},d=l?l.pathname:"/",p=l?l.pathnameBase:"/",m=l&&l.route;{let C=m&&m.path||"";XR(d,!m||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let g=aa(),v;if(e){let C=typeof e=="string"?wf(e):e;Dt(p==="/"||((R=C.pathname)==null?void 0:R.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${C.pathname}" was given in the \`location\` prop.`),v=C}else v=g;let b=v.pathname||"/",x=b;if(p!=="/"){let C=p.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let A=jR(s,{pathname:x});di(m||A!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),di(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=oF(A&&A.map(C=>Object.assign({},C,{params:Object.assign({},h,C.params),pathname:Qo([p,i.encodeLocation?i.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?p:Qo([p,i.encodeLocation?i.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),o,t,n,r);return e&&E?M.createElement(ny.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},E):E}function nF(){let s=hF(),e=$j(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",s),o=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:i},"ErrorBoundary")," or"," ",M.createElement("code",{style:i},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:r},t):null,o)}var sF=M.createElement(nF,null),KR=class extends M.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=Xj(s.digest);t&&(s=t)}let e=s!==void 0?M.createElement(jr.Provider,{value:this.props.routeContext},M.createElement(GA.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?M.createElement(rF,{error:s},e):e}};KR.contextType=zj;var qx=new WeakMap;function rF({children:s,error:e}){let{basename:t}=M.useContext(fr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=Kj(e.digest);if(n){let r=qx.get(e);if(r)throw r;let i=UR(n.location,t);if($R&&!qx.get(e))if(i.isExternal||n.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:n.replace}));throw qx.set(e,o),o}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return s}function iF({routeContext:s,match:e,children:t}){let n=M.useContext(bf);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(jr.Provider,{value:s},t)}function oF(s,e=[],t=null,n=null,r=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let i=s,o=t==null?void 0:t.errors;if(o!=null){let p=i.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);Dt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let l=!1,h=-1;if(t)for(let p=0;p<i.length;p++){let m=i[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:g,errors:v}=t,b=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||b){l=!0,h>=0?i=i.slice(0,h+1):i=[i[0]];break}}}let d=t&&n?(p,m)=>{var g,v;n(p,{location:t.location,params:((v=(g=t.matches)==null?void 0:g[0])==null?void 0:v.params)??{},unstable_pattern:Uj(t.matches),errorInfo:m})}:void 0;return i.reduceRight((p,m,g)=>{let v,b=!1,x=null,A=null;t&&(v=o&&m.route.id?o[m.route.id]:void 0,x=m.route.errorElement||sF,l&&(h<0&&g===0?(XR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,A=null):h===g&&(b=!0,A=m.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,g+1)),R=()=>{let C;return v?C=x:b?C=A:m.route.Component?C=M.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=p,M.createElement(iF,{match:m,routeContext:{outlet:p,matches:E,isDataRoute:t!=null},children:C})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?M.createElement(KR,{location:t.location,revalidation:t.revalidation,component:x,error:v,children:R(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:d}):R()},null)}function qA(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aF(s){let e=M.useContext(bf);return Dt(e,qA(s)),e}function lF(s){let e=M.useContext(Dw);return Dt(e,qA(s)),e}function cF(s){let e=M.useContext(jr);return Dt(e,qA(s)),e}function KA(s){let e=cF(s),t=e.matches[e.matches.length-1];return Dt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function uF(){return KA("useRouteId")}function hF(){var n;let s=M.useContext(GA),e=lF("useRouteError"),t=KA("useRouteError");return s!==void 0?s:(n=e.errors)==null?void 0:n[t]}function dF(){let{router:s}=aF("useNavigate"),e=KA("useNavigate"),t=M.useRef(!1);return GR(()=>{t.current=!0}),M.useCallback(async(r,i={})=>{di(t.current,WR),t.current&&(typeof r=="number"?await s.navigate(r):await s.navigate(r,{fromRouteId:e,...i}))},[s,e])}var Q1={};function XR(s,e,t){!e&&!Q1[s]&&(Q1[s]=!0,di(!1,t))}M.memo(fF);function fF({routes:s,future:e,state:t,onError:n}){return qR(s,void 0,t,n,e)}function YR({to:s,replace:e,state:t,relative:n}){Dt(xf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=M.useContext(fr);di(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=M.useContext(jr),{pathname:o}=aa(),l=sy(),h=WA(s,HA(i),o,n==="path"),d=JSON.stringify(h);return M.useEffect(()=>{l(JSON.parse(d),{replace:e,state:t,relative:n})},[l,d,n,e,t]),null}function pF(s){return Zj(s.context)}function uo(s){Dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mF({basename:s="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:i=!1,unstable_useTransitions:o}){Dt(!xf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=s.replace(/^\/*/,"/"),h=M.useMemo(()=>({basename:l,navigator:r,static:i,unstable_useTransitions:o,future:{}}),[l,r,i,o]);typeof t=="string"&&(t=wf(t));let{pathname:d="/",search:p="",hash:m="",state:g=null,key:v="default"}=t,b=M.useMemo(()=>{let x=ta(d,l);return x==null?null:{location:{pathname:x,search:p,hash:m,state:g,key:v},navigationType:n}},[l,d,p,m,g,v,n]);return di(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:M.createElement(fr.Provider,{value:h},M.createElement(ny.Provider,{children:e,value:b}))}function gF({children:s,location:e}){return tF(IS(s),e)}function IS(s,e=[]){let t=[];return M.Children.forEach(s,(n,r)=>{if(!M.isValidElement(n))return;let i=[...e,r];if(n.type===M.Fragment){t.push.apply(t,IS(n.props.children,i));return}Dt(n.type===uo,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Dt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=IS(n.props.children,i)),t.push(o)}),t}var e0="get",t0="application/x-www-form-urlencoded";function Mw(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function yF(s){return Mw(s)&&s.tagName.toLowerCase()==="button"}function vF(s){return Mw(s)&&s.tagName.toLowerCase()==="form"}function wF(s){return Mw(s)&&s.tagName.toLowerCase()==="input"}function bF(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function xF(s,e){return s.button===0&&(!e||e==="_self")&&!bF(s)}var Lv=null;function SF(){if(Lv===null)try{new FormData(document.createElement("form"),0),Lv=!1}catch{Lv=!0}return Lv}var _F=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Kx(s){return s!=null&&!_F.has(s)?(di(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${t0}"`),null):s}function AF(s,e){let t,n,r,i,o;if(vF(s)){let l=s.getAttribute("action");n=l?ta(l,e):null,t=s.getAttribute("method")||e0,r=Kx(s.getAttribute("enctype"))||t0,i=new FormData(s)}else if(yF(s)||wF(s)&&(s.type==="submit"||s.type==="image")){let l=s.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=s.getAttribute("formaction")||l.getAttribute("action");if(n=h?ta(h,e):null,t=s.getAttribute("formmethod")||l.getAttribute("method")||e0,r=Kx(s.getAttribute("formenctype"))||Kx(l.getAttribute("enctype"))||t0,i=new FormData(l,s),!SF()){let{name:d,type:p,value:m}=s;if(p==="image"){let g=d?`${d}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else d&&i.append(d,m)}}else{if(Mw(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=e0,n=null,r=t0,o=s}return i&&r==="text/plain"&&(o=i,i=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function XA(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function EF(s,e,t,n){let r=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${n}`:r.pathname=`${r.pathname}.${n}`:r.pathname==="/"?r.pathname=`_root.${n}`:e&&ta(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function kF(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CF(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function TF(s,e,t){let n=await Promise.all(s.map(async r=>{let i=e.routes[r.route.id];if(i){let o=await kF(i,t);return o.links?o.links():[]}return[]}));return DF(n.flat(1).filter(CF).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Z1(s,e,t,n,r,i){let o=(h,d)=>t[d]?h.route.id!==t[d].route.id:!0,l=(h,d)=>{var p;return t[d].pathname!==h.pathname||((p=t[d].route.path)==null?void 0:p.endsWith("*"))&&t[d].params["*"]!==h.params["*"]};return i==="assets"?e.filter((h,d)=>o(h,d)||l(h,d)):i==="data"?e.filter((h,d)=>{var m;let p=n.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(o(h,d)||l(h,d))return!0;if(h.route.shouldRevalidate){let g=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(s,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function PF(s,e,{includeHydrateFallback:t}={}){return RF(s.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function RF(s){return[...new Set(s)]}function LF(s){let e={},t=Object.keys(s).sort();for(let n of t)e[n]=s[n];return e}function DF(s,e){let t=new Set;return new Set(e),s.reduce((n,r)=>{let i=JSON.stringify(LF(r));return t.has(i)||(t.add(i),n.push({key:i,link:r})),n},[])}function JR(){let s=M.useContext(bf);return XA(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function MF(){let s=M.useContext(Dw);return XA(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var YA=M.createContext(void 0);YA.displayName="FrameworkContext";function QR(){let s=M.useContext(YA);return XA(s,"You must render this element inside a <HydratedRouter> element"),s}function NF(s,e){let t=M.useContext(YA),[n,r]=M.useState(!1),[i,o]=M.useState(!1),{onFocus:l,onBlur:h,onMouseEnter:d,onMouseLeave:p,onTouchStart:m}=e,g=M.useRef(null);M.useEffect(()=>{if(s==="render"&&o(!0),s==="viewport"){let x=E=>{E.forEach(R=>{o(R.isIntersecting)})},A=new IntersectionObserver(x,{threshold:.5});return g.current&&A.observe(g.current),()=>{A.disconnect()}}},[s]),M.useEffect(()=>{if(n){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[n]);let v=()=>{r(!0)},b=()=>{r(!1),o(!1)};return t?s!=="intent"?[i,g,{}]:[i,g,{onFocus:gp(l,v),onBlur:gp(h,b),onMouseEnter:gp(d,v),onMouseLeave:gp(p,b),onTouchStart:gp(m,v)}]:[!1,g,{}]}function gp(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function IF({page:s,...e}){let{router:t}=JR(),n=M.useMemo(()=>jR(t.routes,s,t.basename),[t.routes,s,t.basename]);return n?M.createElement(jF,{page:s,matches:n,...e}):null}function OF(s){let{manifest:e,routeModules:t}=QR(),[n,r]=M.useState([]);return M.useEffect(()=>{let i=!1;return TF(s,e,t).then(o=>{i||r(o)}),()=>{i=!0}},[s,e,t]),n}function jF({page:s,matches:e,...t}){let n=aa(),{future:r,manifest:i,routeModules:o}=QR(),{basename:l}=JR(),{loaderData:h,matches:d}=MF(),p=M.useMemo(()=>Z1(s,e,d,i,n,"data"),[s,e,d,i,n]),m=M.useMemo(()=>Z1(s,e,d,i,n,"assets"),[s,e,d,i,n]),g=M.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let x=new Set,A=!1;if(e.forEach(R=>{var D;let C=i.routes[R.route.id];!C||!C.hasLoader||(!p.some(N=>N.route.id===R.route.id)&&R.route.id in h&&((D=o[R.route.id])!=null&&D.shouldRevalidate)||C.hasClientLoader?A=!0:x.add(R.route.id))}),x.size===0)return[];let E=EF(s,l,r.unstable_trailingSlashAwareDataRequests,"data");return A&&x.size>0&&E.searchParams.set("_routes",e.filter(R=>x.has(R.route.id)).map(R=>R.route.id).join(",")),[E.pathname+E.search]},[l,r.unstable_trailingSlashAwareDataRequests,h,n,i,p,e,s,o]),v=M.useMemo(()=>PF(m,i),[m,i]),b=OF(m);return M.createElement(M.Fragment,null,g.map(x=>M.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),v.map(x=>M.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),b.map(({key:x,link:A})=>M.createElement("link",{key:x,nonce:t.nonce,...A,crossOrigin:A.crossOrigin??t.crossOrigin})))}function FF(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var BF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{BF&&(window.__reactRouterVersion="7.13.0")}catch{}function $F({basename:s,children:e,unstable_useTransitions:t,window:n}){let r=M.useRef();r.current==null&&(r.current=gj({window:n,v5Compat:!0}));let i=r.current,[o,l]=M.useState({action:i.action,location:i.location}),h=M.useCallback(d=>{t===!1?l(d):M.startTransition(()=>l(d))},[t]);return M.useLayoutEffect(()=>i.listen(h),[i,h]),M.createElement(mF,{basename:s,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:t})}var ZR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Is=M.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:i,replace:o,state:l,target:h,to:d,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:g,...v},b){let{basename:x,unstable_useTransitions:A}=M.useContext(fr),E=typeof d=="string"&&ZR.test(d),R=UR(d,x);d=R.to;let C=Yj(d,{relative:r}),[D,N,I]=NF(n,v),j=HF(d,{replace:o,state:l,target:h,preventScrollReset:p,relative:r,viewTransition:m,unstable_defaultShouldRevalidate:g,unstable_useTransitions:A});function F(K){e&&e(K),K.defaultPrevented||j(K)}let W=M.createElement("a",{...v,...I,href:R.absoluteURL||C,onClick:R.isExternal||i?e:F,ref:FF(b,N),target:h,"data-discover":!E&&t==="render"?"true":void 0});return D&&!E?M.createElement(M.Fragment,null,W,M.createElement(IF,{page:C})):W});Is.displayName="Link";var UF=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:i,to:o,viewTransition:l,children:h,...d},p){let m=ry(o,{relative:d.relative}),g=aa(),v=M.useContext(Dw),{navigator:b,basename:x}=M.useContext(fr),A=v!=null&&XF(m)&&l===!0,E=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,R=g.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(R=R.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&x&&(C=ta(C,x)||C);const D=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let N=R===E||!r&&R.startsWith(E)&&R.charAt(D)==="/",I=C!=null&&(C===E||!r&&C.startsWith(E)&&C.charAt(E.length)==="/"),j={isActive:N,isPending:I,isTransitioning:A},F=N?e:void 0,W;typeof n=="function"?W=n(j):W=[n,N?"active":null,I?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let K=typeof i=="function"?i(j):i;return M.createElement(Is,{...d,"aria-current":F,className:W,ref:p,style:K,to:o,viewTransition:l},typeof h=="function"?h(j):h)});UF.displayName="NavLink";var VF=M.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:i,method:o=e0,action:l,onSubmit:h,relative:d,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:g,...v},b)=>{let{unstable_useTransitions:x}=M.useContext(fr),A=qF(),E=KF(l,{relative:d}),R=o.toLowerCase()==="get"?"get":"post",C=typeof l=="string"&&ZR.test(l),D=N=>{if(h&&h(N),N.defaultPrevented)return;N.preventDefault();let I=N.nativeEvent.submitter,j=(I==null?void 0:I.getAttribute("formmethod"))||o,F=()=>A(I||N.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:r,state:i,relative:d,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:g});x&&t!==!1?M.startTransition(()=>F()):F()};return M.createElement("form",{ref:b,method:R,action:E,onSubmit:n?h:D,...v,"data-discover":!C&&s==="render"?"true":void 0})});VF.displayName="Form";function zF(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eL(s){let e=M.useContext(bf);return Dt(e,zF(s)),e}function HF(s,{target:e,replace:t,state:n,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:h}={}){let d=sy(),p=aa(),m=ry(s,{relative:i});return M.useCallback(g=>{if(xF(g,e)){g.preventDefault();let v=t!==void 0?t:em(p)===em(m),b=()=>d(s,{replace:v,state:n,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});h?M.startTransition(()=>b()):b()}},[p,d,m,t,n,e,s,r,i,o,l,h])}var WF=0,GF=()=>`__${String(++WF)}__`;function qF(){let{router:s}=eL("useSubmit"),{basename:e}=M.useContext(fr),t=uF(),n=s.fetch,r=s.navigate;return M.useCallback(async(i,o={})=>{let{action:l,method:h,encType:d,formData:p,body:m}=AF(i,e);if(o.navigate===!1){let g=o.fetcherKey||GF();await n(g,t,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:p,body:m,formMethod:o.method||h,formEncType:o.encType||d,flushSync:o.flushSync})}else await r(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:p,body:m,formMethod:o.method||h,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,r,e,t])}function KF(s,{relative:e}={}){let{basename:t}=M.useContext(fr),n=M.useContext(jr);Dt(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),i={...ry(s||".",{relative:e})},o=aa();if(s==null){i.search=o.search;let l=new URLSearchParams(i.search),h=l.getAll("index");if(h.some(p=>p==="")){l.delete("index"),h.filter(m=>m).forEach(m=>l.append("index",m));let p=l.toString();i.search=p?`?${p}`:""}}return(!s||s===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Qo([t,i.pathname])),em(i)}function XF(s,{relative:e}={}){let t=M.useContext(zR);Dt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=eL("useViewTransitionState"),r=ry(s,{relative:e});if(!t.isTransitioning)return!1;let i=ta(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=ta(t.nextLocation.pathname,n)||t.nextLocation.pathname;return $0(r.pathname,o)!=null||$0(r.pathname,i)!=null}OR();function Nw(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t}function YF(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(p){try{d(n.next(p))}catch(m){o(m)}}function h(p){try{d(n.throw(p))}catch(m){o(m)}}function d(p){p.done?i(p.value):r(p.value).then(l,h)}d((n=n.apply(s,e||[])).next())})}const JF=s=>s?(...e)=>s(...e):(...e)=>fetch(...e);class JA extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class QF extends JA{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class eT extends JA{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class tT extends JA{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var OS;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(OS||(OS={}));class ZF{constructor(e,{headers:t={},customFetch:n,region:r=OS.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=JF(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return YF(this,arguments,void 0,function*(t,n={}){var r;let i,o;try{const{headers:l,method:h,body:d,signal:p,timeout:m}=n;let g={},{region:v}=n;v||(v=this.region);const b=new URL(`${this.url}/${t}`);v&&v!=="any"&&(g["x-region"]=v,b.searchParams.set("forceFunctionRegion",v));let x;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",x=d):typeof d=="string"?(g["Content-Type"]="text/plain",x=d):typeof FormData<"u"&&d instanceof FormData?x=d:(g["Content-Type"]="application/json",x=JSON.stringify(d)):d&&typeof d!="string"&&!(typeof Blob<"u"&&d instanceof Blob)&&!(d instanceof ArrayBuffer)&&!(typeof FormData<"u"&&d instanceof FormData)?x=JSON.stringify(d):x=d;let A=p;m&&(o=new AbortController,i=setTimeout(()=>o.abort(),m),p?(A=o.signal,p.addEventListener("abort",()=>o.abort())):A=o.signal);const E=yield this.fetch(b.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),l),body:x,signal:A}).catch(N=>{throw new QF(N)}),R=E.headers.get("x-relay-error");if(R&&R==="true")throw new eT(E);if(!E.ok)throw new tT(E);let C=((r=E.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),D;return C==="application/json"?D=yield E.json():C==="application/octet-stream"||C==="application/pdf"?D=yield E.blob():C==="text/event-stream"?D=E:C==="multipart/form-data"?D=yield E.formData():D=yield E.text(),{data:D,error:null,response:E}}catch(l){return{data:null,error:l,response:l instanceof tT||l instanceof eT?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var eB=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},tB=class{constructor(s){var e,t,n;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(e=s.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=s.signal,this.isMaybeSingle=(t=s.isMaybeSingle)!==null&&t!==void 0?t:!1,this.urlLengthLimit=(n=s.urlLengthLimit)!==null&&n!==void 0?n:8e3,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,e){return this.headers=new Headers(this.headers),this.headers.set(s,e),this}then(s,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,h=null,d=i.status,p=i.statusText;if(i.ok){var m,g;if(t.method!=="HEAD"){var v;const E=await i.text();E===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((v=t.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?l=E:l=JSON.parse(E))}const x=(m=t.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),A=(g=i.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");x&&A&&A.length>1&&(h=parseInt(A[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,h=null,d=406,p="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var b;const x=await i.text();try{o=JSON.parse(x),Array.isArray(o)&&i.status===404&&(l=[],o=null,d=200,p="OK")}catch{i.status===404&&x===""?(d=204,p="No Content"):o={message:x}}if(o&&t.isMaybeSingle&&(!(o==null||(b=o.details)===null||b===void 0)&&b.includes("0 rows"))&&(o=null,d=200,p="OK"),o&&t.shouldThrowOnError)throw new eB(o)}return{error:o,data:l,count:h,status:d,statusText:p}});return this.shouldThrowOnError||(r=r.catch(i=>{var o;let l="",h="",d="";const p=i==null?void 0:i.cause;if(p){var m,g,v,b;const E=(m=p==null?void 0:p.message)!==null&&m!==void 0?m:"",R=(g=p==null?void 0:p.code)!==null&&g!==void 0?g:"";l=`${(v=i==null?void 0:i.name)!==null&&v!==void 0?v:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(b=p==null?void 0:p.name)!==null&&b!==void 0?b:"Error"}: ${E}`,R&&(l+=` (${R})`),p!=null&&p.stack&&(l+=`
${p.stack}`)}else{var x;l=(x=i==null?void 0:i.stack)!==null&&x!==void 0?x:""}const A=this.url.toString().length;return(i==null?void 0:i.name)==="AbortError"||(i==null?void 0:i.code)==="ABORT_ERR"?(d="",h="Request was aborted (timeout or manual cancellation)",A>this.urlLengthLimit&&(h+=`. Note: Your request URL is ${A} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((p==null?void 0:p.name)==="HeadersOverflowError"||(p==null?void 0:p.code)==="UND_ERR_HEADERS_OVERFLOW")&&(d="",h="HTTP headers exceeded server limits (typically 16KB)",A>this.urlLengthLimit&&(h+=`. Your request URL is ${A} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:h,code:d},data:null,count:null,status:0,statusText:""}})),r.then(s,e)}returns(){return this}overrideTypes(){return this}},nB=class extends tB{select(s){let e=!1;const t=(s??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:e=!0,nullsFirst:t,foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${s}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:e,referencedTable:t=e}={}){const n=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${s}`),this}range(s,e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${s}`),this.url.searchParams.set(i,`${e-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:e=!1,settings:t=!1,buffers:n=!1,wal:r=!1,format:i="text"}={}){var o;const l=[s?"analyze":null,e?"verbose":null,t?"settings":null,n?"buffers":null,r?"wal":null].filter(Boolean).join("|"),h=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${h}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const nT=new RegExp("[,()]");var ph=class extends nB{eq(s,e){return this.url.searchParams.append(s,`eq.${e}`),this}neq(s,e){return this.url.searchParams.append(s,`neq.${e}`),this}gt(s,e){return this.url.searchParams.append(s,`gt.${e}`),this}gte(s,e){return this.url.searchParams.append(s,`gte.${e}`),this}lt(s,e){return this.url.searchParams.append(s,`lt.${e}`),this}lte(s,e){return this.url.searchParams.append(s,`lte.${e}`),this}like(s,e){return this.url.searchParams.append(s,`like.${e}`),this}likeAllOf(s,e){return this.url.searchParams.append(s,`like(all).{${e.join(",")}}`),this}likeAnyOf(s,e){return this.url.searchParams.append(s,`like(any).{${e.join(",")}}`),this}ilike(s,e){return this.url.searchParams.append(s,`ilike.${e}`),this}ilikeAllOf(s,e){return this.url.searchParams.append(s,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(s,e){return this.url.searchParams.append(s,`ilike(any).{${e.join(",")}}`),this}regexMatch(s,e){return this.url.searchParams.append(s,`match.${e}`),this}regexIMatch(s,e){return this.url.searchParams.append(s,`imatch.${e}`),this}is(s,e){return this.url.searchParams.append(s,`is.${e}`),this}isDistinct(s,e){return this.url.searchParams.append(s,`isdistinct.${e}`),this}in(s,e){const t=Array.from(new Set(e)).map(n=>typeof n=="string"&&nT.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(s,`in.(${t})`),this}notIn(s,e){const t=Array.from(new Set(e)).map(n=>typeof n=="string"&&nT.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(s,`not.in.(${t})`),this}contains(s,e){return typeof e=="string"?this.url.searchParams.append(s,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(s,`cs.{${e.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(e)}`),this}containedBy(s,e){return typeof e=="string"?this.url.searchParams.append(s,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(s,`cd.{${e.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(e)}`),this}rangeGt(s,e){return this.url.searchParams.append(s,`sr.${e}`),this}rangeGte(s,e){return this.url.searchParams.append(s,`nxl.${e}`),this}rangeLt(s,e){return this.url.searchParams.append(s,`sl.${e}`),this}rangeLte(s,e){return this.url.searchParams.append(s,`nxr.${e}`),this}rangeAdjacent(s,e){return this.url.searchParams.append(s,`adj.${e}`),this}overlaps(s,e){return typeof e=="string"?this.url.searchParams.append(s,`ov.${e}`):this.url.searchParams.append(s,`ov.{${e.join(",")}}`),this}textSearch(s,e,{config:t,type:n}={}){let r="";n==="plain"?r="pl":n==="phrase"?r="ph":n==="websearch"&&(r="w");const i=t===void 0?"":`(${t})`;return this.url.searchParams.append(s,`${r}fts${i}.${e}`),this}match(s){return Object.entries(s).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(s,e,t){return this.url.searchParams.append(s,`not.${e}.${t}`),this}or(s,{foreignTable:e,referencedTable:t=e}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${s})`),this}filter(s,e,t){return this.url.searchParams.append(s,`${e}.${t}`),this}},sB=class{constructor(s,{headers:e={},schema:t,fetch:n,urlLengthLimit:r=8e3}){this.url=s,this.headers=new Headers(e),this.schema=t,this.fetch=n,this.urlLengthLimit=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,e){const{head:t=!1,count:n}=e??{},r=t?"HEAD":"GET";let i=!1;const o=(s??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join(""),{url:l,headers:h}=this.cloneRequestState();return l.searchParams.set("select",o),n&&h.append("Prefer",`count=${n}`),new ph({method:r,url:l,headers:h,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(s,{count:e,defaultToNull:t=!0}={}){var n;const r="POST",{url:i,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),t||o.append("Prefer","missing=default"),Array.isArray(s)){const l=s.reduce((h,d)=>h.concat(Object.keys(d)),[]);if(l.length>0){const h=[...new Set(l)].map(d=>`"${d}"`);i.searchParams.set("columns",h.join(","))}}return new ph({method:r,url:i,headers:o,schema:this.schema,body:s,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(s,{onConflict:e,ignoreDuplicates:t=!1,count:n,defaultToNull:r=!0}={}){var i;const o="POST",{url:l,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&l.searchParams.set("on_conflict",e),n&&h.append("Prefer",`count=${n}`),r||h.append("Prefer","missing=default"),Array.isArray(s)){const d=s.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(d.length>0){const p=[...new Set(d)].map(m=>`"${m}"`);l.searchParams.set("columns",p.join(","))}}return new ph({method:o,url:l,headers:h,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(s,{count:e}={}){var t;const n="PATCH",{url:r,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new ph({method:n,url:r,headers:i,schema:this.schema,body:s,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:s}={}){var e;const t="DELETE",{url:n,headers:r}=this.cloneRequestState();return s&&r.append("Prefer",`count=${s}`),new ph({method:t,url:n,headers:r,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function tm(s){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tm(s)}function rB(s,e){if(tm(s)!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e);if(tm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function iB(s){var e=rB(s,"string");return tm(e)=="symbol"?e:e+""}function oB(s,e,t){return(e=iB(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function sT(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function Dv(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sT(Object(t),!0).forEach(function(n){oB(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):sT(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}var aB=class tL{constructor(e,{headers:t={},schema:n,fetch:r,timeout:i,urlLengthLimit:o=8e3}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.urlLengthLimit=o;const l=r??globalThis.fetch;i!==void 0&&i>0?this.fetch=(h,d)=>{const p=new AbortController,m=setTimeout(()=>p.abort(),i),g=d==null?void 0:d.signal;if(g){if(g.aborted)return clearTimeout(m),l(h,d);const v=()=>{clearTimeout(m),p.abort()};return g.addEventListener("abort",v,{once:!0}),l(h,Dv(Dv({},d),{},{signal:p.signal})).finally(()=>{clearTimeout(m),g.removeEventListener("abort",v)})}return l(h,Dv(Dv({},d),{},{signal:p.signal})).finally(()=>clearTimeout(m))}:this.fetch=l}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new sB(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new tL(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,t={},{head:n=!1,get:r=!1,count:i}={}){var o;let l;const h=new URL(`${this.url}/rpc/${e}`);let d;const p=v=>v!==null&&typeof v=="object"&&(!Array.isArray(v)||v.some(p)),m=n&&Object.values(t).some(p);m?(l="POST",d=t):n||r?(l=n?"HEAD":"GET",Object.entries(t).filter(([v,b])=>b!==void 0).map(([v,b])=>[v,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([v,b])=>{h.searchParams.append(v,b)})):(l="POST",d=t);const g=new Headers(this.headers);return m?g.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&g.set("Prefer",`count=${i}`),new ph({method:l,url:h,headers:g,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class lB{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const n=t.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const cB="2.95.3",uB=`realtime-js/${cB}`,hB="1.0.0",nL="2.0.0",rT=nL,jS=1e4,dB=1e3,fB=100;var Na;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Na||(Na={}));var dn;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(dn||(dn={}));var ci;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ci||(ci={}));var FS;(function(s){s.websocket="websocket"})(FS||(FS={}));var lc;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(lc||(lc={}));class pB{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const r=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var t,n;const r=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,t,n){var r,i;const o=e.topic,l=(r=e.ref)!==null&&r!==void 0?r:"",h=(i=e.join_ref)!==null&&i!==void 0?i:"",d=e.payload.event,p=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},m=Object.keys(p).length===0?"":JSON.stringify(p);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const g=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+l.length+o.length+d.length+m.length,v=new ArrayBuffer(this.HEADER_LENGTH+g);let b=new DataView(v),x=0;b.setUint8(x++,this.KINDS.userBroadcastPush),b.setUint8(x++,h.length),b.setUint8(x++,l.length),b.setUint8(x++,o.length),b.setUint8(x++,d.length),b.setUint8(x++,m.length),b.setUint8(x++,t),Array.from(h,E=>b.setUint8(x++,E.charCodeAt(0))),Array.from(l,E=>b.setUint8(x++,E.charCodeAt(0))),Array.from(o,E=>b.setUint8(x++,E.charCodeAt(0))),Array.from(d,E=>b.setUint8(x++,E.charCodeAt(0))),Array.from(m,E=>b.setUint8(x++,E.charCodeAt(0)));var A=new Uint8Array(v.byteLength+n.byteLength);return A.set(new Uint8Array(v),0),A.set(new Uint8Array(n),v.byteLength),A.buffer}decode(e,t){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return t(n)}if(typeof e=="string"){const n=JSON.parse(e),[r,i,o,l,h]=n;return t({join_ref:r,ref:i,topic:o,event:l,payload:h})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),r=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,r)}}_decodeUserBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2),o=t.getUint8(3),l=t.getUint8(4);let h=this.HEADER_LENGTH+4;const d=n.decode(e.slice(h,h+r));h=h+r;const p=n.decode(e.slice(h,h+i));h=h+i;const m=n.decode(e.slice(h,h+o));h=h+o;const g=e.slice(h,e.byteLength),v=l===this.JSON_ENCODING?JSON.parse(n.decode(g)):g,b={type:this.BROADCAST_EVENT,event:p,payload:v};return o>0&&(b.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>t.includes(n)))}}class sL{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var wt;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(wt||(wt={}));const iT=(s,e,t={})=>{var n;const r=(n=t.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=mB(o,s,e,r),i),{}):{}},mB=(s,e,t,n)=>{const r=e.find(l=>l.name===s),i=r==null?void 0:r.type,o=t[s];return i&&!n.includes(i)?rL(i,o):BS(o)},rL=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return wB(e,t)}switch(s){case wt.bool:return gB(e);case wt.float4:case wt.float8:case wt.int2:case wt.int4:case wt.int8:case wt.numeric:case wt.oid:return yB(e);case wt.json:case wt.jsonb:return vB(e);case wt.timestamp:return bB(e);case wt.abstime:case wt.date:case wt.daterange:case wt.int4range:case wt.int8range:case wt.money:case wt.reltime:case wt.text:case wt.time:case wt.timestamptz:case wt.timetz:case wt.tsrange:case wt.tstzrange:return BS(e);default:return BS(e)}},BS=s=>s,gB=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},yB=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},vB=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},wB=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let i;const o=s.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>rL(e,l))}return s},bB=s=>typeof s=="string"?s.replace(" ","T"):s,iL=s=>{const e=new URL(s);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Xx{constructor(e,t,n={},r=jS){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var oT;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(oT||(oT={}));class qp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qp.syncState(this.state,r,i,o),this.pendingDiffs.forEach(h=>{this.state=qp.syncDiff(this.state,h,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=qp.syncDiff(this.state,r,i,o),l())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),o=this.transformState(t),l={},h={};return this.map(i,(d,p)=>{o[d]||(h[d]=p)}),this.map(o,(d,p)=>{const m=i[d];if(m){const g=p.map(A=>A.presence_ref),v=m.map(A=>A.presence_ref),b=p.filter(A=>v.indexOf(A.presence_ref)<0),x=m.filter(A=>g.indexOf(A.presence_ref)<0);b.length>0&&(l[d]=b),x.length>0&&(h[d]=x)}else l[d]=p}),this.syncDiff(i,{joins:l,leaves:h},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(l,h)=>{var d;const p=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(h),p.length>0){const m=e[l].map(v=>v.presence_ref),g=p.filter(v=>m.indexOf(v.presence_ref)<0);e[l].unshift(...g)}n(l,p,h)}),this.map(o,(l,h)=>{let d=e[l];if(!d)return;const p=h.map(m=>m.presence_ref);d=d.filter(m=>p.indexOf(m.presence_ref)<0),e[l]=d,r(l,d,h),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return"metas"in r?t[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var aT;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(aT||(aT={}));var Kp;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Kp||(Kp={}));var mo;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(mo||(mo={}));class kh{constructor(e,t={config:{}},n){var r,i;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=dn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Xx(this,ci.join,this.params,this.timeout),this.rejoinTimer=new sL(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ci.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new qp(this),this.broadcastEndpointURL=iL(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==dn.closed){const{config:{broadcast:o,presence:l,private:h}}=this.params,d=(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&r!==void 0?r:[],p=!!this.bindings[Kp.PRESENCE]&&this.bindings[Kp.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},g={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:p}),postgres_changes:d,private:h};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(mo.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(mo.CLOSED)),this.updateJoinPayload(Object.assign({config:g},m)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:v})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){e==null||e(mo.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,A=(b=x==null?void 0:x.length)!==null&&b!==void 0?b:0,E=[];for(let R=0;R<A;R++){const C=x[R],{filter:{event:D,schema:N,table:I,filter:j}}=C,F=v&&v[R];if(F&&F.event===D&&kh.isFilterValueEqual(F.schema,N)&&kh.isFilterValueEqual(F.table,I)&&kh.isFilterValueEqual(F.filter,j))E.push(Object.assign(Object.assign({},C),{id:F.id}));else{this.unsubscribe(),this.state=dn.errored,e==null||e(mo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(mo.SUBSCRIBED);return}}).receive("error",v=>{this.state=dn.errored,e==null||e(mo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(mo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===dn.joined&&e===Kp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var r;if(t==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);if(l.status===202)return{success:!0};let h=l.statusText;try{const d=await l.json();h=d.error||d.message||h}catch{}return Promise.reject(new Error(h))}async send(e,t={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=d.body)===null||r===void 0?void 0:r.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,h;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||h===void 0)&&h.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=dn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ci.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Xx(this,ci.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=dn.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Xx(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>fB){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const o=e.toLocaleLowerCase(),{close:l,error:h,leave:d,join:p}=ci;if(n&&[l,h,d,p].indexOf(o)>=0&&n!==this._joinRef())return;let g=this._onMessage(o,t,n);if(t&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(v=>{var b,x,A;return((b=v.filter)===null||b===void 0?void 0:b.event)==="*"||((A=(x=v.filter)===null||x===void 0?void 0:x.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===o}).map(v=>v.callback(g,n)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var b,x,A,E,R,C;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const D=v.id,N=(b=v.filter)===null||b===void 0?void 0:b.event;return D&&((x=t.ids)===null||x===void 0?void 0:x.includes(D))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((A=t.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const D=(R=(E=v==null?void 0:v.filter)===null||E===void 0?void 0:E.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return D==="*"||D===((C=t==null?void 0:t.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof g=="object"&&"ids"in g){const b=g.data,{schema:x,table:A,commit_timestamp:E,type:R,errors:C}=b;g=Object.assign(Object.assign({},{schema:x,table:A,commit_timestamp:E,eventType:R,new:{},old:{},errors:C}),this._getPayloadRecords(b))}v.callback(g,n)})}_isClosed(){return this.state===dn.closed}_isJoined(){return this.state===dn.joined}_isJoining(){return this.state===dn.joining}_isLeaving(){return this.state===dn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&kh.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ci.close,{},e)}_onError(e){this._on(ci.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=iT(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=iT(e.columns,e.old_record)),t}}const Yx=()=>{},Mv={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},xB=[1e3,2e3,5e3,1e4],SB=1e4,_B=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class AB{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jS,this.transport=null,this.heartbeatIntervalMs=Mv.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yx,this.ref=0,this.reconnectTimer=null,this.vsn=rT,this.logger=Yx,this.conn=null,this.sendBuffer=[],this.serializer=new pB,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=r=>r?(...i)=>r(...i):(...i)=>fetch(...i),!(!((n=t==null?void 0:t.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${FS.websocket}`,this.httpEndpoint=iL(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=lB.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return t==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Na.connecting:return lc.Connecting;case Na.open:return lc.Open;case Na.closing:return lc.Closing;default:return lc.Closed}}isConnected(){return this.connectionState()===lc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new kh(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,l=>{var h;(h=this.conn)===null||h===void 0||h.send(l)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(dB,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Mv.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const d=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",d)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:r,payload:i,ref:o}=t,l=o?`(${o})`:"",h=i.status||"";this.log("receive",`${h} ${n} ${r} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(r,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Na.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Na.open||this.conn.readyState===Na.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(t){this.log("error","error in heartbeat callback",t)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(ci.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${n}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([_B],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,n=!1;if(e)t=e,n=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),t=this.accessTokenValue}else t=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:uB};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(ci.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new sL(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Mv.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,i,o,l,h,d,p,m,g,v;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:jS,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:Mv.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Yx,this.vsn=(h=e==null?void 0:e.vsn)!==null&&h!==void 0?h:rT,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e==null?void 0:e.reconnectAfterMs)!==null&&d!==void 0?d:(b=>xB[b-1]||SB),this.vsn){case hB:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:((b,x)=>x(JSON.stringify(b))),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:((b,x)=>x(JSON.parse(b)));break;case nL:this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:this.serializer.encode.bind(this.serializer),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var nm=class extends Error{constructor(s,e){var t;super(s),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function EB(s,e,t){const n=new URL(e,s);if(t)for(const[r,i]of Object.entries(t))i!==void 0&&n.searchParams.set(r,i);return n.toString()}async function kB(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function CB(s){const e=s.fetchImpl??globalThis.fetch;return{async request({method:t,path:n,query:r,body:i,headers:o}){const l=EB(s.baseUrl,n,r),h=await kB(s.auth),d=await e(l,{method:t,headers:{...i?{"Content-Type":"application/json"}:{},...h,...o},body:i?JSON.stringify(i):void 0}),p=await d.text(),m=(d.headers.get("content-type")||"").includes("application/json"),g=m&&p?JSON.parse(p):p;if(!d.ok){const v=m?g:void 0,b=v==null?void 0:v.error;throw new nm((b==null?void 0:b.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:v})}return{status:d.status,headers:d.headers,data:g}}}}function Nv(s){return s.join("")}var TB=class{constructor(s,e=""){this.client=s,this.prefix=e}async listNamespaces(s){const e=s?{parent:Nv(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(s,e){const t={namespace:s.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Nv(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Nv(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Nv(s.namespace)}`}),!0}catch(e){if(e instanceof nm&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(s,e){try{return await this.createNamespace(s,e)}catch(t){if(t instanceof nm&&t.status===409)return;throw t}}};function oh(s){return s.join("")}var PB=class{constructor(s,e="",t){this.client=s,this.prefix=e,this.accessDelegation=t}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oh(s.namespace)}/tables`})).data.identifiers}async createTable(s,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${oh(s.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(s,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${oh(s.namespace)}/tables/${s.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(s,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${oh(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(s){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oh(s.namespace)}/tables/${s.name}`,headers:e})).data.metadata}async tableExists(s){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${oh(s.namespace)}/tables/${s.name}`,headers:e}),!0}catch(t){if(t instanceof nm&&t.status===404)return!1;throw t}}async createTableIfNotExists(s,e){try{return await this.createTable(s,e)}catch(t){if(t instanceof nm&&t.status===409)return await this.loadTable({namespace:s.namespace,name:e.name});throw t}}},RB=class{constructor(s){var n;let e="v1";s.catalogName&&(e+=`/${s.catalogName}`);const t=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=CB({baseUrl:t,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(n=s.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new TB(this.client,e),this.tableOps=new PB(this.client,e,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,e){return this.namespaceOps.createNamespace(s,e)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,e){return this.tableOps.createTable(s,e)}async updateTable(s,e){return this.tableOps.updateTable(s,e)}async dropTable(s,e){await this.tableOps.dropTable(s,e)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,e){return this.namespaceOps.createNamespaceIfNotExists(s,e)}async createTableIfNotExists(s,e){return this.tableOps.createTableIfNotExists(s,e)}},Iw=class extends Error{constructor(s,e="storage",t,n){super(s),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=t,this.statusCode=n}};function Ow(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var Iv=class extends Iw{constructor(s,e,t,n="storage"){super(s,n,e,t),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},oL=class extends Iw{constructor(s,e,t="storage"){super(s,t),this.name=t==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const LB=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),DB=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},$S=s=>{if(Array.isArray(s))return s.map(t=>$S(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=$S(n)}),e},MB=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function sm(s){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sm(s)}function NB(s,e){if(sm(s)!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e);if(sm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function IB(s){var e=NB(s,"string");return sm(e)=="symbol"?e:e+""}function OB(s,e,t){return(e=IB(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function lT(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function Me(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lT(Object(t),!0).forEach(function(n){OB(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):lT(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}const cT=s=>{var e;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(e=s.error)===null||e===void 0?void 0:e.message)||JSON.stringify(s)},jB=async(s,e,t,n)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(t!=null&&t.noResolveJson)){const r=s,i=r.status||500;if(typeof r.json=="function")r.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new Iv(cT(o),i,l,n))}).catch(()=>{if(n==="vectors"){const o=i+"";e(new Iv(r.statusText||`HTTP ${i} error`,i,o,n))}else{const o=i+"";e(new Iv(r.statusText||`HTTP ${i} error`,i,o,n))}});else{const o=i+"";e(new Iv(r.statusText||`HTTP ${i} error`,i,o,n))}}else e(new oL(cT(s),s,n))},FB=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||s==="HEAD"||!n?Me(Me({},r),t):(DB(n)?(r.headers=Me({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(n)):r.body=n,e!=null&&e.duplex&&(r.duplex=e.duplex),Me(Me({},r),t))};async function yp(s,e,t,n,r,i,o){return new Promise((l,h)=>{s(t,FB(e,n,r,i)).then(d=>{if(!d.ok)throw d;if(n!=null&&n.noResolveJson)return d;if(o==="vectors"){const p=d.headers.get("content-type");if(d.headers.get("content-length")==="0"||d.status===204)return{};if(!p||!p.includes("application/json"))return{}}return d.json()}).then(d=>l(d)).catch(d=>jB(d,h,n,o))})}function aL(s="storage"){return{get:async(e,t,n,r)=>yp(e,"GET",t,n,r,void 0,s),post:async(e,t,n,r,i)=>yp(e,"POST",t,r,i,n,s),put:async(e,t,n,r,i)=>yp(e,"PUT",t,r,i,n,s),head:async(e,t,n,r)=>yp(e,"HEAD",t,Me(Me({},n),{},{noResolveJson:!0}),r,void 0,s),remove:async(e,t,n,r,i)=>yp(e,"DELETE",t,r,i,n,s)}}const BB=aL("storage"),{get:rm,post:Yr,put:US,head:$B,remove:QA}=BB,cr=aL("vectors");var Sf=class{constructor(s,e={},t,n="storage"){this.shouldThrowOnError=!1,this.url=s,this.headers=e,this.fetch=LB(t),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(s){var e=this;try{return{data:await s(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ow(t))return{data:null,error:t};throw t}}},UB=class{constructor(s,e){this.downloadFn=s,this.shouldThrowOnError=e}then(s,e){return this.execute().then(s,e)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(e){if(s.shouldThrowOnError)throw e;if(Ow(e))return{data:null,error:e};throw e}}};let lL;lL=Symbol.toStringTag;var VB=class{constructor(s,e){this.downloadFn=s,this.shouldThrowOnError=e,this[lL]="BlobDownloadBuilder",this.promise=null}asStream(){return new UB(this.downloadFn,this.shouldThrowOnError)}then(s,e){return this.getPromise().then(s,e)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(e){if(s.shouldThrowOnError)throw e;if(Ow(e))return{data:null,error:e};throw e}}};const zB={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},uT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var HB=class extends Sf{constructor(s,e={},t,n){super(s,e,n,"storage"),this.bucketId=t}async uploadOrUpdate(s,e,t,n){var r=this;return r.handleOperation(async()=>{let i;const o=Me(Me({},uT),n);let l=Me(Me({},r.headers),s==="POST"&&{"x-upsert":String(o.upsert)});const h=o.metadata;typeof Blob<"u"&&t instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),h&&i.append("metadata",r.encodeMetadata(h)),i.append("",t)):typeof FormData<"u"&&t instanceof FormData?(i=t,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),h&&!i.has("metadata")&&i.append("metadata",r.encodeMetadata(h))):(i=t,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,h&&(l["x-metadata"]=r.toBase64(r.encodeMetadata(h))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=Me(Me({},l),n.headers));const d=r._removeEmptyFolders(e),p=r._getFinalPath(d),m=await(s=="PUT"?US:Yr)(r.fetch,`${r.url}/object/${p}`,i,Me({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:d,id:m.Id,fullPath:m.Key}})}async upload(s,e,t){return this.uploadOrUpdate("POST",s,e,t)}async uploadToSignedUrl(s,e,t,n){var r=this;const i=r._removeEmptyFolders(s),o=r._getFinalPath(i),l=new URL(r.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",e),r.handleOperation(async()=>{let h;const d=Me({upsert:uT.upsert},n),p=Me(Me({},r.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&t instanceof Blob?(h=new FormData,h.append("cacheControl",d.cacheControl),h.append("",t)):typeof FormData<"u"&&t instanceof FormData?(h=t,h.append("cacheControl",d.cacheControl)):(h=t,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType),{path:i,fullPath:(await US(r.fetch,l.toString(),h,{headers:p})).Key}})}async createSignedUploadUrl(s,e){var t=this;return t.handleOperation(async()=>{let n=t._getFinalPath(s);const r=Me({},t.headers);e!=null&&e.upsert&&(r["x-upsert"]="true");const i=await Yr(t.fetch,`${t.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(t.url+i.url),l=o.searchParams.get("token");if(!l)throw new Iw("No token returned by API");return{signedUrl:o.toString(),path:s,token:l}})}async update(s,e,t){return this.uploadOrUpdate("PUT",s,e,t)}async move(s,e,t){var n=this;return n.handleOperation(async()=>await Yr(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:s,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:n.headers}))}async copy(s,e,t){var n=this;return n.handleOperation(async()=>({path:(await Yr(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:s,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(s,e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(s),i=await Yr(n.fetch,`${n.url}/object/sign/${r}`,Me({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:n.headers});const o=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)}})}async createSignedUrls(s,e,t){var n=this;return n.handleOperation(async()=>{const r=await Yr(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:s},{headers:n.headers}),i=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return r.map(o=>Me(Me({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null}))})}download(s,e,t){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",o=this._getFinalPath(s),l=()=>rm(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0},t);return new VB(l,this.shouldThrowOnError)}async info(s){var e=this;const t=e._getFinalPath(s);return e.handleOperation(async()=>$S(await rm(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})))}async exists(s){var e=this;const t=e._getFinalPath(s);try{return await $B(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ow(n)&&n instanceof oL){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}}getPublicUrl(s,e){const t=this._getFinalPath(s),n=[],r=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&n.push(r);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${t}${l}`)}}}async remove(s){var e=this;return e.handleOperation(async()=>await QA(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:s},{headers:e.headers}))}async list(s,e,t){var n=this;return n.handleOperation(async()=>{const r=Me(Me(Me({},zB),e),{},{prefix:s||""});return await Yr(n.fetch,`${n.url}/object/list/${n.bucketId}`,r,{headers:n.headers},t)})}async listV2(s,e){var t=this;return t.handleOperation(async()=>{const n=Me({},s);return await Yr(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,n,{headers:t.headers},e)})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const e=[];return s.width&&e.push(`width=${s.width}`),s.height&&e.push(`height=${s.height}`),s.resize&&e.push(`resize=${s.resize}`),s.format&&e.push(`format=${s.format}`),s.quality&&e.push(`quality=${s.quality}`),e.join("&")}};const WB="2.95.3",iy={"X-Client-Info":`storage-js/${WB}`};var GB=class extends Sf{constructor(s,e={},t,n){const r=new URL(s);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."));const i=r.href.replace(/\/$/,""),o=Me(Me({},iy),e);super(i,o,t,"storage")}async listBuckets(s){var e=this;return e.handleOperation(async()=>{const t=e.listBucketOptionsToQueryString(s);return await rm(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers})})}async getBucket(s){var e=this;return e.handleOperation(async()=>await rm(e.fetch,`${e.url}/bucket/${s}`,{headers:e.headers}))}async createBucket(s,e={public:!1}){var t=this;return t.handleOperation(async()=>await Yr(t.fetch,`${t.url}/bucket`,{id:s,name:s,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async updateBucket(s,e){var t=this;return t.handleOperation(async()=>await US(t.fetch,`${t.url}/bucket/${s}`,{id:s,name:s,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async emptyBucket(s){var e=this;return e.handleOperation(async()=>await Yr(e.fetch,`${e.url}/bucket/${s}/empty`,{},{headers:e.headers}))}async deleteBucket(s){var e=this;return e.handleOperation(async()=>await QA(e.fetch,`${e.url}/bucket/${s}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(s){const e={};return s&&("limit"in s&&(e.limit=String(s.limit)),"offset"in s&&(e.offset=String(s.offset)),s.search&&(e.search=s.search),s.sortColumn&&(e.sortColumn=s.sortColumn),s.sortOrder&&(e.sortOrder=s.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},qB=class extends Sf{constructor(s,e={},t){const n=s.replace(/\/$/,""),r=Me(Me({},iy),e);super(n,r,t,"storage")}async createBucket(s){var e=this;return e.handleOperation(async()=>await Yr(e.fetch,`${e.url}/bucket`,{name:s},{headers:e.headers}))}async listBuckets(s){var e=this;return e.handleOperation(async()=>{const t=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&t.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&t.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&t.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&t.set("sortOrder",s.sortOrder),s!=null&&s.search&&t.set("search",s.search);const n=t.toString(),r=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return await rm(e.fetch,r,{headers:e.headers})})}async deleteBucket(s){var e=this;return e.handleOperation(async()=>await QA(e.fetch,`${e.url}/bucket/${s}`,{},{headers:e.headers}))}from(s){var e=this;if(!MB(s))throw new Iw("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new RB({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(t,{get(r,i){const o=r[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(r,l),error:null}}catch(h){if(n)throw h;return{data:null,error:h}}}}})}},KB=class extends Sf{constructor(s,e={},t){const n=s.replace(/\/$/,""),r=Me(Me({},iy),{},{"Content-Type":"application/json"},e);super(n,r,t,"vectors")}async createIndex(s){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/CreateIndex`,s,{headers:e.headers})||{})}async getIndex(s,e){var t=this;return t.handleOperation(async()=>await cr.post(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:s,indexName:e},{headers:t.headers}))}async listIndexes(s){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/ListIndexes`,s,{headers:e.headers}))}async deleteIndex(s,e){var t=this;return t.handleOperation(async()=>await cr.post(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:s,indexName:e},{headers:t.headers})||{})}},XB=class extends Sf{constructor(s,e={},t){const n=s.replace(/\/$/,""),r=Me(Me({},iy),{},{"Content-Type":"application/json"},e);super(n,r,t,"vectors")}async putVectors(s){var e=this;if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/PutVectors`,s,{headers:e.headers})||{})}async getVectors(s){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/GetVectors`,s,{headers:e.headers}))}async listVectors(s){var e=this;if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/ListVectors`,s,{headers:e.headers}))}async queryVectors(s){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/QueryVectors`,s,{headers:e.headers}))}async deleteVectors(s){var e=this;if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/DeleteVectors`,s,{headers:e.headers})||{})}},YB=class extends Sf{constructor(s,e={},t){const n=s.replace(/\/$/,""),r=Me(Me({},iy),{},{"Content-Type":"application/json"},e);super(n,r,t,"vectors")}async createBucket(s){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:e.headers})||{})}async getBucket(s){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:s},{headers:e.headers}))}async listBuckets(s={}){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/ListVectorBuckets`,s,{headers:e.headers}))}async deleteBucket(s){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:e.headers})||{})}},JB=class extends YB{constructor(s,e={}){super(s,e.headers||{},e.fetch)}from(s){return new QB(this.url,this.headers,s,this.fetch)}async createBucket(s){var e=()=>super.createBucket,t=this;return e().call(t,s)}async getBucket(s){var e=()=>super.getBucket,t=this;return e().call(t,s)}async listBuckets(s={}){var e=()=>super.listBuckets,t=this;return e().call(t,s)}async deleteBucket(s){var e=()=>super.deleteBucket,t=this;return e().call(t,s)}},QB=class extends KB{constructor(s,e,t,n){super(s,e,n),this.vectorBucketName=t}async createIndex(s){var e=()=>super.createIndex,t=this;return e().call(t,Me(Me({},s),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(s={}){var e=()=>super.listIndexes,t=this;return e().call(t,Me(Me({},s),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(s){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,s)}async deleteIndex(s){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,s)}index(s){return new ZB(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},ZB=class extends XB{constructor(s,e,t,n,r){super(s,e,r),this.vectorBucketName=t,this.indexName=n}async putVectors(s){var e=()=>super.putVectors,t=this;return e().call(t,Me(Me({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(s){var e=()=>super.getVectors,t=this;return e().call(t,Me(Me({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(s={}){var e=()=>super.listVectors,t=this;return e().call(t,Me(Me({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(s){var e=()=>super.queryVectors,t=this;return e().call(t,Me(Me({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(s){var e=()=>super.deleteVectors,t=this;return e().call(t,Me(Me({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},e$=class extends GB{constructor(s,e={},t,n){super(s,e,t,n)}from(s){return new HB(this.url,this.headers,s,this.fetch)}get vectors(){return new JB(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new qB(this.url+"/iceberg",this.headers,this.fetch)}};const cL="2.95.3",mh=30*1e3,VS=3,Jx=VS*mh,t$="http://localhost:9999",n$="supabase.auth.token",s$={"X-Client-Info":`gotrue-js/${cL}`},zS="X-Supabase-Api-Version",uL={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},r$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,i$=600*1e3;class im extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function ke(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class o$ extends im{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function a$(s){return ke(s)&&s.name==="AuthApiError"}class cc extends im{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class la extends im{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Us extends la{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Qx(s){return ke(s)&&s.name==="AuthSessionMissingError"}class ah extends la{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ov extends la{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class jv extends la{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function l$(s){return ke(s)&&s.name==="AuthImplicitGrantRedirectError"}class hT extends la{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class c$ extends la{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class HS extends la{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Zx(s){return ke(s)&&s.name==="AuthRetryableFetchError"}class dT extends la{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class WS extends la{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const U0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fT=` 	
\r=`.split(""),u$=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<fT.length;e+=1)s[fT[e].charCodeAt(0)]=-2;for(let e=0;e<U0.length;e+=1)s[U0[e].charCodeAt(0)]=e;return s})();function pT(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(U0[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(U0[n]),e.queuedBits-=6}}function hL(s,e,t){const n=u$[s];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function mT(s){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{f$(o,n,t)};for(let o=0;o<s.length;o+=1)hL(s.charCodeAt(o),r,i);return e.join("")}function h$(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function d$(s,e){for(let t=0;t<s.length;t+=1){let n=s.charCodeAt(t);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(s.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}h$(n,e)}}function f$(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let n=1;n<6;n+=1)if((s>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function jh(s){const e=[],t={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<s.length;r+=1)hL(s.charCodeAt(r),t,n);return new Uint8Array(e)}function p$(s){const e=[];return d$(s,t=>e.push(t)),new Uint8Array(e)}function fc(s){const e=[],t={queue:0,queuedBits:0},n=r=>{e.push(r)};return s.forEach(r=>pT(r,t,n)),pT(null,t,n),e.join("")}function m$(s){return Math.round(Date.now()/1e3)+s}function g$(){return Symbol("auth-callback")}const In=()=>typeof window<"u"&&typeof document<"u",Ql={tested:!1,writable:!1},dL=()=>{if(!In())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ql.tested)return Ql.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Ql.tested=!0,Ql.writable=!0}catch{Ql.tested=!0,Ql.writable=!1}return Ql.writable};function y$(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((n,r)=>{e[r]=n}),e}const fL=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),v$=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",gh=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},Zl=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Mn=async(s,e)=>{await s.removeItem(e)};class jw{constructor(){this.promise=new jw.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}jw.promiseConstructor=Promise;function Fv(s){const e=s.split(".");if(e.length!==3)throw new WS("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!r$.test(e[n]))throw new WS("JWT not in base64url format");return{header:JSON.parse(mT(e[0])),payload:JSON.parse(mT(e[1])),signature:jh(e[2]),raw:{header:e[0],payload:e[1]}}}async function w$(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function b$(s,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function x$(s){return("0"+s.toString(16)).substr(-2)}function S$(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,x$).join("")}async function _$(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function A$(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await _$(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function lh(s,e,t=!1){const n=S$();let r=n;t&&(r+="/PASSWORD_RECOVERY"),await gh(s,`${e}-code-verifier`,r);const i=await A$(n);return[i,n===i?"plain":"s256"]}const E$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function k$(s){const e=s.headers.get(zS);if(!e||!e.match(E$))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function C$(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function T$(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const P$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ch(s){if(!P$.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function eS(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function R$(s,e){return new Proxy(s,{get:(t,n,r)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,n,r)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,n,r)}})}function gT(s){return JSON.parse(JSON.stringify(s))}const sc=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),L$=[502,503,504];async function yT(s){var e;if(!v$(s))throw new HS(sc(s),0);if(L$.includes(s.status))throw new HS(sc(s),s.status);let t;try{t=await s.json()}catch(i){throw new cc(sc(i),i)}let n;const r=k$(s);if(r&&r.getTime()>=uL["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new dT(sc(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Us}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new dT(sc(t),s.status,t.weak_password.reasons);throw new o$(sc(t),s.status||500,n)}const D$=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),t))};async function De(s,e,t,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[zS]||(i[zS]=uL["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",h=await M$(s,e,t+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(h):{data:Object.assign({},h),error:null}}async function M$(s,e,t,n,r,i){const o=D$(e,n,r,i);let l;try{l=await s(t,Object.assign({},o))}catch(h){throw console.error(h),new HS(sc(h),0)}if(l.ok||await yT(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(h){await yT(h)}}function Gr(s){var e;let t=null;O$(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=m$(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function vT(s){const e=Gr(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function Ia(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function N$(s){return{data:s,error:null}}function I$(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i}=s,o=Nw(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i},h=Object.assign({},o);return{data:{properties:l,user:h},error:null}}function wT(s){return s}function O$(s){return s.access_token&&s.refresh_token&&s.expires_in}const tS=["global","local","others"];class j${constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=fL(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=tS[0]){if(tS.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tS.join(", ")}`);try{return await De(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await De(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ia})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Nw(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await De(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:I$,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ke(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await De(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ia})}catch(t){if(ke(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,o,l,h;try{const d={nextPage:null,lastPage:0,total:0},p=await De(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:wT});if(p.error)throw p.error;const m=await p.json(),g=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(h=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&h!==void 0?h:[];return v.length>0&&(v.forEach(b=>{const x=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(b.split(";")[1].split("=")[1]);d[`${A}Page`]=x}),d.total=parseInt(g)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(ke(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){ch(e);try{return await De(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ia})}catch(t){if(ke(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ch(e);try{return await De(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ia})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){ch(e);try{return await De(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ia})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){ch(e.userId);try{const{data:t,error:n}=await De(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:n}}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ch(e.userId),ch(e.id);try{return{data:await De(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,r,i,o,l,h;try{const d={nextPage:null,lastPage:0,total:0},p=await De(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:wT});if(p.error)throw p.error;const m=await p.json(),g=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(h=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&h!==void 0?h:[];return v.length>0&&(v.forEach(b=>{const x=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(b.split(";")[1].split("=")[1]);d[`${A}Page`]=x}),d.total=parseInt(g)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(ke(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await De(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await De(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await De(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await De(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await De(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}}function bT(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}const uh={debug:!!(globalThis&&dL()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pL extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class F$ extends pL{}async function B$(s,e,t){uh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),uh.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){uh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,r.name);try{return await t()}finally{uh.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,r.name)}}else{if(e===0)throw uh.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new F$(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(uh.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function $$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function mL(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function U$(s){return parseInt(s,16)}function V$(s){const e=new TextEncoder().encode(s);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function z$(s){var e;const{chainId:t,domain:n,expirationTime:r,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:h,resources:d,scheme:p,uri:m,version:g}=s;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((e=s.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const v=mL(s.address),b=p?`${p}://${n}`:n,x=s.statement?`${s.statement}
`:"",A=`${b} wants you to sign in with your Ethereum account:
${v}

${x}`;let E=`URI: ${m}
Version: ${g}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(r&&(E+=`
Expiration Time: ${r.toISOString()}`),l&&(E+=`
Not Before: ${l.toISOString()}`),h&&(E+=`
Request ID: ${h}`),d){let R=`
Resources:`;for(const C of d){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);R+=`
- ${C}`}E+=R}return`${A}
${E}`}class rn extends Error{constructor({message:e,code:t,cause:n,name:r}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=r??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=t}}class V0 extends rn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function H$({error:s,options:e}){var t,n,r;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((t=i.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new rn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new rn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new rn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new rn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new rn({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new rn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new rn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const o=window.location.hostname;if(gL(o)){if(i.rp.id!==o)return new rn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new rn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new rn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new rn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new rn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function W$({error:s,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new rn({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const n=window.location.hostname;if(gL(n)){if(t.rpId!==n)return new rn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new rn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new rn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new rn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class G${createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const q$=new G$;function K$(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:e,user:t,excludeCredentials:n}=s,r=Nw(s,["challenge","user","excludeCredentials"]),i=jh(e).buffer,o=Object.assign(Object.assign({},t),{id:jh(t.id).buffer}),l=Object.assign(Object.assign({},r),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let h=0;h<n.length;h++){const d=n[h];l.excludeCredentials[h]=Object.assign(Object.assign({},d),{id:jh(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function X$(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:e,allowCredentials:t}=s,n=Nw(s,["challenge","allowCredentials"]),r=jh(e).buffer,i=Object.assign(Object.assign({},n),{challenge:r});if(t&&t.length>0){i.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const l=t[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:jh(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Y$(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const t=s;return{id:s.id,rawId:s.id,response:{attestationObject:fc(new Uint8Array(s.response.attestationObject)),clientDataJSON:fc(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function J$(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const t=s,n=s.getClientExtensionResults(),r=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:fc(new Uint8Array(r.authenticatorData)),clientDataJSON:fc(new Uint8Array(r.clientDataJSON)),signature:fc(new Uint8Array(r.signature)),userHandle:r.userHandle?fc(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function gL(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function xT(){var s,e;return!!(In()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Q$(s){try{const e=await navigator.credentials.create(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new V0("Browser returned unexpected credential type",e)}:{data:null,error:new V0("Empty credential response",e)}}catch(e){return{data:null,error:H$({error:e,options:s})}}}async function Z$(s){try{const e=await navigator.credentials.get(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new V0("Browser returned unexpected credential type",e)}:{data:null,error:new V0("Empty credential response",e)}}catch(e){return{data:null,error:W$({error:e,options:s})}}}const eU={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},tU={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function z0(...s){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),t=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),n={};for(const r of s)if(r)for(const i in r){const o=r[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(t(o))n[i]=o;else if(e(o)){const l=n[i];e(l)?n[i]=z0(l,o):n[i]=z0(o)}else n[i]=o}return n}function nU(s,e){return z0(eU,s,e||{})}function sU(s,e){return z0(tU,s,e||{})}class rU{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:r},i){var o;try{const{data:l,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!l)return{data:null,error:h};const d=r??q$.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:p}=l.webauthn.credential_options.publicKey;if(!p.name){const m=n;if(m)p.name=`${p.id}:${m}`;else{const v=(await this.client.getUser()).data.user,b=((o=v==null?void 0:v.user_metadata)===null||o===void 0?void 0:o.name)||(v==null?void 0:v.email)||(v==null?void 0:v.id)||"User";p.name=`${p.id}:${b}`}}p.displayName||(p.displayName=p.name)}switch(l.webauthn.type){case"create":{const p=nU(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:m,error:g}=await Q$({publicKey:p,signal:d});return m?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}case"request":{const p=sU(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:m,error:g}=await Z$(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:p,signal:d}));return m?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}}}catch(l){return ke(l)?{data:null,error:l}:{data:null,error:new cc("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},i){if(!t)return{data:null,error:new im("rpId is required for WebAuthn authentication")};try{if(!xT())return{data:null,error:new cc("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:r},{request:i});if(!o)return{data:null,error:l};const{webauthn:h}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:h.type,rpId:t,rpOrigins:n,credential_response:h.credential_response}})}catch(o){return ke(o)?{data:null,error:o}:{data:null,error:new cc("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},i){if(!t)return{data:null,error:new im("rpId is required for WebAuthn registration")};try{if(!xT())return{data:null,error:new cc("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(p=>{var m;return(m=p.data)===null||m===void 0?void 0:m.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===e&&g.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:l};const{data:h,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:r},{create:i});return h?this._verify({factorId:o.id,challengeId:h.challengeId,webauthn:{rpId:t,rpOrigins:n,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:d}}catch(o){return ke(o)?{data:null,error:o}:{data:null,error:new cc("Unexpected error in register",o)}}}}$$();const iU={url:t$,storageKey:n$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:s$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function ST(s,e,t){return await t()}const hh={};class om{get jwks(){var e,t;return(t=(e=hh[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){hh[this.storageKey]=Object.assign(Object.assign({},hh[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=hh[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){hh[this.storageKey]=Object.assign(Object.assign({},hh[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},iU),e);if(this.storageKey=i.storageKey,this.instanceID=(t=om.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,om.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&In()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new j$({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=fL(i.fetch),this.lock=i.lock||ST,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&In()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=B$:this.lock=ST,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new rU(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:dL()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=bT(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=bT(this.memoryStorage)),In()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cL}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},n="none";if(In()&&(t=y$(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),In()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),l$(i)){const h=(e=i.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ke(t)?this._returnResult({error:t}):this._returnResult({error:new cc("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Gr}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const h=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:d,session:h},error:null})}catch(i){if(ke(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:p,password:m,options:g}=e;let v=null,b=null;this.flowType==="pkce"&&([v,b]=await lh(this.storage,this.storageKey)),i=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:p,password:m,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:v,code_challenge_method:b},xform:Gr})}else if("phone"in e){const{phone:p,password:m,options:g}=e;i=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},channel:(r=g==null?void 0:g.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Gr})}else throw new Ov("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Mn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const h=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:d,session:h},error:null})}catch(i){if(await Mn(this.storage,`${this.storageKey}-code-verifier`),ke(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:vT})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:vT})}else throw new Ov("You must provide either an email or phone number and a password");const{data:n,error:r}=t;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!n||!n.session||!n.user){const i=new ah;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(ke(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,r,i,o,l,h,d,p,m,g;let v,b;if("message"in e)v=e.message,b=e.signature;else{const{chain:x,wallet:A,statement:E,options:R}=e;let C;if(In())if(typeof A=="object")C=A;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")C=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=A}const D=new URL((t=R==null?void 0:R.url)!==null&&t!==void 0?t:window.location.href),N=await C.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=mL(N[0]);let j=(n=R==null?void 0:R.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!j){const W=await C.request({method:"eth_chainId"});j=U$(W)}const F={domain:D.host,address:I,statement:E,uri:D.href,version:"1",chainId:j,nonce:(r=R==null?void 0:R.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(o=(i=R==null?void 0:R.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=R==null?void 0:R.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(h=R==null?void 0:R.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(d=R==null?void 0:R.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(p=R==null?void 0:R.signInWithEthereum)===null||p===void 0?void 0:p.resources};v=z$(F),b=await C.request({method:"personal_sign",params:[V$(v),I]})}try{const{data:x,error:A}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:b},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Gr});if(A)throw A;if(!x||!x.session||!x.user){const E=new ah;return this._returnResult({data:{user:null,session:null},error:E})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:A})}catch(x){if(ke(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var t,n,r,i,o,l,h,d,p,m,g,v;let b,x;if("message"in e)b=e.message,x=e.signature;else{const{chain:A,wallet:E,statement:R,options:C}=e;let D;if(In())if(typeof E=="object")D=E;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))D=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=E}const N=new URL((t=C==null?void 0:C.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in D&&D.signIn){const I=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),R?{statement:R}:null));let j;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")j=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)j=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)b=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),x=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${N.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(r=(n=C==null?void 0:C.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=C==null?void 0:C.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((o=C==null?void 0:C.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((h=C==null?void 0:C.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((m=(p=C==null?void 0:C.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",...C.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const I=await D.signMessage(new TextEncoder().encode(b),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=I}}try{const{data:A,error:E}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:fc(x)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Gr});if(E)throw E;if(!A||!A.session||!A.user){const R=new ah;return this._returnResult({data:{user:null,session:null},error:R})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:E})}catch(A){if(ke(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(e){const t=await Zl(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(t??"").split("/");try{if(!n&&this.flowType==="pkce")throw new c$;const{data:i,error:o}=await De(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Gr});if(await Mn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new ah;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(await Mn(this.storage,`${this.storageKey}-code-verifier`),ke(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:o}=e,l=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Gr}),{data:h,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!h||!h.session||!h.user){const p=new ah;return this._returnResult({data:{user:null,session:null},error:p})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:d})}catch(t){if(ke(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,r,i,o;try{if("email"in e){const{email:l,options:h}=e;let d=null,p=null;this.flowType==="pkce"&&([d,p]=await lh(this.storage,this.storageKey));const{error:m}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},create_user:(n=h==null?void 0:h.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:d,code_challenge_method:p},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:l,options:h}=e,{data:d,error:p}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},create_user:(i=h==null?void 0:h.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(o=h==null?void 0:h.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:p})}throw new Ov("You must provide either an email or phone number.")}catch(l){if(await Mn(this.storage,`${this.storageKey}-code-verifier`),ke(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await De(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Gr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const h=o.session,d=o.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:d,session:h},error:null})}catch(r){if(ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var t,n,r,i,o;try{let l=null,h=null;this.flowType==="pkce"&&([l,h]=await lh(this.storage,this.storageKey));const d=await De(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:h}),headers:this.headers,xform:N$});return!((i=d.data)===null||i===void 0)&&i.url&&In()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await Mn(this.storage,`${this.storageKey}-code-verifier`),ke(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Us;const{error:r}=await De(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(ke(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await De(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:l}=await De(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Ov("You must provide either an email or phone number and a type")}catch(t){if(ke(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Zl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Jx:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Zl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=eS()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=R$(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ia}):await this._useSession(async t=>{var n,r,i;const{data:o,error:l}=t;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Us}:await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Ia})})}catch(t){if(ke(t))return Qx(t)&&(await this._removeSession(),await Mn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Us;const o=r.session;let l=null,h=null;this.flowType==="pkce"&&e.email!=null&&([l,h]=await lh(this.storage,this.storageKey));const{data:d,error:p}=await De(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:h}),jwt:o.access_token,xform:Ia});if(p)throw p;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Mn(this.storage,`${this.storageKey}-code-verifier`),ke(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Us;const t=Date.now()/1e3;let n=t,r=!0,i=null;const{payload:o}=Fv(e.access_token);if(o.exp&&(n=o.exp,r=n<=t),r){const{data:l,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:h}=await this._getUser(e.access_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(t){if(ke(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Us;const{data:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(ke(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!In())throw new jv("No browser detected.");if(e.error||e.error_description||e.error_code)throw new jv(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new hT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new jv("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new hT("No code detected.");const{data:R,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:l,expires_at:h,token_type:d}=e;if(!i||!l||!o||!d)throw new jv("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(l);let g=p+m;h&&(g=parseInt(h));const v=g-p;v*1e3<=mh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const b=g-m;p-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,g,p):p-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,g,p);const{data:x,error:A}=await this._getUser(i);if(A)throw A;const E={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:m,expires_at:g,refresh_token:o,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:E,redirectType:e.type},error:null})}catch(n){if(ke(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Zl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i&&!Qx(i))return this._returnResult({error:i});const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(a$(l)&&(l.status===404||l.status===401||l.status===403)||Qx(l)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await Mn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=g$(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:i},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await lh(this.storage,this.storageKey,!0));try{return await De(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(await Mn(this.storage,`${this.storageKey}-code-verifier`),ke(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:r}=await this._useSession(async i=>{var o,l,h,d,p;const{data:m,error:g}=i;if(g)throw g;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await De(this.fetch,"GET",v,{headers:this.headers,jwt:(p=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&p!==void 0?p:void 0})});if(r)throw r;return In()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(ke(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:r,data:{session:i}}=t;if(r)throw r;const{options:o,provider:l,token:h,access_token:d,nonce:p}=e,m=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:h,access_token:d,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Gr}),{data:g,error:v}=m;return v?this._returnResult({data:{user:null,session:null},error:v}):!g||!g.session||!g.user?this._returnResult({data:{user:null,session:null},error:new ah}):(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),this._returnResult({data:g,error:v}))}catch(r){if(await Mn(this.storage,`${this.storageKey}-code-verifier`),ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)throw o;return await De(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await b$(async r=>(r>0&&await w$(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await De(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gr})),(r,i)=>{const o=200*Math.pow(2,r);return i&&Zx(i)&&Date.now()+o-n<mh})}catch(n){if(this._debug(t,"error",n),ke(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),In()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Zl(this.storage,this.storageKey);if(r&&this.userStorage){let o=await Zl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await gh(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:eS()}else if(r&&!r.user&&!r.user){const o=await Zl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(r.user=o.user,await Mn(this.storage,this.storageKey+"-user"),await gh(this.storage,this.storageKey,r)):r.user=eS()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Jx;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Jx}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Zx(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(r.access_token);!l&&(o!=null&&o.user)?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Us;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new jw;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Us;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),ke(i)){const o={data:null,error:i};return Zx(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(h){i.push(h)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Mn(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await gh(this.userStorage,this.storageKey+"-user",{user:t.user});const r=Object.assign({},t);delete r.user;const i=gT(r);await gh(this.storage,this.storageKey,i)}else{const r=gT(t);await gh(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Mn(this.storage,this.storageKey),await Mn(this.storage,this.storageKey+"-code-verifier"),await Mn(this.storage,this.storageKey+"-user"),this.userStorage&&await Mn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&In()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),mh);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/mh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${mh}ms, refresh threshold is ${VS} ticks`),r<=VS&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pL)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!In()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await lh(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?this._returnResult({data:null,error:i}):await De(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:d}=await De(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(e.factorType==="totp"&&h.type==="totp"&&(!((r=h==null?void 0:h.totp)===null||r===void 0)&&r.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Y$(e.webauthn.credential_response):J$(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:h}=await De(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:h}))})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=await De(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:K$(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:X$(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])r.all.push(i),i.status==="verified"&&r[i.factor_type].push(i);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,n,r,i;if(e)try{const{payload:v}=Fv(e);let b=null;v.aal&&(b=v.aal);let x=b;const{data:{user:A},error:E}=await this.getUser(e);if(E)return this._returnResult({data:null,error:E});((n=(t=A==null?void 0:A.factors)===null||t===void 0?void 0:t.filter(D=>D.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(x="aal2");const C=v.amr||[];return{data:{currentLevel:b,nextLevel:x,currentAuthenticationMethods:C},error:null}}catch(v){if(ke(v))return this._returnResult({data:null,error:v});throw v}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Fv(o.access_token);let d=null;h.aal&&(d=h.aal);let p=d;((i=(r=o.user.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(p="aal2");const g=h.amr||[];return{data:{currentLevel:d,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await De(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Us})})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!r)return this._returnResult({data:null,error:new Us});const o=await De(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&In()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!r)return this._returnResult({data:null,error:new Us});const o=await De(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&In()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await De(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new Us})})}catch(e){if(ke(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?(await De(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Us})})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(l=>l.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+i$>r)return n;const{data:i,error:o}=await De(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:v,error:b}=await this.getSession();if(b||!v.session)return this._returnResult({data:null,error:b});n=v.session.access_token}const{header:r,payload:i,signature:o,raw:{header:l,payload:h}}=Fv(n);t!=null&&t.allowExpired||C$(i.exp);const d=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!d){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:i,header:r,signature:o},error:null}}const p=T$(r.alg),m=await crypto.subtle.importKey("jwk",d,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,o,p$(`${l}.${h}`)))throw new WS("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}}om.nextInstanceID={};const oU=om,aU="2.95.3";let Ap="";typeof Deno<"u"?Ap="deno":typeof document<"u"?Ap="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ap="react-native":Ap="node";const lU={"X-Client-Info":`supabase-js-${Ap}/${aU}`},cU={headers:lU},uU={schema:"public"},hU={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},dU={};function am(s){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},am(s)}function fU(s,e){if(am(s)!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e);if(am(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function pU(s){var e=fU(s,"string");return am(e)=="symbol"?e:e+""}function mU(s,e,t){return(e=pU(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function _T(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function Wt(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_T(Object(t),!0).forEach(function(n){mU(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):_T(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}const gU=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),yU=()=>Headers,vU=(s,e,t)=>{const n=gU(t),r=yU();return async(i,o)=>{var l;const h=(l=await e())!==null&&l!==void 0?l:s;let d=new r(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",s),d.has("Authorization")||d.set("Authorization",`Bearer ${h}`),n(i,Wt(Wt({},o),{},{headers:d}))}};function wU(s){return s.endsWith("/")?s:s+"/"}function bU(s,e){var t,n;const{db:r,auth:i,realtime:o,global:l}=s,{db:h,auth:d,realtime:p,global:m}=e,g={db:Wt(Wt({},h),r),auth:Wt(Wt({},d),i),realtime:Wt(Wt({},p),o),storage:{},global:Wt(Wt(Wt({},m),l),{},{headers:Wt(Wt({},(t=m==null?void 0:m.headers)!==null&&t!==void 0?t:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return s.accessToken?g.accessToken=s.accessToken:delete g.accessToken,g}function xU(s){const e=s==null?void 0:s.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(wU(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var SU=class extends oU{constructor(s){super(s)}},_U=class{constructor(s,e,t){var n,r;this.supabaseUrl=s,this.supabaseKey=e;const i=xU(s);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:uU,realtime:dU,auth:Wt(Wt({},hU),{},{storageKey:o}),global:cU},h=bU(t??{},l);if(this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(r=h.global.headers)!==null&&r!==void 0?r:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=h.auth)!==null&&d!==void 0?d:{},this.headers,h.global.fetch)}this.fetch=vU(e,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Wt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new aB(new URL("rest/v1",i).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch,timeout:h.db.timeout,urlLengthLimit:h.db.urlLengthLimit}),this.storage=new e$(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new ZF(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,e,t)}channel(s,e={config:{}}){return this.realtime.channel(s,e)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,e,t;if(s.accessToken)return await s.accessToken();const{data:n}=await s.auth.getSession();return(e=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:e,detectSessionInUrl:t,storage:n,userStorage:r,storageKey:i,flowType:o,lock:l,debug:h,throwOnError:d},p,m){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SU({url:this.authUrl.href,headers:Wt(Wt({},g),p),storageKey:i,autoRefreshToken:s,persistSession:e,detectSessionInUrl:t,storage:n,userStorage:r,flowType:o,lock:l,debug:h,throwOnError:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new AB(this.realtimeUrl.href,Wt(Wt({},s),{},{params:Wt(Wt({},{apikey:this.supabaseKey}),s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,e)=>{this._handleTokenChanged(s,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(s,e,t){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const AU=(s,e,t)=>new _U(s,e,t);function EU(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const e=s.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}EU()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const kU="https://ujitytsuehpwqfxfduta.supabase.co",CU="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVqaXR5dHN1ZWhwd3FmeGZkdXRhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk3NDMwNzQsImV4cCI6MjA4NTMxOTA3NH0.2qqdG2p71VitdddjJMG3G_xGmm5HKb3gkLc03kMIdIM",Ns=AU(kU,CU),yL=M.createContext(void 0);function TU({children:s}){const[e,t]=M.useState(null),[n,r]=M.useState(null),[i,o]=M.useState(!0);M.useEffect(()=>{Ns.auth.getSession().then(({data:{session:p}})=>{t(p),r((p==null?void 0:p.user)??null),o(!1)});const{data:{subscription:d}}=Ns.auth.onAuthStateChange((p,m)=>{t(m),r((m==null?void 0:m.user)??null),o(!1)});return()=>d.unsubscribe()},[]);const h={session:e,user:n,loading:i,signOut:async()=>{await Ns.auth.signOut()}};return T.jsx(yL.Provider,{value:h,children:!i&&s})}const Mu=()=>{const s=M.useContext(yL);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s};function AT(s,e){if(typeof s=="function")return s(e);s!=null&&(s.current=e)}function PU(...s){return e=>{let t=!1;const n=s.map(r=>{const i=AT(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<n.length;r++){const i=n[r];typeof i=="function"?i():AT(s[r],null)}}}}var RU=Symbol.for("react.lazy"),H0=cj[" use ".trim().toString()];function LU(s){return typeof s=="object"&&s!==null&&"then"in s}function vL(s){return s!=null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===RU&&"_payload"in s&&LU(s._payload)}function wL(s){const e=MU(s),t=M.forwardRef((n,r)=>{let{children:i,...o}=n;vL(i)&&typeof H0=="function"&&(i=H0(i._payload));const l=M.Children.toArray(i),h=l.find(IU);if(h){const d=h.props.children,p=l.map(m=>m===h?M.Children.count(d)>1?M.Children.only(null):M.isValidElement(d)?d.props.children:null:m);return T.jsx(e,{...o,ref:r,children:M.isValidElement(d)?M.cloneElement(d,void 0,p):null})}return T.jsx(e,{...o,ref:r,children:i})});return t.displayName=`${s}.Slot`,t}var DU=wL("Slot");function MU(s){const e=M.forwardRef((t,n)=>{let{children:r,...i}=t;if(vL(r)&&typeof H0=="function"&&(r=H0(r._payload)),M.isValidElement(r)){const o=jU(r),l=OU(i,r.props);return r.type!==M.Fragment&&(l.ref=n?PU(n,o):o),M.cloneElement(r,l)}return M.Children.count(r)>1?M.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var NU=Symbol("radix.slottable");function IU(s){return M.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===NU}function OU(s,e){const t={...e};for(const n in e){const r=s[n],i=e[n];/^on[A-Z]/.test(n)?r&&i?t[n]=(...l)=>{const h=i(...l);return r(...l),h}:r&&(t[n]=r):n==="style"?t[n]={...r,...i}:n==="className"&&(t[n]=[r,i].filter(Boolean).join(" "))}return{...s,...t}}function jU(s){var n,r;let e=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(r=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}function bL(s){var e,t,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var r=s.length;for(e=0;e<r;e++)s[e]&&(t=bL(s[e]))&&(n&&(n+=" "),n+=t)}else for(t in s)s[t]&&(n&&(n+=" "),n+=t);return n}function _f(){for(var s,e,t=0,n="",r=arguments.length;t<r;t++)(s=arguments[t])&&(e=bL(s))&&(n&&(n+=" "),n+=e);return n}const ET=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,kT=_f,FU=(s,e)=>t=>{var n;if((e==null?void 0:e.variants)==null)return kT(s,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(d=>{const p=t==null?void 0:t[d],m=i==null?void 0:i[d];if(p===null)return null;const g=ET(p)||ET(m);return r[d][g]}),l=t&&Object.entries(t).reduce((d,p)=>{let[m,g]=p;return g===void 0||(d[m]=g),d},{}),h=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((d,p)=>{let{class:m,className:g,...v}=p;return Object.entries(v).every(b=>{let[x,A]=b;return Array.isArray(A)?A.includes({...i,...l}[x]):{...i,...l}[x]===A})?[...d,m,g]:d},[]);return kT(s,o,h,t==null?void 0:t.class,t==null?void 0:t.className)},BU=(s,e)=>{const t=new Array(s.length+e.length);for(let n=0;n<s.length;n++)t[n]=s[n];for(let n=0;n<e.length;n++)t[s.length+n]=e[n];return t},$U=(s,e)=>({classGroupId:s,validator:e}),xL=(s=new Map,e=null,t)=>({nextPart:s,validators:e,classGroupId:t}),W0="-",CT=[],UU="arbitrary..",VU=s=>{const e=HU(s),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return zU(o);const l=o.split(W0),h=l[0]===""&&l.length>1?1:0;return SL(l,h,e)},getConflictingClassGroupIds:(o,l)=>{if(l){const h=n[o],d=t[o];return h?d?BU(d,h):h:d||CT}return t[o]||CT}}},SL=(s,e,t)=>{if(s.length-e===0)return t.classGroupId;const r=s[e],i=t.nextPart.get(r);if(i){const d=SL(s,e+1,i);if(d)return d}const o=t.validators;if(o===null)return;const l=e===0?s.join(W0):s.slice(e).join(W0),h=o.length;for(let d=0;d<h;d++){const p=o[d];if(p.validator(l))return p.classGroupId}},zU=s=>s.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=s.slice(1,-1),t=e.indexOf(":"),n=e.slice(0,t);return n?UU+n:void 0})(),HU=s=>{const{theme:e,classGroups:t}=s;return WU(t,e)},WU=(s,e)=>{const t=xL();for(const n in s){const r=s[n];ZA(r,t,n,e)}return t},ZA=(s,e,t,n)=>{const r=s.length;for(let i=0;i<r;i++){const o=s[i];GU(o,e,t,n)}},GU=(s,e,t,n)=>{if(typeof s=="string"){qU(s,e,t);return}if(typeof s=="function"){KU(s,e,t,n);return}XU(s,e,t,n)},qU=(s,e,t)=>{const n=s===""?e:_L(e,s);n.classGroupId=t},KU=(s,e,t,n)=>{if(YU(s)){ZA(s(n),e,t,n);return}e.validators===null&&(e.validators=[]),e.validators.push($U(t,s))},XU=(s,e,t,n)=>{const r=Object.entries(s),i=r.length;for(let o=0;o<i;o++){const[l,h]=r[o];ZA(h,_L(e,l),t,n)}},_L=(s,e)=>{let t=s;const n=e.split(W0),r=n.length;for(let i=0;i<r;i++){const o=n[i];let l=t.nextPart.get(o);l||(l=xL(),t.nextPart.set(o,l)),t=l}return t},YU=s=>"isThemeGetter"in s&&s.isThemeGetter===!0,JU=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),n=Object.create(null);const r=(i,o)=>{t[i]=o,e++,e>s&&(e=0,n=t,t=Object.create(null))};return{get(i){let o=t[i];if(o!==void 0)return o;if((o=n[i])!==void 0)return r(i,o),o},set(i,o){i in t?t[i]=o:r(i,o)}}},GS="!",TT=":",QU=[],PT=(s,e,t,n,r)=>({modifiers:s,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:n,isExternal:r}),ZU=s=>{const{prefix:e,experimentalParseClassName:t}=s;let n=r=>{const i=[];let o=0,l=0,h=0,d;const p=r.length;for(let x=0;x<p;x++){const A=r[x];if(o===0&&l===0){if(A===TT){i.push(r.slice(h,x)),h=x+1;continue}if(A==="/"){d=x;continue}}A==="["?o++:A==="]"?o--:A==="("?l++:A===")"&&l--}const m=i.length===0?r:r.slice(h);let g=m,v=!1;m.endsWith(GS)?(g=m.slice(0,-1),v=!0):m.startsWith(GS)&&(g=m.slice(1),v=!0);const b=d&&d>h?d-h:void 0;return PT(i,v,g,b)};if(e){const r=e+TT,i=n;n=o=>o.startsWith(r)?i(o.slice(r.length)):PT(QU,!1,o,void 0,!0)}if(t){const r=n;n=i=>t({className:i,parseClassName:r})}return n},eV=s=>{const e=new Map;return s.orderSensitiveModifiers.forEach((t,n)=>{e.set(t,1e6+n)}),t=>{const n=[];let r=[];for(let i=0;i<t.length;i++){const o=t[i],l=o[0]==="[",h=e.has(o);l||h?(r.length>0&&(r.sort(),n.push(...r),r=[]),n.push(o)):r.push(o)}return r.length>0&&(r.sort(),n.push(...r)),n}},tV=s=>({cache:JU(s.cacheSize),parseClassName:ZU(s),sortModifiers:eV(s),...VU(s)}),nV=/\s+/,sV=(s,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:r,sortModifiers:i}=e,o=[],l=s.trim().split(nV);let h="";for(let d=l.length-1;d>=0;d-=1){const p=l[d],{isExternal:m,modifiers:g,hasImportantModifier:v,baseClassName:b,maybePostfixModifierPosition:x}=t(p);if(m){h=p+(h.length>0?" "+h:h);continue}let A=!!x,E=n(A?b.substring(0,x):b);if(!E){if(!A){h=p+(h.length>0?" "+h:h);continue}if(E=n(b),!E){h=p+(h.length>0?" "+h:h);continue}A=!1}const R=g.length===0?"":g.length===1?g[0]:i(g).join(":"),C=v?R+GS:R,D=C+E;if(o.indexOf(D)>-1)continue;o.push(D);const N=r(E,A);for(let I=0;I<N.length;++I){const j=N[I];o.push(C+j)}h=p+(h.length>0?" "+h:h)}return h},rV=(...s)=>{let e=0,t,n,r="";for(;e<s.length;)(t=s[e++])&&(n=AL(t))&&(r&&(r+=" "),r+=n);return r},AL=s=>{if(typeof s=="string")return s;let e,t="";for(let n=0;n<s.length;n++)s[n]&&(e=AL(s[n]))&&(t&&(t+=" "),t+=e);return t},iV=(s,...e)=>{let t,n,r,i;const o=h=>{const d=e.reduce((p,m)=>m(p),s());return t=tV(d),n=t.cache.get,r=t.cache.set,i=l,l(h)},l=h=>{const d=n(h);if(d)return d;const p=sV(h,t);return r(h,p),p};return i=o,(...h)=>i(rV(...h))},oV=[],hn=s=>{const e=t=>t[s]||oV;return e.isThemeGetter=!0,e},EL=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,kL=/^\((?:(\w[\w-]*):)?(.+)\)$/i,aV=/^\d+\/\d+$/,lV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uV=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,hV=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dV=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,dh=s=>aV.test(s),He=s=>!!s&&!Number.isNaN(Number(s)),Ra=s=>!!s&&Number.isInteger(Number(s)),nS=s=>s.endsWith("%")&&He(s.slice(0,-1)),co=s=>lV.test(s),fV=()=>!0,pV=s=>cV.test(s)&&!uV.test(s),CL=()=>!1,mV=s=>hV.test(s),gV=s=>dV.test(s),yV=s=>!be(s)&&!xe(s),vV=s=>Af(s,RL,CL),be=s=>EL.test(s),ec=s=>Af(s,LL,pV),sS=s=>Af(s,_V,He),RT=s=>Af(s,TL,CL),wV=s=>Af(s,PL,gV),Bv=s=>Af(s,DL,mV),xe=s=>kL.test(s),vp=s=>Ef(s,LL),bV=s=>Ef(s,AV),LT=s=>Ef(s,TL),xV=s=>Ef(s,RL),SV=s=>Ef(s,PL),$v=s=>Ef(s,DL,!0),Af=(s,e,t)=>{const n=EL.exec(s);return n?n[1]?e(n[1]):t(n[2]):!1},Ef=(s,e,t=!1)=>{const n=kL.exec(s);return n?n[1]?e(n[1]):t:!1},TL=s=>s==="position"||s==="percentage",PL=s=>s==="image"||s==="url",RL=s=>s==="length"||s==="size"||s==="bg-size",LL=s=>s==="length",_V=s=>s==="number",AV=s=>s==="family-name",DL=s=>s==="shadow",EV=()=>{const s=hn("color"),e=hn("font"),t=hn("text"),n=hn("font-weight"),r=hn("tracking"),i=hn("leading"),o=hn("breakpoint"),l=hn("container"),h=hn("spacing"),d=hn("radius"),p=hn("shadow"),m=hn("inset-shadow"),g=hn("text-shadow"),v=hn("drop-shadow"),b=hn("blur"),x=hn("perspective"),A=hn("aspect"),E=hn("ease"),R=hn("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...D(),xe,be],I=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],F=()=>[xe,be,h],W=()=>[dh,"full","auto",...F()],K=()=>[Ra,"none","subgrid",xe,be],J=()=>["auto",{span:["full",Ra,xe,be]},Ra,xe,be],ie=()=>[Ra,"auto",xe,be],ce=()=>["auto","min","max","fr",xe,be],Y=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ue=()=>["start","end","center","stretch","center-safe","end-safe"],Z=()=>["auto",...F()],X=()=>[dh,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...F()],V=()=>[s,xe,be],re=()=>[...D(),LT,RT,{position:[xe,be]}],ne=()=>["no-repeat",{repeat:["","x","y","space","round"]}],U=()=>["auto","cover","contain",xV,vV,{size:[xe,be]}],q=()=>[nS,vp,ec],oe=()=>["","none","full",d,xe,be],de=()=>["",He,vp,ec],Ce=()=>["solid","dashed","dotted","double"],Re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>[He,nS,LT,RT],Fe=()=>["","none",b,xe,be],ze=()=>["none",He,xe,be],Ze=()=>["none",He,xe,be],We=()=>[He,xe,be],Pn=()=>[dh,"full",...F()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[co],breakpoint:[co],color:[fV],container:[co],"drop-shadow":[co],ease:["in","out","in-out"],font:[yV],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[co],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[co],shadow:[co],spacing:["px",He],text:[co],"text-shadow":[co],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",dh,be,xe,A]}],container:["container"],columns:[{columns:[He,be,xe,l]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:W()}],"inset-x":[{"inset-x":W()}],"inset-y":[{"inset-y":W()}],start:[{start:W()}],end:[{end:W()}],top:[{top:W()}],right:[{right:W()}],bottom:[{bottom:W()}],left:[{left:W()}],visibility:["visible","invisible","collapse"],z:[{z:[Ra,"auto",xe,be]}],basis:[{basis:[dh,"full","auto",l,...F()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[He,dh,"auto","initial","none",be]}],grow:[{grow:["",He,xe,be]}],shrink:[{shrink:["",He,xe,be]}],order:[{order:[Ra,"first","last","none",xe,be]}],"grid-cols":[{"grid-cols":K()}],"col-start-end":[{col:J()}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":K()}],"row-start-end":[{row:J()}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ce()}],"auto-rows":[{"auto-rows":ce()}],gap:[{gap:F()}],"gap-x":[{"gap-x":F()}],"gap-y":[{"gap-y":F()}],"justify-content":[{justify:[...Y(),"normal"]}],"justify-items":[{"justify-items":[...ue(),"normal"]}],"justify-self":[{"justify-self":["auto",...ue()]}],"align-content":[{content:["normal",...Y()]}],"align-items":[{items:[...ue(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ue(),{baseline:["","last"]}]}],"place-content":[{"place-content":Y()}],"place-items":[{"place-items":[...ue(),"baseline"]}],"place-self":[{"place-self":["auto",...ue()]}],p:[{p:F()}],px:[{px:F()}],py:[{py:F()}],ps:[{ps:F()}],pe:[{pe:F()}],pt:[{pt:F()}],pr:[{pr:F()}],pb:[{pb:F()}],pl:[{pl:F()}],m:[{m:Z()}],mx:[{mx:Z()}],my:[{my:Z()}],ms:[{ms:Z()}],me:[{me:Z()}],mt:[{mt:Z()}],mr:[{mr:Z()}],mb:[{mb:Z()}],ml:[{ml:Z()}],"space-x":[{"space-x":F()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":F()}],"space-y-reverse":["space-y-reverse"],size:[{size:X()}],w:[{w:[l,"screen",...X()]}],"min-w":[{"min-w":[l,"screen","none",...X()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...X()]}],h:[{h:["screen","lh",...X()]}],"min-h":[{"min-h":["screen","lh","none",...X()]}],"max-h":[{"max-h":["screen","lh",...X()]}],"font-size":[{text:["base",t,vp,ec]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,xe,sS]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",nS,be]}],"font-family":[{font:[bV,be,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,xe,be]}],"line-clamp":[{"line-clamp":[He,"none",xe,sS]}],leading:[{leading:[i,...F()]}],"list-image":[{"list-image":["none",xe,be]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",xe,be]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:V()}],"text-color":[{text:V()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[He,"from-font","auto",xe,ec]}],"text-decoration-color":[{decoration:V()}],"underline-offset":[{"underline-offset":[He,"auto",xe,be]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe,be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe,be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:re()}],"bg-repeat":[{bg:ne()}],"bg-size":[{bg:U()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ra,xe,be],radial:["",xe,be],conic:[Ra,xe,be]},SV,wV]}],"bg-color":[{bg:V()}],"gradient-from-pos":[{from:q()}],"gradient-via-pos":[{via:q()}],"gradient-to-pos":[{to:q()}],"gradient-from":[{from:V()}],"gradient-via":[{via:V()}],"gradient-to":[{to:V()}],rounded:[{rounded:oe()}],"rounded-s":[{"rounded-s":oe()}],"rounded-e":[{"rounded-e":oe()}],"rounded-t":[{"rounded-t":oe()}],"rounded-r":[{"rounded-r":oe()}],"rounded-b":[{"rounded-b":oe()}],"rounded-l":[{"rounded-l":oe()}],"rounded-ss":[{"rounded-ss":oe()}],"rounded-se":[{"rounded-se":oe()}],"rounded-ee":[{"rounded-ee":oe()}],"rounded-es":[{"rounded-es":oe()}],"rounded-tl":[{"rounded-tl":oe()}],"rounded-tr":[{"rounded-tr":oe()}],"rounded-br":[{"rounded-br":oe()}],"rounded-bl":[{"rounded-bl":oe()}],"border-w":[{border:de()}],"border-w-x":[{"border-x":de()}],"border-w-y":[{"border-y":de()}],"border-w-s":[{"border-s":de()}],"border-w-e":[{"border-e":de()}],"border-w-t":[{"border-t":de()}],"border-w-r":[{"border-r":de()}],"border-w-b":[{"border-b":de()}],"border-w-l":[{"border-l":de()}],"divide-x":[{"divide-x":de()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":de()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ce(),"hidden","none"]}],"divide-style":[{divide:[...Ce(),"hidden","none"]}],"border-color":[{border:V()}],"border-color-x":[{"border-x":V()}],"border-color-y":[{"border-y":V()}],"border-color-s":[{"border-s":V()}],"border-color-e":[{"border-e":V()}],"border-color-t":[{"border-t":V()}],"border-color-r":[{"border-r":V()}],"border-color-b":[{"border-b":V()}],"border-color-l":[{"border-l":V()}],"divide-color":[{divide:V()}],"outline-style":[{outline:[...Ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[He,xe,be]}],"outline-w":[{outline:["",He,vp,ec]}],"outline-color":[{outline:V()}],shadow:[{shadow:["","none",p,$v,Bv]}],"shadow-color":[{shadow:V()}],"inset-shadow":[{"inset-shadow":["none",m,$v,Bv]}],"inset-shadow-color":[{"inset-shadow":V()}],"ring-w":[{ring:de()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:V()}],"ring-offset-w":[{"ring-offset":[He,ec]}],"ring-offset-color":[{"ring-offset":V()}],"inset-ring-w":[{"inset-ring":de()}],"inset-ring-color":[{"inset-ring":V()}],"text-shadow":[{"text-shadow":["none",g,$v,Bv]}],"text-shadow-color":[{"text-shadow":V()}],opacity:[{opacity:[He,xe,be]}],"mix-blend":[{"mix-blend":[...Re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[He]}],"mask-image-linear-from-pos":[{"mask-linear-from":he()}],"mask-image-linear-to-pos":[{"mask-linear-to":he()}],"mask-image-linear-from-color":[{"mask-linear-from":V()}],"mask-image-linear-to-color":[{"mask-linear-to":V()}],"mask-image-t-from-pos":[{"mask-t-from":he()}],"mask-image-t-to-pos":[{"mask-t-to":he()}],"mask-image-t-from-color":[{"mask-t-from":V()}],"mask-image-t-to-color":[{"mask-t-to":V()}],"mask-image-r-from-pos":[{"mask-r-from":he()}],"mask-image-r-to-pos":[{"mask-r-to":he()}],"mask-image-r-from-color":[{"mask-r-from":V()}],"mask-image-r-to-color":[{"mask-r-to":V()}],"mask-image-b-from-pos":[{"mask-b-from":he()}],"mask-image-b-to-pos":[{"mask-b-to":he()}],"mask-image-b-from-color":[{"mask-b-from":V()}],"mask-image-b-to-color":[{"mask-b-to":V()}],"mask-image-l-from-pos":[{"mask-l-from":he()}],"mask-image-l-to-pos":[{"mask-l-to":he()}],"mask-image-l-from-color":[{"mask-l-from":V()}],"mask-image-l-to-color":[{"mask-l-to":V()}],"mask-image-x-from-pos":[{"mask-x-from":he()}],"mask-image-x-to-pos":[{"mask-x-to":he()}],"mask-image-x-from-color":[{"mask-x-from":V()}],"mask-image-x-to-color":[{"mask-x-to":V()}],"mask-image-y-from-pos":[{"mask-y-from":he()}],"mask-image-y-to-pos":[{"mask-y-to":he()}],"mask-image-y-from-color":[{"mask-y-from":V()}],"mask-image-y-to-color":[{"mask-y-to":V()}],"mask-image-radial":[{"mask-radial":[xe,be]}],"mask-image-radial-from-pos":[{"mask-radial-from":he()}],"mask-image-radial-to-pos":[{"mask-radial-to":he()}],"mask-image-radial-from-color":[{"mask-radial-from":V()}],"mask-image-radial-to-color":[{"mask-radial-to":V()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":D()}],"mask-image-conic-pos":[{"mask-conic":[He]}],"mask-image-conic-from-pos":[{"mask-conic-from":he()}],"mask-image-conic-to-pos":[{"mask-conic-to":he()}],"mask-image-conic-from-color":[{"mask-conic-from":V()}],"mask-image-conic-to-color":[{"mask-conic-to":V()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:re()}],"mask-repeat":[{mask:ne()}],"mask-size":[{mask:U()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",xe,be]}],filter:[{filter:["","none",xe,be]}],blur:[{blur:Fe()}],brightness:[{brightness:[He,xe,be]}],contrast:[{contrast:[He,xe,be]}],"drop-shadow":[{"drop-shadow":["","none",v,$v,Bv]}],"drop-shadow-color":[{"drop-shadow":V()}],grayscale:[{grayscale:["",He,xe,be]}],"hue-rotate":[{"hue-rotate":[He,xe,be]}],invert:[{invert:["",He,xe,be]}],saturate:[{saturate:[He,xe,be]}],sepia:[{sepia:["",He,xe,be]}],"backdrop-filter":[{"backdrop-filter":["","none",xe,be]}],"backdrop-blur":[{"backdrop-blur":Fe()}],"backdrop-brightness":[{"backdrop-brightness":[He,xe,be]}],"backdrop-contrast":[{"backdrop-contrast":[He,xe,be]}],"backdrop-grayscale":[{"backdrop-grayscale":["",He,xe,be]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[He,xe,be]}],"backdrop-invert":[{"backdrop-invert":["",He,xe,be]}],"backdrop-opacity":[{"backdrop-opacity":[He,xe,be]}],"backdrop-saturate":[{"backdrop-saturate":[He,xe,be]}],"backdrop-sepia":[{"backdrop-sepia":["",He,xe,be]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":F()}],"border-spacing-x":[{"border-spacing-x":F()}],"border-spacing-y":[{"border-spacing-y":F()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",xe,be]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[He,"initial",xe,be]}],ease:[{ease:["linear","initial",E,xe,be]}],delay:[{delay:[He,xe,be]}],animate:[{animate:["none",R,xe,be]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,xe,be]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:ze()}],"rotate-x":[{"rotate-x":ze()}],"rotate-y":[{"rotate-y":ze()}],"rotate-z":[{"rotate-z":ze()}],scale:[{scale:Ze()}],"scale-x":[{"scale-x":Ze()}],"scale-y":[{"scale-y":Ze()}],"scale-z":[{"scale-z":Ze()}],"scale-3d":["scale-3d"],skew:[{skew:We()}],"skew-x":[{"skew-x":We()}],"skew-y":[{"skew-y":We()}],transform:[{transform:[xe,be,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Pn()}],"translate-x":[{"translate-x":Pn()}],"translate-y":[{"translate-y":Pn()}],"translate-z":[{"translate-z":Pn()}],"translate-none":["translate-none"],accent:[{accent:V()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:V()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe,be]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe,be]}],fill:[{fill:["none",...V()]}],"stroke-w":[{stroke:[He,vp,ec,sS]}],stroke:[{stroke:["none",...V()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},kV=iV(EV);function Ru(...s){return kV(_f(s))}const CV=FU("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),en=M.forwardRef(({className:s,variant:e,size:t,asChild:n=!1,...r},i)=>{const o=n?DU:"button";return T.jsx(o,{className:Ru(CV({variant:e,size:t,className:s})),ref:i,...r})});en.displayName="Button";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ML=(...s)=>s.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=M.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:o,...l},h)=>M.createElement("svg",{ref:h,...PV,width:e,height:e,stroke:s,strokeWidth:n?Number(t)*24/Number(e):t,className:ML("lucide",r),...l},[...o.map(([d,p])=>M.createElement(d,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=(s,e)=>{const t=M.forwardRef(({className:n,...r},i)=>M.createElement(RV,{ref:i,iconNode:e,className:ML(`lucide-${TV(s)}`,n),...r}));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Fw=_t("ArrowLeft",LV);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],MV=_t("Bookmark",DV);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],IV=_t("Check",NV);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rS=_t("ChevronDown",OV);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],FV=_t("CircleAlert",jV);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$V=_t("CircleCheck",BV);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],VV=_t("CloudUpload",UV);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],HV=_t("Copy",zV);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],GV=_t("Download",WV);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],DT=_t("FileText",qV);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],XV=_t("LayoutDashboard",KV);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],lm=_t("LoaderCircle",YV);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],QV=_t("Lock",JV);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],e3=_t("LogIn",ZV);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],NL=_t("LogOut",t3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],s3=_t("Mail",n3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],i3=_t("Maximize2",r3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],a3=_t("Plus",o3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],MT=_t("Search",l3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],qS=_t("Share2",c3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],h3=_t("ShieldCheck",u3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],f3=_t("Trash2",d3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],IL=_t("Upload",p3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],g3=_t("UserPlus",m3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],OL=_t("User",y3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],w3=_t("X",v3);function b3(){const{signOut:s}=Mu(),e=aa(),t=[{href:"/dashboard",label:"Dashboard",icon:XV},{href:"/upload",label:"Upload",icon:IL},{href:"/profile",label:"Profile",icon:OL}];return T.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[T.jsx("header",{className:"sticky top-0 z-50 w-full bg-background/80 backdrop-blur-md border-b border-border shadow-sm",children:T.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[T.jsx(Is,{to:"/",className:"flex items-center gap-2",children:T.jsx("div",{className:"bg-accent/40 px-6 py-2 rounded-full border border-accent shadow-sm",children:T.jsxs("span",{className:"font-bold text-lg tracking-tight text-foreground",children:["Notes",T.jsx("span",{className:"text-primary",children:"Pathv"})]})})}),T.jsx("nav",{className:"hidden md:flex items-center gap-1",children:t.map(n=>T.jsxs(Is,{to:n.href,className:Ru("flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",e.pathname===n.href?"bg-primary text-primary-foreground shadow-md shadow-primary/20":"text-muted-foreground hover:text-foreground hover:bg-secondary/50"),children:[T.jsx(n.icon,{className:"h-4 w-4"}),n.label]},n.href))}),T.jsx("div",{className:"flex items-center gap-2",children:T.jsxs(en,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 gap-2",onClick:s,children:[T.jsx(NL,{className:"h-4 w-4"}),T.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})})]})}),T.jsx("main",{className:"flex-1 container mx-auto p-4 md:p-6 lg:p-8 animate-in fade-in duration-500",children:T.jsx(pF,{})}),T.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-background border-t border-border z-50 px-4 py-2 flex justify-around items-center",children:t.map(n=>T.jsxs(Is,{to:n.href,className:Ru("flex flex-col items-center gap-1 p-2 rounded-lg text-xs font-medium transition-colors",e.pathname===n.href?"text-primary":"text-muted-foreground hover:text-foreground"),children:[T.jsx(n.icon,{className:"h-5 w-5"}),n.label]},n.href))})]})}const jL=M.createContext({});function x3(s){const e=M.useRef(null);return e.current===null&&(e.current=s()),e.current}const FL=typeof window<"u",S3=FL?M.useLayoutEffect:M.useEffect,eE=M.createContext(null);function tE(s,e){s.indexOf(e)===-1&&s.push(e)}function G0(s,e){const t=s.indexOf(e);t>-1&&s.splice(t,1)}const Yi=(s,e,t)=>t>e?e:t<s?s:t;let nE=()=>{};const na={},BL=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function $L(s){return typeof s=="object"&&s!==null}const UL=s=>/^0[^.\s]+$/u.test(s);function sE(s){let e;return()=>(e===void 0&&(e=s()),e)}const Ir=s=>s,_3=(s,e)=>t=>e(s(t)),oy=(...s)=>s.reduce(_3),cm=(s,e,t)=>{const n=e-s;return n===0?1:(t-s)/n};class rE{constructor(){this.subscriptions=[]}add(e){return tE(this.subscriptions,e),()=>G0(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const o=this.subscriptions[i];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const hi=s=>s*1e3,Nr=s=>s/1e3;function VL(s,e){return e?s*(1e3/e):0}const zL=(s,e,t)=>(((1-3*t+3*e)*s+(3*t-6*e))*s+3*e)*s,A3=1e-7,E3=12;function k3(s,e,t,n,r){let i,o,l=0;do o=e+(t-e)/2,i=zL(o,n,r)-s,i>0?t=o:e=o;while(Math.abs(i)>A3&&++l<E3);return o}function ay(s,e,t,n){if(s===e&&t===n)return Ir;const r=i=>k3(i,0,1,s,t);return i=>i===0||i===1?i:zL(r(i),e,n)}const HL=s=>e=>e<=.5?s(2*e)/2:(2-s(2*(1-e)))/2,WL=s=>e=>1-s(1-e),GL=ay(.33,1.53,.69,.99),iE=WL(GL),qL=HL(iE),KL=s=>(s*=2)<1?.5*iE(s):.5*(2-Math.pow(2,-10*(s-1))),oE=s=>1-Math.sin(Math.acos(s)),XL=WL(oE),YL=HL(oE),C3=ay(.42,0,1,1),T3=ay(0,0,.58,1),JL=ay(.42,0,.58,1),P3=s=>Array.isArray(s)&&typeof s[0]!="number",QL=s=>Array.isArray(s)&&typeof s[0]=="number",R3={linear:Ir,easeIn:C3,easeInOut:JL,easeOut:T3,circIn:oE,circInOut:YL,circOut:XL,backIn:iE,backInOut:qL,backOut:GL,anticipate:KL},L3=s=>typeof s=="string",NT=s=>{if(QL(s)){nE(s.length===4);const[e,t,n,r]=s;return ay(e,t,n,r)}else if(L3(s))return R3[s];return s},Uv=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function D3(s,e){let t=new Set,n=new Set,r=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function h(p){o.has(p)&&(d.schedule(p),s()),p(l)}const d={schedule:(p,m=!1,g=!1)=>{const b=g&&r?t:n;return m&&o.add(p),b.has(p)||b.add(p),p},cancel:p=>{n.delete(p),o.delete(p)},process:p=>{if(l=p,r){i=!0;return}r=!0,[t,n]=[n,t],t.forEach(h),t.clear(),r=!1,i&&(i=!1,d.process(p))}};return d}const M3=40;function ZL(s,e){let t=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>t=!0,o=Uv.reduce((C,D)=>(C[D]=D3(i),C),{}),{setup:l,read:h,resolveKeyframes:d,preUpdate:p,update:m,preRender:g,render:v,postRender:b}=o,x=()=>{const C=na.useManualTiming?r.timestamp:performance.now();t=!1,na.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(C-r.timestamp,M3),1)),r.timestamp=C,r.isProcessing=!0,l.process(r),h.process(r),d.process(r),p.process(r),m.process(r),g.process(r),v.process(r),b.process(r),r.isProcessing=!1,t&&e&&(n=!1,s(x))},A=()=>{t=!0,n=!0,r.isProcessing||s(x)};return{schedule:Uv.reduce((C,D)=>{const N=o[D];return C[D]=(I,j=!1,F=!1)=>(t||A(),N.schedule(I,j,F)),C},{}),cancel:C=>{for(let D=0;D<Uv.length;D++)o[Uv[D]].cancel(C)},state:r,steps:o}}const{schedule:St,cancel:Dl,state:Un,steps:iS}=ZL(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ir,!0);let n0;function N3(){n0=void 0}const fs={now:()=>(n0===void 0&&fs.set(Un.isProcessing||na.useManualTiming?Un.timestamp:performance.now()),n0),set:s=>{n0=s,queueMicrotask(N3)}},eD=s=>e=>typeof e=="string"&&e.startsWith(s),tD=eD("--"),I3=eD("var(--"),aE=s=>I3(s)?O3.test(s.split("/*")[0].trim()):!1,O3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function IT(s){return typeof s!="string"?!1:s.split("/*")[0].includes("var(--")}const kf={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},um={...kf,transform:s=>Yi(0,1,s)},Vv={...kf,default:1},Xp=s=>Math.round(s*1e5)/1e5,lE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function j3(s){return s==null}const F3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,cE=(s,e)=>t=>!!(typeof t=="string"&&F3.test(t)&&t.startsWith(s)||e&&!j3(t)&&Object.prototype.hasOwnProperty.call(t,e)),nD=(s,e,t)=>n=>{if(typeof n!="string")return n;const[r,i,o,l]=n.match(lE);return{[s]:parseFloat(r),[e]:parseFloat(i),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},B3=s=>Yi(0,255,s),oS={...kf,transform:s=>Math.round(B3(s))},pc={test:cE("rgb","red"),parse:nD("red","green","blue"),transform:({red:s,green:e,blue:t,alpha:n=1})=>"rgba("+oS.transform(s)+", "+oS.transform(e)+", "+oS.transform(t)+", "+Xp(um.transform(n))+")"};function $3(s){let e="",t="",n="",r="";return s.length>5?(e=s.substring(1,3),t=s.substring(3,5),n=s.substring(5,7),r=s.substring(7,9)):(e=s.substring(1,2),t=s.substring(2,3),n=s.substring(3,4),r=s.substring(4,5),e+=e,t+=t,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const KS={test:cE("#"),parse:$3,transform:pc.transform},ly=s=>({test:e=>typeof e=="string"&&e.endsWith(s)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${s}`}),La=ly("deg"),Xi=ly("%"),Se=ly("px"),U3=ly("vh"),V3=ly("vw"),OT={...Xi,parse:s=>Xi.parse(s)/100,transform:s=>Xi.transform(s*100)},Ch={test:cE("hsl","hue"),parse:nD("hue","saturation","lightness"),transform:({hue:s,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(s)+", "+Xi.transform(Xp(e))+", "+Xi.transform(Xp(t))+", "+Xp(um.transform(n))+")"},on={test:s=>pc.test(s)||KS.test(s)||Ch.test(s),parse:s=>pc.test(s)?pc.parse(s):Ch.test(s)?Ch.parse(s):KS.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?pc.transform(s):Ch.transform(s),getAnimatableNone:s=>{const e=on.parse(s);return e.alpha=0,on.transform(e)}},z3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function H3(s){var e,t;return isNaN(s)&&typeof s=="string"&&(((e=s.match(lE))==null?void 0:e.length)||0)+(((t=s.match(z3))==null?void 0:t.length)||0)>0}const sD="number",rD="color",W3="var",G3="var(",jT="${}",q3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function hm(s){const e=s.toString(),t=[],n={color:[],number:[],var:[]},r=[];let i=0;const l=e.replace(q3,h=>(on.test(h)?(n.color.push(i),r.push(rD),t.push(on.parse(h))):h.startsWith(G3)?(n.var.push(i),r.push(W3),t.push(h)):(n.number.push(i),r.push(sD),t.push(parseFloat(h))),++i,jT)).split(jT);return{values:t,split:l,indexes:n,types:r}}function iD(s){return hm(s).values}function oD(s){const{split:e,types:t}=hm(s),n=e.length;return r=>{let i="";for(let o=0;o<n;o++)if(i+=e[o],r[o]!==void 0){const l=t[o];l===sD?i+=Xp(r[o]):l===rD?i+=on.transform(r[o]):i+=r[o]}return i}}const K3=s=>typeof s=="number"?0:on.test(s)?on.getAnimatableNone(s):s;function X3(s){const e=iD(s);return oD(s)(e.map(K3))}const Ml={test:H3,parse:iD,createTransformer:oD,getAnimatableNone:X3};function aS(s,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?s+(e-s)*6*t:t<1/2?e:t<2/3?s+(e-s)*(2/3-t)*6:s}function Y3({hue:s,saturation:e,lightness:t,alpha:n}){s/=360,e/=100,t/=100;let r=0,i=0,o=0;if(!e)r=i=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,h=2*t-l;r=aS(h,l,s+1/3),i=aS(h,l,s),o=aS(h,l,s-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function q0(s,e){return t=>t>0?e:s}const Ft=(s,e,t)=>s+(e-s)*t,lS=(s,e,t)=>{const n=s*s,r=t*(e*e-n)+n;return r<0?0:Math.sqrt(r)},J3=[KS,pc,Ch],Q3=s=>J3.find(e=>e.test(s));function FT(s){const e=Q3(s);if(!e)return!1;let t=e.parse(s);return e===Ch&&(t=Y3(t)),t}const BT=(s,e)=>{const t=FT(s),n=FT(e);if(!t||!n)return q0(s,e);const r={...t};return i=>(r.red=lS(t.red,n.red,i),r.green=lS(t.green,n.green,i),r.blue=lS(t.blue,n.blue,i),r.alpha=Ft(t.alpha,n.alpha,i),pc.transform(r))},XS=new Set(["none","hidden"]);function Z3(s,e){return XS.has(s)?t=>t<=0?s:e:t=>t>=1?e:s}function e4(s,e){return t=>Ft(s,e,t)}function uE(s){return typeof s=="number"?e4:typeof s=="string"?aE(s)?q0:on.test(s)?BT:s4:Array.isArray(s)?aD:typeof s=="object"?on.test(s)?BT:t4:q0}function aD(s,e){const t=[...s],n=t.length,r=s.map((i,o)=>uE(i)(i,e[o]));return i=>{for(let o=0;o<n;o++)t[o]=r[o](i);return t}}function t4(s,e){const t={...s,...e},n={};for(const r in t)s[r]!==void 0&&e[r]!==void 0&&(n[r]=uE(s[r])(s[r],e[r]));return r=>{for(const i in n)t[i]=n[i](r);return t}}function n4(s,e){const t=[],n={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const i=e.types[r],o=s.indexes[i][n[i]],l=s.values[o]??0;t[r]=l,n[i]++}return t}const s4=(s,e)=>{const t=Ml.createTransformer(e),n=hm(s),r=hm(e);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?XS.has(s)&&!r.values.length||XS.has(e)&&!n.values.length?Z3(s,e):oy(aD(n4(n,r),r.values),t):q0(s,e)};function lD(s,e,t){return typeof s=="number"&&typeof e=="number"&&typeof t=="number"?Ft(s,e,t):uE(s)(s,e)}const r4=s=>{const e=({timestamp:t})=>s(t);return{start:(t=!0)=>St.update(e,t),stop:()=>Dl(e),now:()=>Un.isProcessing?Un.timestamp:fs.now()}},cD=(s,e,t=10)=>{let n="";const r=Math.max(Math.round(e/t),2);for(let i=0;i<r;i++)n+=Math.round(s(i/(r-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},K0=2e4;function hE(s){let e=0;const t=50;let n=s.next(e);for(;!n.done&&e<K0;)e+=t,n=s.next(e);return e>=K0?1/0:e}function i4(s,e=100,t){const n=t({...s,keyframes:[0,e]}),r=Math.min(hE(n),K0);return{type:"keyframes",ease:i=>n.next(r*i).value/e,duration:Nr(r)}}const o4=5;function uD(s,e,t){const n=Math.max(e-o4,0);return VL(t-s(n),e-n)}const qt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},cS=.001;function a4({duration:s=qt.duration,bounce:e=qt.bounce,velocity:t=qt.velocity,mass:n=qt.mass}){let r,i,o=1-e;o=Yi(qt.minDamping,qt.maxDamping,o),s=Yi(qt.minDuration,qt.maxDuration,Nr(s)),o<1?(r=d=>{const p=d*o,m=p*s,g=p-t,v=YS(d,o),b=Math.exp(-m);return cS-g/v*b},i=d=>{const m=d*o*s,g=m*t+t,v=Math.pow(o,2)*Math.pow(d,2)*s,b=Math.exp(-m),x=YS(Math.pow(d,2),o);return(-r(d)+cS>0?-1:1)*((g-v)*b)/x}):(r=d=>{const p=Math.exp(-d*s),m=(d-t)*s+1;return-cS+p*m},i=d=>{const p=Math.exp(-d*s),m=(t-d)*(s*s);return p*m});const l=5/s,h=c4(r,i,l);if(s=hi(s),isNaN(h))return{stiffness:qt.stiffness,damping:qt.damping,duration:s};{const d=Math.pow(h,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:s}}}const l4=12;function c4(s,e,t){let n=t;for(let r=1;r<l4;r++)n=n-s(n)/e(n);return n}function YS(s,e){return s*Math.sqrt(1-e*e)}const u4=["duration","bounce"],h4=["stiffness","damping","mass"];function $T(s,e){return e.some(t=>s[t]!==void 0)}function d4(s){let e={velocity:qt.velocity,stiffness:qt.stiffness,damping:qt.damping,mass:qt.mass,isResolvedFromDuration:!1,...s};if(!$T(s,h4)&&$T(s,u4))if(s.visualDuration){const t=s.visualDuration,n=2*Math.PI/(t*1.2),r=n*n,i=2*Yi(.05,1,1-(s.bounce||0))*Math.sqrt(r);e={...e,mass:qt.mass,stiffness:r,damping:i}}else{const t=a4(s);e={...e,...t,mass:qt.mass},e.isResolvedFromDuration=!0}return e}function X0(s=qt.visualDuration,e=qt.bounce){const t=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:e}:s;let{restSpeed:n,restDelta:r}=t;const i=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],l={done:!1,value:i},{stiffness:h,damping:d,mass:p,duration:m,velocity:g,isResolvedFromDuration:v}=d4({...t,velocity:-Nr(t.velocity||0)}),b=g||0,x=d/(2*Math.sqrt(h*p)),A=o-i,E=Nr(Math.sqrt(h/p)),R=Math.abs(A)<5;n||(n=R?qt.restSpeed.granular:qt.restSpeed.default),r||(r=R?qt.restDelta.granular:qt.restDelta.default);let C;if(x<1){const N=YS(E,x);C=I=>{const j=Math.exp(-x*E*I);return o-j*((b+x*E*A)/N*Math.sin(N*I)+A*Math.cos(N*I))}}else if(x===1)C=N=>o-Math.exp(-E*N)*(A+(b+E*A)*N);else{const N=E*Math.sqrt(x*x-1);C=I=>{const j=Math.exp(-x*E*I),F=Math.min(N*I,300);return o-j*((b+x*E*A)*Math.sinh(F)+N*A*Math.cosh(F))/N}}const D={calculatedDuration:v&&m||null,next:N=>{const I=C(N);if(v)l.done=N>=m;else{let j=N===0?b:0;x<1&&(j=N===0?hi(b):uD(C,N,I));const F=Math.abs(j)<=n,W=Math.abs(o-I)<=r;l.done=F&&W}return l.value=l.done?o:I,l},toString:()=>{const N=Math.min(hE(D),K0),I=cD(j=>D.next(N*j).value,N,30);return N+"ms "+I},toTransition:()=>{}};return D}X0.applyToOptions=s=>{const e=i4(s,100,X0);return s.ease=e.ease,s.duration=hi(e.duration),s.type="keyframes",s};function JS({keyframes:s,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:h,restDelta:d=.5,restSpeed:p}){const m=s[0],g={done:!1,value:m},v=F=>l!==void 0&&F<l||h!==void 0&&F>h,b=F=>l===void 0?h:h===void 0||Math.abs(l-F)<Math.abs(h-F)?l:h;let x=t*e;const A=m+x,E=o===void 0?A:o(A);E!==A&&(x=E-m);const R=F=>-x*Math.exp(-F/n),C=F=>E+R(F),D=F=>{const W=R(F),K=C(F);g.done=Math.abs(W)<=d,g.value=g.done?E:K};let N,I;const j=F=>{v(g.value)&&(N=F,I=X0({keyframes:[g.value,b(g.value)],velocity:uD(C,F,g.value),damping:r,stiffness:i,restDelta:d,restSpeed:p}))};return j(0),{calculatedDuration:null,next:F=>{let W=!1;return!I&&N===void 0&&(W=!0,D(F),j(F)),N!==void 0&&F>=N?I.next(F-N):(!W&&D(F),g)}}}function f4(s,e,t){const n=[],r=t||na.mix||lD,i=s.length-1;for(let o=0;o<i;o++){let l=r(s[o],s[o+1]);if(e){const h=Array.isArray(e)?e[o]||Ir:e;l=oy(h,l)}n.push(l)}return n}function p4(s,e,{clamp:t=!0,ease:n,mixer:r}={}){const i=s.length;if(nE(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=s[0]===s[1];s[0]>s[i-1]&&(s=[...s].reverse(),e=[...e].reverse());const l=f4(e,n,r),h=l.length,d=p=>{if(o&&p<s[0])return e[0];let m=0;if(h>1)for(;m<s.length-2&&!(p<s[m+1]);m++);const g=cm(s[m],s[m+1],p);return l[m](g)};return t?p=>d(Yi(s[0],s[i-1],p)):d}function m4(s,e){const t=s[s.length-1];for(let n=1;n<=e;n++){const r=cm(0,e,n);s.push(Ft(t,1,r))}}function g4(s){const e=[0];return m4(e,s.length-1),e}function y4(s,e){return s.map(t=>t*e)}function v4(s,e){return s.map(()=>e||JL).splice(0,s.length-1)}function Yp({duration:s=300,keyframes:e,times:t,ease:n="easeInOut"}){const r=P3(n)?n.map(NT):NT(n),i={done:!1,value:e[0]},o=y4(t&&t.length===e.length?t:g4(e),s),l=p4(o,e,{ease:Array.isArray(r)?r:v4(e,r)});return{calculatedDuration:s,next:h=>(i.value=l(h),i.done=h>=s,i)}}const w4=s=>s!==null;function dE(s,{repeat:e,repeatType:t="loop"},n,r=1){const i=s.filter(w4),l=r<0||e&&t!=="loop"&&e%2===1?0:i.length-1;return!l||n===void 0?i[l]:n}const b4={decay:JS,inertia:JS,tween:Yp,keyframes:Yp,spring:X0};function hD(s){typeof s.type=="string"&&(s.type=b4[s.type])}class fE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const x4=s=>s/100;class pE extends fE{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,r;const{motionValue:t}=this.options;t&&t.updatedAt!==fs.now()&&this.tick(fs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(n=this.options).onStop)==null||r.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;hD(e);const{type:t=Yp,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:o=0}=e;let{keyframes:l}=e;const h=t||Yp;h!==Yp&&typeof l[0]!="number"&&(this.mixKeyframes=oy(x4,lD(l[0],l[1])),l=[0,100]);const d=h({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=hE(d));const{calculatedDuration:p}=d;this.calculatedDuration=p,this.resolvedDuration=p+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=d}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:h}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:p,repeat:m,repeatType:g,repeatDelay:v,type:b,onUpdate:x,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const E=this.currentTime-d*(this.playbackSpeed>=0?1:-1),R=this.playbackSpeed>=0?E<0:E>r;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let C=this.currentTime,D=n;if(m){const F=Math.min(this.currentTime,r)/l;let W=Math.floor(F),K=F%1;!K&&F>=1&&(K=1),K===1&&W--,W=Math.min(W,m+1),!!(W%2)&&(g==="reverse"?(K=1-K,v&&(K-=v/l)):g==="mirror"&&(D=o)),C=Yi(0,1,K)*l}const N=R?{done:!1,value:p[0]}:D.next(C);i&&(N.value=i(N.value));let{done:I}=N;!R&&h!==null&&(I=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return j&&b!==JS&&(N.value=dE(p,this.options,A,this.speed)),x&&x(N.value),j&&this.finish(),N}then(e,t){return this.finished.then(e,t)}get duration(){return Nr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Nr(e)}get time(){return Nr(this.currentTime)}set time(e){var t;e=hi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(fs.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Nr(this.currentTime))}play(){var r,i;if(this.isStopped)return;const{driver:e=r4,startTime:t}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(r=this.options).onPlay)==null||i.call(r);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(fs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function S4(s){for(let e=1;e<s.length;e++)s[e]??(s[e]=s[e-1])}const mc=s=>s*180/Math.PI,QS=s=>{const e=mc(Math.atan2(s[1],s[0]));return ZS(e)},_4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:QS,rotateZ:QS,skewX:s=>mc(Math.atan(s[1])),skewY:s=>mc(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},ZS=s=>(s=s%360,s<0&&(s+=360),s),UT=QS,VT=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),zT=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),A4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:VT,scaleY:zT,scale:s=>(VT(s)+zT(s))/2,rotateX:s=>ZS(mc(Math.atan2(s[6],s[5]))),rotateY:s=>ZS(mc(Math.atan2(-s[2],s[0]))),rotateZ:UT,rotate:UT,skewX:s=>mc(Math.atan(s[4])),skewY:s=>mc(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function e_(s){return s.includes("scale")?1:0}function t_(s,e){if(!s||s==="none")return e_(e);const t=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,r;if(t)n=A4,r=t;else{const l=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=_4,r=l}if(!r)return e_(e);const i=n[e],o=r[1].split(",").map(k4);return typeof i=="function"?i(o):o[i]}const E4=(s,e)=>{const{transform:t="none"}=getComputedStyle(s);return t_(t,e)};function k4(s){return parseFloat(s.trim())}const Cf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Tf=new Set(Cf),HT=s=>s===kf||s===Se,C4=new Set(["x","y","z"]),T4=Cf.filter(s=>!C4.has(s));function P4(s){const e=[];return T4.forEach(t=>{const n=s.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const Rl={width:({x:s},{paddingLeft:e="0",paddingRight:t="0"})=>s.max-s.min-parseFloat(e)-parseFloat(t),height:({y:s},{paddingTop:e="0",paddingBottom:t="0"})=>s.max-s.min-parseFloat(e)-parseFloat(t),top:(s,{top:e})=>parseFloat(e),left:(s,{left:e})=>parseFloat(e),bottom:({y:s},{top:e})=>parseFloat(e)+(s.max-s.min),right:({x:s},{left:e})=>parseFloat(e)+(s.max-s.min),x:(s,{transform:e})=>t_(e,"x"),y:(s,{transform:e})=>t_(e,"y")};Rl.translateX=Rl.x;Rl.translateY=Rl.y;const Pu=new Set;let n_=!1,s_=!1,r_=!1;function dD(){if(s_){const s=Array.from(Pu).filter(n=>n.needsMeasurement),e=new Set(s.map(n=>n.element)),t=new Map;e.forEach(n=>{const r=P4(n);r.length&&(t.set(n,r),n.render())}),s.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const r=t.get(n);r&&r.forEach(([i,o])=>{var l;(l=n.getValue(i))==null||l.set(o)})}),s.forEach(n=>n.measureEndState()),s.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}s_=!1,n_=!1,Pu.forEach(s=>s.complete(r_)),Pu.clear()}function fD(){Pu.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(s_=!0)})}function R4(){r_=!0,fD(),dD(),r_=!1}class mE{constructor(e,t,n,r,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Pu.add(this),n_||(n_=!0,St.read(fD),St.resolveKeyframes(dD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(e[0]===null){const i=r==null?void 0:r.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(n&&t){const l=n.readValue(t,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),r&&i===void 0&&r.set(e[0])}S4(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Pu.delete(this)}cancel(){this.state==="scheduled"&&(Pu.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const L4=s=>s.startsWith("--");function D4(s,e,t){L4(e)?s.style.setProperty(e,t):s.style[e]=t}const M4=sE(()=>window.ScrollTimeline!==void 0),N4={};function I4(s,e){const t=sE(s);return()=>N4[e]??t()}const pD=I4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ep=([s,e,t,n])=>`cubic-bezier(${s}, ${e}, ${t}, ${n})`,WT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ep([0,.65,.55,1]),circOut:Ep([.55,0,1,.45]),backIn:Ep([.31,.01,.66,-.59]),backOut:Ep([.33,1.53,.69,.99])};function mD(s,e){if(s)return typeof s=="function"?pD()?cD(s,e):"ease-out":QL(s)?Ep(s):Array.isArray(s)?s.map(t=>mD(t,e)||WT.easeOut):WT[s]}function O4(s,e,t,{delay:n=0,duration:r=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:h}={},d=void 0){const p={[e]:t};h&&(p.offset=h);const m=mD(l,r);Array.isArray(m)&&(p.easing=m);const g={delay:n,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(g.pseudoElement=d),s.animate(p,g)}function gD(s){return typeof s=="function"&&"applyToOptions"in s}function j4({type:s,...e}){return gD(s)&&pD()?s.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class yD extends fE{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:h}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,nE(typeof e.type!="string");const d=j4(e);this.animation=O4(t,n,r,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const p=dE(r,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(p):D4(t,n,p),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n,r;const e=(t=this.options)==null?void 0:t.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((r=(n=this.animation).commitStyles)==null||r.call(n))}get duration(){var t,n;const e=((n=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:n.call(t).duration)||0;return Nr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Nr(e)}get time(){return Nr(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=hi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&M4()?(this.animation.timeline=e,Ir):t(this)}}const vD={anticipate:KL,backInOut:qL,circInOut:YL};function F4(s){return s in vD}function B4(s){typeof s.ease=="string"&&F4(s.ease)&&(s.ease=vD[s.ease])}const uS=10;class $4 extends yD{constructor(e){B4(e),hD(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:r,element:i,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const l=new pE({...o,autoplay:!1}),h=Math.max(uS,fs.now()-this.startTime),d=Yi(0,uS,h-uS);t.setWithVelocity(l.sample(Math.max(0,h-d)).value,l.sample(h).value,d),l.stop()}}const GT=(s,e)=>e==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Ml.test(s)||s==="0")&&!s.startsWith("url("));function U4(s){const e=s[0];if(s.length===1)return!0;for(let t=0;t<s.length;t++)if(s[t]!==e)return!0}function V4(s,e,t,n){const r=s[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=s[s.length-1],o=GT(r,e),l=GT(i,e);return!o||!l?!1:U4(s)||(t==="spring"||gD(t))&&n}function i_(s){s.duration=0,s.type="keyframes"}const z4=new Set(["opacity","clipPath","filter","transform"]),H4=sE(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function W4(s){var p;const{motionValue:e,name:t,repeatDelay:n,repeatType:r,damping:i,type:o}=s;if(!(((p=e==null?void 0:e.owner)==null?void 0:p.current)instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:d}=e.owner.getProps();return H4()&&t&&z4.has(t)&&(t!=="transform"||!d)&&!h&&!n&&r!=="mirror"&&i!==0&&o!=="inertia"}const G4=40;class q4 extends fE{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:h,motionValue:d,element:p,...m}){var b;super(),this.stop=()=>{var x,A;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=fs.now();const g={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:i,repeatType:o,name:h,motionValue:d,element:p,...m},v=(p==null?void 0:p.KeyframeResolver)||mE;this.keyframeResolver=new v(l,(x,A,E)=>this.onKeyframesResolved(x,A,g,!E),h,d,p),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(e,t,n,r){var A,E;this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:h,isHandoff:d,onUpdate:p}=n;this.resolvedAt=fs.now(),V4(e,i,o,l)||((na.instantAnimations||!h)&&(p==null||p(dE(e,n,t))),e[0]=e[e.length-1],i_(n),n.repeat=0);const g={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>G4?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},v=!d&&W4(g),b=(E=(A=g.motionValue)==null?void 0:A.owner)==null?void 0:E.current,x=v?new $4({...g,element:b}):new pE(g);x.finished.then(()=>{this.notifyFinished()}).catch(Ir),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),R4()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function wD(s,e,t,n=0,r=1){const i=Array.from(s).sort((d,p)=>d.sortNodePosition(p)).indexOf(e),o=s.size,l=(o-1)*n;return typeof t=="function"?t(i,o):r===1?i*n:l-i*n}const K4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function X4(s){const e=K4.exec(s);if(!e)return[,];const[,t,n,r]=e;return[`--${t??n}`,r]}function bD(s,e,t=1){const[n,r]=X4(s);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return BL(o)?parseFloat(o):o}return aE(r)?bD(r,e,t+1):r}const Y4={type:"spring",stiffness:500,damping:25,restSpeed:10},J4=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),Q4={type:"keyframes",duration:.8},Z4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ez=(s,{keyframes:e})=>e.length>2?Q4:Tf.has(s)?s.startsWith("scale")?J4(e[1]):Y4:Z4,tz=s=>s!==null;function nz(s,{repeat:e,repeatType:t="loop"},n){const r=s.filter(tz),i=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[i]}function xD(s,e){if(s!=null&&s.inherit&&e){const{inherit:t,...n}=s;return{...e,...n}}return s}function gE(s,e){const t=(s==null?void 0:s[e])??(s==null?void 0:s.default)??s;return t!==s?xD(t,s):t}function sz({when:s,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:l,from:h,elapsed:d,...p}){return!!Object.keys(p).length}const yE=(s,e,t,n={},r,i)=>o=>{const l=gE(n,s)||{},h=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-hi(h);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:g=>{e.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:s,motionValue:e,element:i?void 0:r};sz(l)||Object.assign(p,ez(s,p)),p.duration&&(p.duration=hi(p.duration)),p.repeatDelay&&(p.repeatDelay=hi(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(i_(p),p.delay===0&&(m=!0)),(na.instantAnimations||na.skipAnimations||r!=null&&r.shouldSkipAnimations)&&(m=!0,i_(p),p.delay=0),p.allowFlatten=!l.type&&!l.ease,m&&!i&&e.get()!==void 0){const g=nz(p.keyframes,l);if(g!==void 0){St.update(()=>{p.onUpdate(g),p.onComplete()});return}}return l.isSync?new pE(p):new q4(p)};function qT(s){const e=[{},{}];return s==null||s.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function vE(s,e,t,n){if(typeof e=="function"){const[r,i]=qT(n);e=e(t!==void 0?t:s.custom,r,i)}if(typeof e=="string"&&(e=s.variants&&s.variants[e]),typeof e=="function"){const[r,i]=qT(n);e=e(t!==void 0?t:s.custom,r,i)}return e}function Fh(s,e,t){const n=s.getProps();return vE(n,e,t!==void 0?t:n.custom,s)}const SD=new Set(["width","height","top","left","right","bottom",...Cf]),KT=30,rz=s=>!isNaN(parseFloat(s));class iz{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var i;const r=fs.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=fs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=rz(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new rE);const n=this.events[e].add(t);return e==="change"?()=>{n(),St.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=fs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>KT)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,KT);return VL(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function mf(s,e){return new iz(s,e)}const o_=s=>Array.isArray(s);function oz(s,e,t){s.hasValue(e)?s.getValue(e).set(t):s.addValue(e,mf(t))}function az(s){return o_(s)?s[s.length-1]||0:s}function lz(s,e){const t=Fh(s,e);let{transitionEnd:n={},transition:r={},...i}=t||{};i={...i,...n};for(const o in i){const l=az(i[o]);oz(s,o,l)}}const rs=s=>!!(s&&s.getVelocity);function cz(s){return!!(rs(s)&&s.add)}function a_(s,e){const t=s.getValue("willChange");if(cz(t))return t.add(e);if(!t&&na.WillChange){const n=new na.WillChange("auto");s.addValue("willChange",n),n.add(e)}}function wE(s){return s.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const uz="framerAppearId",_D="data-"+wE(uz);function AD(s){return s.props[_D]}function hz({protectedKeys:s,needsAnimating:e},t){const n=s.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function ED(s,e,{delay:t=0,transitionOverride:n,type:r}={}){let{transition:i,transitionEnd:o,...l}=e;const h=s.getDefaultTransition();i=i?xD(i,h):h;const d=i==null?void 0:i.reduceMotion;n&&(i=n);const p=[],m=r&&s.animationState&&s.animationState.getState()[r];for(const g in l){const v=s.getValue(g,s.latestValues[g]??null),b=l[g];if(b===void 0||m&&hz(m,g))continue;const x={delay:t,...gE(i||{},g)},A=v.get();if(A!==void 0&&!v.isAnimating&&!Array.isArray(b)&&b===A&&!x.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const D=AD(s);if(D){const N=window.MotionHandoffAnimation(D,g,St);N!==null&&(x.startTime=N,E=!0)}}a_(s,g);const R=d??s.shouldReduceMotion;v.start(yE(g,v,b,R&&SD.has(g)?{type:!1}:x,s,E));const C=v.animation;C&&p.push(C)}if(o){const g=()=>St.update(()=>{o&&lz(s,o)});p.length?Promise.all(p).then(g):g()}return p}function l_(s,e,t={}){var h;const n=Fh(s,e,t.type==="exit"?(h=s.presenceContext)==null?void 0:h.custom:void 0);let{transition:r=s.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(r=t.transitionOverride);const i=n?()=>Promise.all(ED(s,n,t)):()=>Promise.resolve(),o=s.variantChildren&&s.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:m,staggerDirection:g}=r;return dz(s,e,d,p,m,g,t)}:()=>Promise.resolve(),{when:l}=r;if(l){const[d,p]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>p())}else return Promise.all([i(),o(t.delay)])}function dz(s,e,t=0,n=0,r=0,i=1,o){const l=[];for(const h of s.variantChildren)h.notify("AnimationStart",e),l.push(l_(h,e,{...o,delay:t+(typeof n=="function"?0:n)+wD(s.variantChildren,h,n,r,i)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(l)}function fz(s,e,t={}){s.notify("AnimationStart",e);let n;if(Array.isArray(e)){const r=e.map(i=>l_(s,i,t));n=Promise.all(r)}else if(typeof e=="string")n=l_(s,e,t);else{const r=typeof e=="function"?Fh(s,e,t.custom):e;n=Promise.all(ED(s,r,t))}return n.then(()=>{s.notify("AnimationComplete",e)})}const pz={test:s=>s==="auto",parse:s=>s},kD=s=>e=>e.test(s),CD=[kf,Se,Xi,La,V3,U3,pz],XT=s=>CD.find(kD(s));function mz(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||UL(s):!0}const gz=new Set(["brightness","contrast","saturate","opacity"]);function yz(s){const[e,t]=s.slice(0,-1).split("(");if(e==="drop-shadow")return s;const[n]=t.match(lE)||[];if(!n)return s;const r=t.replace(n,"");let i=gz.has(e)?1:0;return n!==t&&(i*=100),e+"("+i+r+")"}const vz=/\b([a-z-]*)\(.*?\)/gu,c_={...Ml,getAnimatableNone:s=>{const e=s.match(vz);return e?e.map(yz).join(" "):s}},YT={...kf,transform:Math.round},wz={rotate:La,rotateX:La,rotateY:La,rotateZ:La,scale:Vv,scaleX:Vv,scaleY:Vv,scaleZ:Vv,skew:La,skewX:La,skewY:La,distance:Se,translateX:Se,translateY:Se,translateZ:Se,x:Se,y:Se,z:Se,perspective:Se,transformPerspective:Se,opacity:um,originX:OT,originY:OT,originZ:Se},bE={borderWidth:Se,borderTopWidth:Se,borderRightWidth:Se,borderBottomWidth:Se,borderLeftWidth:Se,borderRadius:Se,borderTopLeftRadius:Se,borderTopRightRadius:Se,borderBottomRightRadius:Se,borderBottomLeftRadius:Se,width:Se,maxWidth:Se,height:Se,maxHeight:Se,top:Se,right:Se,bottom:Se,left:Se,inset:Se,insetBlock:Se,insetBlockStart:Se,insetBlockEnd:Se,insetInline:Se,insetInlineStart:Se,insetInlineEnd:Se,padding:Se,paddingTop:Se,paddingRight:Se,paddingBottom:Se,paddingLeft:Se,paddingBlock:Se,paddingBlockStart:Se,paddingBlockEnd:Se,paddingInline:Se,paddingInlineStart:Se,paddingInlineEnd:Se,margin:Se,marginTop:Se,marginRight:Se,marginBottom:Se,marginLeft:Se,marginBlock:Se,marginBlockStart:Se,marginBlockEnd:Se,marginInline:Se,marginInlineStart:Se,marginInlineEnd:Se,fontSize:Se,backgroundPositionX:Se,backgroundPositionY:Se,...wz,zIndex:YT,fillOpacity:um,strokeOpacity:um,numOctaves:YT},bz={...bE,color:on,backgroundColor:on,outlineColor:on,fill:on,stroke:on,borderColor:on,borderTopColor:on,borderRightColor:on,borderBottomColor:on,borderLeftColor:on,filter:c_,WebkitFilter:c_},TD=s=>bz[s];function PD(s,e){let t=TD(s);return t!==c_&&(t=Ml),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const xz=new Set(["auto","none","0"]);function Sz(s,e,t){let n=0,r;for(;n<s.length&&!r;){const i=s[n];typeof i=="string"&&!xz.has(i)&&hm(i).values.length&&(r=s[n]),n++}if(r&&t)for(const i of e)s[i]=PD(t,r)}class _z extends mE{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let p=0;p<e.length;p++){let m=e[p];if(typeof m=="string"&&(m=m.trim(),aE(m))){const g=bD(m,t.current);g!==void 0&&(e[p]=g),p===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!SD.has(n)||e.length!==2)return;const[r,i]=e,o=XT(r),l=XT(i),h=IT(r),d=IT(i);if(h!==d&&Rl[n]){this.needsMeasurement=!0;return}if(o!==l)if(HT(o)&&HT(l))for(let p=0;p<e.length;p++){const m=e[p];typeof m=="string"&&(e[p]=parseFloat(m))}else Rl[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(e[r]===null||mz(e[r]))&&n.push(r);n.length&&Sz(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Rl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){var l;const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=Rl[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([h,d])=>{e.getValue(h).set(d)}),this.resolveNoneKeyframes()}}const Az=new Set(["opacity","clipPath","filter","transform"]);function RD(s,e,t){if(s==null)return[];if(s instanceof EventTarget)return[s];if(typeof s=="string"){let n=document;const r=(t==null?void 0:t[s])??n.querySelectorAll(s);return r?Array.from(r):[]}return Array.from(s).filter(n=>n!=null)}const LD=(s,e)=>e&&typeof s=="number"?e.transform(s):s;function Ez(s){return $L(s)&&"offsetHeight"in s}const{schedule:xE}=ZL(queueMicrotask,!1),Kr={x:!1,y:!1};function DD(){return Kr.x||Kr.y}function kz(s){return s==="x"||s==="y"?Kr[s]?null:(Kr[s]=!0,()=>{Kr[s]=!1}):Kr.x||Kr.y?null:(Kr.x=Kr.y=!0,()=>{Kr.x=Kr.y=!1})}function MD(s,e){const t=RD(s),n=new AbortController,r={passive:!0,...e,signal:n.signal};return[t,r,()=>n.abort()]}function Cz(s){return!(s.pointerType==="touch"||DD())}function Tz(s,e,t={}){const[n,r,i]=MD(s,t);return n.forEach(o=>{let l=!1,h=!1,d;const p=()=>{o.removeEventListener("pointerleave",b)},m=A=>{d&&(d(A),d=void 0),p()},g=A=>{l=!1,window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),h&&(h=!1,m(A))},v=()=>{l=!0,window.addEventListener("pointerup",g,r),window.addEventListener("pointercancel",g,r)},b=A=>{if(A.pointerType!=="touch"){if(l){h=!0;return}m(A)}},x=A=>{if(!Cz(A))return;h=!1;const E=e(o,A);typeof E=="function"&&(d=E,o.addEventListener("pointerleave",b,r))};o.addEventListener("pointerenter",x,r),o.addEventListener("pointerdown",v,r)}),i}const ND=(s,e)=>e?s===e?!0:ND(s,e.parentElement):!1,SE=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,Pz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Rz(s){return Pz.has(s.tagName)||s.isContentEditable===!0}const Lz=new Set(["INPUT","SELECT","TEXTAREA"]);function Dz(s){return Lz.has(s.tagName)||s.isContentEditable===!0}const s0=new WeakSet;function JT(s){return e=>{e.key==="Enter"&&s(e)}}function hS(s,e){s.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Mz=(s,e)=>{const t=s.currentTarget;if(!t)return;const n=JT(()=>{if(s0.has(t))return;hS(t,"down");const r=JT(()=>{hS(t,"up")}),i=()=>hS(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",i,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function QT(s){return SE(s)&&!DD()}const ZT=new WeakSet;function Nz(s,e,t={}){const[n,r,i]=MD(s,t),o=l=>{const h=l.currentTarget;if(!QT(l)||ZT.has(l))return;s0.add(h),t.stopPropagation&&ZT.add(l);const d=e(h,l),p=(v,b)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",g),s0.has(h)&&s0.delete(h),QT(v)&&typeof d=="function"&&d(v,{success:b})},m=v=>{p(v,h===window||h===document||t.useGlobalTarget||ND(h,v.target))},g=v=>{p(v,!1)};window.addEventListener("pointerup",m,r),window.addEventListener("pointercancel",g,r)};return n.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",o,r),Ez(l)&&(l.addEventListener("focus",d=>Mz(d,r)),!Rz(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function _E(s){return $L(s)&&"ownerSVGElement"in s}const r0=new WeakMap;let Da;const ID=(s,e,t)=>(n,r)=>r&&r[0]?r[0][s+"Size"]:_E(n)&&"getBBox"in n?n.getBBox()[e]:n[t],Iz=ID("inline","width","offsetWidth"),Oz=ID("block","height","offsetHeight");function jz({target:s,borderBoxSize:e}){var t;(t=r0.get(s))==null||t.forEach(n=>{n(s,{get width(){return Iz(s,e)},get height(){return Oz(s,e)}})})}function Fz(s){s.forEach(jz)}function Bz(){typeof ResizeObserver>"u"||(Da=new ResizeObserver(Fz))}function $z(s,e){Da||Bz();const t=RD(s);return t.forEach(n=>{let r=r0.get(n);r||(r=new Set,r0.set(n,r)),r.add(e),Da==null||Da.observe(n)}),()=>{t.forEach(n=>{const r=r0.get(n);r==null||r.delete(e),r!=null&&r.size||Da==null||Da.unobserve(n)})}}const i0=new Set;let Th;function Uz(){Th=()=>{const s={get width(){return window.innerWidth},get height(){return window.innerHeight}};i0.forEach(e=>e(s))},window.addEventListener("resize",Th)}function Vz(s){return i0.add(s),Th||Uz(),()=>{i0.delete(s),!i0.size&&typeof Th=="function"&&(window.removeEventListener("resize",Th),Th=void 0)}}function eP(s,e){return typeof s=="function"?Vz(s):$z(s,e)}function zz(s){return _E(s)&&s.tagName==="svg"}const Hz=[...CD,on,Ml],Wz=s=>Hz.find(kD(s)),tP=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ph=()=>({x:tP(),y:tP()}),nP=()=>({min:0,max:0}),gn=()=>({x:nP(),y:nP()}),Gz=new WeakMap;function Bw(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function dm(s){return typeof s=="string"||Array.isArray(s)}const AE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],EE=["initial",...AE];function $w(s){return Bw(s.animate)||EE.some(e=>dm(s[e]))}function OD(s){return!!($w(s)||s.variants)}function qz(s,e,t){for(const n in e){const r=e[n],i=t[n];if(rs(r))s.addValue(n,r);else if(rs(i))s.addValue(n,mf(r,{owner:s}));else if(i!==r)if(s.hasValue(n)){const o=s.getValue(n);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=s.getStaticValue(n);s.addValue(n,mf(o!==void 0?o:r,{owner:s}))}}for(const n in t)e[n]===void 0&&s.removeValue(n);return e}const u_={current:null},jD={current:!1},Kz=typeof window<"u";function Xz(){if(jD.current=!0,!!Kz)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),e=()=>u_.current=s.matches;s.addEventListener("change",e),e()}else u_.current=!1}const sP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Y0={};function FD(s){Y0=s}function Yz(){return Y0}class Jz{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,skipAnimations:i,blockInitialAnimation:o,visualState:l},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=mE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=fs.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,St.render(this.render,!1,!0))};const{latestValues:d,renderState:p}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.skipAnimationsConfig=i,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=$w(t),this.isVariantNode=OD(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in g){const b=g[v];d[v]!==void 0&&rs(b)&&b.set(d[v])}}mount(e){var t,n;if(this.hasBeenMounted)for(const r in this.initialValues)(t=this.values.get(r))==null||t.jump(this.initialValues[r]),this.latestValues[r]=this.initialValues[r];this.current=e,Gz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(jD.current||Xz(),this.shouldReduceMotion=u_.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),Dl(this.notifyUpdate),Dl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),t.accelerate&&Az.has(e)&&this.current instanceof HTMLElement){const{factory:o,keyframes:l,times:h,ease:d,duration:p}=t.accelerate,m=new yD({element:this.current,name:e,keyframes:l,times:h,ease:d,duration:hi(p)}),g=o(m);this.valueSubscriptions.set(e,()=>{g(),m.cancel()});return}const n=Tf.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&St.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;typeof window<"u"&&window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Y0){const t=Y0[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):gn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<sP.length;n++){const r=sP[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,o=e[i];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=qz(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=mf(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(BL(n)||UL(n))?n=parseFloat(n):!Wz(n)&&Ml.test(t)&&(n=PD(e,t)),this.setBaseTarget(e,rs(n)?n.get():n)),rs(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var i;const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const o=vE(this.props,t,(i=this.presenceContext)==null?void 0:i.custom);o&&(n=o[e])}if(t&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!rs(r)?r:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new rE),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){xE.render(this.render)}}class BD extends Jz{constructor(){super(...arguments),this.KeyframeResolver=_z}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const n=e.style;return n?n[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;rs(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class Fl{constructor(e){this.isMounted=!1,this.node=e}update(){}}function $D({top:s,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:s,max:n}}}function Qz({x:s,y:e}){return{top:e.min,right:s.max,bottom:e.max,left:s.min}}function Zz(s,e){if(!e)return s;const t=e({x:s.left,y:s.top}),n=e({x:s.right,y:s.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function dS(s){return s===void 0||s===1}function h_({scale:s,scaleX:e,scaleY:t}){return!dS(s)||!dS(e)||!dS(t)}function rc(s){return h_(s)||UD(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function UD(s){return rP(s.x)||rP(s.y)}function rP(s){return s&&s!=="0%"}function J0(s,e,t){const n=s-t,r=e*n;return t+r}function iP(s,e,t,n,r){return r!==void 0&&(s=J0(s,r,n)),J0(s,t,n)+e}function d_(s,e=0,t=1,n,r){s.min=iP(s.min,e,t,n,r),s.max=iP(s.max,e,t,n,r)}function VD(s,{x:e,y:t}){d_(s.x,e.translate,e.scale,e.originPoint),d_(s.y,t.translate,t.scale,t.originPoint)}const oP=.999999999999,aP=1.0000000000001;function e5(s,e,t,n=!1){const r=t.length;if(!r)return;e.x=e.y=1;let i,o;for(let l=0;l<r;l++){i=t[l],o=i.projectionDelta;const{visualElement:h}=i.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Lh(s,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,VD(s,o)),n&&rc(i.latestValues)&&Lh(s,i.latestValues))}e.x<aP&&e.x>oP&&(e.x=1),e.y<aP&&e.y>oP&&(e.y=1)}function Rh(s,e){s.min=s.min+e,s.max=s.max+e}function lP(s,e,t,n,r=.5){const i=Ft(s.min,s.max,r);d_(s,e,t,i,n)}function Lh(s,e){lP(s.x,e.x,e.scaleX,e.scale,e.originX),lP(s.y,e.y,e.scaleY,e.scale,e.originY)}function zD(s,e){return $D(Zz(s.getBoundingClientRect(),e))}function t5(s,e,t){const n=zD(s,t),{scroll:r}=e;return r&&(Rh(n.x,r.offset.x),Rh(n.y,r.offset.y)),n}const n5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},s5=Cf.length;function r5(s,e,t){let n="",r=!0;for(let i=0;i<s5;i++){const o=Cf[i],l=s[o];if(l===void 0)continue;let h=!0;if(typeof l=="number")h=l===(o.startsWith("scale")?1:0);else{const d=parseFloat(l);h=o.startsWith("scale")?d===1:d===0}if(!h||t){const d=LD(l,bE[o]);if(!h){r=!1;const p=n5[o]||o;n+=`${p}(${d}) `}t&&(e[o]=d)}}return n=n.trim(),t?n=t(e,r?"":n):r&&(n="none"),n}function kE(s,e,t){const{style:n,vars:r,transformOrigin:i}=s;let o=!1,l=!1;for(const h in e){const d=e[h];if(Tf.has(h)){o=!0;continue}else if(tD(h)){r[h]=d;continue}else{const p=LD(d,bE[h]);h.startsWith("origin")?(l=!0,i[h]=p):n[h]=p}}if(e.transform||(o||t?n.transform=r5(e,s.transform,t):n.transform&&(n.transform="none")),l){const{originX:h="50%",originY:d="50%",originZ:p=0}=i;n.transformOrigin=`${h} ${d} ${p}`}}function HD(s,{style:e,vars:t},n,r){const i=s.style;let o;for(o in e)i[o]=e[o];r==null||r.applyProjectionStyles(i,n);for(o in t)i.setProperty(o,t[o])}function cP(s,e){return e.max===e.min?0:s/(e.max-e.min)*100}const wp={correct:(s,e)=>{if(!e.target)return s;if(typeof s=="string")if(Se.test(s))s=parseFloat(s);else return s;const t=cP(s,e.target.x),n=cP(s,e.target.y);return`${t}% ${n}%`}},i5={correct:(s,{treeScale:e,projectionDelta:t})=>{const n=s,r=Ml.parse(s);if(r.length>5)return n;const i=Ml.createTransformer(s),o=typeof r[0]!="number"?1:0,l=t.x.scale*e.x,h=t.y.scale*e.y;r[0+o]/=l,r[1+o]/=h;const d=Ft(l,h,.5);return typeof r[2+o]=="number"&&(r[2+o]/=d),typeof r[3+o]=="number"&&(r[3+o]/=d),i(r)}},f_={borderRadius:{...wp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wp,borderTopRightRadius:wp,borderBottomLeftRadius:wp,borderBottomRightRadius:wp,boxShadow:i5};function WD(s,{layout:e,layoutId:t}){return Tf.has(s)||s.startsWith("origin")||(e||t!==void 0)&&(!!f_[s]||s==="opacity")}function CE(s,e,t){var o;const n=s.style,r=e==null?void 0:e.style,i={};if(!n)return i;for(const l in n)(rs(n[l])||r&&rs(r[l])||WD(l,s)||((o=t==null?void 0:t.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(i[l]=n[l]);return i}function o5(s){return window.getComputedStyle(s)}class a5 extends BD{constructor(){super(...arguments),this.type="html",this.renderInstance=HD}readValueFromInstance(e,t){var n;if(Tf.has(t))return(n=this.projection)!=null&&n.isProjecting?e_(t):E4(e,t);{const r=o5(e),i=(tD(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return zD(e,t)}build(e,t,n){kE(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return CE(e,t,n)}}const l5={offset:"stroke-dashoffset",array:"stroke-dasharray"},c5={offset:"strokeDashoffset",array:"strokeDasharray"};function u5(s,e,t=1,n=0,r=!0){s.pathLength=1;const i=r?l5:c5;s[i.offset]=`${-n}`,s[i.array]=`${e} ${t}`}const h5=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function GD(s,{attrX:e,attrY:t,attrScale:n,pathLength:r,pathSpacing:i=1,pathOffset:o=0,...l},h,d,p){if(kE(s,l,d),h){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:m,style:g}=s;m.transform&&(g.transform=m.transform,delete m.transform),(g.transform||m.transformOrigin)&&(g.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),g.transform&&(g.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete m.transformBox);for(const v of h5)m[v]!==void 0&&(g[v]=m[v],delete m[v]);e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),n!==void 0&&(m.scale=n),r!==void 0&&u5(m,r,i,o,!1)}const qD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),KD=s=>typeof s=="string"&&s.toLowerCase()==="svg";function d5(s,e,t,n){HD(s,e,void 0,n);for(const r in e.attrs)s.setAttribute(qD.has(r)?r:wE(r),e.attrs[r])}function XD(s,e,t){const n=CE(s,e,t);for(const r in s)if(rs(s[r])||rs(e[r])){const i=Cf.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=s[r]}return n}class f5 extends BD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=gn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Tf.has(t)){const n=TD(t);return n&&n.default||0}return t=qD.has(t)?t:wE(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return XD(e,t,n)}build(e,t,n){GD(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){d5(e,t,n,r)}mount(e){this.isSVGTag=KD(e.tagName),super.mount(e)}}const p5=EE.length;function YD(s){if(!s)return;if(!s.isControllingVariants){const t=s.parent?YD(s.parent)||{}:{};return s.props.initial!==void 0&&(t.initial=s.props.initial),t}const e={};for(let t=0;t<p5;t++){const n=EE[t],r=s.props[n];(dm(r)||r===!1)&&(e[n]=r)}return e}function JD(s,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==s.length)return!1;for(let n=0;n<t;n++)if(e[n]!==s[n])return!1;return!0}const m5=[...AE].reverse(),g5=AE.length;function y5(s){return e=>Promise.all(e.map(({animation:t,options:n})=>fz(s,t,n)))}function v5(s){let e=y5(s),t=uP(),n=!0;const r=h=>(d,p)=>{var g;const m=Fh(s,p,h==="exit"?(g=s.presenceContext)==null?void 0:g.custom:void 0);if(m){const{transition:v,transitionEnd:b,...x}=m;d={...d,...x,...b}}return d};function i(h){e=h(s)}function o(h){const{props:d}=s,p=YD(s.parent)||{},m=[],g=new Set;let v={},b=1/0;for(let A=0;A<g5;A++){const E=m5[A],R=t[E],C=d[E]!==void 0?d[E]:p[E],D=dm(C),N=E===h?R.isActive:null;N===!1&&(b=A);let I=C===p[E]&&C!==d[E]&&D;if(I&&n&&s.manuallyAnimateOnMount&&(I=!1),R.protectedKeys={...v},!R.isActive&&N===null||!C&&!R.prevProp||Bw(C)||typeof C=="boolean")continue;if(E==="exit"&&R.isActive&&N!==!0){R.prevResolvedValues&&(v={...v,...R.prevResolvedValues});continue}const j=w5(R.prevProp,C);let F=j||E===h&&R.isActive&&!I&&D||A>b&&D,W=!1;const K=Array.isArray(C)?C:[C];let J=K.reduce(r(E),{});N===!1&&(J={});const{prevResolvedValues:ie={}}=R,ce={...ie,...J},Y=X=>{F=!0,g.has(X)&&(W=!0,g.delete(X)),R.needsAnimating[X]=!0;const V=s.getValue(X);V&&(V.liveStyle=!1)};for(const X in ce){const V=J[X],re=ie[X];if(v.hasOwnProperty(X))continue;let ne=!1;o_(V)&&o_(re)?ne=!JD(V,re):ne=V!==re,ne?V!=null?Y(X):g.add(X):V!==void 0&&g.has(X)?Y(X):R.protectedKeys[X]=!0}R.prevProp=C,R.prevResolvedValues=J,R.isActive&&(v={...v,...J}),n&&s.blockInitialAnimation&&(F=!1);const ue=I&&j;F&&(!ue||W)&&m.push(...K.map(X=>{const V={type:E};if(typeof X=="string"&&n&&!ue&&s.manuallyAnimateOnMount&&s.parent){const{parent:re}=s,ne=Fh(re,X);if(re.enteringChildren&&ne){const{delayChildren:U}=ne.transition||{};V.delay=wD(re.enteringChildren,s,U)}}return{animation:X,options:V}}))}if(g.size){const A={};if(typeof d.initial!="boolean"){const E=Fh(s,Array.isArray(d.initial)?d.initial[0]:d.initial);E&&E.transition&&(A.transition=E.transition)}g.forEach(E=>{const R=s.getBaseTarget(E),C=s.getValue(E);C&&(C.liveStyle=!0),A[E]=R??null}),m.push({animation:A})}let x=!!m.length;return n&&(d.initial===!1||d.initial===d.animate)&&!s.manuallyAnimateOnMount&&(x=!1),n=!1,x?e(m):Promise.resolve()}function l(h,d){var m;if(t[h].isActive===d)return Promise.resolve();(m=s.variantChildren)==null||m.forEach(g=>{var v;return(v=g.animationState)==null?void 0:v.setActive(h,d)}),t[h].isActive=d;const p=o(h);for(const g in t)t[g].protectedKeys={};return p}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>t,reset:()=>{t=uP()}}}function w5(s,e){return typeof e=="string"?e!==s:Array.isArray(e)?!JD(e,s):!1}function tc(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uP(){return{animate:tc(!0),whileInView:tc(),whileHover:tc(),whileTap:tc(),whileDrag:tc(),whileFocus:tc(),exit:tc()}}function hP(s,e){s.min=e.min,s.max=e.max}function Wr(s,e){hP(s.x,e.x),hP(s.y,e.y)}function dP(s,e){s.translate=e.translate,s.scale=e.scale,s.originPoint=e.originPoint,s.origin=e.origin}const QD=1e-4,b5=1-QD,x5=1+QD,ZD=.01,S5=0-ZD,_5=0+ZD;function ps(s){return s.max-s.min}function A5(s,e,t){return Math.abs(s-e)<=t}function fP(s,e,t,n=.5){s.origin=n,s.originPoint=Ft(e.min,e.max,s.origin),s.scale=ps(t)/ps(e),s.translate=Ft(t.min,t.max,s.origin)-s.originPoint,(s.scale>=b5&&s.scale<=x5||isNaN(s.scale))&&(s.scale=1),(s.translate>=S5&&s.translate<=_5||isNaN(s.translate))&&(s.translate=0)}function Jp(s,e,t,n){fP(s.x,e.x,t.x,n?n.originX:void 0),fP(s.y,e.y,t.y,n?n.originY:void 0)}function pP(s,e,t){s.min=t.min+e.min,s.max=s.min+ps(e)}function E5(s,e,t){pP(s.x,e.x,t.x),pP(s.y,e.y,t.y)}function mP(s,e,t){s.min=e.min-t.min,s.max=s.min+ps(e)}function Q0(s,e,t){mP(s.x,e.x,t.x),mP(s.y,e.y,t.y)}function gP(s,e,t,n,r){return s-=e,s=J0(s,1/t,n),r!==void 0&&(s=J0(s,1/r,n)),s}function k5(s,e=0,t=1,n=.5,r,i=s,o=s){if(Xi.test(e)&&(e=parseFloat(e),e=Ft(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Ft(i.min,i.max,n);s===i&&(l-=e),s.min=gP(s.min,e,t,l,r),s.max=gP(s.max,e,t,l,r)}function yP(s,e,[t,n,r],i,o){k5(s,e[t],e[n],e[r],e.scale,i,o)}const C5=["x","scaleX","originX"],T5=["y","scaleY","originY"];function vP(s,e,t,n){yP(s.x,e,C5,t?t.x:void 0,n?n.x:void 0),yP(s.y,e,T5,t?t.y:void 0,n?n.y:void 0)}function wP(s){return s.translate===0&&s.scale===1}function eM(s){return wP(s.x)&&wP(s.y)}function bP(s,e){return s.min===e.min&&s.max===e.max}function P5(s,e){return bP(s.x,e.x)&&bP(s.y,e.y)}function xP(s,e){return Math.round(s.min)===Math.round(e.min)&&Math.round(s.max)===Math.round(e.max)}function tM(s,e){return xP(s.x,e.x)&&xP(s.y,e.y)}function SP(s){return ps(s.x)/ps(s.y)}function _P(s,e){return s.translate===e.translate&&s.scale===e.scale&&s.originPoint===e.originPoint}function _i(s){return[s("x"),s("y")]}function R5(s,e,t){let n="";const r=s.x.translate/e.x,i=s.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||i||o)&&(n=`translate3d(${r}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:p,rotateX:m,rotateY:g,skewX:v,skewY:b}=t;d&&(n=`perspective(${d}px) ${n}`),p&&(n+=`rotate(${p}deg) `),m&&(n+=`rotateX(${m}deg) `),g&&(n+=`rotateY(${g}deg) `),v&&(n+=`skewX(${v}deg) `),b&&(n+=`skewY(${b}deg) `)}const l=s.x.scale*e.x,h=s.y.scale*e.y;return(l!==1||h!==1)&&(n+=`scale(${l}, ${h})`),n||"none"}const nM=["TopLeft","TopRight","BottomLeft","BottomRight"],L5=nM.length,AP=s=>typeof s=="string"?parseFloat(s):s,EP=s=>typeof s=="number"||Se.test(s);function D5(s,e,t,n,r,i){r?(s.opacity=Ft(0,t.opacity??1,M5(n)),s.opacityExit=Ft(e.opacity??1,0,N5(n))):i&&(s.opacity=Ft(e.opacity??1,t.opacity??1,n));for(let o=0;o<L5;o++){const l=`border${nM[o]}Radius`;let h=kP(e,l),d=kP(t,l);if(h===void 0&&d===void 0)continue;h||(h=0),d||(d=0),h===0||d===0||EP(h)===EP(d)?(s[l]=Math.max(Ft(AP(h),AP(d),n),0),(Xi.test(d)||Xi.test(h))&&(s[l]+="%")):s[l]=d}(e.rotate||t.rotate)&&(s.rotate=Ft(e.rotate||0,t.rotate||0,n))}function kP(s,e){return s[e]!==void 0?s[e]:s.borderRadius}const M5=sM(0,.5,XL),N5=sM(.5,.95,Ir);function sM(s,e,t){return n=>n<s?0:n>e?1:t(cm(s,e,n))}function I5(s,e,t){const n=rs(s)?s:mf(s);return n.start(yE("",n,e,t)),n.animation}function fm(s,e,t,n={passive:!0}){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t)}const O5=(s,e)=>s.depth-e.depth;class j5{constructor(){this.children=[],this.isDirty=!1}add(e){tE(this.children,e),this.isDirty=!0}remove(e){G0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(O5),this.isDirty=!1,this.children.forEach(e)}}function F5(s,e){const t=fs.now(),n=({timestamp:r})=>{const i=r-t;i>=e&&(Dl(n),s(i-e))};return St.setup(n,!0),()=>Dl(n)}function o0(s){return rs(s)?s.get():s}class B5{constructor(){this.members=[]}add(e){tE(this.members,e);for(let t=this.members.length-1;t>=0;t--){const n=this.members[t];if(n===e||n===this.lead||n===this.prevLead)continue;const r=n.instance;r&&r.isConnected===!1&&n.isPresent!==!1&&!n.snapshot&&G0(this.members,n)}e.scheduleRender()}remove(e){if(G0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let n;for(let r=t;r>=0;r--){const i=this.members[r],o=i.instance;if(i.isPresent!==!1&&(!o||o.isConnected!==!1)){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender();const r=n.options.layoutDependency,i=e.options.layoutDependency;if(!(r!==void 0&&i!==void 0&&r===i)){const h=n.instance;h&&h.isConnected===!1&&!n.snapshot||(e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:l}=e.options;l===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const a0={hasAnimatedSinceResize:!0,hasEverUpdated:!1},fS=["","X","Y","Z"],$5=1e3;let U5=0;function pS(s,e,t,n){const{latestValues:r}=e;r[s]&&(t[s]=r[s],e.setStaticValue(s,0),n&&(n[s]=0))}function rM(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:e}=s.options;if(!e)return;const t=AD(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:i}=s.options;window.MotionCancelOptimisedAnimation(t,"transform",St,!(r||i))}const{parent:n}=s;n&&!n.hasCheckedOptimisedAppear&&rM(n)}function iM({attachResizeListener:s,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(o={},l=e==null?void 0:e()){this.id=U5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(H5),this.nodes.forEach(K5),this.nodes.forEach(X5),this.nodes.forEach(W5)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new j5)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new rE),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const h=this.eventHandlers.get(o);h&&h.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=_E(o)&&!zz(o),this.instance=o;const{layoutId:l,layout:h,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||l)&&(this.isLayoutDirty=!0),s){let p,m=0;const g=()=>this.root.updateBlockedByResize=!1;St.read(()=>{m=window.innerWidth}),s(o,()=>{const v=window.innerWidth;v!==m&&(m=v,this.root.updateBlockedByResize=!0,p&&p(),p=F5(g,250),a0.hasAnimatedSinceResize&&(a0.hasAnimatedSinceResize=!1,this.nodes.forEach(PP)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||d.getDefaultTransition()||eH,{onLayoutAnimationStart:x,onLayoutAnimationComplete:A}=d.getProps(),E=!this.targetLayout||!tM(this.targetLayout,v),R=!m&&g;if(this.options.layoutRoot||this.resumeFrom||R||m&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...gE(b,"layout"),onPlay:x,onComplete:A};(d.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(p,R)}else m||PP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Dl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Y5),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&rM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:h}=this.options;if(l===void 0&&!h)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(CP);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(TP);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(q5),this.nodes.forEach(V5),this.nodes.forEach(z5)):this.nodes.forEach(TP),this.clearAllSnapshots();const l=fs.now();Un.delta=Yi(0,1e3/60,l-Un.timestamp),Un.timestamp=l,Un.isProcessing=!0,iS.update.process(Un),iS.preRender.process(Un),iS.render.process(Un),Un.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(G5),this.sharedNodes.forEach(J5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,St.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){St.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ps(this.snapshot.measuredBox.x)&&!ps(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=gn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:h,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!eM(this.projectionDelta),h=this.getTransformTemplate(),d=h?h(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||rc(this.latestValues)||p)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let h=this.removeElementScroll(l);return o&&(h=this.removeTransform(h)),tH(h),{animationId:this.root.animationId,measuredBox:l,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return gn();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(nH))){const{scroll:p}=this.root;p&&(Rh(l.x,p.offset.x),Rh(l.y,p.offset.y))}return l}removeElementScroll(o){var h;const l=gn();if(Wr(l,o),(h=this.scroll)!=null&&h.wasRoot)return l;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:m,options:g}=p;p!==this.root&&m&&g.layoutScroll&&(m.wasRoot&&Wr(l,o),Rh(l.x,m.offset.x),Rh(l.y,m.offset.y))}return l}applyTransform(o,l=!1){const h=gn();Wr(h,o);for(let d=0;d<this.path.length;d++){const p=this.path[d];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Lh(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),rc(p.latestValues)&&Lh(h,p.latestValues)}return rc(this.latestValues)&&Lh(h,this.latestValues),h}removeTransform(o){const l=gn();Wr(l,o);for(let h=0;h<this.path.length;h++){const d=this.path[h];if(!d.instance||!rc(d.latestValues))continue;h_(d.latestValues)&&d.updateSnapshot();const p=gn(),m=d.measurePageBox();Wr(p,m),vP(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return rc(this.latestValues)&&vP(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Un.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var v;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==l;if(!(o||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!this.layout||!(p||m))return;this.resolvedRelativeTargetAt=Un.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=gn(),this.targetWithTransforms=gn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),E5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Wr(this.target,this.layout.layoutBox),VD(this.target,this.targetDelta)):Wr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||h_(this.parent.latestValues)||UD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,h){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gn(),this.relativeTargetOrigin=gn(),Q0(this.relativeTargetOrigin,l,h),Wr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var b;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let h=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(h=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Un.timestamp&&(h=!1),h)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;Wr(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;e5(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=gn());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(dP(this.prevProjectionDelta.x,this.projectionDelta.x),dP(this.prevProjectionDelta.y,this.projectionDelta.y)),Jp(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!_P(this.projectionDelta.x,this.prevProjectionDelta.x)||!_P(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ph(),this.projectionDelta=Ph(),this.projectionDeltaWithTransform=Ph()}setAnimationOrigin(o,l=!1){const h=this.snapshot,d=h?h.latestValues:{},p={...this.latestValues},m=Ph();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=gn(),v=h?h.source:void 0,b=this.layout?this.layout.source:void 0,x=v!==b,A=this.getStack(),E=!A||A.members.length<=1,R=!!(x&&!E&&this.options.crossfade===!0&&!this.path.some(Z5));this.animationProgress=0;let C;this.mixTargetDelta=D=>{const N=D/1e3;RP(m.x,o.x,N),RP(m.y,o.y,N),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Q0(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Q5(this.relativeTarget,this.relativeTargetOrigin,g,N),C&&P5(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=gn()),Wr(C,this.relativeTarget)),x&&(this.animationValues=p,D5(p,d,this.latestValues,N,R,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,h,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||d.stop(),this.pendingAnimation&&(Dl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=St.update(()=>{a0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=mf(0)),this.currentAnimation=I5(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),o.onUpdate&&o.onUpdate(p)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:h,layout:d,latestValues:p}=o;if(!(!l||!h||!d)){if(this!==o&&this.layout&&d&&oM(this.options.animationType,this.layout.layoutBox,d.layoutBox)){h=this.target||gn();const m=ps(this.layout.layoutBox.x);h.x.min=o.target.x.min,h.x.max=h.x.min+m;const g=ps(this.layout.layoutBox.y);h.y.min=o.target.y.min,h.y.max=h.y.min+g}Wr(l,h),Lh(l,p),Jp(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new B5),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:h}={}){const d=this.getStack();d&&d.promote(this,h),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:h}=o;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(l=!0),!l)return;const d={};h.z&&pS("z",o,d,this.animationValues);for(let p=0;p<fS.length;p++)pS(`rotate${fS[p]}`,o,d,this.animationValues),pS(`skew${fS[p]}`,o,d,this.animationValues);o.render();for(const p in d)o.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=o0(l==null?void 0:l.pointerEvents)||"",o.transform=h?h(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=o0(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!rc(this.latestValues)&&(o.transform=h?h({},""):"none",this.hasProjected=!1);return}o.visibility="";const p=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=R5(this.projectionDeltaWithTransform,this.treeScale,p);h&&(m=h(p,m)),o.transform=m;const{x:g,y:v}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,d.animationValues?o.opacity=d===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:o.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const b in f_){if(p[b]===void 0)continue;const{correct:x,applyTo:A,isCSSVariable:E}=f_[b],R=m==="none"?p[b]:x(p[b],d);if(A){const C=A.length;for(let D=0;D<C;D++)o[A[D]]=R}else E?this.options.visualElement.renderState.vars[b]=R:o[b]=R}this.options.layoutId&&(o.pointerEvents=d===this?o0(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(CP),this.root.sharedNodes.clear()}}}function V5(s){s.updateLayout()}function z5(s){var t;const e=((t=s.resumeFrom)==null?void 0:t.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&e&&s.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=s.layout,{animationType:i}=s.options,o=e.source!==s.layout.source;i==="size"?_i(m=>{const g=o?e.measuredBox[m]:e.layoutBox[m],v=ps(g);g.min=n[m].min,g.max=g.min+v}):oM(i,e.layoutBox,n)&&_i(m=>{const g=o?e.measuredBox[m]:e.layoutBox[m],v=ps(n[m]);g.max=g.min+v,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[m].max=s.relativeTarget[m].min+v)});const l=Ph();Jp(l,n,e.layoutBox);const h=Ph();o?Jp(h,s.applyTransform(r,!0),e.measuredBox):Jp(h,n,e.layoutBox);const d=!eM(l);let p=!1;if(!s.resumeFrom){const m=s.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:g,layout:v}=m;if(g&&v){const b=gn();Q0(b,e.layoutBox,g.layoutBox);const x=gn();Q0(x,n,v.layoutBox),tM(b,x)||(p=!0),m.options.layoutRoot&&(s.relativeTarget=x,s.relativeTargetOrigin=b,s.relativeParent=m)}}}s.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:h,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:p})}else if(s.isLead()){const{onExitComplete:n}=s.options;n&&n()}s.options.transition=void 0}function H5(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function W5(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function G5(s){s.clearSnapshot()}function CP(s){s.clearMeasurements()}function TP(s){s.isLayoutDirty=!1}function q5(s){const{visualElement:e}=s.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),s.resetTransform()}function PP(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function K5(s){s.resolveTargetDelta()}function X5(s){s.calcProjection()}function Y5(s){s.resetSkewAndRotation()}function J5(s){s.removeLeadSnapshot()}function RP(s,e,t){s.translate=Ft(e.translate,0,t),s.scale=Ft(e.scale,1,t),s.origin=e.origin,s.originPoint=e.originPoint}function LP(s,e,t,n){s.min=Ft(e.min,t.min,n),s.max=Ft(e.max,t.max,n)}function Q5(s,e,t,n){LP(s.x,e.x,t.x,n),LP(s.y,e.y,t.y,n)}function Z5(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const eH={duration:.45,ease:[.4,0,.1,1]},DP=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),MP=DP("applewebkit/")&&!DP("chrome/")?Math.round:Ir;function NP(s){s.min=MP(s.min),s.max=MP(s.max)}function tH(s){NP(s.x),NP(s.y)}function oM(s,e,t){return s==="position"||s==="preserve-aspect"&&!A5(SP(e),SP(t),.2)}function nH(s){var e;return s!==s.root&&((e=s.scroll)==null?void 0:e.wasRoot)}const sH=iM({attachResizeListener:(s,e)=>fm(s,"resize",e),measureScroll:()=>{var s,e;return{x:document.documentElement.scrollLeft||((s=document.body)==null?void 0:s.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),mS={current:void 0},aM=iM({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!mS.current){const s=new sH({});s.mount(window),s.setOptions({layoutScroll:!0}),mS.current=s}return mS.current},resetTransform:(s,e)=>{s.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),lM=M.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function rH(s=!0){const e=M.useContext(eE);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=M.useId();M.useEffect(()=>{if(s)return r(i)},[s]);const o=M.useCallback(()=>s&&n&&n(i),[i,n,s]);return!t&&n?[!1,o]:[!0]}const cM=M.createContext({strict:!1}),IP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let OP=!1;function iH(){if(OP)return;const s={};for(const e in IP)s[e]={isEnabled:t=>IP[e].some(n=>!!t[n])};FD(s),OP=!0}function uM(){return iH(),Yz()}function oH(s){const e=uM();for(const t in s)e[t]={...e[t],...s[t]};FD(e)}const aH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Z0(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||aH.has(s)}let hM=s=>!Z0(s);function lH(s){typeof s=="function"&&(hM=e=>e.startsWith("on")?!Z0(e):s(e))}try{lH(require("@emotion/is-prop-valid").default)}catch{}function cH(s,e,t){const n={};for(const r in s)r==="values"&&typeof s.values=="object"||(hM(r)||t===!0&&Z0(r)||!e&&!Z0(r)||s.draggable&&r.startsWith("onDrag"))&&(n[r]=s[r]);return n}const Uw=M.createContext({});function uH(s,e){if($w(s)){const{initial:t,animate:n}=s;return{initial:t===!1||dm(t)?t:void 0,animate:dm(n)?n:void 0}}return s.inherit!==!1?e:{}}function hH(s){const{initial:e,animate:t}=uH(s,M.useContext(Uw));return M.useMemo(()=>({initial:e,animate:t}),[jP(e),jP(t)])}function jP(s){return Array.isArray(s)?s.join(" "):s}const TE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dM(s,e,t){for(const n in e)!rs(e[n])&&!WD(n,t)&&(s[n]=e[n])}function dH({transformTemplate:s},e){return M.useMemo(()=>{const t=TE();return kE(t,e,s),Object.assign({},t.vars,t.style)},[e])}function fH(s,e){const t=s.style||{},n={};return dM(n,t,s),Object.assign(n,dH(s,e)),n}function pH(s,e){const t={},n=fH(s,e);return s.drag&&s.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(t.tabIndex=0),t.style=n,t}const fM=()=>({...TE(),attrs:{}});function mH(s,e,t,n){const r=M.useMemo(()=>{const i=fM();return GD(i,e,KD(n),s.transformTemplate,s.style),{...i.attrs,style:{...i.style}}},[e]);if(s.style){const i={};dM(i,s.style,s),r.style={...i,...r.style}}return r}const gH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function PE(s){return typeof s!="string"||s.includes("-")?!1:!!(gH.indexOf(s)>-1||/[A-Z]/u.test(s))}function yH(s,e,t,{latestValues:n},r,i=!1,o){const h=(o??PE(s)?mH:pH)(e,n,r,s),d=cH(e,typeof s=="string",i),p=s!==M.Fragment?{...d,...h,ref:t}:{},{children:m}=e,g=M.useMemo(()=>rs(m)?m.get():m,[m]);return M.createElement(s,{...p,children:g})}function vH({scrapeMotionValuesFromProps:s,createRenderState:e},t,n,r){return{latestValues:wH(t,n,r,s),renderState:e()}}function wH(s,e,t,n){const r={},i=n(s,{});for(const g in i)r[g]=o0(i[g]);let{initial:o,animate:l}=s;const h=$w(s),d=OD(s);e&&d&&!h&&s.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let p=t?t.initial===!1:!1;p=p||o===!1;const m=p?l:o;if(m&&typeof m!="boolean"&&!Bw(m)){const g=Array.isArray(m)?m:[m];for(let v=0;v<g.length;v++){const b=vE(s,g[v]);if(b){const{transitionEnd:x,transition:A,...E}=b;for(const R in E){let C=E[R];if(Array.isArray(C)){const D=p?C.length-1:0;C=C[D]}C!==null&&(r[R]=C)}for(const R in x)r[R]=x[R]}}}return r}const pM=s=>(e,t)=>{const n=M.useContext(Uw),r=M.useContext(eE),i=()=>vH(s,e,n,r);return t?i():x3(i)},bH=pM({scrapeMotionValuesFromProps:CE,createRenderState:TE}),xH=pM({scrapeMotionValuesFromProps:XD,createRenderState:fM}),SH=Symbol.for("motionComponentSymbol");function _H(s,e,t){const n=M.useRef(t);M.useInsertionEffect(()=>{n.current=t});const r=M.useRef(null);return M.useCallback(i=>{var l;i&&((l=s.onMount)==null||l.call(s,i)),e&&(i?e.mount(i):e.unmount());const o=n.current;if(typeof o=="function")if(i){const h=o(i);typeof h=="function"&&(r.current=h)}else r.current?(r.current(),r.current=null):o(i);else o&&(o.current=i)},[e])}const mM=M.createContext({});function yh(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function AH(s,e,t,n,r,i){var C,D;const{visualElement:o}=M.useContext(Uw),l=M.useContext(cM),h=M.useContext(eE),d=M.useContext(lM),p=d.reducedMotion,m=d.skipAnimations,g=M.useRef(null),v=M.useRef(!1);n=n||l.renderer,!g.current&&n&&(g.current=n(s,{visualState:e,parent:o,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:p,skipAnimations:m,isSVG:i}),v.current&&g.current&&(g.current.manuallyAnimateOnMount=!0));const b=g.current,x=M.useContext(mM);b&&!b.projection&&r&&(b.type==="html"||b.type==="svg")&&EH(g.current,t,r,x);const A=M.useRef(!1);M.useInsertionEffect(()=>{b&&A.current&&b.update(t,h)});const E=t[_D],R=M.useRef(!!E&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,E))&&((D=window.MotionHasOptimisedAnimation)==null?void 0:D.call(window,E)));return S3(()=>{v.current=!0,b&&(A.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),R.current&&b.animationState&&b.animationState.animateChanges())}),M.useEffect(()=>{b&&(!R.current&&b.animationState&&b.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{var N;(N=window.MotionHandoffMarkAsComplete)==null||N.call(window,E)}),R.current=!1),b.enteringChildren=void 0)}),b}function EH(s,e,t,n){const{layoutId:r,layout:i,drag:o,dragConstraints:l,layoutScroll:h,layoutRoot:d,layoutCrossfade:p}=e;s.projection=new t(s.latestValues,e["data-framer-portal-id"]?void 0:gM(s.parent)),s.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!o||l&&yh(l),visualElement:s,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:h,layoutRoot:d})}function gM(s){if(s)return s.options.allowProjection!==!1?s.projection:gM(s.parent)}function gS(s,{forwardMotionProps:e=!1,type:t}={},n,r){n&&oH(n);const i=t?t==="svg":PE(s),o=i?xH:bH;function l(d,p){let m;const g={...M.useContext(lM),...d,layoutId:kH(d)},{isStatic:v}=g,b=hH(d),x=o(d,v);if(!v&&FL){CH();const A=TH(g);m=A.MeasureLayout,b.visualElement=AH(s,x,g,r,A.ProjectionNode,i)}return T.jsxs(Uw.Provider,{value:b,children:[m&&b.visualElement?T.jsx(m,{visualElement:b.visualElement,...g}):null,yH(s,d,_H(x,b.visualElement,p),x,v,e,i)]})}l.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const h=M.forwardRef(l);return h[SH]=s,h}function kH({layoutId:s}){const e=M.useContext(jL).id;return e&&s!==void 0?e+"-"+s:s}function CH(s,e){M.useContext(cM).strict}function TH(s){const e=uM(),{drag:t,layout:n}=e;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(s)||n!=null&&n.isEnabled(s)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function PH(s,e){if(typeof Proxy>"u")return gS;const t=new Map,n=(i,o)=>gS(i,o,s,e),r=(i,o)=>n(i,o);return new Proxy(r,{get:(i,o)=>o==="create"?n:(t.has(o)||t.set(o,gS(o,void 0,s,e)),t.get(o))})}const RH=(s,e)=>e.isSVG??PE(s)?new f5(e):new a5(e,{allowProjection:s!==M.Fragment});class LH extends Fl{constructor(e){super(e),e.animationState||(e.animationState=v5(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Bw(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let DH=0;class MH extends Fl{constructor(){super(...arguments),this.id=DH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const NH={animation:{Feature:LH},exit:{Feature:MH}};function cy(s){return{point:{x:s.pageX,y:s.pageY}}}const IH=s=>e=>SE(e)&&s(e,cy(e));function Qp(s,e,t,n){return fm(s,e,IH(t),n)}const yM=({current:s})=>s?s.ownerDocument.defaultView:null,FP=(s,e)=>Math.abs(s-e);function OH(s,e){const t=FP(s.x,e.x),n=FP(s.y,e.y);return Math.sqrt(t**2+n**2)}const BP=new Set(["auto","scroll"]);class vM{constructor(e,t,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=v=>{this.handleScroll(v.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=vS(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,x=OH(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!x)return;const{point:A}=v,{timestamp:E}=Un;this.history.push({...A,timestamp:E});const{onStart:R,onMove:C}=this.handlers;b||(R&&R(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,v)},this.handlePointerMove=(v,b)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=yS(b,this.transformPagePoint),St.update(this.updatePoint,!0)},this.handlePointerUp=(v,b)=>{this.end();const{onEnd:x,onSessionEnd:A,resumeAnimation:E}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=vS(v.type==="pointercancel"?this.lastMoveEventInfo:yS(b,this.transformPagePoint),this.history);this.startEvent&&x&&x(v,R),A&&A(v,R)},!SE(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=r||window;const h=cy(e),d=yS(h,this.transformPagePoint),{point:p}=d,{timestamp:m}=Un;this.history=[{...p,timestamp:m}];const{onSessionStart:g}=t;g&&g(e,vS(d,this.history)),this.removeListeners=oy(Qp(this.contextWindow,"pointermove",this.handlePointerMove),Qp(this.contextWindow,"pointerup",this.handlePointerUp),Qp(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(e){let t=e.parentElement;for(;t;){const n=getComputedStyle(t);(BP.has(n.overflowX)||BP.has(n.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const n=e===window,r=n?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},i={x:r.x-t.x,y:r.y-t.y};i.x===0&&i.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(e,r),St.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Dl(this.updatePoint)}}function yS(s,e){return e?{point:e(s.point)}:s}function $P(s,e){return{x:s.x-e.x,y:s.y-e.y}}function vS({point:s},e){return{point:s,delta:$P(s,wM(e)),offset:$P(s,jH(e)),velocity:FH(e,.1)}}function jH(s){return s[0]}function wM(s){return s[s.length-1]}function FH(s,e){if(s.length<2)return{x:0,y:0};let t=s.length-1,n=null;const r=wM(s);for(;t>=0&&(n=s[t],!(r.timestamp-n.timestamp>hi(e)));)t--;if(!n)return{x:0,y:0};n===s[0]&&s.length>2&&r.timestamp-n.timestamp>hi(e)*2&&(n=s[1]);const i=Nr(r.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(r.x-n.x)/i,y:(r.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function BH(s,{min:e,max:t},n){return e!==void 0&&s<e?s=n?Ft(e,s,n.min):Math.max(s,e):t!==void 0&&s>t&&(s=n?Ft(t,s,n.max):Math.min(s,t)),s}function UP(s,e,t){return{min:e!==void 0?s.min+e:void 0,max:t!==void 0?s.max+t-(s.max-s.min):void 0}}function $H(s,{top:e,left:t,bottom:n,right:r}){return{x:UP(s.x,t,r),y:UP(s.y,e,n)}}function VP(s,e){let t=e.min-s.min,n=e.max-s.max;return e.max-e.min<s.max-s.min&&([t,n]=[n,t]),{min:t,max:n}}function UH(s,e){return{x:VP(s.x,e.x),y:VP(s.y,e.y)}}function VH(s,e){let t=.5;const n=ps(s),r=ps(e);return r>n?t=cm(e.min,e.max-n,s.min):n>r&&(t=cm(s.min,s.max-r,e.min)),Yi(0,1,t)}function zH(s,e){const t={};return e.min!==void 0&&(t.min=e.min-s.min),e.max!==void 0&&(t.max=e.max-s.min),t}const p_=.35;function HH(s=p_){return s===!1?s=0:s===!0&&(s=p_),{x:zP(s,"left","right"),y:zP(s,"top","bottom")}}function zP(s,e,t){return{min:HP(s,e),max:HP(s,t)}}function HP(s,e){return typeof s=="number"?s:s[e]||0}const WH=new WeakMap;class GH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=gn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{t&&this.snapToCursor(cy(m).point),this.stopAnimation()},o=(m,g)=>{const{drag:v,dragPropagation:b,onDragStart:x}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kz(v),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_i(E=>{let R=this.getAxisMotionValue(E).get()||0;if(Xi.test(R)){const{projection:C}=this.visualElement;if(C&&C.layout){const D=C.layout.layoutBox[E];D&&(R=ps(D)*(parseFloat(R)/100))}}this.originPoint[E]=R}),x&&St.update(()=>x(m,g),!1,!0),a_(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},l=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g;const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:x,onDrag:A}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:E}=g;if(b&&this.currentDirection===null){this.currentDirection=KH(E),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,E),this.updateAxis("y",g.point,E),this.visualElement.render(),A&&St.update(()=>A(m,g),!1,!0)},h=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g,this.stop(m,g),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>{const{dragSnapToOrigin:m}=this.getProps();(m||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:p}=this.getProps();this.panSession=new vM(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:h,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:yM(this.visualElement),element:this.visualElement.current})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!n)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&St.postRender(()=>l(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!zv(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=BH(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,r=this.constraints;e&&yh(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=$H(n.layoutBox,e):this.constraints=!1,this.elastic=HH(t),r!==this.constraints&&!yh(e)&&n&&this.constraints&&!this.hasMutatedConstraints&&_i(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=zH(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!yh(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=t5(n,r.root,this.visualElement.getTransformPagePoint());let o=UH(r.layout.layoutBox,i);if(t){const l=t(Qz(o));this.hasMutatedConstraints=!!l,l&&(o=$D(l))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),h=this.constraints||{},d=_i(p=>{if(!zv(p,t,this.currentDirection))return;let m=h&&h[p]||{};o&&(m={min:0,max:0});const g=r?200:1e6,v=r?40:1e7,b={type:"inertia",velocity:n?e[p]:0,bounceStiffness:g,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(p,b)});return Promise.all(d).then(l)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return a_(this.visualElement,e),n.start(yE(e,n,0,t,this.visualElement,!1))}stopAnimation(){_i(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){_i(t=>{const{drag:n}=this.getProps();if(!zv(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[t],h=i.get()||0;i.set(e[t]-Ft(o,l,.5)+h)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!yh(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};_i(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const h=l.get();r[o]=VH({min:h,max:h},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.constraints=!1,this.resolveConstraints(),_i(o=>{if(!zv(o,e,null))return;const l=this.getAxisMotionValue(o),{min:h,max:d}=this.constraints[o];l.set(Ft(h,d,r[o]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;WH.set(this.visualElement,this);const e=this.visualElement.current,t=Qp(e,"pointerdown",d=>{const{drag:p,dragListener:m=!0}=this.getProps(),g=d.target,v=g!==e&&Dz(g);p&&m&&!v&&this.start(d)});let n;const r=()=>{const{dragConstraints:d}=this.getProps();yh(d)&&d.current&&(this.constraints=this.resolveRefConstraints(),n||(n=qH(e,d.current,()=>this.scalePositionWithinConstraints())))},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),St.read(r);const l=fm(window,"resize",()=>this.scalePositionWithinConstraints()),h=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(_i(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=d[m].translate,g.set(g.get()+d[m].translate))}),this.visualElement.render())}));return()=>{l(),t(),o(),h&&h(),n&&n()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=p_,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function WP(s){let e=!0;return()=>{if(e){e=!1;return}s()}}function qH(s,e,t){const n=eP(s,WP(t)),r=eP(e,WP(t));return()=>{n(),r()}}function zv(s,e,t){return(e===!0||e===s)&&(t===null||t===s)}function KH(s,e=10){let t=null;return Math.abs(s.y)>e?t="y":Math.abs(s.x)>e&&(t="x"),t}class XH extends Fl{constructor(e){super(e),this.removeGroupControls=Ir,this.removeListeners=Ir,this.controls=new GH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ir}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const wS=s=>(e,t)=>{s&&St.update(()=>s(e,t),!1,!0)};class YH extends Fl{constructor(){super(...arguments),this.removePointerDownListener=Ir}onPointerDown(e){this.session=new vM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:wS(e),onStart:wS(t),onMove:wS(n),onEnd:(i,o)=>{delete this.session,r&&St.postRender(()=>r(i,o))}}}mount(){this.removePointerDownListener=Qp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let bS=!1;class JH extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),bS&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),a0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,e.layoutDependency!==t&&o.setOptions({...o.options,layoutDependency:t}),bS=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||St.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),xE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;bS=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function bM(s){const[e,t]=rH(),n=M.useContext(jL);return T.jsx(JH,{...s,layoutGroup:n,switchLayoutGroup:M.useContext(mM),isPresent:e,safeToRemove:t})}const QH={pan:{Feature:YH},drag:{Feature:XH,ProjectionNode:aM,MeasureLayout:bM}};function GP(s,e,t){const{props:n}=s;s.animationState&&n.whileHover&&s.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,i=n[r];i&&St.postRender(()=>i(e,cy(e)))}class ZH extends Fl{mount(){const{current:e}=this.node;e&&(this.unmount=Tz(e,(t,n)=>(GP(this.node,n,"Start"),r=>GP(this.node,r,"End"))))}unmount(){}}class eW extends Fl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=oy(fm(this.node.current,"focus",()=>this.onFocus()),fm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function qP(s,e,t){const{props:n}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&n.whileTap&&s.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),i=n[r];i&&St.postRender(()=>i(e,cy(e)))}class tW extends Fl{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:t,propagate:n}=this.node.props;this.unmount=Nz(e,(r,i)=>(qP(this.node,i,"Start"),(o,{success:l})=>qP(this.node,o,l?"End":"Cancel")),{useGlobalTarget:t,stopPropagation:(n==null?void 0:n.tap)===!1})}unmount(){}}const m_=new WeakMap,xS=new WeakMap,nW=s=>{const e=m_.get(s.target);e&&e(s)},sW=s=>{s.forEach(nW)};function rW({root:s,...e}){const t=s||document;xS.has(t)||xS.set(t,{});const n=xS.get(t),r=JSON.stringify(e);return n[r]||(n[r]=new IntersectionObserver(sW,{root:s,...e})),n[r]}function iW(s,e,t){const n=rW(e);return m_.set(s,t),n.observe(s),()=>{m_.delete(s),n.unobserve(s)}}const oW={some:0,all:1};class aW extends Fl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:oW[r]},l=h=>{const{isIntersecting:d}=h;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),g=d?p:m;g&&g(h)};return iW(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(lW(e,t))&&this.startObserver()}unmount(){}}function lW({viewport:s={}},{viewport:e={}}={}){return t=>s[t]!==e[t]}const cW={inView:{Feature:aW},tap:{Feature:tW},focus:{Feature:eW},hover:{Feature:ZH}},uW={layout:{ProjectionNode:aM,MeasureLayout:bM}},hW={...NH,...cW,...QH,...uW},Ll=PH(hW,RH),ds=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),g_=[.001,0,0,.001,0,0],SS=1.35,or={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},qi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},pm="pdfjs_internal_editor_",Ie={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ke={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},xM={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Nn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Zp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Jt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},vh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},uy={ERRORS:0,WARNINGS:1,INFOS:5},gf={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Hv={moveTo:0,lineTo:1,curveTo:2,closePath:3},SM={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Vw=uy.WARNINGS;function dW(s){Number.isInteger(s)&&(Vw=s)}function fW(){return Vw}function zw(s){Vw>=uy.INFOS&&console.info(`Info: ${s}`)}function Oe(s){Vw>=uy.WARNINGS&&console.warn(`Warning: ${s}`)}function yt(s){throw new Error(s)}function Xe(s,e){s||yt(e)}function pW(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function RE(s,e=null,t=null){if(!s)return null;if(t&&typeof s=="string"){if(t.addDefaultProtocol&&s.startsWith("www.")){const r=s.match(/\./g);(r==null?void 0:r.length)>=2&&(s=`http://${s}`)}if(t.tryConvertEncoding)try{s=wW(s)}catch{}}const n=e?URL.parse(s,e):URL.parse(s);return pW(n)?n:null}function LE(s,e,t=!1){const n=URL.parse(s);return n?(n.hash=e,n.href):t&&RE(s,"http://example.com")?s.split("#",1)[0]+`${e?`#${e}`:""}`:""}function $e(s,e,t,n=!1){return Object.defineProperty(s,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Nu=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class KP extends Nu{constructor(e,t){super(e,"PasswordException"),this.code=t}}class _S extends Nu{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class ew extends Nu{constructor(e){super(e,"InvalidPDFException")}}class mm extends Nu{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class mW extends Nu{constructor(e){super(e,"FormatError")}}class sa extends Nu{constructor(e){super(e,"AbortException")}}function _M(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&yt("Invalid argument for bytesToString");const e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),o=s.subarray(r,i);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function hy(s){typeof s!="string"&&yt("Invalid argument for stringToBytes");const e=s.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=s.charCodeAt(n)&255;return t}function gW(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function yW(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function vW(){try{return new Function(""),!0}catch{return!1}}class Tn{static get isLittleEndian(){return $e(this,"isLittleEndian",yW())}static get isEvalSupported(){return $e(this,"isEvalSupported",vW())}static get isOffscreenCanvasSupported(){return $e(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return $e(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return $e(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return $e(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const AS=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var Zo,l0,y_;class ge{static makeHexColor(e,t,n){return`#${AS[e]}${AS[t]}${AS[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const r=e[n],i=e[n+1];e[n]=r*t[0]+i*t[2]+t[4],e[n+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const r=t[0],i=t[1],o=t[2],l=t[3],h=t[4],d=t[5];for(let p=0;p<6;p+=2){const m=e[n+p],g=e[n+p+1];e[n+p]=m*r+g*o+h,e[n+p+1]=m*i+g*l+d}}static applyInverseTransform(e,t){const n=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,n){const r=t[0],i=t[1],o=t[2],l=t[3],h=t[4],d=t[5],p=e[0],m=e[1],g=e[2],v=e[3];let b=r*p+h,x=b,A=r*g+h,E=A,R=l*m+d,C=R,D=l*v+d,N=D;if(i!==0||o!==0){const I=i*p,j=i*g,F=o*m,W=o*v;b+=F,E+=F,A+=W,x+=W,R+=I,N+=I,D+=j,C+=j}n[0]=Math.min(n[0],b,A,x,E),n[1]=Math.min(n[1],R,D,C,N),n[2]=Math.max(n[2],b,A,x,E),n[3]=Math.max(n[3],R,D,C,N)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],r=e[1],i=e[2],o=e[3],l=n**2+r**2,h=n*i+r*o,d=i**2+o**2,p=(l+d)/2,m=Math.sqrt(p**2-(l*d-h**2));t[0]=Math.sqrt(p+m||1),t[1]=Math.sqrt(p-m||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[n,i,r,o]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,i){i[0]=Math.min(i[0],e,n),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,n),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,n,r,i,o,l,h,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],t,h),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],t,h),P(this,Zo,y_).call(this,e,n,i,l,t,r,o,h,3*(-e+3*(n-i)+l),6*(e-2*n+i),3*(n-e),d),P(this,Zo,y_).call(this,e,n,i,l,t,r,o,h,3*(-t+3*(r-o)+h),6*(t-2*r+o),3*(r-t),d)}}Zo=new WeakSet,l0=function(e,t,n,r,i,o,l,h,d,p){if(d<=0||d>=1)return;const m=1-d,g=d*d,v=g*d,b=m*(m*(m*e+3*d*t)+3*g*n)+v*r,x=m*(m*(m*i+3*d*o)+3*g*l)+v*h;p[0]=Math.min(p[0],b),p[1]=Math.min(p[1],x),p[2]=Math.max(p[2],b),p[3]=Math.max(p[3],x)},y_=function(e,t,n,r,i,o,l,h,d,p,m,g){if(Math.abs(d)<1e-12){Math.abs(p)>=1e-12&&P(this,Zo,l0).call(this,e,t,n,r,i,o,l,h,-m/p,g);return}const v=p**2-4*m*d;if(v<0)return;const b=Math.sqrt(v),x=2*d;P(this,Zo,l0).call(this,e,t,n,r,i,o,l,h,(-p+b)/x,g),P(this,Zo,l0).call(this,e,t,n,r,i,o,l,h,(-p-b)/x,g)},k(ge,Zo);function wW(s){return decodeURIComponent(escape(s))}let ES=null,XP=null;function AM(s){return ES||(ES=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,XP=new Map([["","t"]])),s.replaceAll(ES,(e,t,n)=>t?t.normalize("NFKC"):XP.get(n))}function DE(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),_M(s)}const ME="pdfjs_internal_id_";function bW(s,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,r,...i]=t;if(!s(n)&&!Number.isInteger(n)||!e(r))return!1;const o=i.length;let l=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const h of i)if(!(typeof h=="number"||l&&h===null))return!1;return!0}function ns(s,e,t){return Math.min(Math.max(s,e),t)}function EM(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(_M(s))}function xW(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):hy(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...e){return new Promise(t=>{t(s(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((e,t)=>e+t,0)});class gm{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(i){var h;if(!i)return;let o=null;const l=i.name;if(l==="#text")o=i.value;else if(gm.shouldBuildText(l))(h=i==null?void 0:i.attributes)!=null&&h.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const d of i.children)r(d)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class NE{static setupStorage(e,t,n,r,i){const o=r.getValue(t,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",l=>{r.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of n.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const h=l.target.options,d=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:i}){const{attributes:o}=t,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[h,d]of Object.entries(o))if(d!=null)switch(h){case"class":d.length&&e.setAttribute(h,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||h!=="href"&&h!=="newWindow")&&e.setAttribute(h,d)}l&&i.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){var m,g;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,i=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:i,linkService:n});const l=i!=="richText",h=e.div;if(h.append(o),e.viewport){const v=`matrix(${e.viewport.transform.join(",")})`;h.style.transform=v}l&&h.setAttribute("class","xfaLayer xfaFont");const d=[];if(r.children.length===0){if(r.value){const v=document.createTextNode(r.value);o.append(v),l&&gm.shouldBuildText(r.name)&&d.push(v)}return{textDivs:d}}const p=[[r,-1,o]];for(;p.length>0;){const[v,b,x]=p.at(-1);if(b+1===v.children.length){p.pop();continue}const A=v.children[++p.at(-1)[1]];if(A===null)continue;const{name:E}=A;if(E==="#text"){const C=document.createTextNode(A.value);d.push(C),x.append(C);continue}const R=(m=A==null?void 0:A.attributes)!=null&&m.xmlns?document.createElementNS(A.attributes.xmlns,E):document.createElement(E);if(x.append(R),A.attributes&&this.setAttributes({html:R,element:A,storage:t,intent:i,linkService:n}),((g=A.children)==null?void 0:g.length)>0)p.push([A,-1,R]);else if(A.value){const C=document.createTextNode(A.value);l&&gm.shouldBuildText(E)&&d.push(C),R.append(C)}}for(const v of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ho="http://www.w3.org/2000/svg",uc=class uc{};te(uc,"CSS",96),te(uc,"PDF",72),te(uc,"PDF_TO_CSS_UNITS",uc.CSS/uc.PDF);let ra=uc;async function Pf(s,e="text"){if(kp(s,document.baseURI)){const t=await fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class dy{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:i=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=i,this.offsetY=o,n*=t;const h=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let p,m,g,v;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,m=0,g=0,v=1;break;case 90:p=0,m=1,g=1,v=0;break;case 270:p=0,m=-1,g=-1,v=0;break;case 0:p=1,m=0,g=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(g=-g,v=-v);let b,x,A,E;p===0?(b=Math.abs(d-e[1])*n+i,x=Math.abs(h-e[0])*n+o,A=(e[3]-e[1])*n,E=(e[2]-e[0])*n):(b=Math.abs(h-e[0])*n+i,x=Math.abs(d-e[1])*n+o,A=(e[2]-e[0])*n,E=(e[3]-e[1])*n),this.transform=[p*n,m*n,g*n,v*n,b-p*n*h-g*n*d,x-m*n*h-v*n*d],this.width=A,this.height=E}get rawDims(){const e=this.viewBox;return $e(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new dy({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const n=[e,t];return ge.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];ge.applyTransform(t,this.transform);const n=[e[2],e[3]];return ge.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return ge.applyInverseTransform(n,this.transform),n}}class Hw extends Nu{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function fy(s){const e=s.length;let t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function Ww(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function kM(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function CM(s,e="document.pdf"){if(typeof s!="string")return e;if(fy(s))return Oe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return e;const r=l=>{try{let h=decodeURIComponent(l);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:l):h}catch{return l}},i=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(i.test(o))return r(o);if(n.searchParams.size>0){const l=Array.from(n.searchParams.values()).reverse();for(const d of l)if(i.test(d))return r(d);const h=Array.from(n.searchParams.keys()).reverse();for(const d of h)if(i.test(d))return r(d)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return r(h[0])}return e}class YP{constructor(){te(this,"started",Object.create(null));te(this,"times",[])}time(e){e in this.started&&Oe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Oe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-r}ms
`);return e.join("")}}function kp(s,e){const t=e?URL.parse(s,e):URL.parse(s);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function dr(s){s.preventDefault()}function jt(s){s.preventDefault(),s.stopPropagation()}function SW(s){console.log("Deprecated API usage: "+s)}var Sm;class ym{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;u(this,Sm)||S(this,Sm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,Sm).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let h=parseInt(t[6],10);h=h>=0&&h<=59?h:0;const d=t[7]||"Z";let p=parseInt(t[8],10);p=p>=0&&p<=23?p:0;let m=parseInt(t[9],10)||0;return m=m>=0&&m<=59?m:0,d==="-"?(o+=p,l+=m):d==="+"&&(o-=p,l-=m),new Date(Date.UTC(n,r,i,o,l,h))}}Sm=new WeakMap,k(ym,Sm);function TM(s,{scale:e=1,rotation:t=0}){const{width:n,height:r}=s.attributes.style,i=[0,0,parseInt(n),parseInt(r)];return new dy({viewBox:i,userUnit:1,scale:e,rotation:t})}function Rf(s){if(s.startsWith("#")){const e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Oe(`Not a valid color format: "${s}"`),[0,0,0])}function _W(s){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of s.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;s.set(t,Rf(n))}e.remove()}function Ot(s){const{a:e,b:t,c:n,d:r,e:i,f:o}=s.getTransform();return[e,t,n,r,i,o]}function bi(s){const{a:e,b:t,c:n,d:r,e:i,f:o}=s.getTransform().invertSelf();return[e,t,n,r,i,o]}function Nl(s,e,t=!1,n=!0){if(e instanceof dy){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:o}=s,l=Tn.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,d=`var(--total-scale-factor) * ${i}px`,p=l?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,m=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!t||e.rotation%180===0?(o.width=p,o.height=m):(o.width=m,o.height=p)}n&&s.setAttribute("data-main-rotation",e.rotation)}class fi{constructor(){const{pixelRatio:e}=fi;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r,i=-1){let o=1/0,l=1/0,h=1/0;n=fi.capPixels(n,i),n>0&&(o=Math.sqrt(n/(e*t))),r!==-1&&(l=r/e,h=r/t);const d=Math.min(o,l,h);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const tw=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class AW{static get isDarkMode(){var e;return $e(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class PM{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),$e(this,"commentForegroundColor",Rf(n))}}function RM(s,e,t,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return s=Math.round(s*n+r),e=Math.round(e*n+r),t=Math.round(t*n+r),[s,e,t]}function JP(s,e){const t=s[0]/255,n=s[1]/255,r=s[2]/255,i=Math.max(t,n,r),o=Math.min(t,n,r),l=(i+o)/2;if(i===o)e[0]=e[1]=0;else{const h=i-o;switch(e[1]=l<.5?h/(i+o):h/(2-i-o),i){case t:e[0]=((n-r)/h+(n<r?6:0))*60;break;case n:e[0]=((r-t)/h+2)*60;break;case r:e[0]=((t-n)/h+4)*60;break}}e[2]=l}function v_(s,e){const t=s[0],n=s[1],r=s[2],i=(1-Math.abs(2*r-1))*n,o=i*(1-Math.abs(t/60%2-1)),l=r-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+l,e[1]=o+l,e[2]=l;break;case 1:e[0]=o+l,e[1]=i+l,e[2]=l;break;case 2:e[0]=l,e[1]=i+l,e[2]=o+l;break;case 3:e[0]=l,e[1]=o+l,e[2]=i+l;break;case 4:e[0]=o+l,e[1]=l,e[2]=i+l;break;case 5:case 6:e[0]=i+l,e[1]=l,e[2]=o+l;break}}function QP(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function ZP(s,e,t){v_(s,t),t.map(QP);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];v_(e,t),t.map(QP);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const eR=new Map;function LM(s,e){const t=s[0]+s[1]*256+s[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=eR.get(t);if(n)return n;const r=new Float32Array(9),i=r.subarray(0,3),o=r.subarray(3,6);JP(s,o);const l=r.subarray(6,9);JP(e,l);const h=l[2]<.5,d=h?12:4.5;if(o[2]=h?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),ZP(o,l,i)<d){let p,m;h?(p=o[2],m=1):(p=0,m=o[2]);const g=.005;for(;m-p>g;){const v=o[2]=(p+m)/2;h===ZP(o,l,i)<d?p=v:m=v}o[2]=h?m:p}return v_(o,i),n=ge.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),eR.set(t,n),n}function IE({html:s,dir:e,className:t},n){const r=document.createDocumentFragment();if(typeof s=="string"){const i=document.createElement("p");i.dir=e||"auto";const o=s.split(/(?:\r\n?|\n)/);for(let l=0,h=o.length;l<h;++l){const d=o[l];i.append(document.createTextNode(d)),l<h-1&&i.append(document.createElement("br"))}r.append(i)}else NE.render({xfaHtml:s,div:r,intent:"richText"});r.firstChild.classList.add("richText",t),n.append(r)}var Oa,ja,Sr,_r,_m,Fa,Vh,zh,Am,dw,DM,Hn,MM,NM,wh,Cp;const go=class go{constructor(e){k(this,Hn);k(this,Oa,null);k(this,ja,null);k(this,Sr);k(this,_r,null);k(this,_m,null);k(this,Fa,null);k(this,Vh,null);k(this,zh,null);S(this,Sr,e),u(go,Am)||S(go,Am,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=S(this,Oa,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,Sr)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",dr,{signal:t}),e.addEventListener("pointerdown",P(go,dw,DM),{signal:t}));const n=S(this,_r,document.createElement("div"));n.className="buttons",e.append(n);const r=u(this,Sr).toolbarPosition;if(r){const{style:i}=e,o=u(this,Sr)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return u(this,Oa)}hide(){var e;u(this,Oa).classList.add("hidden"),(e=u(this,ja))==null||e.hideDropdown()}show(){var e,t;u(this,Oa).classList.remove("hidden"),(e=u(this,_m))==null||e.shown(),(t=u(this,Fa))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=u(this,Sr),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",u(go,Am)[e]),P(this,Hn,wh).call(this,n)&&n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),u(this,_r).append(n)}async addAltText(e){const t=await e.render();P(this,Hn,wh).call(this,t),u(this,_r).append(t,u(this,Hn,Cp)),S(this,_m,e)}addComment(e,t=null){if(u(this,Fa))return;const n=e.renderForToolbar();if(!n)return;P(this,Hn,wh).call(this,n);const r=S(this,Vh,u(this,Hn,Cp));t?(u(this,_r).insertBefore(n,t),u(this,_r).insertBefore(r,t)):u(this,_r).append(n,r),S(this,Fa,e),e.toolbar=this}addColorPicker(e){if(u(this,ja))return;S(this,ja,e);const t=e.renderButton();P(this,Hn,wh).call(this,t),u(this,_r).append(t,u(this,Hn,Cp))}async addEditSignatureButton(e){const t=S(this,zh,await e.renderEditButton(u(this,Sr)));P(this,Hn,wh).call(this,t),u(this,_r).append(t,u(this,Hn,Cp))}removeButton(e){var t,n;switch(e){case"comment":(t=u(this,Fa))==null||t.removeToolbarCommentButton(),S(this,Fa,null),(n=u(this,Vh))==null||n.remove(),S(this,Vh,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,n){const r=u(this,_r).querySelector(n);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){u(this,zh)&&(u(this,zh).title=e)}remove(){var e;u(this,Oa).remove(),(e=u(this,ja))==null||e.destroy(),S(this,ja,null)}};Oa=new WeakMap,ja=new WeakMap,Sr=new WeakMap,_r=new WeakMap,_m=new WeakMap,Fa=new WeakMap,Vh=new WeakMap,zh=new WeakMap,Am=new WeakMap,dw=new WeakSet,DM=function(e){e.stopPropagation()},Hn=new WeakSet,MM=function(e){u(this,Sr)._focusEventsAllowed=!1,jt(e)},NM=function(e){u(this,Sr)._focusEventsAllowed=!0,jt(e)},wh=function(e){const t=u(this,Sr)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",P(this,Hn,MM).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",P(this,Hn,NM).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",dr,{signal:t}),!0)},Cp=function(){const e=document.createElement("div");return e.className="divider",e},k(go,dw),k(go,Am,null);let w_=go;var Em,yc,vo,ia,IM,OM,b_;class EW{constructor(e){k(this,ia);k(this,Em,null);k(this,yc,null);k(this,vo);S(this,vo,e)}show(e,t,n){const[r,i]=P(this,ia,OM).call(this,t,n),{style:o}=u(this,yc)||S(this,yc,P(this,ia,IM).call(this));e.append(u(this,yc)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,yc).remove()}}Em=new WeakMap,yc=new WeakMap,vo=new WeakMap,ia=new WeakSet,IM=function(){const e=S(this,yc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=u(this,vo)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",dr,{signal:t});const n=S(this,Em,document.createElement("div"));return n.className="buttons",e.append(n),u(this,vo).hasCommentManager()&&P(this,ia,b_).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{u(this,vo).commentSelection("floating_button")}),P(this,ia,b_).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{u(this,vo).highlightSelection("floating_button")}),e},OM=function(e,t){let n=0,r=0;for(const i of e){const o=i.y+i.height;if(o<n)continue;const l=i.x+(t?i.width:0);if(o>n){r=l,n=o;continue}t?l>r&&(r=l):l<r&&(r=l)}return[t?1-r:r,n]},b_=function(e,t,n,r){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const o=document.createElement("span");i.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",n);const l=u(this,vo)._signal;l instanceof AbortSignal&&!l.aborted&&(i.addEventListener("contextmenu",dr,{signal:l}),i.addEventListener("click",r,{signal:l})),u(this,Em).append(i)};function jM(s,e,t){for(const n of t)e.addEventListener(n,s[n].bind(s))}var fw;class kW{constructor(){k(this,fw,0)}get id(){return`${pm}${un(this,fw)._++}`}}fw=new WeakMap;var Hh,km,Yn,Wh,c0;const KE=class KE{constructor(){k(this,Wh);k(this,Hh,DE());k(this,km,0);k(this,Yn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return $e(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:i}=e;return P(this,Wh,c0).call(this,`${t}_${n}_${r}_${i}`,e)}async getFromUrl(e){return P(this,Wh,c0).call(this,e,e)}async getFromBlob(e,t){const n=await t;return P(this,Wh,c0).call(this,e,n)}async getFromId(e){u(this,Yn)||S(this,Yn,new Map);const t=u(this,Yn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,Yn)||S(this,Yn,new Map);let n=u(this,Yn).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${u(this,Hh)}_${un(this,km)._++}`,refCounter:1,isSvg:!1},u(this,Yn).set(e,n),u(this,Yn).set(n.id,n),n}getSvgUrl(e){const t=u(this,Yn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;u(this,Yn)||S(this,Yn,new Map);const t=u(this,Yn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,Hh)}_`)}};Hh=new WeakMap,km=new WeakMap,Yn=new WeakMap,Wh=new WeakSet,c0=async function(e,t){u(this,Yn)||S(this,Yn,new Map);let n=u(this,Yn).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${u(this,Hh)}_${un(this,km)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await Pf(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=KE._isSVGFittingCanvas,o=new FileReader,l=new Image,h=new Promise((d,p)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,d()},o.onload=async()=>{const m=n.svgUrl=o.result;l.src=await i?`${m}#svgView(preserveAspectRatio(none))`:m},l.onerror=o.onerror=p});o.readAsDataURL(r),await h}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Oe(r),n=null}return u(this,Yn).set(e,n),n&&u(this,Yn).set(n.id,n),n};let x_=KE;var Qt,Ba,Cm,It;class CW{constructor(e=128){k(this,Qt,[]);k(this,Ba,!1);k(this,Cm);k(this,It,-1);S(this,Cm,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(r&&e(),u(this,Ba))return;const h={cmd:e,undo:t,post:n,type:i};if(u(this,It)===-1){u(this,Qt).length>0&&(u(this,Qt).length=0),S(this,It,0),u(this,Qt).push(h);return}if(o&&u(this,Qt)[u(this,It)].type===i){l&&(h.undo=u(this,Qt)[u(this,It)].undo),u(this,Qt)[u(this,It)]=h;return}const d=u(this,It)+1;d===u(this,Cm)?u(this,Qt).splice(0,1):(S(this,It,d),d<u(this,Qt).length&&u(this,Qt).splice(d)),u(this,Qt).push(h)}undo(){if(u(this,It)===-1)return;S(this,Ba,!0);const{undo:e,post:t}=u(this,Qt)[u(this,It)];e(),t==null||t(),S(this,Ba,!1),S(this,It,u(this,It)-1)}redo(){if(u(this,It)<u(this,Qt).length-1){S(this,It,u(this,It)+1),S(this,Ba,!0);const{cmd:e,post:t}=u(this,Qt)[u(this,It)];e(),t==null||t(),S(this,Ba,!1)}}hasSomethingToUndo(){return u(this,It)!==-1}hasSomethingToRedo(){return u(this,It)<u(this,Qt).length-1}cleanType(e){if(u(this,It)!==-1){for(let t=u(this,It);t>=0;t--)if(u(this,Qt)[t].type!==e){u(this,Qt).splice(t+1,u(this,It)-t),S(this,It,t);return}u(this,Qt).length=0,S(this,It,-1)}}destroy(){S(this,Qt,null)}}Qt=new WeakMap,Ba=new WeakMap,Cm=new WeakMap,It=new WeakMap;var pw,FM;class py{constructor(e){k(this,pw);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Tn.platform;for(const[n,r,i={}]of e)for(const o of n){const l=o.startsWith("mac+");t&&l?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!l&&(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(P(this,pw,FM).call(this,t));if(!n)return;const{callback:r,options:{bubbles:i=!1,args:o=[],checker:l=null}}=n;l&&!l(e,t)||(r.bind(e,...o,t)(),i||jt(t))}}pw=new WeakSet,FM=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const mw=class mw{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return _W(e),$e(this,"_colors",e)}convert(e){const t=Rf(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((i,o)=>i===t[o]))return mw._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?ge.makeHexColor(...t):e}};te(mw,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let S_=mw;var Gh,zs,qh,Vt,pn,Kh,Ar,Xh,Er,Jn,$a,Ua,Yh,Va,Ai,kr,vc,Tm,Pm,Jh,Rm,Ei,za,Qh,Ha,ki,gw,Wa,Zh,Lm,Ga,wc,ed,qa,Dm,sn,ot,wo,Ka,Xa,Mm,td,Nm,Ya,Ci,bo,Im,Om,Cr,le,u0,__,BM,$M,Tp,UM,VM,zM,A_,HM,E_,k_,WM,as,fo,GM,qM,C_,KM,Pp,T_;const Mh=class Mh{constructor(e,t,n,r,i,o,l,h,d,p,m,g,v,b,x,A){k(this,le);k(this,Gh,new AbortController);k(this,zs,null);k(this,qh,null);k(this,Vt,new Map);k(this,pn,new Map);k(this,Kh,null);k(this,Ar,null);k(this,Xh,null);k(this,Er,new CW);k(this,Jn,null);k(this,$a,null);k(this,Ua,null);k(this,Yh,0);k(this,Va,new Set);k(this,Ai,null);k(this,kr,null);k(this,vc,new Set);te(this,"_editorUndoBar",null);k(this,Tm,!1);k(this,Pm,!1);k(this,Jh,!1);k(this,Rm,null);k(this,Ei,null);k(this,za,null);k(this,Qh,null);k(this,Ha,!1);k(this,ki,null);k(this,gw,new kW);k(this,Wa,!1);k(this,Zh,!1);k(this,Lm,!1);k(this,Ga,null);k(this,wc,null);k(this,ed,null);k(this,qa,null);k(this,Dm,null);k(this,sn,Ie.NONE);k(this,ot,new Set);k(this,wo,null);k(this,Ka,null);k(this,Xa,null);k(this,Mm,null);k(this,td,null);k(this,Nm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});k(this,Ya,[0,0]);k(this,Ci,null);k(this,bo,null);k(this,Im,null);k(this,Om,null);k(this,Cr,null);const E=this._signal=u(this,Gh).signal;S(this,bo,e),S(this,Im,t),S(this,Om,n),S(this,Kh,r),S(this,Jn,i),S(this,Ka,o),S(this,td,h),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:E}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),l._on("setpreference",this.onSetPreference.bind(this),{signal:E}),l._on("switchannotationeditorparams",R=>this.updateParams(R.type,R.value),{signal:E}),window.addEventListener("pointerdown",()=>{S(this,Zh,!0)},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{S(this,Zh,!1)},{capture:!0,signal:E}),P(this,le,UM).call(this),P(this,le,WM).call(this),P(this,le,A_).call(this),S(this,Ar,h.annotationStorage),S(this,Rm,h.filterFactory),S(this,Xa,d),S(this,Qh,p||null),S(this,Tm,m),S(this,Pm,g),S(this,Jh,v),S(this,Dm,b||null),this.viewParameters={realScale:ra.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=A!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=Mh.prototype,t=o=>u(o,bo).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:h}=l;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return $e(this,"_keyboardManager",new py([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&u(o,bo).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&u(o,bo).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,n,r,i,o,l,h,d;(e=u(this,Cr))==null||e.resolve(),S(this,Cr,null),(t=u(this,Gh))==null||t.abort(),S(this,Gh,null),this._signal=null;for(const p of u(this,pn).values())p.destroy();u(this,pn).clear(),u(this,Vt).clear(),u(this,vc).clear(),(n=u(this,qa))==null||n.clear(),S(this,zs,null),u(this,ot).clear(),u(this,Er).destroy(),(r=u(this,Kh))==null||r.destroy(),(i=u(this,Jn))==null||i.destroy(),(o=u(this,Ka))==null||o.destroy(),(l=u(this,ki))==null||l.hide(),S(this,ki,null),(h=u(this,ed))==null||h.destroy(),S(this,ed,null),S(this,qh,null),u(this,Ei)&&(clearTimeout(u(this,Ei)),S(this,Ei,null)),u(this,Ci)&&(clearTimeout(u(this,Ci)),S(this,Ci,null)),(d=this._editorUndoBar)==null||d.destroy(),S(this,td,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Dm)}get useNewAltTextFlow(){return u(this,Pm)}get useNewAltTextWhenAddingImage(){return u(this,Jh)}get hcmFilter(){return $e(this,"hcmFilter",u(this,Xa)?u(this,Rm).addHCMFilter(u(this,Xa).foreground,u(this,Xa).background):"none")}get direction(){return $e(this,"direction",getComputedStyle(u(this,bo)).direction)}get _highlightColors(){return $e(this,"_highlightColors",u(this,Qh)?new Map(u(this,Qh).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return $e(this,"highlightColors",null);const t=new Map,n=!!u(this,Xa);for(const[r,i]of e){const o=r.endsWith("_HCM");if(n&&o){t.set(r.replace("_HCM",""),i);continue}!n&&!o&&t.set(r,i)}return $e(this,"highlightColors",t)}get highlightColorNames(){return $e(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,Ua,e)}setMainHighlightColorPicker(e){S(this,ed,e)}editAltText(e,t=!1){var n;(n=u(this,Kh))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!u(this,Jn)}editComment(e,t,n,r){var i;(i=u(this,Jn))==null||i.showDialog(this,e,t,n,r)}selectComment(e,t){const n=u(this,pn).get(e),r=n==null?void 0:n.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=u(this,Jn))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=u(this,Jn))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=u(this,Jn))==null||t.removeComments([e.uid])}toggleComment(e,t,n=void 0){var r;(r=u(this,Jn))==null||r.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){var n;return e&&((n=u(this,Jn))==null?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=u(this,Jn))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(u(this,pn).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),r=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await n}getSignature(e){var t;(t=u(this,Ka))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return u(this,Ka)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":S(this,Jh,t);break}}onPageChanging({pageNumber:e}){S(this,Yh,e-1)}focusMainContainer(){u(this,bo).focus()}findParent(e,t){for(const n of u(this,pn).values()){const{x:r,y:i,width:o,height:l}=n.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=i&&t<=i+l)return n}return null}disableUserSelect(e=!1){u(this,Im).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,vc).add(e)}removeShouldRescale(e){u(this,vc).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*ra.PDF_TO_CSS_UNITS;for(const n of u(this,vc))n.onScaleChanging();(t=u(this,Ua))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:l}=n,h=n.toString(),p=P(this,le,u0).call(this,n).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;n.empty();const g=P(this,le,__).call(this,p),v=u(this,sn)===Ie.NONE,b=()=>{const x=g==null?void 0:g.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:m,anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:l,text:h});v&&this.showAllEditors("highlight",!0,!0),t&&(x==null||x.editComment())};if(v){this.switchToMode(Ie.HIGHLIGHT,b);return}b()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!u(this,Ar))return null;const t=`${pm}${e}`,n=u(this,Ar).getRawValue(t);return n&&u(this,Ar).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&u(this,Ar)&&!u(this,Ar).has(e.id)&&u(this,Ar).setValue(e.id,e)}a11yAlert(e,t=null){const n=u(this,Om);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,Ha)&&(S(this,Ha,!1),P(this,le,Tp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,ot))if(t.div.contains(e)){S(this,wc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,wc))return;const[e,t]=u(this,wc);S(this,wc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){P(this,le,A_).call(this),P(this,le,E_).call(this)}removeEditListeners(){P(this,le,HM).call(this),P(this,le,k_).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of u(this,kr))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of u(this,kr))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=u(this,zs))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of u(this,ot)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of u(this,kr))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){Oe(`paste: "${i.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const h of n){const d=await r.deserialize(h);if(!d)return;i.push(d)}const o=()=>{for(const h of i)P(this,le,C_).call(this,h);P(this,le,T_).call(this,i)},l=()=>{for(const h of i)h.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(i){Oe(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,sn)!==Ie.NONE&&!this.isEditorHandlingKeyboard&&Mh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Ha)&&(S(this,Ha,!1),P(this,le,Tp).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(P(this,le,VM).call(this),P(this,le,E_).call(this),P(this,le,as).call(this,{isEditing:u(this,sn)!==Ie.NONE,isEmpty:P(this,le,Pp).call(this),hasSomethingToUndo:u(this,Er).hasSomethingToUndo(),hasSomethingToRedo:u(this,Er).hasSomethingToRedo(),hasSelectedEditor:!1})):(P(this,le,zM).call(this),P(this,le,k_).call(this),P(this,le,as).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,kr)){S(this,kr,e);for(const t of u(this,kr))P(this,le,fo).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,gw).id}get currentLayer(){return u(this,pn).get(u(this,Yh))}getLayer(e){return u(this,pn).get(e)}get currentPageIndex(){return u(this,Yh)}addLayer(e){u(this,pn).set(e.pageIndex,e),u(this,Wa)?e.enable():e.disable()}removeLayer(e){u(this,pn).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,r=!1,i=!1){var o,l,h,d,p,m;if(u(this,sn)!==e&&!(u(this,Cr)&&(await u(this,Cr).promise,!u(this,Cr)))){if(S(this,Cr,Promise.withResolvers()),(o=u(this,Ua))==null||o.commitOrRemove(),u(this,sn)===Ie.POPUP&&((l=u(this,Jn))==null||l.hideSidebar()),(h=u(this,Jn))==null||h.destroyPopup(),S(this,sn,e),e===Ie.NONE){this.setEditingState(!1),P(this,le,qM).call(this);for(const g of u(this,Vt).values())g.hideStandaloneCommentButton();(d=this._editorUndoBar)==null||d.hide(),this.toggleComment(null),u(this,Cr).resolve();return}for(const g of u(this,Vt).values())g.addStandaloneCommentButton();e===Ie.SIGNATURE&&await((p=u(this,Ka))==null?void 0:p.loadSignatures()),this.setEditingState(!0),await P(this,le,GM).call(this),this.unselectAll();for(const g of u(this,pn).values())g.updateMode(e);if(e===Ie.POPUP){u(this,qh)||S(this,qh,await u(this,td).getAnnotationsByType(new Set(u(this,kr).map(b=>b._editorType))));const g=new Set,v=[];for(const b of u(this,Vt).values()){const{annotationElementId:x,hasComment:A,deleted:E}=b;x&&g.add(x),A&&!E&&v.push(b.getData())}for(const b of u(this,qh)){const{id:x,popupRef:A,contentsObj:E}=b;A&&(E!=null&&E.str)&&!g.has(x)&&!u(this,Va).has(x)&&v.push(b)}(m=u(this,Jn))==null||m.showSidebar(v)}if(!t){n&&this.addNewEditorFromKeyboard(),u(this,Cr).resolve();return}for(const g of u(this,Vt).values())g.uid===t?(this.setSelected(g),i?g.editComment():r?g.enterInEditMode():g.focus()):g.unselect();u(this,Cr).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==u(this,sn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(u(this,kr)){switch(e){case Ke.CREATE:this.currentLayer.addNewEditor(t);return;case Ke.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Mm)||S(this,Mm,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of u(this,ot))n.updateParams(e,t);else for(const n of u(this,kr))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var i;for(const o of u(this,Vt).values())o.editorType===e&&o.show(t);(((i=u(this,Mm))==null?void 0:i.get(Ke.HIGHLIGHT_SHOW_ALL))??!0)!==t&&P(this,le,fo).call(this,[[Ke.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Lm)!==e){S(this,Lm,e);for(const t of u(this,pn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of u(this,Vt).values())t.pageIndex===e&&(yield t)}getEditor(e){return u(this,Vt).get(e)}addEditor(e){u(this,Vt).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(u(this,Ei)&&clearTimeout(u(this,Ei)),S(this,Ei,setTimeout(()=>{this.focusMainContainer(),S(this,Ei,null)},0))),u(this,Vt).delete(e.id),e.annotationElementId&&((t=u(this,qa))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!u(this,Va).has(e.annotationElementId))&&((n=u(this,Ar))==null||n.remove(e.id))}addDeletedAnnotationElement(e){u(this,Va).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,Va).has(e)}removeDeletedAnnotationElement(e){u(this,Va).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,zs)!==e&&(S(this,zs,e),e&&P(this,le,fo).call(this,e.propertiesToUpdate))}updateUI(e){u(this,le,KM)===e&&P(this,le,fo).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){P(this,le,fo).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,ot).has(e)){u(this,ot).delete(e),e.unselect(),P(this,le,as).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,ot).add(e),e.select(),P(this,le,fo).call(this,e.propertiesToUpdate),P(this,le,as).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=u(this,Ua))==null||t.commitOrRemove();for(const n of u(this,ot))n!==e&&n.unselect();u(this,ot).clear(),u(this,ot).add(e),e.select(),P(this,le,fo).call(this,e.propertiesToUpdate),P(this,le,as).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,ot).has(e)}get firstSelectedEditor(){return u(this,ot).values().next().value}unselect(e){e.unselect(),u(this,ot).delete(e),P(this,le,as).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,ot).size!==0}get isEnterHandled(){return u(this,ot).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,Er).undo(),P(this,le,as).call(this,{hasSomethingToUndo:u(this,Er).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:P(this,le,Pp).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,Er).redo(),P(this,le,as).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,Er).hasSomethingToRedo(),isEmpty:P(this,le,Pp).call(this)})}addCommands(e){u(this,Er).add(e),P(this,le,as).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:P(this,le,Pp).call(this)})}cleanUndoStack(e){u(this,Er).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,ot)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},r=()=>{for(const o of t)P(this,le,C_).call(this,o)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=u(this,zs))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,zs)||this.hasSelection}selectAll(){for(const e of u(this,ot))e.commit();P(this,le,T_).call(this,u(this,Vt).values())}unselectAll(){var e;if(!(u(this,zs)&&(u(this,zs).commitOrRemove(),u(this,sn)!==Ie.NONE))&&!((e=u(this,Ua))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,ot))t.unselect();u(this,ot).clear(),P(this,le,as).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;u(this,Ya)[0]+=e,u(this,Ya)[1]+=t;const[r,i]=u(this,Ya),o=[...u(this,ot)],l=1e3;u(this,Ci)&&clearTimeout(u(this,Ci)),S(this,Ci,setTimeout(()=>{S(this,Ci,null),u(this,Ya)[0]=u(this,Ya)[1]=0,this.addCommands({cmd:()=>{for(const h of o)u(this,Vt).has(h.id)&&(h.translateInPage(r,i),h.translationDone())},undo:()=>{for(const h of o)u(this,Vt).has(h.id)&&(h.translateInPage(-r,-i),h.translationDone())},mustExec:!1})},l));for(const h of o)h.translateInPage(e,t),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,Ai,new Map);for(const e of u(this,ot))u(this,Ai).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,Ai))return!1;this.disableUserSelect(!1);const e=u(this,Ai);S(this,Ai,null);let t=!1;for(const[{x:r,y:i,pageIndex:o},l]of e)l.newX=r,l.newY=i,l.newPageIndex=o,t||(t=r!==l.savedX||i!==l.savedY||o!==l.savedPageIndex);if(!t)return!1;const n=(r,i,o,l)=>{if(u(this,Vt).has(r.id)){const h=u(this,pn).get(l);h?r._setParentAndPosition(h,i,o):(r.pageIndex=l,r.x=i,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:o,newPageIndex:l}]of e)n(r,i,o,l)},undo:()=>{for(const[r,{savedX:i,savedY:o,savedPageIndex:l}]of e)n(r,i,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,Ai))for(const n of u(this,Ai).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,ot).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,zs)===e}getActive(){return u(this,zs)}getMode(){return u(this,sn)}isEditingMode(){return u(this,sn)!==Ie.NONE}get imageManager(){return $e(this,"imageManager",new x_)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,p=t.rangeCount;d<p;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:r,width:i,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,p,m,g)=>({x:(p-r)/o,y:1-(d+m-n)/i,width:g/o,height:m/i});break;case"180":l=(d,p,m,g)=>({x:1-(d+m-n)/i,y:1-(p+g-r)/o,width:m/i,height:g/o});break;case"270":l=(d,p,m,g)=>({x:1-(p+g-r)/o,y:(d-n)/i,width:g/o,height:m/i});break;default:l=(d,p,m,g)=>({x:(d-n)/i,y:(p-r)/o,width:m/i,height:g/o});break}const h=[];for(let d=0,p=t.rangeCount;d<p;d++){const m=t.getRangeAt(d);if(!m.collapsed)for(const{x:g,y:v,width:b,height:x}of m.getClientRects())b===0||x===0||h.push(l(g,v,b,x))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,Xh)||S(this,Xh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,Xh))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=u(this,Xh))==null?void 0:r.get(e.data.id);if(!t)return;const n=u(this,Ar).getRawValue(t);n&&(u(this,sn)===Ie.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var i;const r=(i=u(this,qa))==null?void 0:i.get(e);r&&(r.setCanvas(t,n),u(this,qa).delete(e))}addMissingCanvas(e,t){(u(this,qa)||S(this,qa,new Map)).set(e,t)}};Gh=new WeakMap,zs=new WeakMap,qh=new WeakMap,Vt=new WeakMap,pn=new WeakMap,Kh=new WeakMap,Ar=new WeakMap,Xh=new WeakMap,Er=new WeakMap,Jn=new WeakMap,$a=new WeakMap,Ua=new WeakMap,Yh=new WeakMap,Va=new WeakMap,Ai=new WeakMap,kr=new WeakMap,vc=new WeakMap,Tm=new WeakMap,Pm=new WeakMap,Jh=new WeakMap,Rm=new WeakMap,Ei=new WeakMap,za=new WeakMap,Qh=new WeakMap,Ha=new WeakMap,ki=new WeakMap,gw=new WeakMap,Wa=new WeakMap,Zh=new WeakMap,Lm=new WeakMap,Ga=new WeakMap,wc=new WeakMap,ed=new WeakMap,qa=new WeakMap,Dm=new WeakMap,sn=new WeakMap,ot=new WeakMap,wo=new WeakMap,Ka=new WeakMap,Xa=new WeakMap,Mm=new WeakMap,td=new WeakMap,Nm=new WeakMap,Ya=new WeakMap,Ci=new WeakMap,bo=new WeakMap,Im=new WeakMap,Om=new WeakMap,Cr=new WeakMap,le=new WeakSet,u0=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},__=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of u(this,pn).values())if(n.hasTextLayer(e))return n;return null},BM=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=P(this,le,u0).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(u(this,ki)||S(this,ki,new EW(this)),u(this,ki).show(n,r,this.direction==="ltr"))},$M=function(){var i,o,l;const e=document.getSelection();if(!e||e.isCollapsed){u(this,wo)&&((i=u(this,ki))==null||i.hide(),S(this,wo,null),P(this,le,as).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,wo))return;const r=P(this,le,u0).call(this,e).closest(".textLayer");if(!r){u(this,wo)&&((o=u(this,ki))==null||o.hide(),S(this,wo,null),P(this,le,as).call(this,{hasSelectedText:!1}));return}if((l=u(this,ki))==null||l.hide(),S(this,wo,t),P(this,le,as).call(this,{hasSelectedText:!0}),!(u(this,sn)!==Ie.HIGHLIGHT&&u(this,sn)!==Ie.NONE)&&(u(this,sn)===Ie.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,Ha,this.isShiftKeyDown),!this.isShiftKeyDown)){const h=u(this,sn)===Ie.HIGHLIGHT?P(this,le,__).call(this,r):null;if(h==null||h.toggleDrawing(),u(this,Zh)){const d=new AbortController,p=this.combinedSignal(d),m=g=>{g.type==="pointerup"&&g.button!==0||(d.abort(),h==null||h.toggleDrawing(!0),g.type==="pointerup"&&P(this,le,Tp).call(this,"main_toolbar"))};window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("blur",m,{signal:p})}else h==null||h.toggleDrawing(!0),P(this,le,Tp).call(this,"main_toolbar")}},Tp=function(e=""){u(this,sn)===Ie.HIGHLIGHT?this.highlightSelection(e):u(this,Tm)&&P(this,le,BM).call(this)},UM=function(){document.addEventListener("selectionchange",P(this,le,$M).bind(this),{signal:this._signal})},VM=function(){if(u(this,za))return;S(this,za,new AbortController);const e=this.combinedSignal(u(this,za));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},zM=function(){var e;(e=u(this,za))==null||e.abort(),S(this,za,null)},A_=function(){if(u(this,Ga))return;S(this,Ga,new AbortController);const e=this.combinedSignal(u(this,Ga));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},HM=function(){var e;(e=u(this,Ga))==null||e.abort(),S(this,Ga,null)},E_=function(){if(u(this,$a))return;S(this,$a,new AbortController);const e=this.combinedSignal(u(this,$a));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},k_=function(){var e;(e=u(this,$a))==null||e.abort(),S(this,$a,null)},WM=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},as=function(e){Object.entries(e).some(([n,r])=>u(this,Nm)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,Nm),e)}),u(this,sn)===Ie.HIGHLIGHT&&e.hasSelectedEditor===!1&&P(this,le,fo).call(this,[[Ke.HIGHLIGHT_FREE,!0]]))},fo=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},GM=async function(){if(!u(this,Wa)){S(this,Wa,!0);const e=[];for(const t of u(this,pn).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,Vt).values())t.enable()}},qM=function(){if(this.unselectAll(),u(this,Wa)){S(this,Wa,!1);for(const e of u(this,pn).values())e.disable();for(const e of u(this,Vt).values())e.disable()}},C_=function(e){const t=u(this,pn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},KM=function(){let e=null;for(e of u(this,ot));return e},Pp=function(){if(u(this,Vt).size===0)return!0;if(u(this,Vt).size===1)for(const e of u(this,Vt).values())return e.isEmpty();return!1},T_=function(e){for(const t of u(this,ot))t.unselect();u(this,ot).clear();for(const t of e)t.isEmpty()||(u(this,ot).add(t),t.select());P(this,le,as).call(this,{hasSelectedEditor:this.hasSelection})},te(Mh,"TRANSLATE_SMALL",1),te(Mh,"TRANSLATE_BIG",10);let Il=Mh;var xn,Ti,Jr,nd,Pi,Hs,sd,Ri,ks,xo,bc,Li,Ja,ui,Rp,h0;const ls=class ls{constructor(e){k(this,ui);k(this,xn,null);k(this,Ti,!1);k(this,Jr,null);k(this,nd,null);k(this,Pi,null);k(this,Hs,null);k(this,sd,!1);k(this,Ri,null);k(this,ks,null);k(this,xo,null);k(this,bc,null);k(this,Li,!1);S(this,ks,e),S(this,Li,e._uiManager.useNewAltTextFlow),u(ls,Ja)||S(ls,Ja,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){ls._l10n??(ls._l10n=e)}async render(){const e=S(this,Jr,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=S(this,nd,document.createElement("span"));e.append(t),u(this,Li)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(ls,Ja).missing),t.setAttribute("data-l10n-id",u(ls,Ja)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=u(this,ks)._uiManager._signal;e.addEventListener("contextmenu",dr,{signal:n}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const r=i=>{i.preventDefault(),u(this,ks)._uiManager.editAltText(u(this,ks)),u(this,Li)&&u(this,ks)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,ui,Rp)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(S(this,sd,!0),r(i))},{signal:n}),await P(this,ui,h0).call(this),e}finish(){u(this,Jr)&&(u(this,Jr).focus({focusVisible:u(this,sd)}),S(this,sd,!1))}isEmpty(){return u(this,Li)?u(this,xn)===null:!u(this,xn)&&!u(this,Ti)}hasData(){return u(this,Li)?u(this,xn)!==null||!!u(this,xo):this.isEmpty()}get guessedText(){return u(this,xo)}async setGuessedText(e){u(this,xn)===null&&(S(this,xo,e),S(this,bc,await ls._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),P(this,ui,h0).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,Li)||u(this,xn)){(t=u(this,Ri))==null||t.remove(),S(this,Ri,null);return}if(!u(this,Ri)){const n=S(this,Ri,document.createElement("div"));n.className="noAltTextBadge",u(this,ks).div.append(n)}u(this,Ri).classList.toggle("hidden",!e)}serialize(e){let t=u(this,xn);return!e&&u(this,xo)===t&&(t=u(this,bc)),{altText:t,decorative:u(this,Ti),guessedText:u(this,xo),textWithDisclaimer:u(this,bc)}}get data(){return{altText:u(this,xn),decorative:u(this,Ti)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:i=!1}){n&&(S(this,xo,n),S(this,bc,r)),!(u(this,xn)===e&&u(this,Ti)===t)&&(i||(S(this,xn,e),S(this,Ti,t)),P(this,ui,h0).call(this))}toggle(e=!1){u(this,Jr)&&(!e&&u(this,Hs)&&(clearTimeout(u(this,Hs)),S(this,Hs,null)),u(this,Jr).disabled=!e)}shown(){u(this,ks)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,ui,Rp)}})}destroy(){var e,t;(e=u(this,Jr))==null||e.remove(),S(this,Jr,null),S(this,nd,null),S(this,Pi,null),(t=u(this,Ri))==null||t.remove(),S(this,Ri,null)}};xn=new WeakMap,Ti=new WeakMap,Jr=new WeakMap,nd=new WeakMap,Pi=new WeakMap,Hs=new WeakMap,sd=new WeakMap,Ri=new WeakMap,ks=new WeakMap,xo=new WeakMap,bc=new WeakMap,Li=new WeakMap,Ja=new WeakMap,ui=new WeakSet,Rp=function(){return u(this,xn)&&"added"||u(this,xn)===null&&this.guessedText&&"review"||"missing"},h0=async function(){var r,i,o;const e=u(this,Jr);if(!e)return;if(u(this,Li)){if(e.classList.toggle("done",!!u(this,xn)),e.setAttribute("data-l10n-id",u(ls,Ja)[u(this,ui,Rp)]),(r=u(this,nd))==null||r.setAttribute("data-l10n-id",u(ls,Ja)[`${u(this,ui,Rp)}-label`]),!u(this,xn)){(i=u(this,Pi))==null||i.remove();return}}else{if(!u(this,xn)&&!u(this,Ti)){e.classList.remove("done"),(o=u(this,Pi))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,Pi);if(!t){S(this,Pi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,ks).id}`;const l=100,h=u(this,ks)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(u(this,Hs)),S(this,Hs,null)},{once:!0}),e.addEventListener("mouseenter",()=>{S(this,Hs,setTimeout(()=>{S(this,Hs,null),u(this,Pi).classList.add("show"),u(this,ks)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:h}),e.addEventListener("mouseleave",()=>{var d;u(this,Hs)&&(clearTimeout(u(this,Hs)),S(this,Hs,null)),(d=u(this,Pi))==null||d.classList.remove("show")},{signal:h})}u(this,Ti)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,xn)),t.parentNode||e.append(t);const n=u(this,ks).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},k(ls,Ja,null),te(ls,"_l10n",null);let nw=ls;var On,Tr,xc,bt,jm,Sc,Qr,_c,Ac,Ec,Fm,P_;class Wv{constructor(e){k(this,Fm);k(this,On,null);k(this,Tr,null);k(this,xc,!1);k(this,bt,null);k(this,jm,null);k(this,Sc,null);k(this,Qr,null);k(this,_c,null);k(this,Ac,!1);k(this,Ec,null);S(this,bt,e)}renderForToolbar(){const e=S(this,Tr,document.createElement("button"));return e.className="comment",P(this,Fm,P_).call(this,e,!1)}renderForStandalone(){const e=S(this,On,document.createElement("button"));e.className="annotationCommentButton";const t=u(this,bt).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(u(this,bt)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=u(this,bt).commentButtonColor;r&&(n.backgroundColor=r)}return P(this,Fm,P_).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=u(this,On)??u(this,Tr))==null||e.focus()},0)}onUpdatedColor(){if(!u(this,On))return;const e=u(this,bt).commentButtonColor;e&&(u(this,On).style.backgroundColor=e),u(this,bt)._uiManager.updatePopupColor(u(this,bt))}get commentButtonWidth(){var e;return(((e=u(this,On))==null?void 0:e.getBoundingClientRect().width)??0)/u(this,bt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(u(this,Ec))return u(this,Ec);if(!u(this,On))return null;const{x:e,y:t,height:n}=u(this,On).getBoundingClientRect(),{x:r,y:i,width:o,height:l}=u(this,bt).parent.boundingClientRect;return[(e-r)/o,(t+n-i)/l]}set commentPopupPositionInLayer(e){S(this,Ec,e)}hasDefaultPopupPosition(){return u(this,Ec)===null}removeStandaloneCommentButton(){var e;(e=u(this,On))==null||e.remove(),S(this,On,null)}removeToolbarCommentButton(){var e;(e=u(this,Tr))==null||e.remove(),S(this,Tr,null)}setCommentButtonStates({selected:e,hasPopup:t}){u(this,On)&&(u(this,On).classList.toggle("selected",e),u(this,On).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let n,r;if(t)[n,r]=t;else{[n,r]=u(this,bt).commentButtonPosition;const{width:p,height:m,x:g,y:v}=u(this,bt);n=g+n*p,r=v+r*m}const i=u(this,bt).parent.boundingClientRect,{x:o,y:l,width:h,height:d}=i;u(this,bt)._uiManager.editComment(u(this,bt),o+n*h,l+r*d,{...e,parentDimensions:i})}finish(){u(this,Tr)&&(u(this,Tr).focus({focusVisible:u(this,xc)}),S(this,xc,!1))}isDeleted(){return u(this,Ac)||u(this,Qr)===""}isEmpty(){return u(this,Qr)===null}hasBeenEdited(){return this.isDeleted()||u(this,Qr)!==u(this,jm)}serialize(){return this.data}get data(){return{text:u(this,Qr),richText:u(this,Sc),date:u(this,_c),deleted:this.isDeleted()}}set data(e){if(e!==u(this,Qr)&&S(this,Sc,null),e===null){S(this,Qr,""),S(this,Ac,!0);return}S(this,Qr,e),S(this,_c,new Date),S(this,Ac,!1)}setInitialText(e,t=null){S(this,jm,e),this.data=e,S(this,_c,null),S(this,Sc,t)}shown(){}destroy(){var e,t;(e=u(this,Tr))==null||e.remove(),S(this,Tr,null),(t=u(this,On))==null||t.remove(),S(this,On,null),S(this,Qr,""),S(this,Sc,null),S(this,_c,null),S(this,bt,null),S(this,xc,!1),S(this,Ac,!1)}}On=new WeakMap,Tr=new WeakMap,xc=new WeakMap,bt=new WeakMap,jm=new WeakMap,Sc=new WeakMap,Qr=new WeakMap,_c=new WeakMap,Ac=new WeakMap,Ec=new WeakMap,Fm=new WeakSet,P_=function(e,t){if(!u(this,bt)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[u(this,bt)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=u(this,bt)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",dr,{signal:n}),t&&(e.addEventListener("focusin",i=>{u(this,bt)._focusEventsAllowed=!1,jt(i)},{capture:!0,signal:n}),e.addEventListener("focusout",i=>{u(this,bt)._focusEventsAllowed=!0,jt(i)},{capture:!0,signal:n})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const r=i=>{i.preventDefault(),e===u(this,Tr)?this.edit():u(this,bt).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(S(this,xc,!0),r(i))},{signal:n}),e.addEventListener("pointerenter",()=>{u(this,bt).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{u(this,bt).toggleComment(!1,!1)},{signal:n}),e};var rd,kc,Bm,$m,Um,Vm,zm,So,Cc,_o,Tc,Ao,Ol,XM,YM,JM;const XE=class XE{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:o=null,signal:l}){k(this,Ol);k(this,rd);k(this,kc,!1);k(this,Bm,null);k(this,$m);k(this,Um);k(this,Vm);k(this,zm);k(this,So,null);k(this,Cc);k(this,_o,null);k(this,Tc);k(this,Ao,null);S(this,rd,e),S(this,Bm,n),S(this,$m,t),S(this,Um,r),S(this,Vm,i),S(this,zm,o),S(this,Tc,new AbortController),S(this,Cc,AbortSignal.any([l,u(this,Tc).signal])),e.addEventListener("touchstart",P(this,Ol,XM).bind(this),{passive:!1,signal:u(this,Cc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/fi.pixelRatio}destroy(){var e,t;(e=u(this,Tc))==null||e.abort(),S(this,Tc,null),(t=u(this,So))==null||t.abort(),S(this,So,null)}};rd=new WeakMap,kc=new WeakMap,Bm=new WeakMap,$m=new WeakMap,Um=new WeakMap,Vm=new WeakMap,zm=new WeakMap,So=new WeakMap,Cc=new WeakMap,_o=new WeakMap,Tc=new WeakMap,Ao=new WeakMap,Ol=new WeakSet,XM=function(e){var r,i,o;if((r=u(this,$m))!=null&&r.call(this))return;if(e.touches.length===1){if(u(this,So))return;const l=S(this,So,new AbortController),h=AbortSignal.any([u(this,Cc),l.signal]),d=u(this,rd),p={capture:!0,signal:h,passive:!1},m=g=>{var v;g.pointerType==="touch"&&((v=u(this,So))==null||v.abort(),S(this,So,null))};d.addEventListener("pointerdown",g=>{g.pointerType==="touch"&&(jt(g),m(g))},p),d.addEventListener("pointerup",m,p),d.addEventListener("pointercancel",m,p);return}if(!u(this,Ao)){S(this,Ao,new AbortController);const l=AbortSignal.any([u(this,Cc),u(this,Ao).signal]),h=u(this,rd),d={signal:l,capture:!1,passive:!1};h.addEventListener("touchmove",P(this,Ol,YM).bind(this),d);const p=P(this,Ol,JM).bind(this);h.addEventListener("touchend",p,d),h.addEventListener("touchcancel",p,d),d.capture=!0,h.addEventListener("pointerdown",jt,d),h.addEventListener("pointermove",jt,d),h.addEventListener("pointercancel",jt,d),h.addEventListener("pointerup",jt,d),(i=u(this,Um))==null||i.call(this)}if(jt(e),e.touches.length!==2||(o=u(this,Bm))!=null&&o.call(this)){S(this,_o,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),S(this,_o,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},YM=function(e){var D;if(!u(this,_o)||e.touches.length!==2)return;jt(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:i}=t,{screenX:o,screenY:l}=n,h=u(this,_o),{touch0X:d,touch0Y:p,touch1X:m,touch1Y:g}=h,v=m-d,b=g-p,x=o-r,A=l-i,E=Math.hypot(x,A)||1,R=Math.hypot(v,b)||1;if(!u(this,kc)&&Math.abs(R-E)<=XE.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=i,h.touch1X=o,h.touch1Y=l,!u(this,kc)){S(this,kc,!0);return}const C=[(r+o)/2,(i+l)/2];(D=u(this,Vm))==null||D.call(this,C,R,E)},JM=function(e){var t;e.touches.length>=2||(u(this,Ao)&&(u(this,Ao).abort(),S(this,Ao,null),(t=u(this,zm))==null||t.call(this)),u(this,_o)&&(jt(e),S(this,_o,null),S(this,kc,!1)))};let vm=XE;var Pc,Zr,Rt,ft,Eo,id,Qa,Hm,jn,Rc,ko,Di,Za,Wm,Lc,Ws,Gm,Dc,Co,Mi,od,ad,Pr,Mc,qm,yw,Le,R_,Km,L_,d0,QM,ZM,D_,f0,M_,eN,tN,nN,N_,sN,I_,rN,iN,oN,O_,Lp;const je=class je{constructor(e){k(this,Le);k(this,Pc,null);k(this,Zr,null);k(this,Rt,null);k(this,ft,null);k(this,Eo,null);k(this,id,!1);k(this,Qa,null);k(this,Hm,"");k(this,jn,null);k(this,Rc,null);k(this,ko,null);k(this,Di,null);k(this,Za,null);k(this,Wm,"");k(this,Lc,!1);k(this,Ws,null);k(this,Gm,!1);k(this,Dc,!1);k(this,Co,!1);k(this,Mi,null);k(this,od,0);k(this,ad,0);k(this,Pr,null);k(this,Mc,null);te(this,"isSelected",!1);te(this,"_isCopy",!1);te(this,"_editToolbar",null);te(this,"_initialOptions",Object.create(null));te(this,"_initialData",null);te(this,"_isVisible",!0);te(this,"_uiManager",null);te(this,"_focusEventsAllowed",!0);k(this,qm,!1);k(this,yw,je._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[i,o];const[l,h]=this.parentDimensions;this.x=e.x/l,this.y=e.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=je.prototype._resizeWithKeyboard,t=Il.TRANSLATE_SMALL,n=Il.TRANSLATE_BIG;return $e(this,"_resizerKeyboardManager",new py([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],je.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return $e(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new TW({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(je._l10n??(je._l10n=e),je._l10nResizer||(je._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),je._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);je._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){yt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,qm)}set _isDraggable(e){var t;S(this,qm,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,yw)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(P(this,Le,Lp).call(this),(t=u(this,Di))==null||t.remove(),S(this,Di,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,Lc)?S(this,Lc,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[i,o]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}translate(e,t){P(this,Le,R_).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,Ws)||S(this,Ws,[this.x,this.y,this.width,this.height]),P(this,Le,R_).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){u(this,Ws)||S(this,Ws,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[h,d]=this.getBaseTranslation();o+=h,l+=d;const{style:p}=n;p.left=`${(100*o).toFixed(2)}%`,p.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,Ws)&&(u(this,Ws)[0]!==this.x||u(this,Ws)[1]!==this.y)}get _hasBeenResized(){return!!u(this,Ws)&&(u(this,Ws)[2]!==this.width||u(this,Ws)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=je,r=n/e,i=n/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:i,y:o,width:l,height:h}=this;if(l*=n,h*=r,i*=n,o*=r,this._mustFixPosition)switch(e){case 0:i=ns(i,0,n-l),o=ns(o,0,r-h);break;case 90:i=ns(i,0,n-h),o=ns(o,l,r);break;case 180:i=ns(i,l,n),o=ns(o,h,r);break;case 270:i=ns(i,h,n),o=ns(o,0,r-l);break}this.x=i/=n,this.y=o/=r;const[d,p]=this.getBaseTranslation();i+=d,o+=p,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return P(n=je,Km,L_).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return P(n=je,Km,L_).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,Rt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,Dc))return this._editToolbar;this._editToolbar=new w_(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=u(this,Rt))==null||t.destroy()}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,Rt)||(nw.initialize(je._l10n),S(this,Rt,new nw(this)),u(this,Pc)&&(u(this,Rt).data=u(this,Pc),S(this,Pc,null))),u(this,Rt)}get altTextData(){var e;return(e=u(this,Rt))==null?void 0:e.data}set altTextData(e){u(this,Rt)&&(u(this,Rt).data=e)}get guessedAltText(){var e;return(e=u(this,Rt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,Rt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,Rt))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,Rt)&&!u(this,Rt).isEmpty()}hasAltTextData(){var e;return((e=u(this,Rt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=u(this,ft))==null||e.focusButton()}addCommentButton(){return u(this,ft)||S(this,ft,new Wv(this))}addStandaloneCommentButton(){if(u(this,Eo)){this._uiManager.isEditingMode()&&u(this,Eo).classList.remove("hidden");return}this.hasComment&&(S(this,Eo,u(this,ft).renderForStandalone()),this.div.append(u(this,Eo)))}removeStandaloneCommentButton(){u(this,ft).removeStandaloneCommentButton(),S(this,Eo,null)}hideStandaloneCommentButton(){var e;(e=u(this,Eo))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:r}}=u(this,ft);return{text:t,richText:e,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){u(this,ft)||S(this,ft,new Wv(this)),u(this,ft).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(u(this,ft)||S(this,ft,new Wv(this)),u(this,ft).setInitialText(e,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=u(this,ft))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=u(this,ft))==null?void 0:e.isDeleted()}get hasComment(){return!!u(this,ft)&&!u(this,ft).isEmpty()&&!u(this,ft).isDeleted()}async editComment(e){u(this,ft)||S(this,ft,new Wv(this)),u(this,ft).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){u(this,ft).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[i]=this.pageDimensions,[o]=this.pageTranslation,l=o+i+1,h=r-100,d=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,h,d,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){u(this,ft).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=u(this,id)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),P(this,Le,I_).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),jM(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,Mc)||S(this,Mc,new vm({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:P(this,Le,eN).bind(this),onPinching:P(this,Le,tN).bind(this),onPinchEnd:P(this,Le,nN).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=Tn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(S(this,Lc,!0),this._isDraggable){P(this,Le,sN).call(this,e);return}P(this,Le,N_).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,Mi)&&clearTimeout(u(this,Mi)),S(this,Mi,setTimeout(()=>{var e;S(this,Mi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[i,o]=this.pageDimensions,[l,h]=this.pageTranslation,d=e/r,p=t/r,m=this.x*i,g=this.y*o,v=this.width*i,b=this.height*o;switch(n){case 0:return[m+d+l,o-g-p-b+h,m+d+v+l,o-g-p+h];case 90:return[m+p+l,o-g+d+h,m+p+b+l,o-g+d+v+h];case 180:return[m-d-v+l,o-g+p+h,m-d+l,o-g+p+b+h];case 270:return[m-p-b+l,o-g-d-v+h,m-p+l,o-g-d+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,i,o]=e,l=i-n,h=o-r;switch(this.rotation){case 0:return[n,t-o,l,h];case 90:return[n,t-r,h,l];case 180:return[i,t-r,l,h];case 270:return[i,t-o,h,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&je._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=u(this,ft))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:r,deleted:i,richText:o},uid:l,pageIndex:h,creationDate:d,modificationDate:p}=this;return{id:l,pageIndex:h,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:d,modificationDate:n||p,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),S(this,Dc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),S(this,Dc,!1),!0):!1}isInEditMode(){return u(this,Dc)}shouldGetKeyboardEvents(){return u(this,Co)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&r>0&&e<i&&n>0}rebuild(){P(this,Le,I_).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,S(r,Pc,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,o]=r.pageDimensions,[l,h,d,p]=r.getRectInCurrentCoords(e.rect,o);return r.x=l/i,r.y=h/o,r.width=d/i,r.height=p/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=u(this,Za))==null||e.abort(),S(this,Za,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,Mi)&&(clearTimeout(u(this,Mi)),S(this,Mi,null)),P(this,Le,Lp).call(this),this.removeEditToolbar(),u(this,Pr)){for(const n of u(this,Pr).values())clearTimeout(n);S(this,Pr,null)}this.parent=null,(t=u(this,Mc))==null||t.destroy(),S(this,Mc,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(P(this,Le,QM).call(this),u(this,jn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,r,i,o]=this.getPDFRect();return[je._round(n+(i-n)*e),je._round(r+(o-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return u(this,ft).commentPopupPositionInLayer}set commentPopupPosition(e){u(this,ft).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return u(this,ft).hasDefaultPopupPosition()}get commentButtonWidth(){return u(this,ft).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){u(this,ft).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),S(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,jn).children;if(!u(this,Zr)){S(this,Zr,Array.from(t));const o=P(this,Le,rN).bind(this),l=P(this,Le,iN).bind(this),h=this._uiManager._signal;for(const d of u(this,Zr)){const p=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",o,{signal:h}),d.addEventListener("blur",l,{signal:h}),d.addEventListener("focus",P(this,Le,oN).bind(this,p),{signal:h}),d.setAttribute("data-l10n-id",je._l10nResizer[p])}}const n=u(this,Zr)[0];let r=0;for(const o of t){if(o===n)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(u(this,Zr).length/4);if(i!==r){if(i<r)for(let l=0;l<r-i;l++)u(this,jn).append(u(this,jn).firstChild);else if(i>r)for(let l=0;l<i-r;l++)u(this,jn).firstChild.before(u(this,jn).lastChild);let o=0;for(const l of t){const d=u(this,Zr)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",je._l10nResizer[d])}}P(this,Le,O_).call(this,0),S(this,Co,!0),u(this,jn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,Co)&&P(this,Le,M_).call(this,u(this,Wm),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){P(this,Le,Lp).call(this),this.div.focus()}select(){var e,t,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(n=u(this,Rt))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,r,i;this.isSelected&&(this.isSelected=!1,(e=u(this,jn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=u(this,Rt))==null||i.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,Gm)}set isEditing(e){S(this,Gm,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,Pr)||S(this,Pr,new Map);const{action:n}=e;let r=u(this,Pr).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),u(this,Pr).delete(n),u(this,Pr).size===0&&S(this,Pr,null)},je._telemetryTimeout),u(this,Pr).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),S(this,id,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,id,!0)}updateFakeAnnotationElement(e){if(!u(this,Di)&&!this.deleted){S(this,Di,e.addFakeAnnotation(this));return}if(this.deleted){u(this,Di).remove(),S(this,Di,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&u(this,Di).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Pc=new WeakMap,Zr=new WeakMap,Rt=new WeakMap,ft=new WeakMap,Eo=new WeakMap,id=new WeakMap,Qa=new WeakMap,Hm=new WeakMap,jn=new WeakMap,Rc=new WeakMap,ko=new WeakMap,Di=new WeakMap,Za=new WeakMap,Wm=new WeakMap,Lc=new WeakMap,Ws=new WeakMap,Gm=new WeakMap,Dc=new WeakMap,Co=new WeakMap,Mi=new WeakMap,od=new WeakMap,ad=new WeakMap,Pr=new WeakMap,Mc=new WeakMap,qm=new WeakMap,yw=new WeakMap,Le=new WeakSet,R_=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Km=new WeakSet,L_=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},d0=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},QM=function(){if(u(this,jn))return;S(this,jn,document.createElement("div")),u(this,jn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");u(this,jn).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",P(this,Le,ZM).bind(this,n),{signal:t}),r.addEventListener("contextmenu",dr,{signal:t}),r.tabIndex=-1}this.div.prepend(u(this,jn))},ZM=function(e,t){var p;t.preventDefault();const{isMac:n}=Tn.platform;if(t.button!==0||t.ctrlKey&&n)return;(p=u(this,Rt))==null||p.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,S(this,Rc,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",P(this,Le,M_).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",jt,{passive:!1,signal:o}),window.addEventListener("contextmenu",dr,{signal:o}),S(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{var m;i.abort(),this.parent.togglePointerEvents(!0),(m=u(this,Rt))==null||m.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=h,P(this,Le,f0).call(this)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})},D_=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},f0=function(){if(!u(this,ko))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=u(this,ko);S(this,ko,null);const i=this.x,o=this.y,l=this.width,h=this.height;i===e&&o===t&&l===n&&h===r||this.addCommands({cmd:P(this,Le,D_).bind(this,i,o,l,h),undo:P(this,Le,D_).bind(this,e,t,n,r),mustExec:!0})},M_=function(e,t){const[n,r]=this.parentDimensions,i=this.x,o=this.y,l=this.width,h=this.height,d=je.MIN_SIZE/n,p=je.MIN_SIZE/r,m=P(this,Le,d0).call(this,this.rotation),g=(Z,X)=>[m[0]*Z+m[2]*X,m[1]*Z+m[3]*X],v=P(this,Le,d0).call(this,360-this.rotation),b=(Z,X)=>[v[0]*Z+v[2]*X,v[1]*Z+v[3]*X];let x,A,E=!1,R=!1;switch(e){case"topLeft":E=!0,x=(Z,X)=>[0,0],A=(Z,X)=>[Z,X];break;case"topMiddle":x=(Z,X)=>[Z/2,0],A=(Z,X)=>[Z/2,X];break;case"topRight":E=!0,x=(Z,X)=>[Z,0],A=(Z,X)=>[0,X];break;case"middleRight":R=!0,x=(Z,X)=>[Z,X/2],A=(Z,X)=>[0,X/2];break;case"bottomRight":E=!0,x=(Z,X)=>[Z,X],A=(Z,X)=>[0,0];break;case"bottomMiddle":x=(Z,X)=>[Z/2,X],A=(Z,X)=>[Z/2,0];break;case"bottomLeft":E=!0,x=(Z,X)=>[0,X],A=(Z,X)=>[Z,0];break;case"middleLeft":R=!0,x=(Z,X)=>[0,X/2],A=(Z,X)=>[Z,X/2];break}const C=x(l,h),D=A(l,h);let N=g(...D);const I=je._round(i+N[0]),j=je._round(o+N[1]);let F=1,W=1,K,J;if(t.fromKeyboard)({deltaX:K,deltaY:J}=t);else{const{screenX:Z,screenY:X}=t,[V,re]=u(this,Rc);[K,J]=this.screenToPageTranslation(Z-V,X-re),u(this,Rc)[0]=Z,u(this,Rc)[1]=X}if([K,J]=b(K/n,J/r),E){const Z=Math.hypot(l,h);F=W=Math.max(Math.min(Math.hypot(D[0]-C[0]-K,D[1]-C[1]-J)/Z,1/l,1/h),d/l,p/h)}else R?F=ns(Math.abs(D[0]-C[0]-K),d,1)/l:W=ns(Math.abs(D[1]-C[1]-J),p,1)/h;const ie=je._round(l*F),ce=je._round(h*W);N=g(...A(ie,ce));const Y=I-N[0],ue=j-N[1];u(this,Ws)||S(this,Ws,[this.x,this.y,this.width,this.height]),this.width=ie,this.height=ce,this.x=Y,this.y=ue,this.setDims(),this.fixAndSetPosition(),this._onResizing()},eN=function(){var e;S(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,Rt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},tN=function(e,t,n){let i=.7*(n/t)+1-.7;if(i===1)return;const o=P(this,Le,d0).call(this,this.rotation),l=(I,j)=>[o[0]*I+o[2]*j,o[1]*I+o[3]*j],[h,d]=this.parentDimensions,p=this.x,m=this.y,g=this.width,v=this.height,b=je.MIN_SIZE/h,x=je.MIN_SIZE/d;i=Math.max(Math.min(i,1/g,1/v),b/g,x/v);const A=je._round(g*i),E=je._round(v*i);if(A===g&&E===v)return;u(this,Ws)||S(this,Ws,[p,m,g,v]);const R=l(g/2,v/2),C=je._round(p+R[0]),D=je._round(m+R[1]),N=l(A/2,E/2);this.x=C-N[0],this.y=D-N[1],this.width=A,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()},nN=function(){var e;(e=u(this,Rt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),P(this,Le,f0).call(this)},N_=function(e){const{isMac:t}=Tn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},sN=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:i},l=d=>{r.abort(),S(this,Qa,null),S(this,Lc,!1),this._uiManager.endDragSession()||P(this,Le,N_).call(this,d),n&&this._onStopDragging()};t&&(S(this,od,e.clientX),S(this,ad,e.clientY),S(this,Qa,e.pointerId),S(this,Hm,e.pointerType),window.addEventListener("pointermove",d=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:m,pointerId:g}=d;if(g!==u(this,Qa)){jt(d);return}const[v,b]=this.screenToPageTranslation(p-u(this,od),m-u(this,ad));S(this,od,p),S(this,ad,m),this._uiManager.dragSelectedEditors(v,b)},o),window.addEventListener("touchmove",jt,o),window.addEventListener("pointerdown",d=>{d.pointerType===u(this,Hm)&&(u(this,Mc)||d.isPrimary)&&l(d),jt(d)},o));const h=d=>{if(!u(this,Qa)||u(this,Qa)===d.pointerId){l(d);return}jt(d)};window.addEventListener("pointerup",h,{signal:i}),window.addEventListener("blur",h,{signal:i})},I_=function(){if(u(this,Za)||!this.div)return;S(this,Za,new AbortController);const e=this._uiManager.combinedSignal(u(this,Za));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},rN=function(e){je._resizerKeyboardManager.exec(this,e)},iN=function(e){var t;u(this,Co)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,jn)&&P(this,Le,Lp).call(this)},oN=function(e){S(this,Wm,u(this,Co)?e:"")},O_=function(e){if(u(this,Zr))for(const t of u(this,Zr))t.tabIndex=e},Lp=function(){S(this,Co,!1),P(this,Le,O_).call(this,-1),P(this,Le,f0).call(this)},k(je,Km),te(je,"_l10n",null),te(je,"_l10nResizer",null),te(je,"_borderLineWidth",-1),te(je,"_colorManager",new S_),te(je,"_zIndex",1),te(je,"_telemetryTimeout",1e3);let xt=je;class TW extends xt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const tR=3285377520,br=4294901760,xi=65535;class aN{constructor(e){this.h1=e?e&4294967295:tR,this.h2=e?e&4294967295:tR}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let x=0,A=e.length;x<A;x++){const E=e.charCodeAt(x);E<=255?t[n++]=E:(t[n++]=E>>>8,t[n++]=E&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,i=n-r*4,o=new Uint32Array(t.buffer,0,r);let l=0,h=0,d=this.h1,p=this.h2;const m=3432918353,g=461845907,v=m&xi,b=g&xi;for(let x=0;x<r;x++)x&1?(l=o[x],l=l*m&br|l*v&xi,l=l<<15|l>>>17,l=l*g&br|l*b&xi,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(h=o[x],h=h*m&br|h*v&xi,h=h<<15|h>>>17,h=h*g&br|h*b&xi,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(l=0,i){case 3:l^=t[r*4+2]<<16;case 2:l^=t[r*4+1]<<8;case 1:l^=t[r*4],l=l*m&br|l*v&xi,l=l<<15|l>>>17,l=l*g&br|l*b&xi,r&1?d^=l:p^=l}this.h1=d,this.h2=p}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&br|e*36045&xi,t=t*4283543511&br|((t<<16|e>>>16)*2950163797&br)>>>16,e^=t>>>1,e=e*444984403&br|e*60499&xi,t=t*3301882366&br|((t<<16|e>>>16)*3120437893&br)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const j_=Object.freeze({map:null,hash:"",transfer:void 0});var Nc,Ic,To,Fn,vw,lN;class OE{constructor(){k(this,vw);k(this,Nc,!1);k(this,Ic,null);k(this,To,null);k(this,Fn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=u(this,Fn).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return u(this,Fn).get(e)}remove(e){const t=u(this,Fn).get(e);if(t!==void 0&&(t instanceof xt&&u(this,To).delete(t.annotationElementId),u(this,Fn).delete(e),u(this,Fn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of u(this,Fn).values())if(n instanceof xt)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=u(this,Fn).get(e);let r=!1;if(n!==void 0)for(const[i,o]of Object.entries(t))n[i]!==o&&(r=!0,n[i]=o);else r=!0,u(this,Fn).set(e,t);r&&P(this,vw,lN).call(this),t instanceof xt&&((u(this,To)||S(this,To,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return u(this,Fn).has(e)}get size(){return u(this,Fn).size}resetModified(){u(this,Nc)&&(S(this,Nc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new cN(this)}get serializable(){if(u(this,Fn).size===0)return j_;const e=new Map,t=new aN,n=[],r=Object.create(null);let i=!1;for(const[o,l]of u(this,Fn)){const h=l instanceof xt?l.serialize(!1,r):l;h&&(e.set(o,h),t.update(`${o}:${JSON.stringify(h)}`),i||(i=!!h.bitmap))}if(i)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:j_}get editorStats(){let e=null;const t=new Map;let n=0,r=0;for(const i of u(this,Fn).values()){if(!(i instanceof xt)){i.popup&&(i.popup.deleted?r+=1:n+=1);continue}i.isCommentDeleted?r+=1:i.hasEditedComment&&(n+=1);const o=i.telemetryFinalData;if(!o)continue;const{type:l}=o;t.has(l)||t.set(l,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const h=e[l]||(e[l]=new Map);for(const[d,p]of Object.entries(o)){if(d==="type")continue;let m=h.get(d);m||(m=new Map,h.set(d,m));const g=m.get(p)??0;m.set(p,g+1)}}if((r>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:n}),!e)return null;for(const[i,o]of t)e[i]=o.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){S(this,Ic,null)}updateEditor(e,t){var r;const n=(r=u(this,To))==null?void 0:r.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=u(this,To))==null?void 0:t.get(e))||null}get modifiedIds(){if(u(this,Ic))return u(this,Ic);const e=[];if(u(this,To))for(const t of u(this,To).values())t.serialize()&&e.push(t.annotationElementId);return S(this,Ic,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return u(this,Fn).entries()}}Nc=new WeakMap,Ic=new WeakMap,To=new WeakMap,Fn=new WeakMap,vw=new WeakSet,lN=function(){u(this,Nc)||(S(this,Nc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Xm;class cN extends OE{constructor(t){super();k(this,Xm);const{map:n,hash:r,transfer:i}=t.serializable,o=structuredClone(n,i?{transfer:i}:null);S(this,Xm,{map:o,hash:r,transfer:i})}get print(){yt("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,Xm)}get modifiedIds(){return $e(this,"modifiedIds",{ids:new Set,hash:""})}}Xm=new WeakMap;var ld;class PW{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){k(this,ld,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,ld).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||u(this,ld).has(e.loadedName))){if(Xe(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:o}=e,l=new FontFace(r,i,o);this.addNativeFontFace(l);try{await l.load(),u(this,ld).add(r),n==null||n(e)}catch{Oe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}yt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Oe(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return $e(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return $e(this,"isSyncFontLoadingSupported",ds||Tn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Xe(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const i=n.shift();setTimeout(i.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return $e(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(D,N){return D.charCodeAt(N)<<24|D.charCodeAt(N+1)<<16|D.charCodeAt(N+2)<<8|D.charCodeAt(N+3)&255}function r(D,N,I,j){const F=D.substring(0,N),W=D.substring(N+I);return F+j+W}let i,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const h=l.getContext("2d");let d=0;function p(D,N){if(++d>30){Oe("Load test font never loaded."),N();return}if(h.font="30px "+D,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(p.bind(null,D,N))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=r(g,976,m.length,m);const b=16,x=1482184792;let A=n(g,b);for(i=0,o=m.length-3;i<o;i+=4)A=A-x+n(m,i)|0;i<m.length&&(A=A-x+n(m+"XXX",i)|0),g=r(g,b,4,gW(A));const E=`url(data:font/opentype;base64,${btoa(g)});`,R=`@font-face {font-family:"${m}";src:${E}}`;this.insertRule(R);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const D of[e.loadedName,m]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=D,C.append(N)}this._document.body.append(C),p(m,()=>{C.remove(),t.complete()})}}ld=new WeakMap;var lt;class RW{constructor(e,t=null,n,r){k(this,lt);this.compiledGlyphs=Object.create(null),S(this,lt,e),this._inspectFont=t,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${EM(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(o){Oe(`getPathGenerator - ignoring character: "${o}".`)}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=i}get black(){return u(this,lt).black}get bold(){return u(this,lt).bold}get disableFontFace(){return u(this,lt).disableFontFace??!1}get fontExtraProperties(){return u(this,lt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return u(this,lt).isInvalidPDFjsFont}get isType3Font(){return u(this,lt).isType3Font}get italic(){return u(this,lt).italic}get missingFile(){return u(this,lt).missingFile}get remeasure(){return u(this,lt).remeasure}get vertical(){return u(this,lt).vertical}get ascent(){return u(this,lt).ascent}get defaultWidth(){return u(this,lt).defaultWidth}get descent(){return u(this,lt).descent}get bbox(){return u(this,lt).bbox}get fontMatrix(){return u(this,lt).fontMatrix}get fallbackName(){return u(this,lt).fallbackName}get loadedName(){return u(this,lt).loadedName}get mimetype(){return u(this,lt).mimetype}get name(){return u(this,lt).name}get data(){return u(this,lt).data}clearData(){u(this,lt).clearData()}get cssFontInfo(){return u(this,lt).cssFontInfo}get systemFontInfo(){return u(this,lt).systemFontInfo}get defaultVMetrics(){return u(this,lt).defaultVMetrics}}lt=new WeakMap;function LW(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(ds)return s;const e=URL.parse(s,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function DW(s){if(ds&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return hy(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Gv(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const F_=s=>typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0,MW=s=>typeof s=="object"&&typeof(s==null?void 0:s.name)=="string",uN=bW.bind(null,F_,MW);var Po,ww;class NW{constructor(){k(this,Po,new Map);k(this,ww,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};u(this,ww).then(()=>{for(const[r]of u(this,Po))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted){Oe("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}u(this,Po).set(t,r)}removeEventListener(e,t){const n=u(this,Po).get(t);n==null||n(),u(this,Po).delete(t)}terminate(){for(const[,e]of u(this,Po))e==null||e();u(this,Po).clear()}}Po=new WeakMap,ww=new WeakMap;const qv={DATA:1,ERROR:2},nn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function nR(){}function As(s){if(s instanceof sa||s instanceof ew||s instanceof KP||s instanceof mm||s instanceof _S)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||yt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new sa(s.message);case"InvalidPDFException":return new ew(s.message);case"PasswordException":return new KP(s.message,s.code);case"ResponseException":return new mm(s.message,s.status,s.missing);case"UnknownErrorException":return new _S(s.message,s.details)}return new _S(s.message,s.toString())}var cd,Or,hN,dN,fN,p0;class Dp{constructor(e,t,n){k(this,Or);k(this,cd,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",P(this,Or,hN).bind(this),{signal:u(this,cd).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,n,r){const i=this.streamId++,o=this.sourceName,l=this.targetName,h=this.comObj;return new ReadableStream({start:d=>{const p=Promise.withResolvers();return this.streamControllers[i]={controller:d,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:o,targetName:l,action:e,streamId:i,data:t,desiredSize:d.desiredSize},r),p.promise},pull:d=>{const p=Promise.withResolvers();return this.streamControllers[i].pullCall=p,h.postMessage({sourceName:o,targetName:l,stream:nn.PULL,streamId:i,desiredSize:d.desiredSize}),p.promise},cancel:d=>{Xe(d instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[i].cancelCall=p,this.streamControllers[i].isClosed=!0,h.postMessage({sourceName:o,targetName:l,stream:nn.CANCEL,streamId:i,reason:As(d)}),p.promise}},n)}destroy(){var e;(e=u(this,cd))==null||e.abort(),S(this,cd,null)}}cd=new WeakMap,Or=new WeakSet,hN=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){P(this,Or,fN).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===qv.DATA)r.resolve(e.data);else if(e.callback===qv.ERROR)r.reject(As(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:n,targetName:r,callback:qv.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:n,targetName:r,callback:qv.ERROR,callbackId:e.callbackId,reason:As(o)})});return}if(e.streamId){P(this,Or,dN).call(this,e);return}t(e.data)},dN=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,o=this,l=this.actionHandler[e.action],h={enqueue(d,p=1,m){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=p,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:r,stream:nn.ENQUEUE,streamId:t,chunk:d},m)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:nn.CLOSE,streamId:t}),delete o.streamSinks[t])},error(d){Xe(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:nn.ERROR,streamId:t,reason:As(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[t]=h,Promise.try(l,e.data,h).then(function(){i.postMessage({sourceName:n,targetName:r,stream:nn.START_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:r,stream:nn.START_COMPLETE,streamId:t,reason:As(d)})})},fN=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,o=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case nn.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(As(e.reason));break;case nn.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(As(e.reason));break;case nn.PULL:if(!l){i.postMessage({sourceName:n,targetName:r,stream:nn.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||nR).then(function(){i.postMessage({sourceName:n,targetName:r,stream:nn.PULL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:r,stream:nn.PULL_COMPLETE,streamId:t,reason:As(d)})});break;case nn.ENQUEUE:if(Xe(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case nn.CLOSE:if(Xe(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),P(this,Or,p0).call(this,o,t);break;case nn.ERROR:Xe(o,"error should have stream controller"),o.controller.error(As(e.reason)),P(this,Or,p0).call(this,o,t);break;case nn.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(As(e.reason)),P(this,Or,p0).call(this,o,t);break;case nn.CANCEL:if(!l)break;const h=As(e.reason);Promise.try(l.onCancel||nR,h).then(function(){i.postMessage({sourceName:n,targetName:r,stream:nn.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:r,stream:nn.CANCEL_COMPLETE,streamId:t,reason:As(d)})}),l.sinkCapability.reject(h),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},p0=async function(e,t){var n,r,i;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var Ym;class pN{constructor({enableHWA:e=!1}){k(this,Ym,!1);S(this,Ym,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!u(this,Ym)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){yt("Abstract method `_createCanvas` called.")}}Ym=new WeakMap;class IW extends pN{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class mN{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){yt("Abstract method `_fetch` called.")}}class sR extends mN{async _fetch(e){const t=await Pf(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):hy(t)}}class gN{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,i){return"none"}destroy(e=!1){}}var Oc,ud,Ro,Lo,Qn,jc,Fc,pe,Xn,Mp,bh,m0,xh,yN,B_,Sh,Np,Ip,$_,Op;class OW extends gN{constructor({docId:t,ownerDocument:n=globalThis.document}){super();k(this,pe);k(this,Oc);k(this,ud);k(this,Ro);k(this,Lo);k(this,Qn);k(this,jc);k(this,Fc,0);S(this,Lo,t),S(this,Qn,n)}addFilter(t){if(!t)return"none";let n=u(this,pe,Xn).get(t);if(n)return n;const[r,i,o]=P(this,pe,m0).call(this,t),l=t.length===1?r:`${r}${i}${o}`;if(n=u(this,pe,Xn).get(l),n)return u(this,pe,Xn).set(t,n),n;const h=`g_${u(this,Lo)}_transfer_map_${un(this,Fc)._++}`,d=P(this,pe,xh).call(this,h);u(this,pe,Xn).set(t,d),u(this,pe,Xn).set(l,d);const p=P(this,pe,Sh).call(this,h);return P(this,pe,Ip).call(this,r,i,o,p),d}addHCMFilter(t,n){var b;const r=`${t}-${n}`,i="base";let o=u(this,pe,Mp).get(i);if((o==null?void 0:o.key)===r||(o?((b=o.filter)==null||b.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},u(this,pe,Mp).set(i,o)),!t||!n))return o.url;const l=P(this,pe,Op).call(this,t);t=ge.makeHexColor(...l);const h=P(this,pe,Op).call(this,n);if(n=ge.makeHexColor(...h),u(this,pe,bh).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const d=new Array(256);for(let x=0;x<=255;x++){const A=x/255;d[x]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const p=d.join(","),m=`g_${u(this,Lo)}_hcm_filter`,g=o.filter=P(this,pe,Sh).call(this,m);P(this,pe,Ip).call(this,p,p,p,g),P(this,pe,B_).call(this,g);const v=(x,A)=>{const E=l[x]/255,R=h[x]/255,C=new Array(A+1);for(let D=0;D<=A;D++)C[D]=E+D/A*(R-E);return C.join(",")};return P(this,pe,Ip).call(this,v(0,5),v(1,5),v(2,5),g),o.url=P(this,pe,xh).call(this,m),o.url}addAlphaFilter(t){let n=u(this,pe,Xn).get(t);if(n)return n;const[r]=P(this,pe,m0).call(this,[t]),i=`alpha_${r}`;if(n=u(this,pe,Xn).get(i),n)return u(this,pe,Xn).set(t,n),n;const o=`g_${u(this,Lo)}_alpha_map_${un(this,Fc)._++}`,l=P(this,pe,xh).call(this,o);u(this,pe,Xn).set(t,l),u(this,pe,Xn).set(i,l);const h=P(this,pe,Sh).call(this,o);return P(this,pe,$_).call(this,r,h),l}addLuminosityFilter(t){let n=u(this,pe,Xn).get(t||"luminosity");if(n)return n;let r,i;if(t?([r]=P(this,pe,m0).call(this,[t]),i=`luminosity_${r}`):i="luminosity",n=u(this,pe,Xn).get(i),n)return u(this,pe,Xn).set(t,n),n;const o=`g_${u(this,Lo)}_luminosity_map_${un(this,Fc)._++}`,l=P(this,pe,xh).call(this,o);u(this,pe,Xn).set(t,l),u(this,pe,Xn).set(i,l);const h=P(this,pe,Sh).call(this,o);return P(this,pe,yN).call(this,h),t&&P(this,pe,$_).call(this,r,h),l}addHighlightHCMFilter(t,n,r,i,o){var R;const l=`${n}-${r}-${i}-${o}`;let h=u(this,pe,Mp).get(t);if((h==null?void 0:h.key)===l||(h?((R=h.filter)==null||R.remove(),h.key=l,h.url="none",h.filter=null):(h={key:l,url:"none",filter:null},u(this,pe,Mp).set(t,h)),!n||!r))return h.url;const[d,p]=[n,r].map(P(this,pe,Op).bind(this));let m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),g=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[v,b]=[i,o].map(P(this,pe,Op).bind(this));g<m&&([m,g,v,b]=[g,m,b,v]),u(this,pe,bh).style.color="";const x=(C,D,N)=>{const I=new Array(256),j=(g-m)/N,F=C/255,W=(D-C)/(255*N);let K=0;for(let J=0;J<=N;J++){const ie=Math.round(m+J*j),ce=F+J*W;for(let Y=K;Y<=ie;Y++)I[Y]=ce;K=ie+1}for(let J=K;J<256;J++)I[J]=I[K-1];return I.join(",")},A=`g_${u(this,Lo)}_hcm_${t}_filter`,E=h.filter=P(this,pe,Sh).call(this,A);return P(this,pe,B_).call(this,E),P(this,pe,Ip).call(this,x(v[0],b[0],5),x(v[1],b[1],5),x(v[2],b[2],5),E),h.url=P(this,pe,xh).call(this,A),h.url}destroy(t=!1){var n,r,i,o;t&&((n=u(this,jc))!=null&&n.size)||((r=u(this,Ro))==null||r.parentNode.parentNode.remove(),S(this,Ro,null),(i=u(this,ud))==null||i.clear(),S(this,ud,null),(o=u(this,jc))==null||o.clear(),S(this,jc,null),S(this,Fc,0))}}Oc=new WeakMap,ud=new WeakMap,Ro=new WeakMap,Lo=new WeakMap,Qn=new WeakMap,jc=new WeakMap,Fc=new WeakMap,pe=new WeakSet,Xn=function(){return u(this,ud)||S(this,ud,new Map)},Mp=function(){return u(this,jc)||S(this,jc,new Map)},bh=function(){if(!u(this,Ro)){const t=u(this,Qn).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=u(this,Qn).createElementNS(ho,"svg");r.setAttribute("width",0),r.setAttribute("height",0),S(this,Ro,u(this,Qn).createElementNS(ho,"defs")),t.append(r),r.append(u(this,Ro)),u(this,Qn).body.append(t)}return u(this,Ro)},m0=function(t){if(t.length===1){const d=t[0],p=new Array(256);for(let g=0;g<256;g++)p[g]=d[g]/255;const m=p.join(",");return[m,m,m]}const[n,r,i]=t,o=new Array(256),l=new Array(256),h=new Array(256);for(let d=0;d<256;d++)o[d]=n[d]/255,l[d]=r[d]/255,h[d]=i[d]/255;return[o.join(","),l.join(","),h.join(",")]},xh=function(t){if(u(this,Oc)===void 0){S(this,Oc,"");const n=u(this,Qn).URL;n!==u(this,Qn).baseURI&&(fy(n)?Oe('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,Oc,LE(n,"")))}return`url(${u(this,Oc)}#${t})`},yN=function(t){const n=u(this,Qn).createElementNS(ho,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},B_=function(t){const n=u(this,Qn).createElementNS(ho,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Sh=function(t){const n=u(this,Qn).createElementNS(ho,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),u(this,pe,bh).append(n),n},Np=function(t,n,r){const i=u(this,Qn).createElementNS(ho,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},Ip=function(t,n,r,i){const o=u(this,Qn).createElementNS(ho,"feComponentTransfer");i.append(o),P(this,pe,Np).call(this,o,"feFuncR",t),P(this,pe,Np).call(this,o,"feFuncG",n),P(this,pe,Np).call(this,o,"feFuncB",r)},$_=function(t,n){const r=u(this,Qn).createElementNS(ho,"feComponentTransfer");n.append(r),P(this,pe,Np).call(this,r,"feFuncA",t)},Op=function(t){return u(this,pe,bh).style.color=t,Rf(getComputedStyle(u(this,pe,bh)).getPropertyValue("color"))};class vN{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){yt("Abstract method `_fetch` called.")}}class rR extends vN{async _fetch(e){const t=await Pf(e,"arraybuffer");return new Uint8Array(t)}}class wN{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){yt("Abstract method `_fetch` called.")}}class iR extends wN{async _fetch(e){const t=await Pf(e,"arraybuffer");return new Uint8Array(t)}}ds&&Oe("Please use the `legacy` build in Node.js environments.");async function jE(s){const t=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)}class jW extends gN{}class FW extends pN{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class BW extends mN{async _fetch(e){return jE(e)}}class $W extends vN{async _fetch(e){return jE(e)}}class UW extends wN{async _fetch(e){return jE(e)}}const fh="__forcedDependency",{floor:oR,ceil:aR}=Math;function Kv(s,e,t,n,r,i){s[e*4+0]=Math.min(s[e*4+0],t),s[e*4+1]=Math.min(s[e*4+1],n),s[e*4+2]=Math.max(s[e*4+2],r),s[e*4+3]=Math.max(s[e*4+3],i)}const U_=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var hd,el;class VW{constructor(e,t){k(this,hd);k(this,el);S(this,hd,e),S(this,el,t)}get length(){return u(this,hd).length}isEmpty(e){return u(this,hd)[e]===U_}minX(e){return u(this,el)[e*4+0]/256}minY(e){return u(this,el)[e*4+1]/256}maxX(e){return(u(this,el)[e*4+2]+1)/256}maxY(e){return(u(this,el)[e*4+3]+1)/256}}hd=new WeakMap,el=new WeakMap;const Xv=(s,e)=>{if(!s)return;let t=s.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},s.set(e,t)),t};var Cs,Ts,Bc,ei,$c,Do,at,ct,Mo,Ps,Jm,dd,Uc,Vc,No,Zn,Ni,Qm,V_;class zW{constructor(e,t,n=!1){k(this,Qm);k(this,Cs,{__proto__:null});k(this,Ts,{__proto__:null,transform:[],moveText:[],sameLineText:[],[fh]:[]});k(this,Bc,new Map);k(this,ei,[]);k(this,$c,[]);k(this,Do,[[1,0,0,1,0,0]]);k(this,at,[-1/0,-1/0,1/0,1/0]);k(this,ct,new Float64Array([1/0,1/0,-1/0,-1/0]));k(this,Mo,-1);k(this,Ps,new Set);k(this,Jm,new Map);k(this,dd,new Map);k(this,Uc);k(this,Vc);k(this,No);k(this,Zn);k(this,Ni);S(this,Uc,e.width),S(this,Vc,e.height),P(this,Qm,V_).call(this,t),n&&S(this,Ni,new Map)}growOperationsCount(e){e>=u(this,Zn).length&&P(this,Qm,V_).call(this,e,u(this,Zn))}save(e){return S(this,Cs,{__proto__:u(this,Cs)}),S(this,Ts,{__proto__:u(this,Ts),transform:{__proto__:u(this,Ts).transform},moveText:{__proto__:u(this,Ts).moveText},sameLineText:{__proto__:u(this,Ts).sameLineText},[fh]:{__proto__:u(this,Ts)[fh]}}),S(this,at,{__proto__:u(this,at)}),u(this,ei).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(u(this,Cs));if(t===null)return this;S(this,Cs,t),S(this,Ts,Object.getPrototypeOf(u(this,Ts))),S(this,at,Object.getPrototypeOf(u(this,at)));const n=u(this,ei).pop();return n!==void 0&&((r=Xv(u(this,Ni),e))==null||r.dependencies.add(n),u(this,Zn)[e]=u(this,Zn)[n]),this}recordOpenMarker(e){return u(this,ei).push(e),this}getOpenMarker(){return u(this,ei).length===0?null:u(this,ei).at(-1)}recordCloseMarker(e){var n;const t=u(this,ei).pop();return t!==void 0&&((n=Xv(u(this,Ni),e))==null||n.dependencies.add(t),u(this,Zn)[e]=u(this,Zn)[t]),this}beginMarkedContent(e){return u(this,$c).push(e),this}endMarkedContent(e){var n;const t=u(this,$c).pop();return t!==void 0&&((n=Xv(u(this,Ni),e))==null||n.dependencies.add(t),u(this,Zn)[e]=u(this,Zn)[t]),this}pushBaseTransform(e){return u(this,Do).push(ge.multiplyByDOMMatrix(u(this,Do).at(-1),e.getTransform())),this}popBaseTransform(){return u(this,Do).length>1&&u(this,Do).pop(),this}recordSimpleData(e,t){return u(this,Cs)[e]=t,this}recordIncrementalData(e,t){return u(this,Ts)[e].push(t),this}resetIncrementalData(e,t){return u(this,Ts)[e].length=0,this}recordNamedData(e,t){return u(this,Bc).set(e,t),this}recordSimpleDataFromNamed(e,t,n){u(this,Cs)[e]=u(this,Bc).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(fh,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in u(this,Cs)&&this.recordFutureForcedDependency(t,u(this,Cs)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of u(this,Ps))this.recordFutureForcedDependency(fh,e);return this}resetBBox(e){return u(this,Mo)!==e&&(S(this,Mo,e),u(this,ct)[0]=1/0,u(this,ct)[1]=1/0,u(this,ct)[2]=-1/0,u(this,ct)[3]=-1/0),this}recordClipBox(e,t,n,r,i,o){const l=ge.multiplyByDOMMatrix(u(this,Do).at(-1),t.getTransform()),h=[1/0,1/0,-1/0,-1/0];ge.axialAlignedBoundingBox([n,i,r,o],l,h);const d=ge.intersect(u(this,at),h);return d?(u(this,at)[0]=d[0],u(this,at)[1]=d[1],u(this,at)[2]=d[2],u(this,at)[3]=d[3]):(u(this,at)[0]=u(this,at)[1]=1/0,u(this,at)[2]=u(this,at)[3]=-1/0),this}recordBBox(e,t,n,r,i,o){const l=u(this,at);if(l[0]===1/0)return this;const h=ge.multiplyByDOMMatrix(u(this,Do).at(-1),t.getTransform());if(l[0]===-1/0)return ge.axialAlignedBoundingBox([n,i,r,o],h,u(this,ct)),this;const d=[1/0,1/0,-1/0,-1/0];return ge.axialAlignedBoundingBox([n,i,r,o],h,d),u(this,ct)[0]=Math.min(u(this,ct)[0],Math.max(d[0],l[0])),u(this,ct)[1]=Math.min(u(this,ct)[1],Math.max(d[1],l[1])),u(this,ct)[2]=Math.max(u(this,ct)[2],Math.min(d[2],l[2])),u(this,ct)[3]=Math.max(u(this,ct)[3],Math.min(d[3],l[3])),this}recordCharacterBBox(e,t,n,r=1,i=0,o=0,l){const h=n.bbox;let d,p;if(h&&(d=h[2]!==h[0]&&h[3]!==h[1]&&u(this,dd).get(n),d!==!1&&(p=[0,0,0,0],ge.axialAlignedBoundingBox(h,n.fontMatrix,p),(r!==1||i!==0||o!==0)&&ge.scaleMinMax([r,0,0,-r,i,o],p),d)))return this.recordBBox(e,t,p[0],p[2],p[1],p[3]);if(!l)return this.recordFullPageBBox(e);const m=l();return h&&p&&d===void 0&&(d=p[0]<=i-m.actualBoundingBoxLeft&&p[2]>=i+m.actualBoundingBoxRight&&p[1]<=o-m.actualBoundingBoxAscent&&p[3]>=o+m.actualBoundingBoxDescent,u(this,dd).set(n,d),d)?this.recordBBox(e,t,p[0],p[2],p[1],p[3]):this.recordBBox(e,t,i-m.actualBoundingBoxLeft,i+m.actualBoundingBoxRight,o-m.actualBoundingBoxAscent,o+m.actualBoundingBoxDescent)}recordFullPageBBox(e){return u(this,ct)[0]=Math.max(0,u(this,at)[0]),u(this,ct)[1]=Math.max(0,u(this,at)[1]),u(this,ct)[2]=Math.min(u(this,Uc),u(this,at)[2]),u(this,ct)[3]=Math.min(u(this,Vc),u(this,at)[3]),this}getSimpleIndex(e){return u(this,Cs)[e]}recordDependencies(e,t){const n=u(this,Ps),r=u(this,Cs),i=u(this,Ts);for(const o of t)o in u(this,Cs)?n.add(r[o]):o in i&&i[o].forEach(n.add,n);return this}recordNamedDependency(e,t){return u(this,Bc).has(t)&&u(this,Ps).add(u(this,Bc).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[fh]),u(this,Ni)){const n=Xv(u(this,Ni),e),{dependencies:r}=n;u(this,Ps).forEach(r.add,r),u(this,ei).forEach(r.add,r),u(this,$c).forEach(r.add,r),r.delete(e),n.isRenderingOperation=!0}if(u(this,Mo)===e){const n=oR(u(this,ct)[0]*256/u(this,Uc)),r=oR(u(this,ct)[1]*256/u(this,Vc)),i=aR(u(this,ct)[2]*256/u(this,Uc)),o=aR(u(this,ct)[3]*256/u(this,Vc));Kv(u(this,No),e,n,r,i,o);for(const l of u(this,Ps))l!==e&&Kv(u(this,No),l,n,r,i,o);for(const l of u(this,ei))l!==e&&Kv(u(this,No),l,n,r,i,o);for(const l of u(this,$c))l!==e&&Kv(u(this,No),l,n,r,i,o);t||(u(this,Ps).clear(),S(this,Mo,-1))}return this}recordShowTextOperation(e,t=!1){const n=Array.from(u(this,Ps));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return u(this,Mo)===e&&(S(this,Mo,-1),u(this,at)[0]=Math.max(u(this,at)[0],u(this,ct)[0]),u(this,at)[1]=Math.max(u(this,at)[1],u(this,ct)[1]),u(this,at)[2]=Math.min(u(this,at)[2],u(this,ct)[2]),u(this,at)[3]=Math.min(u(this,at)[3],u(this,ct)[3]),t||u(this,Ps).clear()),this}_takePendingDependencies(){const e=u(this,Ps);return S(this,Ps,new Set),e}_extractOperation(e){const t=u(this,Jm).get(e);return u(this,Jm).delete(e),t}_pushPendingDependencies(e){for(const t of e)u(this,Ps).add(t)}take(){return u(this,dd).clear(),new VW(u(this,Zn),u(this,No))}takeDebugMetadata(){return u(this,Ni)}}Cs=new WeakMap,Ts=new WeakMap,Bc=new WeakMap,ei=new WeakMap,$c=new WeakMap,Do=new WeakMap,at=new WeakMap,ct=new WeakMap,Mo=new WeakMap,Ps=new WeakMap,Jm=new WeakMap,dd=new WeakMap,Uc=new WeakMap,Vc=new WeakMap,No=new WeakMap,Zn=new WeakMap,Ni=new WeakMap,Qm=new WeakSet,V_=function(e,t){const n=new ArrayBuffer(e*4);S(this,No,new Uint8ClampedArray(n)),S(this,Zn,new Uint32Array(n)),t&&t.length>0?(u(this,Zn).set(t),u(this,Zn).fill(U_,t.length)):u(this,Zn).fill(U_)};var pt,zt,ti,fd,pd;const YE=class YE{constructor(e,t,n){k(this,pt);k(this,zt);k(this,ti);k(this,fd,0);k(this,pd,0);if(e instanceof YE&&u(e,ti)===!!n)return e;S(this,pt,e),S(this,zt,t),S(this,ti,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return un(this,pd)._++,u(this,pt).save(u(this,zt)),this}restore(e){return u(this,pd)>0&&(u(this,pt).restore(u(this,zt)),un(this,pd)._--),this}recordOpenMarker(e){return un(this,fd)._++,this}getOpenMarker(){return u(this,fd)>0?u(this,zt):u(this,pt).getOpenMarker()}recordCloseMarker(e){return un(this,fd)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return u(this,pt).pushBaseTransform(e),this}popBaseTransform(){return u(this,pt).popBaseTransform(),this}recordSimpleData(e,t){return u(this,pt).recordSimpleData(e,u(this,zt)),this}recordIncrementalData(e,t){return u(this,pt).recordIncrementalData(e,u(this,zt)),this}resetIncrementalData(e,t){return u(this,pt).resetIncrementalData(e,u(this,zt)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return u(this,pt).recordSimpleDataFromNamed(e,t,u(this,zt)),this}recordFutureForcedDependency(e,t){return u(this,pt).recordFutureForcedDependency(e,u(this,zt)),this}inheritSimpleDataAsFutureForcedDependencies(e){return u(this,pt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return u(this,pt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return u(this,ti)||u(this,pt).resetBBox(u(this,zt)),this}recordClipBox(e,t,n,r,i,o){return u(this,ti)||u(this,pt).recordClipBox(u(this,zt),t,n,r,i,o),this}recordBBox(e,t,n,r,i,o){return u(this,ti)||u(this,pt).recordBBox(u(this,zt),t,n,r,i,o),this}recordCharacterBBox(e,t,n,r,i,o,l){return u(this,ti)||u(this,pt).recordCharacterBBox(u(this,zt),t,n,r,i,o,l),this}recordFullPageBBox(e){return u(this,ti)||u(this,pt).recordFullPageBBox(u(this,zt)),this}getSimpleIndex(e){return u(this,pt).getSimpleIndex(e)}recordDependencies(e,t){return u(this,pt).recordDependencies(u(this,zt),t),this}recordNamedDependency(e,t){return u(this,pt).recordNamedDependency(u(this,zt),t),this}recordOperation(e){return u(this,pt).recordOperation(u(this,zt),!0),this}recordShowTextOperation(e){return u(this,pt).recordShowTextOperation(u(this,zt),!0),this}bboxToClipBoxDropOperation(e){return u(this,ti)||u(this,pt).bboxToClipBoxDropOperation(u(this,zt),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};pt=new WeakMap,zt=new WeakMap,ti=new WeakMap,fd=new WeakMap,pd=new WeakMap;let sw=YE;const xr={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Vn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function z_(s,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),s.clip(r)}class FE{isModifyingCurrentTransform(){return!1}getPattern(){yt("Abstract method `getPattern` called.")}}class HW extends FE{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let i;if(r===Vn.STROKE||r===Vn.FILL){const o=t.current.getClippedPathBoundingBox(r,Ot(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,h=Math.ceil(o[3]-o[1])||1,d=t.cachedCanvases.getCanvas("pattern",l,h),p=d.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-o[0],-o[1]),n=ge.transform(n,[1,0,0,1,o[0],o[1]]),p.transform(...t.baseTransform),this.matrix&&p.transform(...this.matrix),z_(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),i=e.createPattern(d.canvas,"no-repeat");const m=new DOMMatrix(n);i.setTransform(m)}else z_(e,this._bbox),i=this._createGradient(e);return i}}function kS(s,e,t,n,r,i,o,l){const h=e.coords,d=e.colors,p=s.data,m=s.width*4;let g;h[t+1]>h[n+1]&&(g=t,t=n,n=g,g=i,i=o,o=g),h[n+1]>h[r+1]&&(g=n,n=r,r=g,g=o,o=l,l=g),h[t+1]>h[n+1]&&(g=t,t=n,n=g,g=i,i=o,o=g);const v=(h[t]+e.offsetX)*e.scaleX,b=(h[t+1]+e.offsetY)*e.scaleY,x=(h[n]+e.offsetX)*e.scaleX,A=(h[n+1]+e.offsetY)*e.scaleY,E=(h[r]+e.offsetX)*e.scaleX,R=(h[r+1]+e.offsetY)*e.scaleY;if(b>=R)return;const C=d[i],D=d[i+1],N=d[i+2],I=d[o],j=d[o+1],F=d[o+2],W=d[l],K=d[l+1],J=d[l+2],ie=Math.round(b),ce=Math.round(R);let Y,ue,Z,X,V,re,ne,U;for(let q=ie;q<=ce;q++){if(q<A){const he=q<b?0:(b-q)/(b-A);Y=v-(v-x)*he,ue=C-(C-I)*he,Z=D-(D-j)*he,X=N-(N-F)*he}else{let he;q>R?he=1:A===R?he=0:he=(A-q)/(A-R),Y=x-(x-E)*he,ue=I-(I-W)*he,Z=j-(j-K)*he,X=F-(F-J)*he}let oe;q<b?oe=0:q>R?oe=1:oe=(b-q)/(b-R),V=v-(v-E)*oe,re=C-(C-W)*oe,ne=D-(D-K)*oe,U=N-(N-J)*oe;const de=Math.round(Math.min(Y,V)),Ce=Math.round(Math.max(Y,V));let Re=m*q+de*4;for(let he=de;he<=Ce;he++)oe=(Y-he)/(Y-V),oe<0?oe=0:oe>1&&(oe=1),p[Re++]=ue-(ue-re)*oe|0,p[Re++]=Z-(Z-ne)*oe|0,p[Re++]=X-(X-U)*oe|0,p[Re++]=255}}function WW(s,e,t){const n=e.coords,r=e.colors;let i,o;switch(e.type){case"lattice":const l=e.verticesPerRow,h=Math.floor(n.length/l)-1,d=l-1;for(i=0;i<h;i++){let p=i*l;for(let m=0;m<d;m++,p++)kS(s,t,n[p],n[p+1],n[p+l],r[p],r[p+1],r[p+l]),kS(s,t,n[p+l+1],n[p+1],n[p+l],r[p+l+1],r[p+1],r[p+l])}break;case"triangles":for(i=0,o=n.length;i<o;i+=3)kS(s,t,n[i],n[i+1],n[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class GW extends FE{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const l=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,p=Math.ceil(this._bounds[3])-h,m=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(p*e[1]*1.1)),3e3),v=d/m,b=p/g,x={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-h,scaleX:1/v,scaleY:1/b},A=m+4,E=g+4,R=n.getCanvas("mesh",A,E),C=R.context,D=C.createImageData(m,g);if(t){const I=D.data;for(let j=0,F=I.length;j<F;j+=4)I[j]=t[0],I[j+1]=t[1],I[j+2]=t[2],I[j+3]=255}for(const I of this._figures)WW(D,I,x);return C.putImageData(D,2,2),{canvas:R.canvas,offsetX:l-2*v,offsetY:h-2*b,scaleX:v,scaleY:b}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){z_(e,this._bbox);const i=new Float32Array(2);if(r===Vn.SHADING)ge.singularValueDecompose2dScale(Ot(e),i);else if(this.matrix){ge.singularValueDecompose2dScale(this.matrix,i);const[l,h]=i;ge.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=l,i[1]*=h}else ge.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,r===Vn.SHADING?null:this._background,t.cachedCanvases);return r!==Vn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class qW extends FE{getPattern(){return"hotpink"}}function KW(s){switch(s[0]){case"RadialAxial":return new HW(s);case"Mesh":return new GW(s);case"Dummy":return new qW}throw new Error(`Unknown IR type: ${s[0]}`)}const lR={COLORED:1,UNCOLORED:2},bw=class bw{constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e,t){var re,ne;const{bbox:n,operatorList:r,paintType:i,tilingType:o,color:l,canvasGraphicsFactory:h}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),zw("TilingType: "+o);const m=n[0],g=n[1],v=n[2],b=n[3],x=v-m,A=b-g,E=new Float32Array(2);ge.singularValueDecompose2dScale(this.matrix,E);const[R,C]=E;ge.singularValueDecompose2dScale(this.baseTransform,E);const D=R*E[0],N=C*E[1];let I=x,j=A,F=!1,W=!1;const K=Math.ceil(d*D),J=Math.ceil(p*N),ie=Math.ceil(x*D),ce=Math.ceil(A*N);K>=ie?I=d:F=!0,J>=ce?j=p:W=!0;const Y=this.getSizeAndScale(I,this.ctx.canvas.width,D),ue=this.getSizeAndScale(j,this.ctx.canvas.height,N),Z=e.cachedCanvases.getCanvas("pattern",Y.size,ue.size),X=Z.context,V=h.createCanvasGraphics(X,t);if(V.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(V,i,l),X.translate(-Y.scale*m,-ue.scale*g),V.transform(0,Y.scale,0,0,ue.scale,0,0),X.save(),(re=V.dependencyTracker)==null||re.save(),this.clipBbox(V,m,g,v,b),V.baseTransform=Ot(V.ctx),V.executeOperatorList(r),V.endDrawing(),(ne=V.dependencyTracker)==null||ne.restore(),X.restore(),F||W){const U=Z.canvas;F&&(I=d),W&&(j=p);const q=this.getSizeAndScale(I,this.ctx.canvas.width,D),oe=this.getSizeAndScale(j,this.ctx.canvas.height,N),de=q.size,Ce=oe.size,Re=e.cachedCanvases.getCanvas("pattern-workaround",de,Ce),he=Re.context,Fe=F?Math.floor(x/d):0,ze=W?Math.floor(A/p):0;for(let Ze=0;Ze<=Fe;Ze++)for(let We=0;We<=ze;We++)he.drawImage(U,de*Ze,Ce*We,de,Ce,0,0,de,Ce);return{canvas:Re.canvas,scaleX:q.scale,scaleY:oe.scale,offsetX:m,offsetY:g}}return{canvas:Z.canvas,scaleX:Y.scale,scaleY:ue.scale,offsetX:m,offsetY:g}}getSizeAndScale(e,t,n){const r=Math.max(bw.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,i){const o=r-t,l=i-n;e.ctx.rect(t,n,o,l),ge.axialAlignedBoundingBox([t,n,r,i],Ot(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,i=e.current;switch(t){case lR.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;r.fillStyle=i.fillColor=o,r.strokeStyle=i.strokeColor=l;break;case lR.UNCOLORED:r.fillStyle=r.strokeStyle=n,i.fillColor=i.strokeColor=n;break;default:throw new mW(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r,i){let o=n;r!==Vn.SHADING&&(o=ge.transform(o,t.baseTransform),this.matrix&&(o=ge.transform(o,this.matrix)));const l=this.createPatternCanvas(t,i);let h=new DOMMatrix(o);h=h.translate(l.offsetX,l.offsetY),h=h.scale(1/l.scaleX,1/l.scaleY);const d=e.createPattern(l.canvas,"repeat");return d.setTransform(h),d}};te(bw,"MAX_PATTERN_SIZE",3e3);let H_=bw;function XW({src:s,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const l=Tn.isLittleEndian?4278190080:255,[h,d]=o?[i,l]:[l,i],p=n>>3,m=n&7,g=s.length;t=new Uint32Array(t.buffer);let v=0;for(let b=0;b<r;b++){for(const A=e+p;e<A;e++){const E=e<g?s[e]:255;t[v++]=E&128?d:h,t[v++]=E&64?d:h,t[v++]=E&32?d:h,t[v++]=E&16?d:h,t[v++]=E&8?d:h,t[v++]=E&4?d:h,t[v++]=E&2?d:h,t[v++]=E&1?d:h}if(m===0)continue;const x=e<g?s[e++]:255;for(let A=0;A<m;A++)t[v++]=x&1<<7-A?d:h}return{srcPos:e,destPos:v}}const cR=16,uR=100,YW=15,hR=10,Ms=16,CS=new DOMMatrix,ar=new Float32Array(2),Dh=new Float32Array([1/0,1/0,-1/0,-1/0]);function JW(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},s.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},s.transform=function(t,n,r,i,o,l){e.transform(t,n,r,i,o,l),this.__originalTransform(t,n,r,i,o,l)},s.setTransform=function(t,n,r,i,o,l){e.setTransform(t,n,r,i,o,l),this.__originalSetTransform(t,n,r,i,o,l)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(t){e.rotate(t),this.__originalRotate(t)},s.clip=function(t){e.clip(t),this.__originalClip(t)},s.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},s.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},s.bezierCurveTo=function(t,n,r,i,o,l){e.bezierCurveTo(t,n,r,i,o,l),this.__originalBezierCurveTo(t,n,r,i,o,l)},s.rect=function(t,n,r,i){e.rect(t,n,r,i),this.__originalRect(t,n,r,i)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class QW{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Yv(s,e,t,n,r,i,o,l,h,d){const[p,m,g,v,b,x]=Ot(s);if(m===0&&g===0){const R=o*p+b,C=Math.round(R),D=l*v+x,N=Math.round(D),I=(o+h)*p+b,j=Math.abs(Math.round(I)-C)||1,F=(l+d)*v+x,W=Math.abs(Math.round(F)-N)||1;return s.setTransform(Math.sign(p),0,0,Math.sign(v),C,N),s.drawImage(e,t,n,r,i,0,0,j,W),s.setTransform(p,m,g,v,b,x),[j,W]}if(p===0&&v===0){const R=l*g+b,C=Math.round(R),D=o*m+x,N=Math.round(D),I=(l+d)*g+b,j=Math.abs(Math.round(I)-C)||1,F=(o+h)*m+x,W=Math.abs(Math.round(F)-N)||1;return s.setTransform(0,Math.sign(m),Math.sign(g),0,C,N),s.drawImage(e,t,n,r,i,0,0,W,j),s.setTransform(p,m,g,v,b,x),[W,j]}s.drawImage(e,t,n,r,i,o,l,h,d);const A=Math.hypot(p,m),E=Math.hypot(g,v);return[A*h,E*d]}class dR{constructor(e,t,n){te(this,"alphaIsShape",!1);te(this,"fontSize",0);te(this,"fontSizeScale",1);te(this,"textMatrix",null);te(this,"textMatrixScale",1);te(this,"fontMatrix",g_);te(this,"leading",0);te(this,"x",0);te(this,"y",0);te(this,"lineX",0);te(this,"lineY",0);te(this,"charSpacing",0);te(this,"wordSpacing",0);te(this,"textHScale",1);te(this,"textRenderingMode",Nn.FILL);te(this,"textRise",0);te(this,"fillColor","#000000");te(this,"strokeColor","#000000");te(this,"patternFill",!1);te(this,"patternStroke",!1);te(this,"fillAlpha",1);te(this,"strokeAlpha",1);te(this,"lineWidth",1);te(this,"activeSMask",null);te(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Dh.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Vn.FILL,t=null){const n=this.minMax.slice();if(e===Vn.STROKE){t||yt("Stroke bounding box must include transform."),ge.singularValueDecompose2dScale(t,ar);const r=ar[0]*this.lineWidth/2,i=ar[1]*this.lineWidth/2;n[0]-=r,n[1]-=i,n[2]+=r,n[3]+=i}return n}updateClipFromPath(){const e=ge.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Dh,0)}getClippedPathBoundingBox(e=Vn.FILL,t=null){return ge.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function fR(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%Ms,i=(t-r)/Ms,o=r===0?i:i+1,l=s.createImageData(n,Ms);let h=0,d;const p=e.data,m=l.data;let g,v,b,x;if(e.kind===Zp.GRAYSCALE_1BPP){const A=p.byteLength,E=new Uint32Array(m.buffer,0,m.byteLength>>2),R=E.length,C=n+7>>3,D=4294967295,N=Tn.isLittleEndian?4278190080:255;for(g=0;g<o;g++){for(b=g<i?Ms:r,d=0,v=0;v<b;v++){const I=A-h;let j=0;const F=I>C?n:I*8-7,W=F&-8;let K=0,J=0;for(;j<W;j+=8)J=p[h++],E[d++]=J&128?D:N,E[d++]=J&64?D:N,E[d++]=J&32?D:N,E[d++]=J&16?D:N,E[d++]=J&8?D:N,E[d++]=J&4?D:N,E[d++]=J&2?D:N,E[d++]=J&1?D:N;for(;j<F;j++)K===0&&(J=p[h++],K=128),E[d++]=J&K?D:N,K>>=1}for(;d<R;)E[d++]=0;s.putImageData(l,0,g*Ms)}}else if(e.kind===Zp.RGBA_32BPP){for(v=0,x=n*Ms*4,g=0;g<i;g++)m.set(p.subarray(h,h+x)),h+=x,s.putImageData(l,0,v),v+=Ms;g<o&&(x=n*r*4,m.set(p.subarray(h,h+x)),s.putImageData(l,0,v))}else if(e.kind===Zp.RGB_24BPP)for(b=Ms,x=n*b,g=0;g<o;g++){for(g>=i&&(b=r,x=n*b),d=0,v=x;v--;)m[d++]=p[h++],m[d++]=p[h++],m[d++]=p[h++],m[d++]=255;s.putImageData(l,0,g*Ms)}else throw new Error(`bad image kind: ${e.kind}`)}function pR(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%Ms,i=(t-r)/Ms,o=r===0?i:i+1,l=s.createImageData(n,Ms);let h=0;const d=e.data,p=l.data;for(let m=0;m<o;m++){const g=m<i?Ms:r;({srcPos:h}=XW({src:d,srcPos:h,dest:p,width:n,height:g,nonBlackColor:0})),s.putImageData(l,0,m*Ms)}}function bp(s,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)s[n]!==void 0&&(e[n]=s[n]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function Jv(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}function mR(s,e){if(e)return!0;ge.singularValueDecompose2dScale(s,ar);const t=Math.fround(fi.pixelRatio*ra.PDF_TO_CSS_UNITS);return ar[0]<=t&&ar[1]<=t}const ZW=["butt","round","square"],e6=["miter","round","bevel"],t6={},gR={};var pi,W_,G_,q_;const JE=class JE{constructor(e,t,n,r,i,{optionalContentConfig:o,markedContentStack:l=null},h,d,p){k(this,pi);this.ctx=e,this.current=new dR(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new QW(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(e,t,n=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=l,n){const h=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Ot(this.compositeCtx))}this.ctx.save(),Jv(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ot(this.ctx)}executeOperatorList(e,t,n,r,i){var E;const o=e.argsArray,l=e.fnArray;let h=t||0;const d=o.length;if(d===h)return h;const p=d-h>hR&&typeof n=="function",m=p?Date.now()+YW:0;let g=0;const v=this.commonObjs,b=this.objs;let x,A;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,n),h;if(!i||i(h))if(x=l[h],A=o[h]??null,x!==gf.dependency)A===null?this[x](h):this[x](h,...A);else for(const R of A){(E=this.dependencyTracker)==null||E.recordNamedData(R,h);const C=R.startsWith("g_")?v:b;if(!C.has(R))return C.get(R,n),h}if(h++,h===d)return h;if(p&&++g>hR){if(Date.now()>m)return n(),h;g=0}}}endDrawing(){P(this,pi,W_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),P(this,pi,G_).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=n,h=r,d="prescale1",p,m;for(;i>2&&l>1||o>2&&h>1;){let g=l,v=h;i>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/g),o>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/v),p=this.cachedCanvases.getCanvas(d,g,v),m=p.context,m.clearRect(0,0,g,v),m.drawImage(e,0,0,l,h,0,0,g,v),e=p.canvas,l=g,h=v,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:h}}_createMaskCanvas(e,t){var K,J;const n=this.ctx,{width:r,height:i}=t,o=this.current.fillColor,l=this.current.patternFill,h=Ot(n);let d,p,m,g;if((t.bitmap||t.data)&&t.count>1){const ie=t.bitmap||t.data.buffer;p=JSON.stringify(l?h:[h.slice(0,4),o]),d=this._cachedBitmapsMap.get(ie),d||(d=new Map,this._cachedBitmapsMap.set(ie,d));const ce=d.get(p);if(ce&&!l){const Y=Math.round(Math.min(h[0],h[2])+h[4]),ue=Math.round(Math.min(h[1],h[3])+h[5]);return(K=this.dependencyTracker)==null||K.recordDependencies(e,xr.transformAndFill),{canvas:ce,offsetX:Y,offsetY:ue}}m=ce}m||(g=this.cachedCanvases.getCanvas("maskCanvas",r,i),pR(g.context,t));let v=ge.transform(h,[1/r,0,0,-1/i,0,0]);v=ge.transform(v,[1,0,0,1,0,-i]);const b=Dh.slice();ge.axialAlignedBoundingBox([0,0,r,i],v,b);const[x,A,E,R]=b,C=Math.round(E-x)||1,D=Math.round(R-A)||1,N=this.cachedCanvases.getCanvas("fillCanvas",C,D),I=N.context,j=x,F=A;I.translate(-j,-F),I.transform(...v),m||(m=this._scaleImage(g.canvas,bi(I)),m=m.img,d&&l&&d.set(p,m)),I.imageSmoothingEnabled=mR(Ot(I),t.interpolate),Yv(I,m,0,0,m.width,m.height,0,0,r,i),I.globalCompositeOperation="source-in";const W=ge.transform(bi(I),[1,0,0,1,-j,-F]);return I.fillStyle=l?o.getPattern(n,this,W,Vn.FILL,e):o,I.fillRect(0,0,r,i),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,N.canvas)),(J=this.dependencyTracker)==null||J.recordDependencies(e,xr.transformAndFill),{canvas:N.canvas,offsetX:Math.round(j),offsetY:Math.round(F)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=ZW[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=e6[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,r,i,o,l;for(const[h,d]of t)switch(h){case"LW":this.setLineWidth(e,d);break;case"LC":this.setLineCap(e,d);break;case"LJ":this.setLineJoin(e,d);break;case"ML":this.setMiterLimit(e,d);break;case"D":this.setDash(e,d[0],d[1]);break;case"RI":this.setRenderingIntent(e,d);break;case"FL":this.setFlatness(e,d);break;case"Font":this.setFont(e,d[0],d[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=d;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=d;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=d;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(d);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,n);this.suspendedCtx=this.ctx;const o=this.ctx=i.context;o.setTransform(this.suspendedCtx.getTransform()),bp(this.suspendedCtx,o),JW(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),bp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const i=r[0],o=r[1],l=r[2]-i,h=r[3]-o;l===0||h===0||(this.genericComposeSMask(t.context,n,l,h,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,i,o,l,h,d,p,m){let g=e.canvas,v=h-p,b=d-m;if(o)if(v<0||b<0||v+n>g.width||b+r>g.height){const A=this.cachedCanvases.getCanvas("maskExtension",n,r),E=A.context;E.drawImage(g,-v,-b),E.globalCompositeOperation="destination-atop",E.fillStyle=o,E.fillRect(0,0,n,r),E.globalCompositeOperation="source-over",g=A.canvas,v=b=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(v,b,n,r),e.clip(A),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(v,b,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const x=new Path2D;x.rect(h,d,n,r),t.clip(x),t.globalCompositeOperation="destination-in",t.drawImage(g,v,b,n,r,h,d,n,r),t.restore()}save(e){var n;this.inSMaskMode&&bp(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&bp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,r,i,o,l){var h;(h=this.dependencyTracker)==null||h.recordIncrementalData("transform",e),this.ctx.transform(t,n,r,i,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,r){let[i]=n;if(!r){i||(i=n[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const o=t===gf.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(e,["transform"])}if(!(i instanceof Path2D)){const o=n[0]=new Path2D;for(let l=0,h=i.length;l<h;)switch(i[l++]){case Hv.moveTo:o.moveTo(i[l++],i[l++]);break;case Hv.lineTo:o.lineTo(i[l++],i[l++]);break;case Hv.curveTo:o.bezierCurveTo(i[l++],i[l++],i[l++],i[l++],i[l++],i[l++]);break;case Hv.closePath:o.closePath();break;default:Oe(`Unrecognized drawing path operator: ${i[l-1]}`);break}i=o}ge.axialAlignedBoundingBox(r,Ot(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var o;const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const l=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,bi(r),Vn.STROKE,e),l){const h=new Path2D;h.addPath(t,r.getTransform().invertSelf().multiplySelf(l)),t=h}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,xr.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Vn.STROKE,Ot(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var d,p,m;const r=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const g=i.isModifyingCurrentTransform()?r.getTransform():null;if((d=this.dependencyTracker)==null||d.save(e),r.save(),r.fillStyle=i.getPattern(r,this,bi(r),Vn.FILL,e),g){const v=new Path2D;v.addPath(t,r.getTransform().invertSelf().multiplySelf(g)),t=v}l=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(p=this.dependencyTracker)==null||p.recordDependencies(e,xr.fill),l&&(r.restore(),(m=this.dependencyTracker)==null||m.restore(e)),n&&this.consumePath(e,t,h)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,xr.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=t6}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=gR}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,i=n.getTransform().invertSelf();for(const{transform:o,x:l,y:h,fontSize:d,path:p}of t)p&&r.addPath(p,new DOMMatrix(o).preMultiplySelf(i).translate(l,h).scale(d,-d));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var m,g;(m=this.dependencyTracker)==null||m.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||g_,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Oe("Invalid font matrix for font "+t),n<0?(n=-n,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const o=r.loadedName||"sans-serif",l=((g=r.systemFontInfo)==null?void 0:g.css)||`"${o}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const d=r.italic?"italic":"normal";let p=n;n<cR?p=cR:n>uR&&(p=uR),this.current.fontSizeScale=n/p,this.ctx.font=`${d} ${h} ${p}px ${l}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,r,i,o){var E,R,C,D;const l=this.ctx,h=this.current,d=h.font,p=h.textRenderingMode,m=h.fontSize/h.fontSizeScale,g=p&Nn.FILL_STROKE_MASK,v=!!(p&Nn.ADD_TO_PATH_FLAG),b=h.patternFill&&!d.missingFile,x=h.patternStroke&&!d.missingFile;let A;if((d.disableFontFace||v||b||x)&&!d.missingFile&&(A=d.getPathGenerator(this.commonObjs,t)),A&&(d.disableFontFace||b||x)){l.save(),l.translate(n,r),l.scale(m,-m),(E=this.dependencyTracker)==null||E.recordCharacterBBox(e,l,d);let N;if(g===Nn.FILL||g===Nn.FILL_STROKE)if(i){N=l.getTransform(),l.setTransform(...i);const I=P(this,pi,q_).call(this,A,N,i);l.fill(I)}else l.fill(A);if(g===Nn.STROKE||g===Nn.FILL_STROKE)if(o){N||(N=l.getTransform()),l.setTransform(...o);const{a:I,b:j,c:F,d:W}=N,K=ge.inverseTransform(o),J=ge.transform([I,j,F,W,0,0],K);ge.singularValueDecompose2dScale(J,ar),l.lineWidth*=Math.max(ar[0],ar[1])/m,l.stroke(P(this,pi,q_).call(this,A,N,o))}else l.lineWidth/=m,l.stroke(A);l.restore()}else(g===Nn.FILL||g===Nn.FILL_STROKE)&&(l.fillText(t,n,r),(R=this.dependencyTracker)==null||R.recordCharacterBBox(e,l,d,m,n,r,()=>l.measureText(t))),(g===Nn.STROKE||g===Nn.FILL_STROKE)&&(this.dependencyTracker&&((C=this.dependencyTracker)==null||C.recordCharacterBBox(e,l,d,m,n,r,()=>l.measureText(t)).recordDependencies(e,xr.stroke)),l.strokeText(t,n,r));v&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ot(l),x:n,y:r,fontSize:m,path:A}),(D=this.dependencyTracker)==null||D.recordCharacterBBox(e,l,d,m,n,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return $e(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var F,W,K,J;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,xr.showText).resetBBox(e),this.current.textRenderingMode&Nn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(e,t),(F=this.dependencyTracker)==null||F.recordShowTextOperation(e);return}const i=n.fontSize;if(i===0){(W=this.dependencyTracker)==null||W.recordOperation(e);return}const o=this.ctx,l=n.fontSizeScale,h=n.charSpacing,d=n.wordSpacing,p=n.fontDirection,m=n.textHScale*p,g=t.length,v=r.vertical,b=v?1:-1,x=r.defaultVMetrics,A=i*n.fontMatrix[0],E=n.textRenderingMode===Nn.FILL&&!r.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),p>0?o.scale(m,-1):o.scale(m,1);let R,C;if(n.patternFill){o.save();const ie=n.fillColor.getPattern(o,this,bi(o),Vn.FILL,e);R=Ot(o),o.restore(),o.fillStyle=ie}if(n.patternStroke){o.save();const ie=n.strokeColor.getPattern(o,this,bi(o),Vn.STROKE,e);C=Ot(o),o.restore(),o.strokeStyle=ie}let D=n.lineWidth;const N=n.textMatrixScale;if(N===0||D===0){const ie=n.textRenderingMode&Nn.FILL_STROKE_MASK;(ie===Nn.STROKE||ie===Nn.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=N;if(l!==1&&(o.scale(l,l),D/=l),o.lineWidth=D,r.isInvalidPDFjsFont){const ie=[];let ce=0;for(const ue of t)ie.push(ue.unicode),ce+=ue.width;const Y=ie.join("");if(o.fillText(Y,0,0),this.dependencyTracker!==null){const ue=o.measureText(Y);this.dependencyTracker.recordBBox(e,this.ctx,-ue.actualBoundingBoxLeft,ue.actualBoundingBoxRight,-ue.actualBoundingBoxAscent,ue.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=ce*A*m,o.restore(),this.compose();return}let I=0,j;for(j=0;j<g;++j){const ie=t[j];if(typeof ie=="number"){I+=b*ie*i/1e3;continue}let ce=!1;const Y=(ie.isSpace?d:0)+h,ue=ie.fontChar,Z=ie.accent;let X,V,re=ie.width;if(v){const q=ie.vmetric||x,oe=-(ie.vmetric?q[1]:re*.5)*A,de=q[2]*A;re=q?-q[0]:re,X=oe/l,V=(I+de)/l}else X=I/l,V=0;let ne;if(r.remeasure&&re>0){ne=o.measureText(ue);const q=ne.width*1e3/i*l;if(re<q&&this.isFontSubpixelAAEnabled){const oe=re/q;ce=!0,o.save(),o.scale(oe,1),X/=oe}else re!==q&&(X+=(re-q)/2e3*i/l)}if(this.contentVisible&&(ie.isInFont||r.missingFile)){if(E&&!Z)o.fillText(ue,X,V),(K=this.dependencyTracker)==null||K.recordCharacterBBox(e,o,ne?{bbox:null}:r,i/l,X,V,()=>ne??o.measureText(ue));else if(this.paintChar(e,ue,X,V,R,C),Z){const q=X+i*Z.offset.x/l,oe=V-i*Z.offset.y/l;this.paintChar(e,Z.fontChar,q,oe,R,C)}}const U=v?re*A-Y*p:re*A+Y*p;I+=U,ce&&o.restore()}v?n.y-=I:n.x+=I*m,o.restore(),this.compose(),(J=this.dependencyTracker)==null||J.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,r=this.current,i=r.font,o=r.fontSize,l=r.fontDirection,h=i.vertical?1:-1,d=r.charSpacing,p=r.wordSpacing,m=r.textHScale*l,g=r.fontMatrix||g_,v=t.length,b=r.textRenderingMode===Nn.INVISIBLE;let x,A,E,R;if(b||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(m,l);const C=this.dependencyTracker;for(this.dependencyTracker=C?new sw(C,e):null,x=0;x<v;++x){if(A=t[x],typeof A=="number"){R=h*A*o/1e3,this.ctx.translate(R,0),r.x+=R*m;continue}const D=(A.isSpace?p:0)+d,N=i.charProcOperatorList[A.operatorListId];N?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...g),this.executeOperatorList(N),this.restore()):Oe(`Type3 character "${A.operatorListId}" is not available.`);const I=[A.width,0];ge.applyTransform(I,g),E=I[0]*o+D,n.translate(E,0),r.x+=E*m}n.restore(),C&&(this.dependencyTracker=C)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,r,i,o,l){var d;const h=new Path2D;h.rect(r,i,o-r,l-i),this.ctx.clip(h),(d=this.dependencyTracker)==null||d.recordBBox(e,this.ctx,r,o,i,l).recordClipBox(e,this.ctx,r,o,i,l),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const r=this.baseTransform||Ot(this.ctx),i={createCanvasGraphics:(o,l)=>new JE(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new sw(this.dependencyTracker,l,!0):null)};n=new H_(t,this.ctx,i,r)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=KW(this.getObject(e,t)),this.cachedPatterns.set(t,r)),n&&(r.matrix=n),r}shadingFill(e,t){var o;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const r=this._getPattern(e,t);n.fillStyle=r.getPattern(n,this,bi(n),Vn.SHADING,e);const i=bi(n);if(i){const{width:l,height:h}=n.canvas,d=Dh.slice();ge.axialAlignedBoundingBox([0,0,l,h],i,d);const[p,m,g,v]=d;this.ctx.fillRect(p,m,g-p,v-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,xr.transform).recordDependencies(e,xr.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){yt("Should not call beginInlineImage")}beginImageData(){yt("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Ot(this.ctx),n)){ge.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,o,l,h]=n,d=new Path2D;d.rect(i,o,l-i,h-o),this.ctx.clip(d),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,i,l,o,h),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var C;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||zw("TODO: Support non-isolated groups."),t.knockout&&Oe("Knockout groups not supported.");const r=Ot(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Dh.slice();ge.axialAlignedBoundingBox(t.bbox,Ot(n),i);const o=[0,0,n.canvas.width,n.canvas.height];i=ge.intersect(i,o)||[0,0,0,0];const l=Math.floor(i[0]),h=Math.floor(i[1]),d=Math.max(Math.ceil(i[2])-l,1),p=Math.max(Math.ceil(i[3])-h,1);this.current.startNewPathAndClipBox([0,0,d,p]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(m,d,p),v=g.context;v.translate(-l,-h),v.transform(...r);let b=new Path2D;const[x,A,E,R]=t.bbox;if(b.rect(x,A,E-x,R-A),t.matrix){const D=new Path2D;D.addPath(b,new DOMMatrix(t.matrix)),b=D}v.clip(b),t.smask&&this.smaskStack.push({canvas:g.canvas,context:v,offsetX:l,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(l,h),n.save()),bp(n,v),this.ctx=v,(C=this.dependencyTracker)==null||C.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Ot(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const l=Dh.slice();ge.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,n,r,i,o){if(P(this,pi,W_).call(this),Jv(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const l=n[2]-n[0],h=n[3]-n[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=l,n[3]=h,ge.singularValueDecompose2dScale(Ot(this.ctx),ar);const{viewportScale:d}=this,p=Math.ceil(l*this.outputScaleX*d),m=Math.ceil(h*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:g,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(t,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(ar[0],0,0,-ar[1],0,h*ar[1]),Jv(this.ctx)}else{Jv(this.ctx),this.endPath(e);const d=new Path2D;d.rect(n[0],n[1],l,h),this.ctx.clip(d)}}this.current=new dR(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),P(this,pi,G_).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var l;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const r=this.ctx,i=this._createMaskCanvas(e,t),o=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,i.offsetX,i.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+o.width,i.offsetY,i.offsetY+o.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,r=0,i=0,o,l){var m,g,v;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const h=this.ctx;h.save();const d=Ot(h);h.transform(n,r,i,o,0,0);const p=this._createMaskCanvas(e,t);h.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]),(m=this.dependencyTracker)==null||m.resetBBox(e);for(let b=0,x=l.length;b<x;b+=2){const A=ge.transform(d,[n,r,i,o,l[b],l[b+1]]);h.drawImage(p.canvas,A[4],A[5]),(g=this.dependencyTracker)==null||g.recordBBox(e,this.ctx,A[4],A[4]+p.canvas.width,A[5],A[5]+p.canvas.height)}h.restore(),this.compose(),(v=this.dependencyTracker)==null||v.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,l,h;if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,i=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,xr.transformAndFill);for(const d of t){const{data:p,width:m,height:g,transform:v}=d,b=this.cachedCanvases.getCanvas("maskCanvas",m,g),x=b.context;x.save();const A=this.getObject(e,p,d);pR(x,A),x.globalCompositeOperation="source-in",x.fillStyle=i?r.getPattern(x,this,bi(n),Vn.FILL,e):r,x.fillRect(0,0,m,g),x.restore(),n.save(),n.transform(...v),n.scale(1,-1),Yv(n,b.canvas,0,0,m,g,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,n,0,m,0,g),n.restore()}this.compose(),(h=this.dependencyTracker)==null||h.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){Oe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,r,i){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){Oe("Dependent image isn't ready yet");return}const l=o.width,h=o.height,d=[];for(let p=0,m=i.length;p<m;p+=2)d.push({transform:[n,0,0,r,i[p],i[p+1]],x:0,y:0,w:l,h});this.paintInlineImageXObjectGroup(e,o,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,r),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e,t){var d;if(!this.contentVisible)return;const n=t.width,r=t.height,i=this.ctx;this.save(e);const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none"),i.scale(1/n,-1/r);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const m=this.cachedCanvases.getCanvas("inlineImage",n,r).context;fR(m,t),l=this.applyTransferMapsToCanvas(m)}const h=this._scaleImage(l,bi(i));i.imageSmoothingEnabled=mR(Ot(i),t.interpolate),(d=this.dependencyTracker)==null||d.resetBBox(e).recordBBox(e,i,0,n,-r,0).recordDependencies(e,xr.imageXObject).recordOperation(e),Yv(i,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,n,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var o,l,h;if(!this.contentVisible)return;const r=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const d=t.width,p=t.height,g=this.cachedCanvases.getCanvas("inlineImage",d,p).context;fR(g,t),i=this.applyTransferMapsToCanvas(g)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const d of n)r.save(),r.transform(...d.transform),r.scale(1,-1),Yv(r,i,d.x,d.y,d.w,d.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,r,0,1,-1,0),r.restore();(h=this.dependencyTracker)==null||h.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,xr.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var o,l;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;this.pendingClip?(r||(this.pendingClip===gR?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(l=this.dependencyTracker)==null||l.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ot(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:i}=this.ctx.getTransform();let o,l;if(n===0&&r===0){const h=Math.abs(t),d=Math.abs(i);if(h===d)if(e===0)o=l=1/h;else{const p=h*e;o=l=p<1?1/p:1}else if(e===0)o=1/h,l=1/d;else{const p=h*e,m=d*e;o=p<1?1/p:1,l=m<1?1/m:1}}else{const h=Math.abs(t*i-n*r),d=Math.hypot(t,n),p=Math.hypot(r,i);if(e===0)o=p/h,l=d/h;else{const m=e*h;o=p>m?p/m:1,l=d>m?d/m:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:r}}=this,[i,o]=this.getScaleForStroking();if(i===o){n.lineWidth=(r||1)*i,n.stroke(e);return}const l=n.getLineDash();t&&n.save(),n.scale(i,o),CS.a=1/i,CS.d=1/o;const h=new Path2D;if(h.addPath(e,CS),l.length>0){const d=Math.max(i,o);n.setLineDash(l.map(p=>p/d)),n.lineDashOffset/=d}n.lineWidth=r||1,n.stroke(h),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};pi=new WeakSet,W_=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},G_=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},q_=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let Bh=JE;for(const s in gf)Bh.prototype[s]!==void 0&&(Bh.prototype[gf[s]]=Bh.prototype[s]);var md,gd,Zm,yd,g0;const Nh=class Nh{constructor(e){k(this,yd);k(this,md);k(this,gd);k(this,Zm);S(this,md,e),S(this,gd,new DataView(u(this,md))),S(this,Zm,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let r=0;for(const d of Nh.strings){const p=t.encode(e[d]);n[d]=p,r+=4+p.length}const i=new ArrayBuffer(r),o=new Uint8Array(i),l=new DataView(i);let h=0;for(const d of Nh.strings){const p=n[d],m=p.length;l.setUint32(h,m),o.set(p,h+4),h+=4+m}return Xe(h===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return P(this,yd,g0).call(this,0)}get fontWeight(){return P(this,yd,g0).call(this,1)}get italicAngle(){return P(this,yd,g0).call(this,2)}};md=new WeakMap,gd=new WeakMap,Zm=new WeakMap,yd=new WeakSet,g0=function(e){Xe(e<Nh.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=u(this,gd).getUint32(t)+4;const n=u(this,gd).getUint32(t);return u(this,Zm).decode(new Uint8Array(u(this,md),t+4,n))},te(Nh,"strings",["fontFamily","fontWeight","italicAngle"]);let rw=Nh;var tl,Ii,zc,Hc,jp;const Ih=class Ih{constructor(e){k(this,Hc);k(this,tl);k(this,Ii);k(this,zc);S(this,tl,e),S(this,Ii,new DataView(u(this,tl))),S(this,zc,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let r=0;for(const g of Ih.strings){const v=t.encode(e[g]);n[g]=v,r+=4+v.length}r+=4;let i,o,l=1+r;e.style&&(i=t.encode(e.style.style),o=t.encode(e.style.weight),l+=4+i.length+4+o.length);const h=new ArrayBuffer(l),d=new Uint8Array(h),p=new DataView(h);let m=0;p.setUint8(m++,e.guessFallback?1:0),p.setUint32(m,0),m+=4,r=0;for(const g of Ih.strings){const v=n[g],b=v.length;r+=4+b,p.setUint32(m,b),d.set(v,m+4),m+=4+b}return p.setUint32(m-r-4,r),e.style&&(p.setUint32(m,i.length),d.set(i,m+4),m+=4+i.length,p.setUint32(m,o.length),d.set(o,m+4),m+=4+o.length),Xe(m<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(m)}get guessFallback(){return u(this,Ii).getUint8(0)!==0}get css(){return P(this,Hc,jp).call(this,0)}get loadedName(){return P(this,Hc,jp).call(this,1)}get baseFontName(){return P(this,Hc,jp).call(this,2)}get src(){return P(this,Hc,jp).call(this,3)}get style(){let e=1;e+=4+u(this,Ii).getUint32(e);const t=u(this,Ii).getUint32(e),n=u(this,zc).decode(new Uint8Array(u(this,tl),e+4,t));e+=4+t;const r=u(this,Ii).getUint32(e),i=u(this,zc).decode(new Uint8Array(u(this,tl),e+4,r));return{style:n,weight:i}}};tl=new WeakMap,Ii=new WeakMap,zc=new WeakMap,Hc=new WeakSet,jp=function(e){Xe(e<Ih.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=u(this,Ii).getUint32(t)+4;const n=u(this,Ii).getUint32(t);return u(this,zc).decode(new Uint8Array(u(this,tl),t+4,n))},te(Ih,"strings",["css","loadedName","baseFontName","src"]);let iw=Ih;var vd,wd,bd,xd,Gs,Oi,eg,ut,Kt,qr,y0,Fp;const Be=class Be{constructor({data:e,extra:t}){k(this,Kt);k(this,Oi);k(this,eg);k(this,ut);S(this,Oi,e),S(this,eg,new TextDecoder),S(this,ut,new DataView(u(this,Oi))),t&&Object.assign(this,t)}get black(){return P(this,Kt,qr).call(this,0)}get bold(){return P(this,Kt,qr).call(this,1)}get disableFontFace(){return P(this,Kt,qr).call(this,2)}get fontExtraProperties(){return P(this,Kt,qr).call(this,3)}get isInvalidPDFjsFont(){return P(this,Kt,qr).call(this,4)}get isType3Font(){return P(this,Kt,qr).call(this,5)}get italic(){return P(this,Kt,qr).call(this,6)}get missingFile(){return P(this,Kt,qr).call(this,7)}get remeasure(){return P(this,Kt,qr).call(this,8)}get vertical(){return P(this,Kt,qr).call(this,9)}get ascent(){return P(this,Kt,y0).call(this,0)}get defaultWidth(){return P(this,Kt,y0).call(this,1)}get descent(){return P(this,Kt,y0).call(this,2)}get bbox(){let e=u(Be,wd);if(u(this,ut).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<4;r++)n.push(u(this,ut).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=u(Be,bd);if(u(this,ut).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<6;r++)n.push(u(this,ut).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=u(Be,xd);if(u(this,ut).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<3;r++)n.push(u(this,ut).getInt16(e,!0)),e+=2;return n}get fallbackName(){return P(this,Kt,Fp).call(this,0)}get loadedName(){return P(this,Kt,Fp).call(this,1)}get mimetype(){return P(this,Kt,Fp).call(this,2)}get name(){return P(this,Kt,Fp).call(this,3)}get data(){let e=u(Be,Gs);const t=u(this,ut).getUint32(e);e+=4+t;const n=u(this,ut).getUint32(e);e+=4+n;const r=u(this,ut).getUint32(e);e+=4+r;const i=u(this,ut).getUint32(e);if(i!==0)return new Uint8Array(u(this,Oi),e+4,i)}clearData(){let e=u(Be,Gs);const t=u(this,ut).getUint32(e);e+=4+t;const n=u(this,ut).getUint32(e);e+=4+n;const r=u(this,ut).getUint32(e);e+=4+r;const i=u(this,ut).getUint32(e);new Uint8Array(u(this,Oi),e+4,i).fill(0),u(this,ut).setUint32(e,0)}get cssFontInfo(){let e=u(Be,Gs);const t=u(this,ut).getUint32(e);e+=4+t;const n=u(this,ut).getUint32(e);e+=4+n;const r=u(this,ut).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(u(this,Oi),e+4,r)),new rw(i.buffer)}get systemFontInfo(){let e=u(Be,Gs);const t=u(this,ut).getUint32(e);e+=4+t;const n=u(this,ut).getUint32(e);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(u(this,Oi),e+4,n)),new iw(r.buffer)}static write(e){const t=e.systemFontInfo?iw.write(e.systemFontInfo):null,n=e.cssFontInfo?rw.write(e.cssFontInfo):null,r=new TextEncoder,i={};let o=0;for(const x of Be.strings)i[x]=r.encode(e[x]),o+=4+i[x].length;const l=u(Be,Gs)+4+o+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),h=new ArrayBuffer(l),d=new Uint8Array(h),p=new DataView(h);let m=0;const g=Be.bools.length;let v=0,b=0;for(let x=0;x<g;x++){const A=e[Be.bools[x]];v|=(A===void 0?0:A?2:1)<<b,b+=2,(b===8||x===g-1)&&(p.setUint8(m++,v),v=0,b=0)}Xe(m===u(Be,vd),"FontInfo.write: Boolean properties offset mismatch");for(const x of Be.numbers)p.setFloat64(m,e[x]),m+=8;if(Xe(m===u(Be,wd),"FontInfo.write: Number properties offset mismatch"),e.bbox){p.setUint8(m++,4);for(const x of e.bbox)p.setInt16(m,x,!0),m+=2}else p.setUint8(m++,0),m+=8;if(Xe(m===u(Be,bd),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){p.setUint8(m++,6);for(const x of e.fontMatrix)p.setFloat64(m,x,!0),m+=8}else p.setUint8(m++,0),m+=48;if(Xe(m===u(Be,xd),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){p.setUint8(m++,1);for(const x of e.defaultVMetrics)p.setInt16(m,x,!0),m+=2}else p.setUint8(m++,0),m+=6;Xe(m===u(Be,Gs),"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(u(Be,Gs),0),m+=4;for(const x of Be.strings){const A=i[x],E=A.length;p.setUint32(m,E),d.set(A,m+4),m+=4+E}if(p.setUint32(u(Be,Gs),m-u(Be,Gs)-4),!t)p.setUint32(m,0),m+=4;else{const x=t.byteLength;p.setUint32(m,x),Xe(m+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),d.set(new Uint8Array(t),m+4),m+=4+x}if(!n)p.setUint32(m,0),m+=4;else{const x=n.byteLength;p.setUint32(m,x),Xe(m+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),d.set(new Uint8Array(n),m+4),m+=4+x}return e.data===void 0?(p.setUint32(m,0),m+=4):(p.setUint32(m,e.data.length),d.set(e.data,m+4),m+=4+e.data.length),Xe(m<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(m)}};vd=new WeakMap,wd=new WeakMap,bd=new WeakMap,xd=new WeakMap,Gs=new WeakMap,Oi=new WeakMap,eg=new WeakMap,ut=new WeakMap,Kt=new WeakSet,qr=function(e){Xe(e<Be.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,r=u(this,ut).getUint8(t)>>n&3;return r===0?void 0:r===2},y0=function(e){return Xe(e<Be.numbers.length,"Invalid number index"),u(this,ut).getFloat64(u(Be,vd)+e*8)},Fp=function(e){Xe(e<Be.strings.length,"Invalid string index");let t=u(Be,Gs)+4;for(let i=0;i<e;i++)t+=u(this,ut).getUint32(t)+4;const n=u(this,ut).getUint32(t),r=new Uint8Array(n);return r.set(new Uint8Array(u(this,Oi),t+4,n)),u(this,eg).decode(r)},te(Be,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),te(Be,"numbers",["ascent","defaultWidth","descent"]),te(Be,"strings",["fallbackName","loadedName","mimetype","name"]),k(Be,vd,Math.ceil(Be.bools.length*2/8)),k(Be,wd,u(Be,vd)+Be.numbers.length*8),k(Be,bd,u(Be,wd)+1+8),k(Be,xd,u(Be,bd)+1+48),k(Be,Gs,u(Be,xd)+1+6);let K_=Be;var tg,ng;class ur{static get workerPort(){return u(this,tg)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");S(this,tg,e)}static get workerSrc(){return u(this,ng)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");S(this,ng,e)}}tg=new WeakMap,ng=new WeakMap,k(ur,tg,null),k(ur,ng,"");var Sd,sg;class n6{constructor({parsedData:e,rawData:t}){k(this,Sd);k(this,sg);S(this,Sd,e),S(this,sg,t)}getRaw(){return u(this,sg)}get(e){return u(this,Sd).get(e)??null}[Symbol.iterator](){return u(this,Sd).entries()}}Sd=new WeakMap,sg=new WeakMap;const _h=Symbol("INTERNAL");var rg,ig,og,_d;class s6{constructor(e,{name:t,intent:n,usage:r,rbGroups:i}){k(this,rg,!1);k(this,ig,!1);k(this,og,!1);k(this,_d,!0);S(this,rg,!!(e&or.DISPLAY)),S(this,ig,!!(e&or.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=i}get visible(){if(u(this,og))return u(this,_d);if(!u(this,_d))return!1;const{print:e,view:t}=this.usage;return u(this,rg)?(t==null?void 0:t.viewState)!=="OFF":u(this,ig)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==_h&&yt("Internal method `_setVisible` called."),S(this,og,n),S(this,_d,t)}}rg=new WeakMap,ig=new WeakMap,og=new WeakMap,_d=new WeakMap;var nl,ht,Ad,Ed,ag,X_;class r6{constructor(e,t=or.DISPLAY){k(this,ag);k(this,nl,null);k(this,ht,new Map);k(this,Ad,null);k(this,Ed,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,S(this,Ed,e.order);for(const n of e.groups)u(this,ht).set(n.id,new s6(t,n));if(e.baseState==="OFF")for(const n of u(this,ht).values())n._setVisible(_h,!1);for(const n of e.on)u(this,ht).get(n)._setVisible(_h,!0);for(const n of e.off)u(this,ht).get(n)._setVisible(_h,!1);S(this,Ad,this.getHash())}}isVisible(e){if(u(this,ht).size===0)return!0;if(!e)return zw("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,ht).has(e.id)?u(this,ht).get(e.id).visible:(Oe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return P(this,ag,X_).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,ht).has(t))return Oe(`Optional content group not found: ${t}`),!0;if(u(this,ht).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,ht).has(t))return Oe(`Optional content group not found: ${t}`),!0;if(!u(this,ht).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,ht).has(t))return Oe(`Optional content group not found: ${t}`),!0;if(!u(this,ht).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,ht).has(t))return Oe(`Optional content group not found: ${t}`),!0;if(u(this,ht).get(t).visible)return!1}return!0}return Oe(`Unknown optional content policy ${e.policy}.`),!0}return Oe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var i;const r=u(this,ht).get(e);if(!r){Oe(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==e&&((i=u(this,ht).get(l))==null||i._setVisible(_h,!1,!0));r._setVisible(_h,!!t,!0),S(this,nl,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const i=u(this,ht).get(r);if(i)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}S(this,nl,null)}get hasInitialVisibility(){return u(this,Ad)===null||this.getHash()===u(this,Ad)}getOrder(){return u(this,ht).size?u(this,Ed)?u(this,Ed).slice():[...u(this,ht).keys()]:null}getGroup(e){return u(this,ht).get(e)||null}getHash(){if(u(this,nl)!==null)return u(this,nl);const e=new aN;for(const[t,n]of u(this,ht))e.update(`${t}:${n.visible}`);return S(this,nl,e.hexdigest())}[Symbol.iterator](){return u(this,ht).entries()}}nl=new WeakMap,ht=new WeakMap,Ad=new WeakMap,Ed=new WeakMap,ag=new WeakSet,X_=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const i=e[r];let o;if(Array.isArray(i))o=P(this,ag,X_).call(this,i);else if(u(this,ht).has(i))o=u(this,ht).get(i).visible;else return Oe(`Optional content group not found: ${i}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class i6{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Xe(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(i==null?void 0:i.length)>0){const h=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((h,d)=>{this._onReceiveData({begin:h,chunk:d})}),e.addProgressListener((h,d)=>{this._onProgress({loaded:h,total:d})}),e.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(n),!0)});Xe(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,r,i;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Xe(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new o6(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new a6(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class o6{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=Ww(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class a6{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function l6(s){let e=!0,t=n("filename\\*","i").exec(s);if(t){t=t[1];let p=l(t);return p=unescape(p),p=h(p),p=d(p),i(p)}if(t=o(s),t){const p=d(t);return i(p)}if(t=n("filename","i").exec(s),t){t=t[1];let p=l(t);return p=d(p),i(p)}function n(p,m){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function r(p,m){if(p){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const g=new TextDecoder(p,{fatal:!0}),v=hy(m);m=g.decode(v),e=!1}catch{}}return m}function i(p){return e&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),e&&(p=r("iso-8859-1",p))),p}function o(p){const m=[];let g;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=v.exec(p))!==null;){let[,x,A,E]=g;if(x=parseInt(x,10),x in m){if(x===0)break;continue}m[x]=[A,E]}const b=[];for(let x=0;x<m.length&&x in m;++x){let[A,E]=m[x];E=l(E),A&&(E=unescape(E),x===0&&(E=h(E))),b.push(E)}return b.join("")}function l(p){if(p.startsWith('"')){const m=p.slice(1).split('\\"');for(let g=0;g<m.length;++g){const v=m[g].indexOf('"');v!==-1&&(m[g]=m[g].slice(0,v),m.length=g+1),m[g]=m[g].replaceAll(/\\(.)/g,"$1")}p=m.join('"')}return p}function h(p){const m=p.indexOf("'");if(m===-1)return p;const g=p.slice(0,m),b=p.slice(m+1).replace(/^[^']*'/,"");return r(g,b)}function d(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,g,v,b){if(v==="q"||v==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,A){return String.fromCharCode(parseInt(A,16))}),r(g,b);try{b=atob(b)}catch{}return r(g,b)})}return""}function bN(s,e){const t=new Headers;if(!s||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function Gw(s){var e;return((e=URL.parse(s))==null?void 0:e.origin)??null}function xN({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(s.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||n||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function SN(s){const e=s.get("Content-Disposition");if(e){let t=l6(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Ww(t))return t}return null}function my(s,e){return new mm(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s,s===404||s===0&&e.startsWith("file:"))}function _N(s){return s===200||s===206}function AN(s,e,t){return{method:"GET",headers:s,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function EN(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Oe(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class c6{constructor(e){te(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=bN(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xe(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u6(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new h6(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class u6{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,AN(n,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=Gw(i.url),!_N(i.status))throw my(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:l,suggestedLength:h}=xN({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=h||this._contentLength,this._filename=SN(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new sa("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:EN(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class h6{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${n-1}`);const o=r.url;fetch(o,AN(i,this._withCredentials,this._abortController)).then(l=>{const h=Gw(l.url);if(h!==e._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${e._responseOrigin}".`);if(!_N(l.status))throw my(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:EN(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const TS=200,PS=206;function d6(s){const e=s.response;return typeof e!="string"?e:hy(e).buffer}class f6{constructor({url:e,httpHeaders:t,withCredentials:n}){te(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=bN(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=PS):r.expectedStatus=TS,t.responseType="arraybuffer",Xe(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&((r=n.onProgress)==null||r.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}const i=r.status||TS;if(!(i===TS&&n.expectedStatus===PS)&&i!==n.expectedStatus){n.onError(r.status);return}const l=d6(r);if(i===PS){const h=r.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);d?n.onDone({begin:parseInt(d[1],10),chunk:l}):(Oe('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class p6{constructor(e){this._source=e,this._manager=new f6(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Xe(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new m6(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new g6(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class m6{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Gw(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[h,...d]=l.split(": ");return[h,d.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=xN({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=SN(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=my(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class g6{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Gw((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=my(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const y6=/^[a-z][a-z0-9\-+.]+:/i;function v6(s){if(y6.test(s))return new URL(s);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}class w6{constructor(e){this.source=e,this.url=v6(e.url),Xe(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xe(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new b6(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new x6(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class b6{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=my(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new sa("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class x6{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const xp=Symbol("INITIAL_DATA");var qs,lg,Y_;class kN{constructor(){k(this,lg);k(this,qs,Object.create(null))}get(e,t=null){if(t){const r=P(this,lg,Y_).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=u(this,qs)[e];if(!n||n.data===xp)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=u(this,qs)[e];return!!t&&t.data!==xp}delete(e){const t=u(this,qs)[e];return!t||t.data===xp?!1:(delete u(this,qs)[e],!0)}resolve(e,t=null){const n=P(this,lg,Y_).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in u(this,qs)){const{data:n}=u(this,qs)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}S(this,qs,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,qs)){const{data:t}=u(this,qs)[e];t!==xp&&(yield[e,t])}}}qs=new WeakMap,lg=new WeakSet,Y_=function(e){var t;return(t=u(this,qs))[e]||(t[e]={...Promise.withResolvers(),data:xp})};const S6=1e5,yR=30;var MR,sl,Rs,cg,ug,Wc,Io,hg,dg,Gc,kd,Cd,rl,Td,fg,Pd,qc,pg,mg,Gt,Rd,Kc,gg,il,Ld,oa,CN,TN,J_,hr,v0,Q_,PN,RN;let wm=(Gt=class{constructor({textContentSource:e,container:t,viewport:n}){k(this,oa);k(this,sl,Promise.withResolvers());k(this,Rs,null);k(this,cg,!1);k(this,ug,!!((MR=globalThis.FontInspector)!=null&&MR.enabled));k(this,Wc,null);k(this,Io,null);k(this,hg,0);k(this,dg,0);k(this,Gc,null);k(this,kd,null);k(this,Cd,0);k(this,rl,0);k(this,Td,Object.create(null));k(this,fg,[]);k(this,Pd,null);k(this,qc,[]);k(this,pg,new WeakMap);k(this,mg,null);var h;if(e instanceof ReadableStream)S(this,Pd,e);else if(typeof e=="object")S(this,Pd,new ReadableStream({start(d){d.enqueue(e),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,Rs,S(this,kd,t)),S(this,rl,n.scale*fi.pixelRatio),S(this,Cd,n.rotation),S(this,Io,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:o,pageY:l}=n.rawDims;S(this,mg,[1,0,0,-1,-o,l+i]),S(this,dg,r),S(this,hg,i),P(h=Gt,hr,PN).call(h),Nl(t,n),u(this,sl).promise.finally(()=>{u(Gt,Ld).delete(this),S(this,Io,null),S(this,Td,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Tn.platform;return $e(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,Gc).read().then(({value:t,done:n})=>{if(n){u(this,sl).resolve();return}u(this,Wc)??S(this,Wc,t.lang),Object.assign(u(this,Td),t.styles),P(this,oa,CN).call(this,t.items),e()},u(this,sl).reject)};return S(this,Gc,u(this,Pd).getReader()),u(Gt,Ld).add(this),e(),u(this,sl).promise}update({viewport:e,onBefore:t=null}){var i;const n=e.scale*fi.pixelRatio,r=e.rotation;if(r!==u(this,Cd)&&(t==null||t(),S(this,Cd,r),Nl(u(this,kd),{rotation:r})),n!==u(this,rl)){t==null||t(),S(this,rl,n);const o={div:null,properties:null,ctx:P(i=Gt,hr,v0).call(i,u(this,Wc))};for(const l of u(this,qc))o.properties=u(this,pg).get(l),o.div=l,P(this,oa,J_).call(this,o)}}cancel(){var t;const e=new sa("TextLayer task cancelled.");(t=u(this,Gc))==null||t.cancel(e).catch(()=>{}),S(this,Gc,null),u(this,sl).reject(e)}get textDivs(){return u(this,qc)}get textContentItemsStr(){return u(this,fg)}static cleanup(){if(!(u(this,Ld).size>0)){u(this,Rd).clear();for(const{canvas:e}of u(this,Kc).values())e.remove();u(this,Kc).clear()}}},sl=new WeakMap,Rs=new WeakMap,cg=new WeakMap,ug=new WeakMap,Wc=new WeakMap,Io=new WeakMap,hg=new WeakMap,dg=new WeakMap,Gc=new WeakMap,kd=new WeakMap,Cd=new WeakMap,rl=new WeakMap,Td=new WeakMap,fg=new WeakMap,Pd=new WeakMap,qc=new WeakMap,pg=new WeakMap,mg=new WeakMap,Rd=new WeakMap,Kc=new WeakMap,gg=new WeakMap,il=new WeakMap,Ld=new WeakMap,oa=new WeakSet,CN=function(e){var r,i;if(u(this,cg))return;(i=u(this,Io)).ctx??(i.ctx=P(r=Gt,hr,v0).call(r,u(this,Wc)));const t=u(this,qc),n=u(this,fg);for(const o of e){if(t.length>S6){Oe("Ignoring additional textDivs for performance reasons."),S(this,cg,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=u(this,Rs);S(this,Rs,document.createElement("span")),u(this,Rs).classList.add("markedContent"),o.id&&u(this,Rs).setAttribute("id",`${o.id}`),l.append(u(this,Rs))}else o.type==="endMarkedContent"&&S(this,Rs,u(this,Rs).parentNode);continue}n.push(o.str),P(this,oa,TN).call(this,o)}},TN=function(e){var x;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,qc).push(t);const r=ge.transform(u(this,mg),e.transform);let i=Math.atan2(r[1],r[0]);const o=u(this,Td)[e.fontName];o.vertical&&(i+=Math.PI/2);let l=u(this,ug)&&o.fontSubstitution||o.fontFamily;l=Gt.fontFamilyMap.get(l)||l;const h=Math.hypot(r[2],r[3]),d=h*P(x=Gt,hr,RN).call(x,l,o,u(this,Wc));let p,m;i===0?(p=r[4],m=r[5]-d):(p=r[4]+d*Math.sin(i),m=r[5]-d*Math.cos(i));const g="calc(var(--total-scale-factor) *",v=t.style;u(this,Rs)===u(this,kd)?(v.left=`${(100*p/u(this,dg)).toFixed(2)}%`,v.top=`${(100*m/u(this,hg)).toFixed(2)}%`):(v.left=`${g}${p.toFixed(2)}px)`,v.top=`${g}${m.toFixed(2)}px)`),v.fontSize=`${g}${(u(Gt,il)*h).toFixed(2)}px)`,v.fontFamily=l,n.fontSize=h,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,ug)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(n.angle=i*(180/Math.PI));let b=!1;if(e.str.length>1)b=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const A=Math.abs(e.transform[0]),E=Math.abs(e.transform[3]);A!==E&&Math.max(A,E)/Math.min(A,E)>1.5&&(b=!0)}if(b&&(n.canvasWidth=o.vertical?e.height:e.width),u(this,pg).set(t,n),u(this,Io).div=t,u(this,Io).properties=n,P(this,oa,J_).call(this,u(this,Io)),n.hasText&&u(this,Rs).append(t),n.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),u(this,Rs).append(A)}},J_=function(e){var l;const{div:t,properties:n,ctx:r}=e,{style:i}=t;let o="";if(u(Gt,il)>1&&(o=`scale(${1/u(Gt,il)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:h}=i,{canvasWidth:d,fontSize:p}=n;P(l=Gt,hr,Q_).call(l,r,p*u(this,rl),h);const{width:m}=r.measureText(t.textContent);m>0&&(o=`scaleX(${d*u(this,rl)/m}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(i.transform=o)},hr=new WeakSet,v0=function(e=null){let t=u(this,Kc).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,Kc).set(e,t),u(this,gg).set(t,{size:0,family:""})}return t},Q_=function(e,t,n){const r=u(this,gg).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},PN=function(){if(u(this,il)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),S(this,il,e.getBoundingClientRect().height),e.remove()},RN=function(e,t,n){const r=u(this,Rd).get(e);if(r)return r;const i=P(this,hr,v0).call(this,n);i.canvas.width=i.canvas.height=yR,P(this,hr,Q_).call(this,i,yR,e);const o=i.measureText(""),l=o.fontBoundingBoxAscent,h=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let d=.8;return l?d=l/(l+h):(Tn.platform.isFirefox&&Oe("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?d=t.ascent:t.descent&&(d=1+t.descent)),u(this,Rd).set(e,d),d},k(Gt,hr),k(Gt,Rd,new Map),k(Gt,Kc,new Map),k(Gt,gg,new WeakMap),k(Gt,il,null),k(Gt,Ld,new Set),Gt);const _6=100;function BE(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const e=new Z_,{docId:t}=e,n=s.url?LW(s.url):null,r=s.data?DW(s.data):null,i=s.httpHeaders||null,o=s.withCredentials===!0,l=s.password??null,h=s.range instanceof $E?s.range:null,d=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let p=s.worker instanceof yf?s.worker:null;const m=s.verbosity,g=typeof s.docBaseUrl=="string"&&!fy(s.docBaseUrl)?s.docBaseUrl:null,v=Gv(s.cMapUrl),b=s.cMapPacked!==!1,x=s.CMapReaderFactory||(ds?BW:sR),A=Gv(s.iccUrl),E=Gv(s.standardFontDataUrl),R=s.StandardFontDataFactory||(ds?$W:rR),C=Gv(s.wasmUrl),D=s.WasmFactory||(ds?UW:iR),N=s.stopAtErrors!==!0,I=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,j=s.isEvalSupported!==!1,F=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!ds,W=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!ds&&(Tn.platform.isFirefox||!globalThis.chrome),K=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,J=typeof s.disableFontFace=="boolean"?s.disableFontFace:ds,ie=s.fontExtraProperties===!0,ce=s.enableXfa===!0,Y=s.ownerDocument||globalThis.document,ue=s.disableRange===!0,Z=s.disableStream===!0,X=s.disableAutoFetch===!0,V=s.pdfBug===!0,re=s.CanvasFactory||(ds?FW:IW),ne=s.FilterFactory||(ds?jW:OW),U=s.enableHWA===!0,q=s.useWasm!==!1,oe=h?h.length:s.length??NaN,de=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!ds&&!J,Ce=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(x===sR&&R===rR&&D===iR&&v&&E&&C&&kp(v,document.baseURI)&&kp(E,document.baseURI)&&kp(C,document.baseURI)),Re=null;dW(m);const he={canvasFactory:new re({ownerDocument:Y,enableHWA:U}),filterFactory:new ne({docId:t,ownerDocument:Y}),cMapReaderFactory:Ce?null:new x({baseUrl:v,isCompressed:b}),standardFontDataFactory:Ce?null:new R({baseUrl:E}),wasmFactory:Ce?null:new D({baseUrl:C})};p||(p=yf.create({verbosity:m,port:ur.workerPort}),e._worker=p);const Fe={docId:t,apiVersion:"5.4.296",data:r,password:l,disableAutoFetch:X,rangeChunkSize:d,length:oe,docBaseUrl:g,enableXfa:ce,evaluatorOptions:{maxImageSize:I,disableFontFace:J,ignoreErrors:N,isEvalSupported:j,isOffscreenCanvasSupported:F,isImageDecoderSupported:W,canvasMaxAreaInBytes:K,fontExtraProperties:ie,useSystemFonts:de,useWasm:q,useWorkerFetch:Ce,cMapUrl:v,iccUrl:A,standardFontDataUrl:E,wasmUrl:C}},ze={ownerDocument:Y,pdfBug:V,styleElement:Re,loadingParams:{disableAutoFetch:X,enableXfa:ce}};return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Ze=p.messageHandler.sendWithPromise("GetDocRequest",Fe,r?[r.buffer]:null);let We;if(h)We=new i6(h,{disableRange:ue,disableStream:Z});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Pn=kp(n)?c6:ds?w6:p6;We=new Pn({url:n,length:oe,httpHeaders:i,withCredentials:o,rangeChunkSize:d,disableRange:ue,disableStream:Z})}return Ze.then(Pn=>{if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const rt=new Dp(t,Pn,p.port),nt=new k6(rt,e,We,ze,he,U);e._transport=nt,rt.send("Ready",null)})}).catch(e._capability.reject),e}var xw;const Sw=class Sw{constructor(){te(this,"_capability",Promise.withResolvers());te(this,"_transport",null);te(this,"_worker",null);te(this,"docId",`d${un(Sw,xw)._++}`);te(this,"destroyed",!1);te(this,"onPassword",null);te(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};xw=new WeakMap,k(Sw,xw,0);let Z_=Sw;var Xc,yg,vg,wg,bg,NR;let $E=(NR=class{constructor(e,t,n=!1,r=null){k(this,Xc,Promise.withResolvers());k(this,yg,[]);k(this,vg,[]);k(this,wg,[]);k(this,bg,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){u(this,bg).push(e)}addProgressListener(e){u(this,wg).push(e)}addProgressiveReadListener(e){u(this,vg).push(e)}addProgressiveDoneListener(e){u(this,yg).push(e)}onDataRange(e,t){for(const n of u(this,bg))n(e,t)}onDataProgress(e,t){u(this,Xc).promise.then(()=>{for(const n of u(this,wg))n(e,t)})}onDataProgressiveRead(e){u(this,Xc).promise.then(()=>{for(const t of u(this,vg))t(e)})}onDataProgressiveDone(){u(this,Xc).promise.then(()=>{for(const e of u(this,yg))e()})}transportReady(){u(this,Xc).resolve()}requestDataRange(e,t){yt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Xc=new WeakMap,yg=new WeakMap,vg=new WeakMap,wg=new WeakMap,bg=new WeakMap,NR);class A6{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return $e(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Oo,Yc,Bp;class E6{constructor(e,t,n,r=!1){k(this,Yc);k(this,Oo,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new YP:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new kN,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}={}){return new dy({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return $e(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:r="display",annotationMode:i=qi.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:g=!1,recordOperations:v=!1,operationsFilter:b=null}){var W,K,J;(W=this._stats)==null||W.time("Overall");const x=this._transport.getRenderingIntent(r,i,m,g),{renderingIntent:A,cacheKey:E}=x;S(this,Oo,!1),h||(h=this._transport.getOptionalContentConfig(A));let R=this._intentStates.get(E);R||(R=Object.create(null),this._intentStates.set(E,R)),R.streamReaderCancelTimeout&&(clearTimeout(R.streamReaderCancelTimeout),R.streamReaderCancelTimeout=null);const C=!!(A&or.PRINT);R.displayReadyCapability||(R.displayReadyCapability=Promise.withResolvers(),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(K=this._stats)==null||K.time("Page Request"),this._pumpOperatorList(x));const D=!!(this._pdfBug&&((J=globalThis.StepperManager)!=null&&J.enabled)),N=!this.recordedBBoxes&&(v||D),I=ie=>{var ce,Y;if(R.renderTasks.delete(j),N){const ue=(ce=j.gfx)==null?void 0:ce.dependencyTracker.take();ue&&(j.stepper&&j.stepper.setOperatorBBoxes(ue,j.gfx.dependencyTracker.takeDebugMetadata()),v&&(this.recordedBBoxes=ue))}C&&S(this,Oo,!0),P(this,Yc,Bp).call(this),ie?(j.capability.reject(ie),this._abortOperatorList({intentState:R,reason:ie instanceof Error?ie:new Error(ie)})):j.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(Y=globalThis.Stats)!=null&&Y.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},j=new eA({callback:I,params:{canvas:t,canvasContext:e,dependencyTracker:N?new zW(t,R.operatorList.length,D):null,viewport:n,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:R.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:b});(R.renderTasks||(R.renderTasks=new Set)).add(j);const F=j.task;return Promise.all([R.displayReadyCapability.promise,h]).then(([ie,ce])=>{var Y;if(this.destroyed){I();return}if((Y=this._stats)==null||Y.time("Rendering"),!(ce.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");j.initializeGraphics({transparency:ie,optionalContentConfig:ce}),j.operatorListChanged()}).catch(I),F}getOperatorList({intent:e="display",annotationMode:t=qi.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var d;function i(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(h))}const o=this._transport.getRenderingIntent(e,t,n,r,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let h;return l.opListReadCapability||(h=Object.create(null),h.operatorListChanged=i,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(h),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>gm.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function i(){o.read().then(function({value:h,done:d}){if(d){n(l);return}l.lang??(l.lang=h.lang),Object.assign(l.styles,h.styles),l.items.push(...h.items),i()},r)}const o=t.getReader(),l={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),S(this,Oo,!1),Promise.all(e)}cleanup(e=!1){S(this,Oo,!0);const t=P(this,Yc,Bp).call(this);return e&&t&&this._stats&&(this._stats=new YP),t}_startRenderPage(e,t){var r,i;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=n.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&P(this,Yc,Bp).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:i,transfer:o}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},o).getReader(),d=this._intentStates.get(t);d.streamReader=h;const p=()=>{h.read().then(({value:m,done:g})=>{if(g){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,d),p())},m=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const g of d.renderTasks)g.operatorListChanged();P(this,Yc,Bp).call(this)}if(d.displayReadyCapability)d.displayReadyCapability.reject(m);else if(d.opListReadCapability)d.opListReadCapability.reject(m);else throw m}})};p()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof Hw){let r=_6;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new sa(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Oo=new WeakMap,Yc=new WeakSet,Bp=function(){if(!u(this,Oo)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,Oo,!1),!0};var ol,ni,jo,Jc,_w,Qc,Zc,ms,w0,LN,DN,$p,Dd,b0;const Pt=class Pt{constructor({name:e=null,port:t=null,verbosity:n=fW()}={}){k(this,ms);k(this,ol,Promise.withResolvers());k(this,ni,null);k(this,jo,null);k(this,Jc,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(u(Pt,Zc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");u(Pt,Zc).set(t,this),P(this,ms,LN).call(this,t)}else P(this,ms,DN).call(this)}get promise(){return u(this,ol).promise}get port(){return u(this,jo)}get messageHandler(){return u(this,ni)}destroy(){var e,t;this.destroyed=!0,(e=u(this,Jc))==null||e.terminate(),S(this,Jc,null),u(Pt,Zc).delete(u(this,jo)),S(this,jo,null),(t=u(this,ni))==null||t.destroy(),S(this,ni,null)}static create(e){const t=u(this,Zc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Pt(e)}static get workerSrc(){if(ur.workerSrc)return ur.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return $e(this,"_setupFakeWorkerGlobal",(async()=>u(this,Dd,b0)?u(this,Dd,b0):(await import(this.workerSrc)).WorkerMessageHandler)())}};ol=new WeakMap,ni=new WeakMap,jo=new WeakMap,Jc=new WeakMap,_w=new WeakMap,Qc=new WeakMap,Zc=new WeakMap,ms=new WeakSet,w0=function(){u(this,ol).resolve(),u(this,ni).send("configure",{verbosity:this.verbosity})},LN=function(e){S(this,jo,e),S(this,ni,new Dp("main","worker",e)),u(this,ni).on("ready",()=>{}),P(this,ms,w0).call(this)},DN=function(){if(u(Pt,Qc)||u(Pt,Dd,b0)){P(this,ms,$p).call(this);return}let{workerSrc:e}=Pt;try{Pt._isSameOrigin(window.location,e)||(e=Pt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Dp("main","worker",t),r=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?u(this,ol).reject(new Error("Worker was destroyed")):P(this,ms,$p).call(this)},i=new AbortController;t.addEventListener("error",()=>{u(this,Jc)||r()},{signal:i.signal}),n.on("test",l=>{if(i.abort(),this.destroyed||!l){r();return}S(this,ni,n),S(this,jo,t),S(this,Jc,t),P(this,ms,w0).call(this)}),n.on("ready",l=>{if(i.abort(),this.destroyed){r();return}try{o()}catch{P(this,ms,$p).call(this)}});const o=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};o();return}catch{zw("The worker has been disabled.")}P(this,ms,$p).call(this)},$p=function(){u(Pt,Qc)||(Oe("Setting up fake worker."),S(Pt,Qc,!0)),Pt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){u(this,ol).reject(new Error("Worker was destroyed"));return}const t=new NW;S(this,jo,t);const n=`fake${un(Pt,_w)._++}`,r=new Dp(n+"_worker",n,t);e.setup(r,t),S(this,ni,new Dp(n,n+"_worker",t)),P(this,ms,w0).call(this)}).catch(e=>{u(this,ol).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Dd=new WeakSet,b0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},k(Pt,Dd),k(Pt,_w,0),k(Pt,Qc,!1),k(Pt,Zc,new WeakMap),ds&&(S(Pt,Qc,!0),ur.workerSrc||(ur.workerSrc="./pdf.worker.mjs")),Pt._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(t,n);return n.origin===r.origin},Pt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Pt.fromPort=e=>{if(SW("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Pt.create(e)};let yf=Pt;var Fo,ji,Md,Nd,Bo,eu,Up;class k6{constructor(e,t,n,r,i,o){k(this,eu);k(this,Fo,new Map);k(this,ji,new Map);k(this,Md,new Map);k(this,Nd,new Map);k(this,Bo,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new kN,this.fontLoader=new PW({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return $e(this,"annotationStorage",new OE)}getRenderingIntent(e,t=qi.ENABLE,n=null,r=!1,i=!1){let o=or.DISPLAY,l=j_;switch(e){case"any":o=or.ANY;break;case"display":break;case"print":o=or.PRINT;break;default:Oe(`getRenderingIntent - invalid intent: ${e}`)}const h=o&or.PRINT&&n instanceof cN?n:this.annotationStorage;switch(t){case qi.DISABLE:o+=or.ANNOTATIONS_DISABLE;break;case qi.ENABLE:break;case qi.ENABLE_FORMS:o+=or.ANNOTATIONS_FORMS;break;case qi.ENABLE_STORAGE:o+=or.ANNOTATIONS_STORAGE,l=h.serializable;break;default:Oe(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=or.IS_EDITING),i&&(o+=or.OPLIST);const{ids:d,hash:p}=h.modifiedIds,m=[o,l.hash,p];return{renderingIntent:o,cacheKey:m.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=u(this,Bo))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of u(this,ji).values())e.push(r._destroy());u(this,ji).clear(),u(this,Md).clear(),u(this,Nd).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Fo).clear(),this.filterFactory.destroy(),wm.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new sa("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{Xe(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){r.close();return}Xe(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:o}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=h=>{var d;(d=t.onProgress)==null||d.call(t,{loaded:h.loaded,total:h.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(n,r)=>{Xe(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(n.begin,n.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:o,done:l}){if(l){r.close();return}Xe(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{i.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new A6(n,this))}),e.on("DocException",n=>{t._capability.reject(As(n))}),e.on("PasswordRequest",n=>{S(this,Bo,Promise.withResolvers());try{if(!t.onPassword)throw As(n);const r=i=>{i instanceof Error?u(this,Bo).reject(i):u(this,Bo).resolve({password:i})};t.onPassword(r,n.code)}catch(r){u(this,Bo).reject(r)}return u(this,Bo).promise}),e.on("DataLoaded",n=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;u(this,ji).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,i])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in i){const m=i.error;Oe(`Error during font loading: ${m}`),this.commonObjs.resolve(n,m);break}const l=new K_(i),h=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(m,g)=>globalThis.FontInspector.fontAdded(m,g):null,d=new RW(l,h,i.extra,i.charProcOperatorList);this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:p}=i;Xe(p,"The imageRef must be defined.");for(const m of u(this,ji).values())for(const[,g]of m.objs)if((g==null?void 0:g.ref)===p)return g.dataLen?(this.commonObjs.resolve(n,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,i,o])=>{var h;if(this.destroyed)return;const l=u(this,ji).get(r);if(!l.objs.has(n)){if(l._intentStates.size===0){(h=o==null?void 0:o.bitmap)==null||h.close();return}switch(i){case"Image":case"Pattern":l.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",n=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Oe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=u(this,Md).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&u(this,Nd).set(i.refStr,e);const o=new E6(t,i,this,this._params.pdfBug);return u(this,ji).set(t,o),o});return u(this,Md).set(t,r),r}getPageIndex(e){return F_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return P(this,eu,Up).call(this,"GetFieldObjects")}hasJSActions(){return P(this,eu,Up).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return P(this,eu,Up).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return P(this,eu,Up).call(this,"GetOptionalContentConfig").then(t=>new r6(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,Fo).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,o;return{info:r[0],metadata:r[1]?new n6(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return u(this,Fo).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,ji).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,Fo).clear(),this.filterFactory.destroy(!0),wm.cleanup()}}cachedPageNumber(e){if(!F_(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,Nd).get(t)??null}}Fo=new WeakMap,ji=new WeakMap,Md=new WeakMap,Nd=new WeakMap,Bo=new WeakMap,eu=new WeakSet,Up=function(e,t=null){const n=u(this,Fo).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return u(this,Fo).set(e,r),r};var al;class C6{constructor(e){k(this,al,null);te(this,"onContinue",null);te(this,"onError",null);S(this,al,e)}get promise(){return u(this,al).capability.promise}cancel(e=0){u(this,al).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,al).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,al);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}al=new WeakMap;var ll,tu;const hc=class hc{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:i,operatorList:o,pageIndex:l,canvasFactory:h,filterFactory:d,useRequestAnimationFrame:p=!1,pdfBug:m=!1,pageColors:g=null,enableHWA:v=!1,operationsFilter:b=null}){k(this,ll,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=h,this.filterFactory=d,this._pdfBug=m,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new C6(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=v,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=b}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var h,d;if(this.cancelled)return;if(this._canvas){if(u(hc,tu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(hc,tu).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:i,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Bh(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var n,r,i;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),u(this,ll)&&(window.cancelAnimationFrame(u(this,ll)),S(this,ll,null)),u(hc,tu).delete(this._canvas),e||(e=new Hw(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,ll,window.requestAnimationFrame(()=>{S(this,ll,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(hc,tu).delete(this._canvas),this.callback())))}};ll=new WeakMap,tu=new WeakMap,k(hc,tu,new WeakSet);let eA=hc;const MN="5.4.296",NN="f56dc8601";var Ks,nu,Id,mn,xg,Od,$o,Sg,cl,si,_g,dt,tA,nA,sA,ic,IN,Ma;const Es=class Es{constructor({editor:e=null,uiManager:t=null}){k(this,dt);k(this,Ks,null);k(this,nu,null);k(this,Id);k(this,mn,null);k(this,xg,!1);k(this,Od,!1);k(this,$o,null);k(this,Sg);k(this,cl,null);k(this,si,null);var n,r;e?(S(this,Od,!1),S(this,$o,e)):S(this,Od,!0),S(this,si,(e==null?void 0:e._uiManager)||t),S(this,Sg,u(this,si)._eventBus),S(this,Id,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((r=u(this,si))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),u(Es,_g)||S(Es,_g,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return $e(this,"_keyboardManager",new py([[["Escape","mac+Escape"],Es.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Es.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Es.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Es.prototype._moveToPrevious],[["Home","mac+Home"],Es.prototype._moveToBeginning],[["End","mac+End"],Es.prototype._moveToEnd]]))}renderButton(){const e=S(this,Ks,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",u(this,$o)&&(e.ariaControls=`${u(this,$o).id}_colorpicker_dropdown`);const t=u(this,si)._signal;e.addEventListener("click",P(this,dt,ic).bind(this),{signal:t}),e.addEventListener("keydown",P(this,dt,sA).bind(this),{signal:t});const n=S(this,nu,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=u(this,Id),e.append(n),e}renderMainDropdown(){const e=S(this,mn,P(this,dt,tA).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===u(this,Ks)){P(this,dt,ic).call(this,e);return}const t=e.target.getAttribute("data-color");t&&P(this,dt,nA).call(this,t,e)}_moveToNext(e){var t,n;if(!u(this,dt,Ma)){P(this,dt,ic).call(this,e);return}if(e.target===u(this,Ks)){(t=u(this,mn).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=u(this,mn))==null?void 0:t.firstChild)||e.target===u(this,Ks)){u(this,dt,Ma)&&this._hideDropdownFromKeyboard();return}u(this,dt,Ma)||P(this,dt,ic).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!u(this,dt,Ma)){P(this,dt,ic).call(this,e);return}(t=u(this,mn).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,dt,Ma)){P(this,dt,ic).call(this,e);return}(t=u(this,mn).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,mn))==null||e.classList.add("hidden"),u(this,Ks).ariaExpanded="false",(t=u(this,cl))==null||t.abort(),S(this,cl,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,Od)){if(!u(this,dt,Ma)){(e=u(this,$o))==null||e.unselect();return}this.hideDropdown(),u(this,Ks).focus({preventScroll:!0,focusVisible:u(this,xg)})}}updateColor(e){if(u(this,nu)&&(u(this,nu).style.backgroundColor=e),!u(this,mn))return;const t=u(this,si).highlightColors.values();for(const n of u(this,mn).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=u(this,Ks))==null||e.remove(),S(this,Ks,null),S(this,nu,null),(t=u(this,mn))==null||t.remove(),S(this,mn,null)}};Ks=new WeakMap,nu=new WeakMap,Id=new WeakMap,mn=new WeakMap,xg=new WeakMap,Od=new WeakMap,$o=new WeakMap,Sg=new WeakMap,cl=new WeakMap,si=new WeakMap,_g=new WeakMap,dt=new WeakSet,tA=function(){const e=document.createElement("div"),t=u(this,si)._signal;e.addEventListener("contextmenu",dr,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,$o)&&(e.id=`${u(this,$o).id}_colorpicker_dropdown`);for(const[n,r]of u(this,si).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=n,i.setAttribute("data-l10n-id",u(Es,_g)[n]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=r,i.ariaSelected=r===u(this,Id),i.addEventListener("click",P(this,dt,nA).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",P(this,dt,sA).bind(this),{signal:t}),e},nA=function(e,t){t.stopPropagation(),u(this,Sg).dispatch("switchannotationeditorparams",{source:this,type:Ke.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},sA=function(e){Es._keyboardManager.exec(this,e)},ic=function(e){if(u(this,dt,Ma)){this.hideDropdown();return}if(S(this,xg,e.detail===0),u(this,cl)||(S(this,cl,new AbortController),window.addEventListener("pointerdown",P(this,dt,IN).bind(this),{signal:u(this,si).combinedSignal(u(this,cl))})),u(this,Ks).ariaExpanded="true",u(this,mn)){u(this,mn).classList.remove("hidden");return}const t=S(this,mn,P(this,dt,tA).call(this));u(this,Ks).append(t)},IN=function(e){var t;(t=u(this,mn))!=null&&t.contains(e.target)||this.hideDropdown()},Ma=function(){return u(this,mn)&&!u(this,mn).classList.contains("hidden")},k(Es,_g,null);let bm=Es;var Fi,Ag,jd,Eg;const dc=class dc{constructor(e){k(this,Fi,null);k(this,Ag,null);k(this,jd,null);S(this,Ag,e),S(this,jd,e._uiManager),u(dc,Eg)||S(dc,Eg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,Fi))return u(this,Fi);const{editorType:e,colorType:t,colorValue:n}=u(this,Ag),r=S(this,Fi,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",u(dc,Eg)[e]),r.addEventListener("input",()=>{u(this,jd).updateParams(t,r.value)},{signal:u(this,jd)._signal}),r}update(e){u(this,Fi)&&(u(this,Fi).value=e)}destroy(){var e;(e=u(this,Fi))==null||e.remove(),S(this,Fi,null)}hideDropdown(){}};Fi=new WeakMap,Ag=new WeakMap,jd=new WeakMap,Eg=new WeakMap,k(dc,Eg,null);let ow=dc;function vR(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Sp(s){return Math.max(0,Math.min(255,255*s))}class wR{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Sp(e),[e,e,e]}static G_HTML([e]){const t=vR(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Sp)}static RGB_HTML(e){return`#${e.map(vR).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[Sp(1-Math.min(1,e+r)),Sp(1-Math.min(1,n+r)),Sp(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,i=1-t,o=1-n,l=Math.min(r,i,o);return["CMYK",r,i,o,l]}}class T6{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){yt("Abstract method `_createSVG` called.")}}class xm extends T6{_createSVG(e){return document.createElementNS(ho,e)}}const P6=9,Lu=new WeakSet,R6=new Date().getTimezoneOffset()*60*1e3;class bR{static create(e){switch(e.data.annotationType){case Jt.LINK:return new UE(e);case Jt.TEXT:return new D6(e);case Jt.WIDGET:switch(e.data.fieldType){case"Tx":return new M6(e);case"Btn":return e.data.radioButton?new FN(e):e.data.checkBox?new I6(e):new O6(e);case"Ch":return new j6(e);case"Sig":return new N6(e)}return new Iu(e);case Jt.POPUP:return new iA(e);case Jt.FREETEXT:return new zN(e);case Jt.LINE:return new B6(e);case Jt.SQUARE:return new $6(e);case Jt.CIRCLE:return new U6(e);case Jt.POLYLINE:return new HN(e);case Jt.CARET:return new z6(e);case Jt.INK:return new VE(e);case Jt.POLYGON:return new V6(e);case Jt.HIGHLIGHT:return new WN(e);case Jt.UNDERLINE:return new H6(e);case Jt.SQUIGGLY:return new W6(e);case Jt.STRIKEOUT:return new G6(e);case Jt.STAMP:return new GN(e);case Jt.FILEATTACHMENT:return new q6(e);default:return new Bt(e)}}}var su,Fd,Rr,kg,rA;const QE=class QE{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){k(this,kg);k(this,su,null);k(this,Fd,!1);k(this,Rr,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return QE._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,t=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var l;const e=(l=this.annotationStorage)==null?void 0:l.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:r}=this.data;let i=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let h=0;h<t.length;h+=8)t[h+1]>o?(o=t[h+1],i=t[h+2]):t[h+1]===o&&(i=Math.max(i,t[h+2]));return[i,o]}if((n==null?void 0:n.length)>=1){for(const h of n)for(let d=0,p=h.length;d<p;d+=2)h[d+1]>o?(o=h[d+1],i=h[d]):h[d+1]===o&&(i=Math.max(i,h[d]));if(i!==1/0)return[i,o]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/n,e[1]=100*(e[1]-o)/r,e}get commentText(){var t,n,r;const{data:e}=this;return((n=(t=this.annotationStorage.getRawValue(`${pm}${e.id}`))==null?void 0:t.popup)==null?void 0:n.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${pm}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=u(this,Rr))==null?void 0:e.popup)||this.popup)==null||t.remove(),S(this,Rr,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(u(this,su)||S(this,su,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&P(this,kg,rA).call(this,t);let r=((i=u(this,Rr))==null?void 0:i.popup)||this.popup;!r&&(n!=null&&n.text)&&(this._createPopup(n),r=u(this,Rr).popup),r&&(r.updateEdited(e),n!=null&&n.deleted&&(r.remove(),S(this,Rr,null),this.popup=null))}resetEdited(){var e;u(this,su)&&(P(this,kg,rA).call(this,u(this,su).rect),(e=u(this,Rr))==null||e.popup.resetEdited(),S(this,su,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof Iu)&&!(this instanceof UE)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof iA){const{rotation:x}=t;return!t.hasOwnCanvas&&x!==0&&this.setRotation(x,i),i}const{width:l,height:h}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const x=t.borderStyle.horizontalCornerRadius,A=t.borderStyle.verticalCornerRadius;if(x>0||A>0){const R=`calc(${x}px * var(--total-scale-factor)) / calc(${A}px * var(--total-scale-factor))`;o.borderRadius=R}else if(this instanceof FN){const R=`calc(${l}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;o.borderRadius=R}switch(t.borderStyle.style){case vh.SOLID:o.borderStyle="solid";break;case vh.DASHED:o.borderStyle="dashed";break;case vh.BEVELED:Oe("Unimplemented border style: beveled");break;case vh.INSET:Oe("Unimplemented border style: inset");break;case vh.UNDERLINE:o.borderBottomStyle="solid";break}const E=t.borderColor||null;E?(S(this,Fd,!0),o.borderColor=ge.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):o.borderWidth=0}const d=ge.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:m,pageX:g,pageY:v}=r.rawDims;o.left=`${100*(d[0]-g)/p}%`,o.top=`${100*(d[1]-v)/m}%`;const{rotation:b}=t;return t.hasOwnCanvas||b===0?(o.width=`${100*l/p}%`,o.height=`${100*h/m}%`):this.setRotation(b,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/n}%`,t.style.height=`${100*o/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const i=r.detail[t],o=i[0],l=i.slice(1);r.target.style[n]=wR[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:wR[`${o}_rgb`](l)})};return $e(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||n[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,i]of Object.entries(t)){const o=n[r];if(o){const l={detail:{[r]:i},target:e};o(l),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,i]=this.data.rect.map(x=>Math.fround(x));if(e.length===8){const[x,A,E,R]=e.subarray(2,6);if(r===x&&i===A&&t===E&&n===R)return}const{style:o}=this.container;let l;if(u(this,Fd)){const{borderColor:x,borderWidth:A}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const h=r-t,d=i-n,{svgFactory:p}=this,m=p.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const g=p.createElement("defs");m.append(g);const v=p.createElement("clipPath"),b=`clippath_${this.data.id}`;v.setAttribute("id",b),v.setAttribute("clipPathUnits","objectBoundingBox"),g.append(v);for(let x=2,A=e.length;x<A;x+=8){const E=e[x],R=e[x+1],C=e[x+2],D=e[x+3],N=p.createElement("rect"),I=(C-t)/h,j=(i-R)/d,F=(E-C)/h,W=(R-D)/d;N.setAttribute("x",I),N.setAttribute("y",j),N.setAttribute("width",F),N.setAttribute("height",W),v.append(N),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${j}" width="${F}" height="${W}"/>`)}u(this,Fd)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(m),this.container.style.clipPath=`url(#${b})`}_createPopup(e=null){const{data:t}=this;let n,r;e?(n={str:e.text},r=e.date):(n=t.contentsObj,r=t.modificationDate);const i=S(this,Rr,new iA({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(i.render())}get hasPopupElement(){return!!(u(this,Rr)||this.popup||this.data.popupRef)}get extraPopupElement(){return u(this,Rr)}render(){yt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:o,exportValues:l}of r){if(i===-1||o===t)continue;const h=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${o}"]`);if(d&&!Lu.has(d)){Oe(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:h,domElement:d})}return n}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,o=r.getAttribute("data-element-id");o!==t&&Lu.has(r)&&n.push({id:o,exportValue:i,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};su=new WeakMap,Fd=new WeakMap,Rr=new WeakMap,kg=new WeakSet,rA=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:l,pageY:h}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-l)/i}%`,t.top=`${100*(o-e[3]+h)/o}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(r)};let Bt=QE;class L6 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var lr,oc,ON,jN;class UE extends Bt{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});k(this,lr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(P(this,lr,ON).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(P(this,lr,jN).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(t,n,r=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&P(this,lr,oc).call(this),r&&(t.title=r)}_bindNamedAction(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(t.title=r),P(this,lr,oc).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const o=r.get(i);o&&(t[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),P(this,lr,oc).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),P(this,lr,oc).call(this),!this._fieldObjects){Oe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var m;r==null||r();const{fields:i,refs:o,include:l}=n,h=[];if(i.length!==0||o.length!==0){const g=new Set(o);for(const v of i){const b=this._fieldObjects[v]||[];for(const{id:x}of b)g.add(x)}for(const v of Object.values(this._fieldObjects))for(const b of v)g.has(b.id)===l&&h.push(b)}else for(const g of Object.values(this._fieldObjects))h.push(...g);const d=this.annotationStorage,p=[];for(const g of h){const{id:v}=g;switch(p.push(v),g.type){case"text":{const x=g.defaultValue||"";d.setValue(v,{value:x});break}case"checkbox":case"radiobutton":{const x=g.defaultValue===g.exportValues;d.setValue(v,{value:x});break}case"combobox":case"listbox":{const x=g.defaultValue||"";d.setValue(v,{value:x});break}default:continue}const b=document.querySelector(`[data-element-id="${v}"]`);if(b){if(!Lu.has(b)){Oe(`_bindResetFormAction - element not allowed: ${v}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}})),!1}}}lr=new WeakSet,oc=function(){this.container.setAttribute("data-internal-link","")},ON=function(t,n,r="",i=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:r&&(t.title=r),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,i),!1},P(this,lr,oc).call(this)},jN=function(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(t.title=r),P(this,lr,oc).call(this)};class D6 extends Bt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Iu extends Bt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Tn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,i){n.includes("mouse")?e.addEventListener(n,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{var l;if(n==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}i&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o)}}))})}_setEventListeners(e,t,n,r){var i,o,l;for(const[h,d]of n)(d==="Action"||(i=this.data.actions)!=null&&i[d])&&((d==="Focus"||d==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,h,d,r),d==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):d==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ge.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||P6,i=e.style;let o;const l=2,h=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),p=Math.round(d/(SS*r))||1,m=d/p;o=Math.min(r,h(m/SS))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(r,h(d/SS))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=ge.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class M6 extends Iu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),i.setValue(o.id,{[r]:n})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let l=o.value||"";const h=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;h&&l.length>h&&(l=l.slice(0,h));let d=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const p={userValue:l,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=d??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",d??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Lu.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:m,datetimeType:g,timeStep:v}=this.data,b=!!g&&this.enableScripting;m&&(n.title=m),this._setRequired(n,this.data.required),h&&(n.maxLength=h),n.addEventListener("input",A=>{e.setValue(t,{value:A.target.value}),this.setPropertyOnSiblings(n,"value",A.target.value,"value"),p.formattedValue=null}),n.addEventListener("resetform",A=>{const E=this.data.defaultFieldValue??"";n.value=p.userValue=E,p.formattedValue=null});let x=A=>{const{formattedValue:E}=p;E!=null&&(A.target.value=E),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",E=>{var C;if(p.focused)return;const{target:R}=E;if(b&&(R.type=g,v&&(R.step=v)),p.userValue){const D=p.userValue;if(b)if(g==="time"){const N=new Date(D),I=[N.getHours(),N.getMinutes(),N.getSeconds()];R.value=I.map(j=>j.toString().padStart(2,"0")).join(":")}else R.value=new Date(D-R6).toISOString().split(g==="date"?"T":".",1)[0];else R.value=D}p.lastCommittedValue=R.value,p.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(p.focused=!0)}),n.addEventListener("updatefromsandbox",E=>{this.showElementAndHideCanvas(E.target);const R={value(C){p.userValue=C.detail.value??"",b||e.setValue(t,{value:p.userValue.toString()}),C.target.value=p.userValue},formattedValue(C){const{formattedValue:D}=C.detail;p.formattedValue=D,D!=null&&C.target!==document.activeElement&&(C.target.value=D);const N={formattedValue:D};b&&(N.value=D),e.setValue(t,N)},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var j;const{charLimit:D}=C.detail,{target:N}=C;if(D===0){N.removeAttribute("maxLength");return}N.setAttribute("maxLength",D);let I=p.userValue;!I||I.length<=D||(I=I.slice(0,D),N.value=p.userValue=I,e.setValue(t,{value:I}),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:I,willCommit:!0,commitKey:1,selStart:N.selectionStart,selEnd:N.selectionEnd}}))}};this._dispatchEventFromSandbox(R,E)}),n.addEventListener("keydown",E=>{var D;p.commitKey=1;let R=-1;if(E.key==="Escape"?R=0:E.key==="Enter"&&!this.data.multiLine?R=2:E.key==="Tab"&&(p.commitKey=3),R===-1)return;const{value:C}=E.target;p.lastCommittedValue!==C&&(p.lastCommittedValue=C,p.userValue=C,(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:R,selStart:E.target.selectionStart,selEnd:E.target.selectionEnd}}))});const A=x;x=null,n.addEventListener("blur",E=>{var D,N;if(!p.focused||!E.relatedTarget)return;(D=this.data.actions)!=null&&D.Blur||(p.focused=!1);const{target:R}=E;let{value:C}=R;if(b){if(C&&g==="time"){const I=C.split(":").map(j=>parseInt(j,10));C=new Date(2e3,0,1,I[0],I[1],I[2]||0).valueOf(),R.step=""}else C.includes("T")||(C=`${C}T00:00`),C=new Date(C).valueOf();R.type="text"}p.userValue=C,p.lastCommittedValue!==C&&((N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:p.commitKey,selStart:E.target.selectionStart,selEnd:E.target.selectionEnd}})),A(E)}),(i=this.data.actions)!=null&&i.Keystroke&&n.addEventListener("beforeinput",E=>{var W;p.lastCommittedValue=null;const{data:R,target:C}=E,{value:D,selectionStart:N,selectionEnd:I}=C;let j=N,F=I;switch(E.inputType){case"deleteWordBackward":{const K=D.substring(0,N).match(/\w*[^\w]*$/);K&&(j-=K[0].length);break}case"deleteWordForward":{const K=D.substring(N).match(/^[^\w]*\w*/);K&&(F+=K[0].length);break}case"deleteContentBackward":N===I&&(j-=1);break;case"deleteContentForward":N===I&&(F+=1);break}E.preventDefault(),(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:D,change:R||"",willCommit:!1,selStart:j,selEnd:F}})}),this._setEventListeners(n,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],E=>E.target.value)}if(x&&n.addEventListener("blur",x),this.data.comb){const E=(this.data.rect[2]-this.data.rect[0])/h;n.classList.add("comb"),n.style.letterSpacing=`calc(${E}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class N6 extends Iu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class I6 extends Iu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Lu.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:l,checked:h}=o.target;for(const d of this._getElementsByName(l,n)){const p=h&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=p),e.setValue(d.id,{value:p})}e.setValue(n,{value:h})}),i.addEventListener("resetform",o=>{const l=t.defaultFieldValue||"Off";o.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const l={value(h){h.target.checked=h.detail.value!=="Off",e.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class FN extends Iu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,n))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(Lu.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:l,checked:h}=o.target;for(const d of this._getElementsByName(l,n))e.setValue(d.id,{value:!1});e.setValue(n,{value:h})}),i.addEventListener("resetform",o=>{const l=t.defaultFieldValue;o.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",l=>{const h={value:d=>{const p=o===d.detail.value;for(const m of this._getElementsByName(d.target.name)){const g=p&&m.id===n;m.domElement&&(m.domElement.checked=g),e.setValue(m.id,{value:g})}}};this._dispatchEventFromSandbox(h,l)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class O6 extends UE{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class j6 extends Iu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Lu.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue;for(const g of r.options)g.selected=g.value===m});for(const p of this.data.options){const m=document.createElement("option");m.textContent=p.displayValue,m.value=p.exportValue,n.value.includes(p.exportValue)&&(m.setAttribute("selected",!0),i=!1),r.append(m)}let o=null;if(i){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),o=()=>{p.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const l=p=>{const m=p?"value":"textContent",{options:g,multiple:v}=r;return v?Array.prototype.filter.call(g,b=>b.selected).map(b=>b[m]):g.selectedIndex===-1?null:g[g.selectedIndex][m]};let h=l(!1);const d=p=>{const m=p.target.options;return Array.prototype.map.call(m,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const m={value(g){o==null||o();const v=g.detail.value,b=new Set(Array.isArray(v)?v:[v]);for(const x of r.options)x.selected=b.has(x.value);e.setValue(t,{value:l(!0)}),h=l(!1)},multipleSelection(g){r.multiple=!0},remove(g){const v=r.options,b=g.detail.remove;v[b].selected=!1,r.remove(b),v.length>0&&Array.prototype.findIndex.call(v,A=>A.selected)===-1&&(v[0].selected=!0),e.setValue(t,{value:l(!0),items:d(g)}),h=l(!1)},clear(g){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),h=l(!1)},insert(g){const{index:v,displayValue:b,exportValue:x}=g.detail.insert,A=r.children[v],E=document.createElement("option");E.textContent=b,E.value=x,A?A.before(E):r.append(E),e.setValue(t,{value:l(!0),items:d(g)}),h=l(!1)},items(g){const{items:v}=g.detail;for(;r.length!==0;)r.remove(0);for(const b of v){const{displayValue:x,exportValue:A}=b,E=document.createElement("option");E.textContent=x,E.value=A,r.append(E)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:l(!0),items:d(g)}),h=l(!1)},indices(g){const v=new Set(g.detail.indices);for(const b of g.target.options)b.selected=v.has(b.index);e.setValue(t,{value:l(!0)}),h=l(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(m,p)}),r.addEventListener("input",p=>{var v;const m=l(!0),g=l(!1);e.setValue(t,{value:m}),p.preventDefault(),(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,change:g,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Cg,oA;class iA extends Bt{constructor(t){const{data:n,elements:r,parent:i}=t,o=!!i._commentManager;super(t,{isRenderable:!o&&Bt._hasPopupData(n)});k(this,Cg);if(this.elements=r,o&&Bt._hasPopupData(n)){const l=this.popup=P(this,Cg,oA).call(this);for(const h of r)h.popup=l}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=P(this,Cg,oA).call(this),r=[];for(const i of this.elements)i.popup=n,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${ME}${i}`).join(",")),this.container}}Cg=new WeakSet,oA=function(){return new F6({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Xs,ul,Aw,Ew,Bd,$d,Ht,Bi,hl,ru,Ud,Vd,$i,Ys,Uo,Vo,Sn,zo,dl,Tg,Ho,zd,iu,fl,es,pl,Ve,x0,aA,lA,cA,S0,uA,BN,$N,UN,VN,_0,A0,hA;class F6{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:i,contentsObj:o,richText:l,parent:h,rect:d,parentRect:p,open:m,commentManager:g=null}){k(this,Ve);k(this,Xs,null);k(this,ul,P(this,Ve,UN).bind(this));k(this,Aw,P(this,Ve,hA).bind(this));k(this,Ew,P(this,Ve,A0).bind(this));k(this,Bd,P(this,Ve,_0).bind(this));k(this,$d,null);k(this,Ht,null);k(this,Bi,null);k(this,hl,null);k(this,ru,null);k(this,Ud,null);k(this,Vd,null);k(this,$i,!1);k(this,Ys,null);k(this,Uo,null);k(this,Vo,null);k(this,Sn,null);k(this,zo,null);k(this,dl,null);k(this,Tg,null);k(this,Ho,null);k(this,zd,null);k(this,iu,null);k(this,fl,!1);k(this,es,null);k(this,pl,null);S(this,Ht,e),S(this,zd,r),S(this,Bi,o),S(this,Ho,l),S(this,Ud,h),S(this,$d,t),S(this,Tg,d),S(this,Vd,p),S(this,ru,n),S(this,Xs,g),S(this,es,n[0]),S(this,hl,ym.toDateObject(i)),this.trigger=n.flatMap(v=>v.getElementsToTriggerPopup()),g?this.renderCommentButton():(P(this,Ve,x0).call(this),u(this,Ht).hidden=!0,m&&P(this,Ve,_0).call(this))}renderCommentButton(){if(u(this,Sn)||(u(this,zo)||P(this,Ve,aA).call(this),!u(this,zo)))return;const{signal:e}=S(this,Uo,new AbortController),t=!!u(this,es).extraPopupElement,n=()=>{u(this,Xs).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{u(this,Xs).toggleCommentPopup(this,!1,!0,!t)},i=()=>{u(this,Xs).toggleCommentPopup(this,!1,!1)};if(t){S(this,Sn,u(this,es).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",u(this,ul),{signal:e}),o.addEventListener("click",n,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=S(this,Sn,document.createElement("button"));o.className="annotationCommentButton";const l=u(this,es).container;o.style.zIndex=l.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),P(this,Ve,cA).call(this),P(this,Ve,lA).call(this),o.addEventListener("keydown",u(this,ul),{signal:e}),o.addEventListener("click",n,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),l.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=u(this,es).commentData;return e?u(this,Ud)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=u(this,Sn))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:r,modificationDate:i}=u(this,es).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:r,modificationDate:i}}get elementBeforePopup(){return u(this,Sn)}get comment(){return u(this,pl)||S(this,pl,u(this,es).commentText),u(this,pl)}set comment(e){e!==this.comment&&(u(this,es).commentText=S(this,pl,e))}get parentBoundingClientRect(){return u(this,es).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){u(this,Sn)&&(u(this,Sn).classList.toggle("selected",e),u(this,Sn).ariaExpanded=t)}setSelectedCommentButton(e){u(this,Sn).classList.toggle("selected",e)}get commentPopupPosition(){if(u(this,dl))return u(this,dl);const{x:e,y:t,height:n}=u(this,Sn).getBoundingClientRect(),{x:r,y:i,width:o,height:l}=u(this,es).layer.getBoundingClientRect();return[(e-r)/o,(t+n-i)/l]}set commentPopupPosition(e){S(this,dl,e)}hasDefaultPopupPosition(){return u(this,dl)===null}get commentButtonPosition(){return u(this,zo)}get commentButtonWidth(){return u(this,Sn).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=u(this,dl)||this.commentButtonPosition.map(d=>d/100),r=this.parentBoundingClientRect,{x:i,y:o,width:l,height:h}=r;u(this,Xs).showDialog(null,this,i+t*l,o+n*h,{...e,parentDimensions:r})}render(){var n,r;if(u(this,Ys))return;const e=S(this,Ys,document.createElement("div"));if(e.className="popup",u(this,$d)){const i=e.style.outlineColor=ge.makeHexColor(...u(this,$d));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(n=u(this,zd))!=null&&n.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=u(this,zd)}if(e.append(t),u(this,hl)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,hl).valueOf()})),i.dateTime=u(this,hl).toISOString(),t.append(i)}IE({html:u(this,Ve,S0)||u(this,Bi).str,dir:(r=u(this,Bi))==null?void 0:r.dir,className:"popupContent"},e),u(this,Ht).append(e)}updateEdited({rect:e,popup:t,deleted:n}){var r;if(u(this,Xs)){n?(this.remove(),S(this,pl,null)):t&&(t.deleted?this.remove():(P(this,Ve,cA).call(this),S(this,pl,t.text))),e&&(S(this,zo,null),P(this,Ve,aA).call(this),P(this,Ve,lA).call(this));return}if(n||t!=null&&t.deleted){this.remove();return}P(this,Ve,x0).call(this),u(this,iu)||S(this,iu,{contentsObj:u(this,Bi),richText:u(this,Ho)}),e&&S(this,Vo,null),t&&t.text&&(S(this,Ho,P(this,Ve,$N).call(this,t.text)),S(this,hl,ym.toDateObject(t.date)),S(this,Bi,null)),(r=u(this,Ys))==null||r.remove(),S(this,Ys,null)}resetEdited(){var e;u(this,iu)&&({contentsObj:un(this,Bi)._,richText:un(this,Ho)._}=u(this,iu),S(this,iu,null),(e=u(this,Ys))==null||e.remove(),S(this,Ys,null),S(this,Vo,null))}remove(){var e,t,n;if((e=u(this,Uo))==null||e.abort(),S(this,Uo,null),(t=u(this,Ys))==null||t.remove(),S(this,Ys,null),S(this,fl,!1),S(this,$i,!1),(n=u(this,Sn))==null||n.remove(),S(this,Sn,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){S(this,fl,this.isVisible),u(this,fl)&&(u(this,Ht).hidden=!0)}maybeShow(){u(this,Xs)||(P(this,Ve,x0).call(this),u(this,fl)&&(u(this,Ys)||P(this,Ve,A0).call(this),S(this,fl,!1),u(this,Ht).hidden=!1))}get isVisible(){return u(this,Xs)?!1:u(this,Ht).hidden===!1}}Xs=new WeakMap,ul=new WeakMap,Aw=new WeakMap,Ew=new WeakMap,Bd=new WeakMap,$d=new WeakMap,Ht=new WeakMap,Bi=new WeakMap,hl=new WeakMap,ru=new WeakMap,Ud=new WeakMap,Vd=new WeakMap,$i=new WeakMap,Ys=new WeakMap,Uo=new WeakMap,Vo=new WeakMap,Sn=new WeakMap,zo=new WeakMap,dl=new WeakMap,Tg=new WeakMap,Ho=new WeakMap,zd=new WeakMap,iu=new WeakMap,fl=new WeakMap,es=new WeakMap,pl=new WeakMap,Ve=new WeakSet,x0=function(){var t;if(u(this,Uo))return;S(this,Uo,new AbortController);const{signal:e}=u(this,Uo);for(const n of this.trigger)n.addEventListener("click",u(this,Bd),{signal:e}),n.addEventListener("pointerenter",u(this,Ew),{signal:e}),n.addEventListener("pointerleave",u(this,Aw),{signal:e}),n.classList.add("popupTriggerArea");for(const n of u(this,ru))(t=n.container)==null||t.addEventListener("keydown",u(this,ul),{signal:e})},aA=function(){const e=u(this,ru).find(t=>t.hasCommentButton);e&&S(this,zo,e._normalizePoint(e.commentButtonPosition))},lA=function(){if(u(this,es).extraPopupElement&&!u(this,es).editor)return;this.renderCommentButton();const[e,t]=u(this,zo),{style:n}=u(this,Sn);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},cA=function(){u(this,es).extraPopupElement||(this.renderCommentButton(),u(this,Sn).style.backgroundColor=this.commentButtonColor||"")},S0=function(){const e=u(this,Ho),t=u(this,Bi);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,Ho).html||null},uA=function(){var e,t,n;return((n=(t=(e=u(this,Ve,S0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},BN=function(){var e,t,n;return((n=(t=(e=u(this,Ve,S0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},$N=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:u(this,Ve,BN),fontSize:u(this,Ve,uA)?`calc(${u(this,Ve,uA)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return n},UN=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,$i))&&P(this,Ve,_0).call(this)},VN=function(){if(u(this,Vo)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:i}}}=u(this,Ud);let o=!!u(this,Vd),l=o?u(this,Vd):u(this,Tg);for(const b of u(this,ru))if(!l||ge.intersect(b.data.rect,l)!==null){l=b.data.rect,o=!0;break}const h=ge.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),p=o?l[2]-l[0]+5:0,m=h[0]+p,g=h[1];S(this,Vo,[100*(m-r)/t,100*(g-i)/n]);const{style:v}=u(this,Ht);v.left=`${u(this,Vo)[0]}%`,v.top=`${u(this,Vo)[1]}%`},_0=function(){if(u(this,Xs)){u(this,Xs).toggleCommentPopup(this,!1);return}S(this,$i,!u(this,$i)),u(this,$i)?(P(this,Ve,A0).call(this),u(this,Ht).addEventListener("click",u(this,Bd)),u(this,Ht).addEventListener("keydown",u(this,ul))):(P(this,Ve,hA).call(this),u(this,Ht).removeEventListener("click",u(this,Bd)),u(this,Ht).removeEventListener("keydown",u(this,ul)))},A0=function(){u(this,Ys)||this.render(),this.isVisible?u(this,$i)&&u(this,Ht).classList.add("focused"):(P(this,Ve,VN).call(this),u(this,Ht).hidden=!1,u(this,Ht).style.zIndex=parseInt(u(this,Ht).style.zIndex)+1e3)},hA=function(){u(this,Ht).classList.remove("focused"),!(u(this,$i)||!this.isVisible)&&(u(this,Ht).hidden=!0,u(this,Ht).style.zIndex=parseInt(u(this,Ht).style.zIndex)-1e3)};class zN extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ie.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Pg;class B6 extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Pg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=S(this,Pg,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Pg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pg=new WeakMap;var Rg;class $6 extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Rg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,l=S(this,Rg,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",n-o),l.setAttribute("height",r-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Rg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rg=new WeakMap;var Lg;class U6 extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Lg,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,l=S(this,Lg,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",r/2),l.setAttribute("rx",n/2-o/2),l.setAttribute("ry",r/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Lg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lg=new WeakMap;var Dg;class HN extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Dg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:i},width:o,height:l}=this;if(!n)return this.container;const h=this.svgFactory.create(o,l,!0);let d=[];for(let m=0,g=n.length;m<g;m+=2){const v=n[m]-t[0],b=t[3]-n[m+1];d.push(`${v},${b}`)}d=d.join(" ");const p=S(this,Dg,this.svgFactory.createElement(this.svgElementName));return p.setAttribute("points",d),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),h.append(p),this.container.append(h),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Dg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dg=new WeakMap;class V6 extends HN{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class z6 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Mg,ou,Ng,dA;class VE extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Ng);k(this,Mg,null);k(this,ou,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ie.HIGHLIGHT:Ie.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:r,borderStyle:i,popupRef:o}}=this,{transform:l,width:h,height:d}=P(this,Ng,dA).call(this,n,t),p=this.svgFactory.create(h,d,!0),m=S(this,Mg,this.svgFactory.createElement("svg:g"));p.append(m),m.setAttribute("stroke-width",i.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",l);for(let g=0,v=r.length;g<v;g++){const b=this.svgFactory.createElement(this.svgElementName);u(this,ou).push(b),b.setAttribute("points",r[g].join(",")),m.append(b)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:r,rect:i}=t,o=u(this,Mg);if(n>=0&&o.setAttribute("stroke-width",n||1),r)for(let l=0,h=u(this,ou).length;l<h;l++)u(this,ou)[l].setAttribute("points",r[l].join(","));if(i){const{transform:l,width:h,height:d}=P(this,Ng,dA).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${h} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return u(this,ou)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mg=new WeakMap,ou=new WeakMap,Ng=new WeakSet,dA=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class WN extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ie.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class H6 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class W6 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class G6 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class GN extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ie.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ig,Og,fA;class q6 extends Bt{constructor(t){var r;super(t,{isRenderable:!0});k(this,Og);k(this,Ig,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",P(this,Og,fA).bind(this)),S(this,Ig,r);const{isMac:i}=Tn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&P(this,Og,fA).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return u(this,Ig)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ig=new WeakMap,Og=new WeakSet,fA=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Hd,au,Wd,ml,jg,lu,jl,pA,mA,Gd;let zE=(Gd=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:i,viewport:o,structTreeLayer:l,commentManager:h,linkService:d,annotationStorage:p}){k(this,jl);k(this,Hd,null);k(this,au,null);k(this,Wd,null);k(this,ml,new Map);k(this,jg,null);k(this,lu,null);this.div=e,S(this,Hd,t),S(this,au,n),S(this,jg,l||null),S(this,lu,d||null),S(this,Wd,p||new OE),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return u(this,ml).size>0}async render(e){var o,l,h;const{annotations:t}=e,n=this.div;Nl(n,this.viewport);const r=new Map,i={data:null,layer:n,linkService:u(this,lu),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new xm,annotationStorage:u(this,Wd),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const d of t){if(d.noHTML)continue;const p=d.annotationType===Jt.POPUP;if(p){const v=r.get(d.id);if(!v)continue;i.elements=v}else if(d.rect[2]===d.rect[0]||d.rect[3]===d.rect[1])continue;i.data=d;const m=bR.create(i);if(!m.isRenderable)continue;if(!p&&d.popupRef){const v=r.get(d.popupRef);v?v.push(m):r.set(d.popupRef,[m])}const g=m.render();d.hidden&&(g.style.visibility="hidden"),await P(this,jl,pA).call(this,g,d.id,i.elements),(l=(o=m.extraPopupElement)==null?void 0:o.popup)==null||l.renderCommentButton(),m._isEditable&&(u(this,ml).set(m.data.id,m),(h=this._annotationEditorUIManager)==null||h.renderAnnotationElement(m))}P(this,jl,mA).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:u(this,lu),svgFactory:new xm,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=Gd._defaultBorderStyle),t.data=n;const r=bR.create(t);if(!r.isRenderable)continue;const i=r.render();await P(this,jl,pA).call(this,i,n.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Nl(t,{rotation:e.rotation}),P(this,jl,mA).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,ml).values())}getEditableAnnotation(e){return u(this,ml).get(e)}addFakeAnnotation(e){var l;const{div:t}=this,{id:n,rotation:r}=e,i=new L6({data:{id:n,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:u(this,lu),annotationStorage:u(this,Wd)}),o=i.render();return t.append(o),(l=u(this,Hd))==null||l.moveElementInDOM(t,o,o,!1),i.createOrUpdatePopup(),i}static get _defaultBorderStyle(){return $e(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:vh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Hd=new WeakMap,au=new WeakMap,Wd=new WeakMap,ml=new WeakMap,jg=new WeakMap,lu=new WeakMap,jl=new WeakSet,pA=async function(e,t,n){var l,h;const r=e.firstChild||e,i=r.id=`${ME}${t}`,o=await((l=u(this,jg))==null?void 0:l.getAriaAttributes(i));if(o)for(const[d,p]of o)r.setAttribute(d,p);n?n.at(-1).container.after(e):(this.div.append(e),(h=u(this,Hd))==null||h.moveElementInDOM(this.div,e,r,!1))},mA=function(){var t;if(!u(this,au))return;const e=this.div;for(const[n,r]of u(this,au)){const i=e.querySelector(`[data-annotation-id="${n}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r);const l=u(this,ml).get(n);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,i.id,r),l._hasNoCanvas=!1):l.canvas=r)}u(this,au).clear()},Gd);const Qv=/\r\n?|\n/g;var Js,Fg,cu,Qs,an,qN,KN,XN,E0,ea,k0,C0,YN,yA,JN;const kt=class kt extends xt{constructor(t){super({...t,name:"freeTextEditor"});k(this,an);k(this,Js,"");k(this,Fg,`${this.id}-editor`);k(this,cu,null);k(this,Qs);te(this,"_colorPicker",null);this.color=t.color||kt._defaultColor||xt._defaultLineColor,S(this,Qs,t.fontSize||kt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=kt.prototype,n=o=>o.isEmpty(),r=Il.TRANSLATE_SMALL,i=Il.TRANSLATE_BIG;return $e(this,"_keyboardManager",new py([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}]]))}static initialize(t,n){xt.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Ke.FREETEXT_SIZE:kt._defaultFontSize=n;break;case Ke.FREETEXT_COLOR:kt._defaultColor=n;break}}updateParams(t,n){switch(t){case Ke.FREETEXT_SIZE:P(this,an,qN).call(this,n);break;case Ke.FREETEXT_COLOR:P(this,an,KN).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ke.FREETEXT_SIZE,kt._defaultFontSize],[Ke.FREETEXT_COLOR,kt._defaultColor||xt._defaultLineColor]]}get propertiesToUpdate(){return[[Ke.FREETEXT_SIZE,u(this,Qs)],[Ke.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new ow(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Ke.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-kt._internalPadding*t,-(kt._internalPadding+u(this,Qs))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,cu,new AbortController);const t=this._uiManager.combinedSignal(u(this,cu));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Fg)),this._isDraggable=!0,(t=u(this,cu))==null||t.abort(),S(this,cu,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,Js),n=S(this,Js,P(this,an,XN).call(this).trimEnd());if(t===n)return;const r=i=>{if(S(this,Js,i),!i){this.remove();return}P(this,an,C0).call(this),this._uiManager.rebuild(this),P(this,an,E0).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),P(this,an,E0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){kt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Fg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${u(this,Qs)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[h,d]=this.getInitialTranslation();[h,d]=this.pageTranslationToScreen(h,d);const[p,m]=this.pageDimensions,[g,v]=this.pageTranslation;let b,x;switch(this.rotation){case 0:b=t+(l[0]-g)/p,x=n+this.height-(l[1]-v)/m;break;case 90:b=t+(l[0]-g)/p,x=n-(l[1]-v)/m,[h,d]=[d,-h];break;case 180:b=t-this.width+(l[0]-g)/p,x=n-(l[1]-v)/m,[h,d]=[-h,-d];break;case 270:b=t+(l[0]-g-this.height*m)/p,x=n+(l[1]-v-this.width*p)/m,[h,d]=[-d,h];break}this.setAt(b*i,x*o,h,d)}else this._moveAfterPaste(t,n);P(this,an,C0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var b,x,A;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=P(b=kt,ea,yA).call(b,n.getData("text")||"").replaceAll(Qv,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:h,startOffset:d}=l,p=[],m=[];if(h.nodeType===Node.TEXT_NODE){const E=h.parentElement;if(m.push(h.nodeValue.slice(d).replaceAll(Qv,"")),E!==this.editorDiv){let R=p;for(const C of this.editorDiv.childNodes){if(C===E){R=m;continue}R.push(P(x=kt,ea,k0).call(x,C))}}p.push(h.nodeValue.slice(0,d).replaceAll(Qv,""))}else if(h===this.editorDiv){let E=p,R=0;for(const C of this.editorDiv.childNodes)R++===d&&(E=m),E.push(P(A=kt,ea,k0).call(A,C))}S(this,Js,`${p.join(`
`)}${i}${m.join(`
`)}`),P(this,an,C0).call(this);const g=new Range;let v=Math.sumPrecise(p.map(E=>E.length));for(const{firstChild:E}of this.editorDiv.childNodes)if(E.nodeType===Node.TEXT_NODE){const R=E.nodeValue.length;if(v<=R){g.setStart(E,v),g.setEnd(E,v);break}v-=R}o.removeAllRanges(),o.addRange(g)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=kt._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,r){var l;let i=null;if(t instanceof zN){const{data:{defaultAppearanceData:{fontSize:h,fontColor:d},rect:p,rotation:m,id:g,popupRef:v,richText:b,contentsObj:x,creationDate:A,modificationDate:E},textContent:R,textPosition:C,parent:{page:{pageNumber:D}}}=t;if(!R||R.length===0)return null;i=t={annotationType:Ie.FREETEXT,color:Array.from(d),fontSize:h,value:R.join(`
`),position:C,pageIndex:D-1,rect:p.slice(0),rotation:m,annotationElementId:g,id:g,deleted:!1,popupRef:v,comment:(x==null?void 0:x.str)||null,richText:b,creationDate:A,modificationDate:E}}const o=await super.deserialize(t,n,r);return S(o,Qs,t.fontSize),o.color=ge.makeHexColor(...t.color),S(o,Js,P(l=kt,ea,yA).call(l,t.value)),o._initialData=i,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=xt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:n,fontSize:u(this,Qs),value:P(this,an,YN).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!P(this,an,JN).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:r}=n;r.fontSize=`calc(${u(this,Qs)}px * var(--total-scale-factor))`,r.color=this.color,n.replaceChildren();for(const i of u(this,Js).split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),n.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:u(this,Js)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Js=new WeakMap,Fg=new WeakMap,cu=new WeakMap,Qs=new WeakMap,an=new WeakSet,qN=function(t){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-u(this,Qs))*this.parentScale),S(this,Qs,i),P(this,an,E0).call(this)},r=u(this,Qs);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},KN=function(t){const n=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},XN=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(P(r=kt,ea,k0).call(r,i)),n=i);return t.join(`
`)},E0=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,l=o.style.display,h=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},ea=new WeakSet,k0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Qv,"")},C0=function(){if(this.editorDiv.replaceChildren(),!!u(this,Js))for(const t of u(this,Js).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},YN=function(){return u(this,Js).replaceAll(""," ")},yA=function(t){return t.replaceAll(" ","")},JN=function(t){const{value:n,fontSize:r,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((l,h)=>l!==i[h])||t.pageIndex!==o},k(kt,ea),te(kt,"_freeTextDefaultContent",""),te(kt,"_internalPadding",0),te(kt,"_defaultColor",null),te(kt,"_defaultFontSize",10),te(kt,"_type","freetext"),te(kt,"_editorType",Ie.FREETEXT);let gA=kt;class me{toSVGPath(){yt("Abstract method `toSVGPath` must be implemented.")}get box(){yt("Abstract getter `box` must be implemented.")}serialize(e,t){yt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,i,o){o||(o=new Float32Array(e.length));for(let l=0,h=e.length;l<h;l+=2)o[l]=t+e[l]*r,o[l+1]=n+e[l+1]*i;return o}static _rescaleAndSwap(e,t,n,r,i,o){o||(o=new Float32Array(e.length));for(let l=0,h=e.length;l<h;l+=2)o[l]=t+e[l+1]*r,o[l+1]=n+e[l]*i;return o}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)r[i]=t+e[i],r[i+1]=n+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,i){switch(i){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,i,o){return[(e+5*n)/6,(t+5*r)/6,(5*n+i)/6,(5*r+o)/6,(n+i)/2,(r+o)/2]}}te(me,"PRECISION",1e-4);var Zs,ri,qd,Kd,Ui,qe,uu,hu,Bg,$g,Xd,Yd,gl,Ug,kw,Cw,yn,Vp,QN,ZN,eI,tI,nI,sI;const yo=class yo{constructor({x:e,y:t},n,r,i,o,l=0){k(this,yn);k(this,Zs);k(this,ri,[]);k(this,qd);k(this,Kd);k(this,Ui,[]);k(this,qe,new Float32Array(18));k(this,uu);k(this,hu);k(this,Bg);k(this,$g);k(this,Xd);k(this,Yd);k(this,gl,[]);S(this,Zs,n),S(this,Yd,i*r),S(this,Kd,o),u(this,qe).set([NaN,NaN,NaN,NaN,e,t],6),S(this,qd,l),S(this,$g,u(yo,Ug)*r),S(this,Bg,u(yo,Cw)*r),S(this,Xd,r),u(this,gl).push(e,t)}isEmpty(){return isNaN(u(this,qe)[8])}add({x:e,y:t}){var W;S(this,uu,e),S(this,hu,t);const[n,r,i,o]=u(this,Zs);let[l,h,d,p]=u(this,qe).subarray(8,12);const m=e-d,g=t-p,v=Math.hypot(m,g);if(v<u(this,Bg))return!1;const b=v-u(this,$g),x=b/v,A=x*m,E=x*g;let R=l,C=h;l=d,h=p,d+=A,p+=E,(W=u(this,gl))==null||W.push(e,t);const D=-E/b,N=A/b,I=D*u(this,Yd),j=N*u(this,Yd);return u(this,qe).set(u(this,qe).subarray(2,8),0),u(this,qe).set([d+I,p+j],4),u(this,qe).set(u(this,qe).subarray(14,18),12),u(this,qe).set([d-I,p-j],16),isNaN(u(this,qe)[6])?(u(this,Ui).length===0&&(u(this,qe).set([l+I,h+j],2),u(this,Ui).push(NaN,NaN,NaN,NaN,(l+I-n)/i,(h+j-r)/o),u(this,qe).set([l-I,h-j],14),u(this,ri).push(NaN,NaN,NaN,NaN,(l-I-n)/i,(h-j-r)/o)),u(this,qe).set([R,C,l,h,d,p],6),!this.isEmpty()):(u(this,qe).set([R,C,l,h,d,p],6),Math.abs(Math.atan2(C-h,R-l)-Math.atan2(E,A))<Math.PI/2?([l,h,d,p]=u(this,qe).subarray(2,6),u(this,Ui).push(NaN,NaN,NaN,NaN,((l+d)/2-n)/i,((h+p)/2-r)/o),[l,h,R,C]=u(this,qe).subarray(14,18),u(this,ri).push(NaN,NaN,NaN,NaN,((R+l)/2-n)/i,((C+h)/2-r)/o),!0):([R,C,l,h,d,p]=u(this,qe).subarray(0,6),u(this,Ui).push(((R+5*l)/6-n)/i,((C+5*h)/6-r)/o,((5*l+d)/6-n)/i,((5*h+p)/6-r)/o,((l+d)/2-n)/i,((h+p)/2-r)/o),[d,p,l,h,R,C]=u(this,qe).subarray(12,18),u(this,ri).push(((R+5*l)/6-n)/i,((C+5*h)/6-r)/o,((5*l+d)/6-n)/i,((5*h+p)/6-r)/o,((l+d)/2-n)/i,((h+p)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Ui),t=u(this,ri);if(isNaN(u(this,qe)[6])&&!this.isEmpty())return P(this,yn,QN).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);P(this,yn,eI).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return P(this,yn,ZN).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,i,o){return new rI(e,t,n,r,i,o)}getOutlines(){var m;const e=u(this,Ui),t=u(this,ri),n=u(this,qe),[r,i,o,l]=u(this,Zs),h=new Float32Array((((m=u(this,gl))==null?void 0:m.length)??0)+2);for(let g=0,v=h.length-2;g<v;g+=2)h[g]=(u(this,gl)[g]-r)/o,h[g+1]=(u(this,gl)[g+1]-i)/l;if(h[h.length-2]=(u(this,uu)-r)/o,h[h.length-1]=(u(this,hu)-i)/l,isNaN(n[6])&&!this.isEmpty())return P(this,yn,tI).call(this,h);const d=new Float32Array(u(this,Ui).length+24+u(this,ri).length);let p=e.length;for(let g=0;g<p;g+=2){if(isNaN(e[g])){d[g]=d[g+1]=NaN;continue}d[g]=e[g],d[g+1]=e[g+1]}p=P(this,yn,sI).call(this,d,p);for(let g=t.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(t[g+v])){d[p]=d[p+1]=NaN,p+=2;continue}d[p]=t[g+v],d[p+1]=t[g+v+1],p+=2}return P(this,yn,nI).call(this,d,p),this.newFreeDrawOutline(d,h,u(this,Zs),u(this,Xd),u(this,qd),u(this,Kd))}};Zs=new WeakMap,ri=new WeakMap,qd=new WeakMap,Kd=new WeakMap,Ui=new WeakMap,qe=new WeakMap,uu=new WeakMap,hu=new WeakMap,Bg=new WeakMap,$g=new WeakMap,Xd=new WeakMap,Yd=new WeakMap,gl=new WeakMap,Ug=new WeakMap,kw=new WeakMap,Cw=new WeakMap,yn=new WeakSet,Vp=function(){const e=u(this,qe).subarray(4,6),t=u(this,qe).subarray(16,18),[n,r,i,o]=u(this,Zs);return[(u(this,uu)+(e[0]-t[0])/2-n)/i,(u(this,hu)+(e[1]-t[1])/2-r)/o,(u(this,uu)+(t[0]-e[0])/2-n)/i,(u(this,hu)+(t[1]-e[1])/2-r)/o]},QN=function(){const[e,t,n,r]=u(this,Zs),[i,o,l,h]=P(this,yn,Vp).call(this);return`M${(u(this,qe)[2]-e)/n} ${(u(this,qe)[3]-t)/r} L${(u(this,qe)[4]-e)/n} ${(u(this,qe)[5]-t)/r} L${i} ${o} L${l} ${h} L${(u(this,qe)[16]-e)/n} ${(u(this,qe)[17]-t)/r} L${(u(this,qe)[14]-e)/n} ${(u(this,qe)[15]-t)/r} Z`},ZN=function(e){const t=u(this,ri);e.push(`L${t[4]} ${t[5]} Z`)},eI=function(e){const[t,n,r,i]=u(this,Zs),o=u(this,qe).subarray(4,6),l=u(this,qe).subarray(16,18),[h,d,p,m]=P(this,yn,Vp).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-n)/i} L${h} ${d} L${p} ${m} L${(l[0]-t)/r} ${(l[1]-n)/i}`)},tI=function(e){const t=u(this,qe),[n,r,i,o]=u(this,Zs),[l,h,d,p]=P(this,yn,Vp).call(this),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-r)/o,NaN,NaN,NaN,NaN,l,h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-r)/o],0),this.newFreeDrawOutline(m,e,u(this,Zs),u(this,Xd),u(this,qd),u(this,Kd))},nI=function(e,t){const n=u(this,ri);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},sI=function(e,t){const n=u(this,qe).subarray(4,6),r=u(this,qe).subarray(16,18),[i,o,l,h]=u(this,Zs),[d,p,m,g]=P(this,yn,Vp).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/l,(n[1]-o)/h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,m,g,NaN,NaN,NaN,NaN,(r[0]-i)/l,(r[1]-o)/h],t),t+=24},k(yo,Ug,8),k(yo,kw,2),k(yo,Cw,u(yo,Ug)+u(yo,kw));let aw=yo;var Jd,du,Wo,Vg,er,zg,Zt,Tw,iI;class rI extends me{constructor(t,n,r,i,o,l){super();k(this,Tw);k(this,Jd);k(this,du,new Float32Array(4));k(this,Wo);k(this,Vg);k(this,er);k(this,zg);k(this,Zt);S(this,Zt,t),S(this,er,n),S(this,Jd,r),S(this,zg,i),S(this,Wo,o),S(this,Vg,l),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],P(this,Tw,iI).call(this,l);const[h,d,p,m]=u(this,du);for(let g=0,v=t.length;g<v;g+=2)t[g]=(t[g]-h)/p,t[g+1]=(t[g+1]-d)/m;for(let g=0,v=n.length;g<v;g+=2)n[g]=(n[g]-h)/p,n[g+1]=(n[g+1]-d)/m}toSVGPath(){const t=[`M${u(this,Zt)[4]} ${u(this,Zt)[5]}`];for(let n=6,r=u(this,Zt).length;n<r;n+=6){if(isNaN(u(this,Zt)[n])){t.push(`L${u(this,Zt)[n+4]} ${u(this,Zt)[n+5]}`);continue}t.push(`C${u(this,Zt)[n]} ${u(this,Zt)[n+1]} ${u(this,Zt)[n+2]} ${u(this,Zt)[n+3]} ${u(this,Zt)[n+4]} ${u(this,Zt)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,i],o){const l=r-t,h=i-n;let d,p;switch(o){case 0:d=me._rescale(u(this,Zt),t,i,l,-h),p=me._rescale(u(this,er),t,i,l,-h);break;case 90:d=me._rescaleAndSwap(u(this,Zt),t,n,l,h),p=me._rescaleAndSwap(u(this,er),t,n,l,h);break;case 180:d=me._rescale(u(this,Zt),r,n,-l,h),p=me._rescale(u(this,er),r,n,-l,h);break;case 270:d=me._rescaleAndSwap(u(this,Zt),r,i,-l,-h),p=me._rescaleAndSwap(u(this,er),r,i,-l,-h);break}return{outline:Array.from(d),points:[Array.from(p)]}}get box(){return u(this,du)}newOutliner(t,n,r,i,o,l=0){return new aw(t,n,r,i,o,l)}getNewOutline(t,n){const[r,i,o,l]=u(this,du),[h,d,p,m]=u(this,Jd),g=o*p,v=l*m,b=r*p+h,x=i*m+d,A=this.newOutliner({x:u(this,er)[0]*g+b,y:u(this,er)[1]*v+x},u(this,Jd),u(this,zg),t,u(this,Vg),n??u(this,Wo));for(let E=2;E<u(this,er).length;E+=2)A.add({x:u(this,er)[E]*g+b,y:u(this,er)[E+1]*v+x});return A.getOutlines()}}Jd=new WeakMap,du=new WeakMap,Wo=new WeakMap,Vg=new WeakMap,er=new WeakMap,zg=new WeakMap,Zt=new WeakMap,Tw=new WeakSet,iI=function(t){const n=u(this,Zt);let r=n[4],i=n[5];const o=[r,i,r,i];let l=r,h=i,d=r,p=i;const m=t?Math.max:Math.min,g=new Float32Array(4);for(let b=6,x=n.length;b<x;b+=6){const A=n[b+4],E=n[b+5];isNaN(n[b])?(ge.pointBoundingBox(A,E,o),h>E?(l=A,h=E):h===E&&(l=m(l,A)),p<E?(d=A,p=E):p===E&&(d=m(d,A))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,ge.bezierBoundingBox(r,i,...n.slice(b,b+6),g),ge.rectBoundingBox(g[0],g[1],g[2],g[3],o),h>g[1]?(l=g[0],h=g[1]):h===g[1]&&(l=m(l,g[0])),p<g[3]?(d=g[2],p=g[3]):p===g[3]&&(d=m(d,g[2]))),r=A,i=E}const v=u(this,du);v[0]=o[0]-u(this,Wo),v[1]=o[1]-u(this,Wo),v[2]=o[2]-o[0]+2*u(this,Wo),v[3]=o[3]-o[1]+2*u(this,Wo),this.firstPoint=[l,h],this.lastPoint=[d,p]};var Hg,Wg,Gg,yl,ii,gs,oI,T0,aI,lI,wA;class vA{constructor(e,t=0,n=0,r=!0){k(this,gs);k(this,Hg);k(this,Wg);k(this,Gg);k(this,yl,[]);k(this,ii,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x,y:A,width:E,height:R}of e){const C=Math.floor((x-t)/o)*o,D=Math.ceil((x+E+t)/o)*o,N=Math.floor((A-t)/o)*o,I=Math.ceil((A+R+t)/o)*o,j=[C,N,I,!0],F=[D,N,I,!1];u(this,yl).push(j,F),ge.rectBoundingBox(C,N,D,I,i)}const l=i[2]-i[0]+2*n,h=i[3]-i[1]+2*n,d=i[0]-n,p=i[1]-n;let m=r?-1/0:1/0,g=1/0;const v=u(this,yl).at(r?-1:-2),b=[v[0],v[2]];for(const x of u(this,yl)){const[A,E,R,C]=x;!C&&r?E<g?(g=E,m=A):E===g&&(m=Math.max(m,A)):C&&!r&&(E<g?(g=E,m=A):E===g&&(m=Math.min(m,A))),x[0]=(A-d)/l,x[1]=(E-p)/h,x[2]=(R-p)/h}S(this,Hg,new Float32Array([d,p,l,h])),S(this,Wg,[m,g]),S(this,Gg,b)}getOutlines(){u(this,yl).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of u(this,yl))t[3]?(e.push(...P(this,gs,wA).call(this,t)),P(this,gs,aI).call(this,t)):(P(this,gs,lI).call(this,t),e.push(...P(this,gs,wA).call(this,t)));return P(this,gs,oI).call(this,e)}}Hg=new WeakMap,Wg=new WeakMap,Gg=new WeakMap,yl=new WeakMap,ii=new WeakMap,gs=new WeakSet,oI=function(e){const t=[],n=new Set;for(const o of e){const[l,h,d]=o;t.push([l,h,o],[l,d,o])}t.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=t.length;o<l;o+=2){const h=t[o][2],d=t[o+1][2];h.push(d),d.push(h),n.add(h),n.add(d)}const r=[];let i;for(;n.size>0;){const o=n.values().next().value;let[l,h,d,p,m]=o;n.delete(o);let g=l,v=h;for(i=[l,d],r.push(i);;){let b;if(n.has(p))b=p;else if(n.has(m))b=m;else break;n.delete(b),[l,h,d,p,m]=b,g!==l&&(i.push(g,v,l,v===h?h:d),g=l),v=v===h?d:h}i.push(g,v)}return new K6(r,u(this,Hg),u(this,Wg),u(this,Gg))},T0=function(e){const t=u(this,ii);let n=0,r=t.length-1;for(;n<=r;){const i=n+r>>1,o=t[i][0];if(o===e)return i;o<e?n=i+1:r=i-1}return r+1},aI=function([,e,t]){const n=P(this,gs,T0).call(this,e);u(this,ii).splice(n,0,[e,t])},lI=function([,e,t]){const n=P(this,gs,T0).call(this,e);for(let r=n;r<u(this,ii).length;r++){const[i,o]=u(this,ii)[r];if(i!==e)break;if(i===e&&o===t){u(this,ii).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[i,o]=u(this,ii)[r];if(i!==e)break;if(i===e&&o===t){u(this,ii).splice(r,1);return}}},wA=function(e){const[t,n,r]=e,i=[[t,n,r]],o=P(this,gs,T0).call(this,r);for(let l=0;l<o;l++){const[h,d]=u(this,ii)[l];for(let p=0,m=i.length;p<m;p++){const[,g,v]=i[p];if(!(d<=g||v<=h)){if(g>=h){if(v>d)i[p][1]=d;else{if(m===1)return[];i.splice(p,1),p--,m--}continue}i[p][2]=h,v>d&&i.push([t,d,v])}}}return i};var qg,Qd;class K6 extends me{constructor(t,n,r,i){super();k(this,qg);k(this,Qd);S(this,Qd,t),S(this,qg,n),this.firstPoint=r,this.lastPoint=i}toSVGPath(){const t=[];for(const n of u(this,Qd)){let[r,i]=n;t.push(`M${r} ${i}`);for(let o=2;o<n.length;o+=2){const l=n[o],h=n[o+1];l===r?(t.push(`V${h}`),i=h):h===i&&(t.push(`H${l}`),r=l)}t.push("Z")}return t.join(" ")}serialize([t,n,r,i],o){const l=[],h=r-t,d=i-n;for(const p of u(this,Qd)){const m=new Array(p.length);for(let g=0;g<p.length;g+=2)m[g]=t+p[g]*h,m[g+1]=i-p[g+1]*d;l.push(m)}return l}get box(){return u(this,qg)}get classNamesForOutlining(){return["highlightOutline"]}}qg=new WeakMap,Qd=new WeakMap;class bA extends aw{newFreeDrawOutline(e,t,n,r,i,o){return new X6(e,t,n,r,i,o)}}class X6 extends rI{newOutliner(e,t,n,r,i,o=0){return new bA(e,t,n,r,i,o)}}var Zd,Kg,Go,fu,Xg,Ls,Yg,Jg,pu,tr,nr,Bn,ef,tf,ts,nf,Lr,Qg,Ue,xA,P0,cI,uI,hI,SA,ac,Mr,Ah,dI,R0,L0,fI,pI,mI,gI,yI;const tt=class tt extends xt{constructor(t){super({...t,name:"highlightEditor"});k(this,Ue);k(this,Zd,null);k(this,Kg,0);k(this,Go);k(this,fu,null);k(this,Xg,null);k(this,Ls,null);k(this,Yg,null);k(this,Jg,0);k(this,pu,null);k(this,tr,null);k(this,nr,null);k(this,Bn,!1);k(this,ef,null);k(this,tf,null);k(this,ts,null);k(this,nf,"");k(this,Lr);k(this,Qg,"");this.color=t.color||tt._defaultColor,S(this,Lr,t.thickness||tt._defaultThickness),this.opacity=t.opacity||tt._defaultOpacity,S(this,Go,t.boxes||null),S(this,Qg,t.methodOfCreation||""),S(this,nf,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(S(this,Bn,!0),P(this,Ue,P0).call(this,t),P(this,Ue,ac).call(this)):u(this,Go)&&(S(this,Zd,t.anchorNode),S(this,Kg,t.anchorOffset),S(this,Yg,t.focusNode),S(this,Jg,t.focusOffset),P(this,Ue,xA).call(this),P(this,Ue,ac).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=tt.prototype;return $e(this,"_keyboardManager",new py([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,Bn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,Lr),methodOfCreation:u(this,Qg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;xt.initialize(t,n),tt._defaultColor||(tt._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Ke.HIGHLIGHT_COLOR:tt._defaultColor=n;break;case Ke.HIGHLIGHT_THICKNESS:tt._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return u(this,tf)}get commentButtonPosition(){return u(this,ef)}updateParams(t,n){switch(t){case Ke.HIGHLIGHT_COLOR:P(this,Ue,cI).call(this,n);break;case Ke.HIGHLIGHT_THICKNESS:P(this,Ue,uI).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ke.HIGHLIGHT_COLOR,tt._defaultColor],[Ke.HIGHLIGHT_THICKNESS,tt._defaultThickness]]}get propertiesToUpdate(){return[[Ke.HIGHLIGHT_COLOR,this.color||tt._defaultColor],[Ke.HIGHLIGHT_THICKNESS,u(this,Lr)||tt._defaultThickness],[Ke.HIGHLIGHT_FREE,u(this,Bn)]]}onUpdatedColor(){var t,n;(t=this.parent)==null||t.drawLayer.updateProperties(u(this,nr),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=u(this,Xg))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",S(this,Xg,new bm({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(P(this,Ue,L0).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,P(this,Ue,L0).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){P(this,Ue,SA).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,Ue,ac).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?P(this,Ue,SA).call(this):t&&(P(this,Ue,ac).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var i,o,l;const{drawLayer:n}=this.parent;let r;u(this,Bn)?(t=(t-this.rotation+360)%360,r=P(i=tt,Mr,Ah).call(i,u(this,tr).box,t)):r=P(o=tt,Mr,Ah).call(o,[this.x,this.y,this.width,this.height],t),n.updateProperties(u(this,nr),{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(u(this,ts),{bbox:P(l=tt,Mr,Ah).call(l,u(this,Ls).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,nf)&&(t.setAttribute("aria-label",u(this,nf)),t.setAttribute("role","mark")),u(this,Bn)?t.classList.add("free"):this.div.addEventListener("keydown",P(this,Ue,dI).bind(this),{signal:this._uiManager._signal});const n=S(this,pu,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=u(this,fu),this.setDims(this.width,this.height),jM(this,u(this,pu),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,ts),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,ts),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:P(this,Ue,R0).call(this,!0);break;case 1:case 3:P(this,Ue,R0).call(this,!1);break}}select(){var t;super.select(),u(this,ts)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,ts),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,ts)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,ts),{rootClass:{selected:!1}}),u(this,Bn)||P(this,Ue,R0).call(this,!1))}get _mustFixPosition(){return!u(this,Bn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,nr),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,ts),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:r,x:i,y:o}){const{x:l,y:h,width:d,height:p}=r.getBoundingClientRect(),m=new AbortController,g=t.combinedSignal(m),v=b=>{m.abort(),P(this,Mr,gI).call(this,t,b)};window.addEventListener("blur",v,{signal:g}),window.addEventListener("pointerup",v,{signal:g}),window.addEventListener("pointerdown",jt,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",dr,{signal:g}),r.addEventListener("pointermove",P(this,Mr,mI).bind(this,t),{signal:g}),this._freeHighlight=new bA({x:i,y:o},[l,h,d,p],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,r){var x,A,E,R;let i=null;if(t instanceof WN){const{data:{quadPoints:C,rect:D,rotation:N,id:I,color:j,opacity:F,popupRef:W,richText:K,contentsObj:J,creationDate:ie,modificationDate:ce},parent:{page:{pageNumber:Y}}}=t;i=t={annotationType:Ie.HIGHLIGHT,color:Array.from(j),opacity:F,quadPoints:C,boxes:null,pageIndex:Y-1,rect:D.slice(0),rotation:N,annotationElementId:I,id:I,deleted:!1,popupRef:W,richText:K,comment:(J==null?void 0:J.str)||null,creationDate:ie,modificationDate:ce}}else if(t instanceof VE){const{data:{inkLists:C,rect:D,rotation:N,id:I,color:j,borderStyle:{rawWidth:F},popupRef:W,richText:K,contentsObj:J,creationDate:ie,modificationDate:ce},parent:{page:{pageNumber:Y}}}=t;i=t={annotationType:Ie.HIGHLIGHT,color:Array.from(j),thickness:F,inkLists:C,boxes:null,pageIndex:Y-1,rect:D.slice(0),rotation:N,annotationElementId:I,id:I,deleted:!1,popupRef:W,richText:K,comment:(J==null?void 0:J.str)||null,creationDate:ie,modificationDate:ce}}const{color:o,quadPoints:l,inkLists:h,opacity:d}=t,p=await super.deserialize(t,n,r);p.color=ge.makeHexColor(...o),p.opacity=d||1,h&&S(p,Lr,t.thickness),p._initialData=i,t.comment&&p.setCommentData(t);const[m,g]=p.pageDimensions,[v,b]=p.pageTranslation;if(l){const C=S(p,Go,[]);for(let D=0;D<l.length;D+=8)C.push({x:(l[D]-v)/m,y:1-(l[D+1]-b)/g,width:(l[D+2]-l[D])/m,height:(l[D+1]-l[D+5])/g});P(x=p,Ue,xA).call(x),P(A=p,Ue,ac).call(A),p.rotate(p.rotation)}else if(h){S(p,Bn,!0);const C=h[0],D={x:C[0]-v,y:g-(C[1]-b)},N=new bA(D,[0,0,m,g],1,u(p,Lr)/2,!0,.001);for(let F=0,W=C.length;F<W;F+=2)D.x=C[F]-v,D.y=g-(C[F+1]-b),N.add(D);const{id:I,clipPathId:j}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:N.toSVGPath()}},!0,!0);P(E=p,Ue,P0).call(E,{highlightOutlines:N.getOutlines(),highlightId:I,clipPathId:j}),P(R=p,Ue,ac).call(R),p.rotate(p.parentRotation)}return p}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=xt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:n,opacity:this.opacity,thickness:u(this,Lr),quadPoints:P(this,Ue,fI).call(this),outlines:P(this,Ue,pI).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!P(this,Ue,yI).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Zd=new WeakMap,Kg=new WeakMap,Go=new WeakMap,fu=new WeakMap,Xg=new WeakMap,Ls=new WeakMap,Yg=new WeakMap,Jg=new WeakMap,pu=new WeakMap,tr=new WeakMap,nr=new WeakMap,Bn=new WeakMap,ef=new WeakMap,tf=new WeakMap,ts=new WeakMap,nf=new WeakMap,Lr=new WeakMap,Qg=new WeakMap,Ue=new WeakSet,xA=function(){const t=new vA(u(this,Go),.001);S(this,tr,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,tr).box;const n=new vA(u(this,Go),.0025,.001,this._uiManager.direction==="ltr");S(this,Ls,n.getOutlines());const{firstPoint:r}=u(this,tr);S(this,ef,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:i}=u(this,Ls);S(this,tf,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},P0=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var g,v;if(S(this,tr,t),S(this,Ls,t.getNewOutline(u(this,Lr)/2+1.5,.0025)),n>=0)S(this,nr,n),S(this,fu,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),S(this,ts,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,Ls).box,path:{d:u(this,Ls).toSVGPath()}},!0));else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,nr),{bbox:P(g=tt,Mr,Ah).call(g,u(this,tr).box,(b-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,ts),{bbox:P(v=tt,Mr,Ah).call(v,u(this,Ls).box,b),path:{d:u(this,Ls).toSVGPath()}})}const[o,l,h,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=h,this.height=d;break;case 90:{const[b,x]=this.parentDimensions;this.x=l,this.y=1-o,this.width=h*x/b,this.height=d*b/x;break}case 180:this.x=1-o,this.y=1-l,this.width=h,this.height=d;break;case 270:{const[b,x]=this.parentDimensions;this.x=1-l,this.y=o,this.width=h*x/b,this.height=d*b/x;break}}const{firstPoint:p}=t;S(this,ef,[(p[0]-o)/h,(p[1]-l)/d]);const{lastPoint:m}=u(this,Ls);S(this,tf,[(m[0]-o)/h,(m[1]-l)/d])},cI=function(t){const n=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:n.bind(this,t,tt._defaultOpacity),undo:n.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},uI=function(t){const n=u(this,Lr),r=i=>{S(this,Lr,i),P(this,Ue,hI).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},hI=function(t){u(this,Bn)&&(P(this,Ue,P0).call(this,{highlightOutlines:u(this,tr).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},SA=function(){u(this,nr)===null||!this.parent||(this.parent.drawLayer.remove(u(this,nr)),S(this,nr,null),this.parent.drawLayer.remove(u(this,ts)),S(this,ts,null))},ac=function(t=this.parent){u(this,nr)===null&&({id:un(this,nr)._,clipPathId:un(this,fu)._}=t.drawLayer.draw({bbox:u(this,tr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:u(this,Bn)},path:{d:u(this,tr).toSVGPath()}},!1,!0),S(this,ts,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,Bn)},bbox:u(this,Ls).box,path:{d:u(this,Ls).toSVGPath()}},u(this,Bn))),u(this,pu)&&(u(this,pu).style.clipPath=u(this,fu)))},Mr=new WeakSet,Ah=function([t,n,r,i],o){switch(o){case 90:return[1-n-i,t,i,r];case 180:return[1-t-r,1-n-i,r,i];case 270:return[n,1-t-r,i,r]}return[t,n,r,i]},dI=function(t){tt._keyboardManager.exec(this,t)},R0=function(t){if(!u(this,Zd))return;const n=window.getSelection();t?n.setPosition(u(this,Zd),u(this,Kg)):n.setPosition(u(this,Yg),u(this,Jg))},L0=function(){return u(this,Bn)?this.rotation:0},fI=function(){if(u(this,Bn))return null;const[t,n]=this.pageDimensions,[r,i]=this.pageTranslation,o=u(this,Go),l=new Float32Array(o.length*8);let h=0;for(const{x:d,y:p,width:m,height:g}of o){const v=d*t+r,b=(1-p)*n+i;l[h]=l[h+4]=v,l[h+1]=l[h+3]=b,l[h+2]=l[h+6]=v+m*t,l[h+5]=l[h+7]=b-g*n,h+=8}return l},pI=function(t){return u(this,tr).serialize(t,P(this,Ue,L0).call(this))},mI=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},gI=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},yI=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==n[i])},k(tt,Mr),te(tt,"_defaultColor",null),te(tt,"_defaultOpacity",1),te(tt,"_defaultThickness",12),te(tt,"_type","highlight"),te(tt,"_editorType",Ie.HIGHLIGHT),te(tt,"_freeHighlightId",-1),te(tt,"_freeHighlight",null),te(tt,"_freeHighlightClipId","");let lw=tt;var mu;class vI{constructor(){k(this,mu,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){u(this,mu)[e]=t}toSVGProperties(){const e=u(this,mu);return S(this,mu,Object.create(null)),{root:e}}reset(){S(this,mu,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){yt("Not implemented")}}mu=new WeakMap;var sr,sf,_n,gu,yu,vl,wl,bl,vu,Je,_A,AA,EA,zp,wI,D0,Hp,Eh;const ve=class ve extends xt{constructor(t){super(t);k(this,Je);k(this,sr,null);k(this,sf);te(this,"_colorPicker",null);te(this,"_drawId",null);S(this,sf,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(P(this,Je,_A).call(this,t),P(this,Je,zp).call(this))}static _mergeSVGProperties(t,n){const r=new Set(Object.keys(t));for(const[i,o]of Object.entries(n))r.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){yt("Not implemented")}static get typesMap(){yt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(u(ve,_n).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,n[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,n[i]]);return t}_updateProperty(t,n,r){const i=this._drawingOptions,o=i[n],l=h=>{var p;i.updateProperty(n,h);const d=u(this,sr).updateProperty(n,h);d&&P(this,Je,Hp).call(this,d),(p=this.parent)==null||p.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,r),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ve._mergeSVGProperties(u(this,sr).getPathResizingSVGProperties(P(this,Je,D0).call(this)),{bbox:P(this,Je,Eh).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ve._mergeSVGProperties(u(this,sr).getPathResizedSVGProperties(P(this,Je,D0).call(this)),{bbox:P(this,Je,Eh).call(this)}))}_onTranslating(t,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:P(this,Je,Eh).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ve._mergeSVGProperties(u(this,sr).getPathTranslatedSVGProperties(P(this,Je,D0).call(this),this.parentDimensions),{bbox:P(this,Je,Eh).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,sf)&&(S(this,sf,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){P(this,Je,EA).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,Je,zp).call(this),P(this,Je,Hp).call(this,u(this,sr).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),P(this,Je,EA).call(this)):t&&(this._uiManager.addShouldRescale(this),P(this,Je,zp).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ve._mergeSVGProperties({bbox:P(this,Je,Eh).call(this)},u(this,sr).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&P(this,Je,Hp).call(this,u(this,sr).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),r}static createDrawerInstance(t,n,r,i,o){yt("Not implemented")}static startDrawing(t,n,r,i){var A;const{target:o,offsetX:l,offsetY:h,pointerId:d,pointerType:p}=i;if(u(ve,wl)&&u(ve,wl)!==p)return;const{viewport:{rotation:m}}=t,{width:g,height:v}=o.getBoundingClientRect(),b=S(ve,gu,new AbortController),x=t.combinedSignal(b);if(u(ve,vl)||S(ve,vl,d),u(ve,wl)??S(ve,wl,p),window.addEventListener("pointerup",E=>{var R;u(ve,vl)===E.pointerId?this._endDraw(E):(R=u(ve,bl))==null||R.delete(E.pointerId)},{signal:x}),window.addEventListener("pointercancel",E=>{var R;u(ve,vl)===E.pointerId?this._currentParent.endDrawingSession():(R=u(ve,bl))==null||R.delete(E.pointerId)},{signal:x}),window.addEventListener("pointerdown",E=>{u(ve,wl)===E.pointerType&&((u(ve,bl)||S(ve,bl,new Set)).add(E.pointerId),u(ve,_n).isCancellable()&&(u(ve,_n).removeLastElement(),u(ve,_n).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",dr,{signal:x}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),o.addEventListener("touchmove",E=>{E.timeStamp===u(ve,vu)&&jt(E)},{signal:x}),t.toggleDrawing(),(A=n._editorUndoBar)==null||A.hide(),u(ve,_n)){t.drawLayer.updateProperties(this._currentDrawId,u(ve,_n).startNew(l,h,g,v,m));return}n.updateUIForDefaultProperties(this),S(ve,_n,this.createDrawerInstance(l,h,g,v,m)),S(ve,yu,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(ve,yu).toSVGProperties(),u(ve,_n).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(S(ve,vu,-1),!u(ve,_n))return;const{offsetX:n,offsetY:r,pointerId:i}=t;if(u(ve,vl)===i){if(((o=u(ve,bl))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(ve,_n).add(n,r)),S(ve,vu,t.timeStamp),jt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,S(ve,_n,null),S(ve,yu,null),S(ve,wl,null),S(ve,vu,NaN)),u(ve,gu)&&(u(ve,gu).abort(),S(ve,gu,null),S(ve,vl,NaN),S(ve,bl,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,u(ve,_n).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=u(ve,_n),i=this._currentDrawId,o=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(i,r.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:Ke.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Ke.DRAW_STEP),!u(ve,_n).isEmpty()){const{pageDimensions:[r,i],scale:o}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(ve,_n).getOutlines(r*o,i*o,o,this._INNER_MARGIN),drawingOptions:u(ve,yu),mustBeCommitted:!t});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,i,o,l){yt("Not implemented")}static async deserialize(t,n,r){var m,g;const{rawDims:{pageWidth:i,pageHeight:o,pageX:l,pageY:h}}=n.viewport,d=this.deserializeDraw(l,h,i,o,this._INNER_MARGIN,t),p=await super.deserialize(t,n,r);return p.createDrawingOptions(t),P(m=p,Je,_A).call(m,{drawOutlines:d}),P(g=p,Je,zp).call(g),p.onScaleChanging(),p.rotate(),p}serializeDraw(t){const[n,r]=this.pageTranslation,[i,o]=this.pageDimensions;return u(this,sr).serialize([n,r,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};sr=new WeakMap,sf=new WeakMap,_n=new WeakMap,gu=new WeakMap,yu=new WeakMap,vl=new WeakMap,wl=new WeakMap,bl=new WeakMap,vu=new WeakMap,Je=new WeakSet,_A=function({drawOutlines:t,drawId:n,drawingOptions:r}){S(this,sr,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=P(this,Je,AA).call(this,t,this.parent),P(this,Je,Hp).call(this,t.box)},AA=function(t,n){const{id:r}=n.drawLayer.draw(ve._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},EA=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},zp=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=P(this,Je,AA).call(this,u(this,sr),t)}},wI=function([t,n,r,i]){const{parentDimensions:[o,l],rotation:h}=this;switch(h){case 90:return[n,1-t,r*(l/o),i*(o/l)];case 180:return[1-t,1-n,r,i];case 270:return[1-n,t,r*(l/o),i*(o/l)];default:return[t,n,r,i]}},D0=function(){const{x:t,y:n,width:r,height:i,parentDimensions:[o,l],rotation:h}=this;switch(h){case 90:return[1-n,t,r*(o/l),i*(l/o)];case 180:return[1-t,1-n,r,i];case 270:return[n,1-t,r*(o/l),i*(l/o)];default:return[t,n,r,i]}},Hp=function(t){[this.x,this.y,this.width,this.height]=P(this,Je,wI).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Eh=function(){const{x:t,y:n,width:r,height:i,rotation:o,parentRotation:l,parentDimensions:[h,d]}=this;switch((o*4+l)/90){case 1:return[1-n-i,t,i,r];case 2:return[1-t-r,1-n-i,r,i];case 3:return[n,1-t-r,i,r];case 4:return[t,n-r*(h/d),i*(d/h),r*(h/d)];case 5:return[1-n,t,r*(h/d),i*(d/h)];case 6:return[1-t-i*(d/h),1-n,i*(d/h),r*(h/d)];case 7:return[n-r*(h/d),1-t-i*(d/h),r*(h/d),i*(d/h)];case 8:return[t-r,n-i,r,i];case 9:return[1-n,t-r,i,r];case 10:return[1-t,1-n,r,i];case 11:return[n-i,1-t,i,r];case 12:return[t-i*(d/h),n,i*(d/h),r*(h/d)];case 13:return[1-n-r*(h/d),t-i*(d/h),r*(h/d),i*(d/h)];case 14:return[1-t,1-n-r*(h/d),i*(d/h),r*(h/d)];case 15:return[n,1-t,r*(h/d),i*(d/h)];default:return[t,n,r,i]}},te(ve,"_currentDrawId",-1),te(ve,"_currentParent",null),k(ve,_n,null),k(ve,gu,null),k(ve,yu,null),k(ve,vl,NaN),k(ve,wl,null),k(ve,bl,null),k(ve,vu,NaN),te(ve,"_INNER_MARGIN",3);let cw=ve;var Vi,An,En,wu,rf,cs,$n,Dr,bu,xu,Su,of,M0;class Y6{constructor(e,t,n,r,i,o){k(this,of);k(this,Vi,new Float64Array(6));k(this,An);k(this,En);k(this,wu);k(this,rf);k(this,cs);k(this,$n,"");k(this,Dr,0);k(this,bu,new gy);k(this,xu);k(this,Su);S(this,xu,n),S(this,Su,r),S(this,wu,i),S(this,rf,o),[e,t]=P(this,of,M0).call(this,e,t);const l=S(this,An,[NaN,NaN,NaN,NaN,e,t]);S(this,cs,[e,t]),S(this,En,[{line:l,points:u(this,cs)}]),u(this,Vi).set(l,0)}updateProperty(e,t){e==="stroke-width"&&S(this,rf,t)}isEmpty(){return!u(this,En)||u(this,En).length===0}isCancellable(){return u(this,cs).length<=10}add(e,t){[e,t]=P(this,of,M0).call(this,e,t);const[n,r,i,o]=u(this,Vi).subarray(2,6),l=e-i,h=t-o;return Math.hypot(u(this,xu)*l,u(this,Su)*h)<=2?null:(u(this,cs).push(e,t),isNaN(n)?(u(this,Vi).set([i,o,e,t],2),u(this,An).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,Vi)[0])&&u(this,An).splice(6,6),u(this,Vi).set([n,r,i,o,e,t],0),u(this,An).push(...me.createBezierPoints(n,r,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(u(this,cs).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,i){S(this,xu,n),S(this,Su,r),S(this,wu,i),[e,t]=P(this,of,M0).call(this,e,t);const o=S(this,An,[NaN,NaN,NaN,NaN,e,t]);S(this,cs,[e,t]);const l=u(this,En).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),u(this,En).push({line:o,points:u(this,cs)}),u(this,Vi).set(o,0),S(this,Dr,0),this.toSVGPath(),null}getLastElement(){return u(this,En).at(-1)}setLastElement(e){return u(this,En)?(u(this,En).push(e),S(this,An,e.line),S(this,cs,e.points),S(this,Dr,0),{path:{d:this.toSVGPath()}}):u(this,bu).setLastElement(e)}removeLastElement(){if(!u(this,En))return u(this,bu).removeLastElement();u(this,En).pop(),S(this,$n,"");for(let e=0,t=u(this,En).length;e<t;e++){const{line:n,points:r}=u(this,En)[e];S(this,An,n),S(this,cs,r),S(this,Dr,0),this.toSVGPath()}return{path:{d:u(this,$n)}}}toSVGPath(){const e=me.svgRound(u(this,An)[4]),t=me.svgRound(u(this,An)[5]);if(u(this,cs).length===2)return S(this,$n,`${u(this,$n)} M ${e} ${t} Z`),u(this,$n);if(u(this,cs).length<=6){const r=u(this,$n).lastIndexOf("M");S(this,$n,`${u(this,$n).slice(0,r)} M ${e} ${t}`),S(this,Dr,6)}if(u(this,cs).length===4){const r=me.svgRound(u(this,An)[10]),i=me.svgRound(u(this,An)[11]);return S(this,$n,`${u(this,$n)} L ${r} ${i}`),S(this,Dr,12),u(this,$n)}const n=[];u(this,Dr)===0&&(n.push(`M ${e} ${t}`),S(this,Dr,6));for(let r=u(this,Dr),i=u(this,An).length;r<i;r+=6){const[o,l,h,d,p,m]=u(this,An).slice(r,r+6).map(me.svgRound);n.push(`C${o} ${l} ${h} ${d} ${p} ${m}`)}return S(this,$n,u(this,$n)+n.join(" ")),S(this,Dr,u(this,An).length),u(this,$n)}getOutlines(e,t,n,r){const i=u(this,En).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),u(this,bu).build(u(this,En),e,t,n,u(this,wu),u(this,rf),r),S(this,Vi,null),S(this,An,null),S(this,En,null),S(this,$n,null),u(this,bu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Vi=new WeakMap,An=new WeakMap,En=new WeakMap,wu=new WeakMap,rf=new WeakMap,cs=new WeakMap,$n=new WeakMap,Dr=new WeakMap,bu=new WeakMap,xu=new WeakMap,Su=new WeakMap,of=new WeakSet,M0=function(e,t){return me._normalizePoint(e,t,u(this,xu),u(this,Su),u(this,wu))};var us,Zg,ey,rr,zi,Hi,af,lf,_u,zn,po,bI,xI,SI;class gy extends me{constructor(){super(...arguments);k(this,zn);k(this,us);k(this,Zg,0);k(this,ey);k(this,rr);k(this,zi);k(this,Hi);k(this,af);k(this,lf);k(this,_u)}build(t,n,r,i,o,l,h){S(this,zi,n),S(this,Hi,r),S(this,af,i),S(this,lf,o),S(this,_u,l),S(this,ey,h??0),S(this,rr,t),P(this,zn,xI).call(this)}get thickness(){return u(this,_u)}setLastElement(t){return u(this,rr).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,rr).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of u(this,rr)){if(t.push(`M${me.svgRound(n[4])} ${me.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${me.svgRound(n[10])} ${me.svgRound(n[11])}`);continue}for(let r=6,i=n.length;r<i;r+=6){const[o,l,h,d,p,m]=n.subarray(r,r+6).map(me.svgRound);t.push(`C${o} ${l} ${h} ${d} ${p} ${m}`)}}return t.join("")}serialize([t,n,r,i],o){const l=[],h=[],[d,p,m,g]=P(this,zn,bI).call(this);let v,b,x,A,E,R,C,D,N;switch(u(this,lf)){case 0:N=me._rescale,v=t,b=n+i,x=r,A=-i,E=t+d*r,R=n+(1-p-g)*i,C=t+(d+m)*r,D=n+(1-p)*i;break;case 90:N=me._rescaleAndSwap,v=t,b=n,x=r,A=i,E=t+p*r,R=n+d*i,C=t+(p+g)*r,D=n+(d+m)*i;break;case 180:N=me._rescale,v=t+r,b=n,x=-r,A=i,E=t+(1-d-m)*r,R=n+p*i,C=t+(1-d)*r,D=n+(p+g)*i;break;case 270:N=me._rescaleAndSwap,v=t+r,b=n+i,x=-r,A=-i,E=t+(1-p-g)*r,R=n+(1-d-m)*i,C=t+(1-p)*r,D=n+(1-d)*i;break}for(const{line:I,points:j}of u(this,rr))l.push(N(I,v,b,x,A,o?new Array(I.length):null)),h.push(N(j,v,b,x,A,o?new Array(j.length):null));return{lines:l,points:h,rect:[E,R,C,D]}}static deserialize(t,n,r,i,o,{paths:{lines:l,points:h},rotation:d,thickness:p}){const m=[];let g,v,b,x,A;switch(d){case 0:A=me._rescale,g=-t/r,v=n/i+1,b=1/r,x=-1/i;break;case 90:A=me._rescaleAndSwap,g=-n/i,v=-t/r,b=1/i,x=1/r;break;case 180:A=me._rescale,g=t/r+1,v=-n/i,b=-1/r,x=1/i;break;case 270:A=me._rescaleAndSwap,g=n/i+1,v=t/r+1,b=-1/i,x=-1/r;break}if(!l){l=[];for(const R of h){const C=R.length;if(C===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,R[0],R[1]]));continue}if(C===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,R[0],R[1],NaN,NaN,NaN,NaN,R[2],R[3]]));continue}const D=new Float32Array(3*(C-2));l.push(D);let[N,I,j,F]=R.subarray(0,4);D.set([NaN,NaN,NaN,NaN,N,I],0);for(let W=4;W<C;W+=2){const K=R[W],J=R[W+1];D.set(me.createBezierPoints(N,I,j,F,K,J),(W-2)*3),[N,I,j,F]=[j,F,K,J]}}}for(let R=0,C=l.length;R<C;R++)m.push({line:A(l[R].map(D=>D??NaN),g,v,b,x),points:A(h[R].map(D=>D??NaN),g,v,b,x)});const E=new this.prototype.constructor;return E.build(m,r,i,1,d,p,o),E}get box(){return u(this,us)}updateProperty(t,n){return t==="stroke-width"?P(this,zn,SI).call(this,n):null}updateParentDimensions([t,n],r){const[i,o]=P(this,zn,po).call(this);S(this,zi,t),S(this,Hi,n),S(this,af,r);const[l,h]=P(this,zn,po).call(this),d=l-i,p=h-o,m=u(this,us);return m[0]-=d,m[1]-=p,m[2]+=2*d,m[3]+=2*p,m}updateRotation(t){return S(this,Zg,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,us).map(me.svgRound).join(" ")}get defaultProperties(){const[t,n]=u(this,us);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${me.svgRound(t)} ${me.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=u(this,us);let r=0,i=0,o=0,l=0,h=0,d=0;switch(u(this,Zg)){case 90:i=n/t,o=-t/n,h=t;break;case 180:r=-1,l=-1,h=t,d=n;break;case 270:i=-n/t,o=t/n,d=n;break;default:return""}return`matrix(${r} ${i} ${o} ${l} ${me.svgRound(h)} ${me.svgRound(d)})`}getPathResizingSVGProperties([t,n,r,i]){const[o,l]=P(this,zn,po).call(this),[h,d,p,m]=u(this,us);if(Math.abs(p-o)<=me.PRECISION||Math.abs(m-l)<=me.PRECISION){const A=t+r/2-(h+p/2),E=n+i/2-(d+m/2);return{path:{"transform-origin":`${me.svgRound(t)} ${me.svgRound(n)}`,transform:`${this.rotationTransform} translate(${A} ${E})`}}}const g=(r-2*o)/(p-2*o),v=(i-2*l)/(m-2*l),b=p/r,x=m/i;return{path:{"transform-origin":`${me.svgRound(h)} ${me.svgRound(d)}`,transform:`${this.rotationTransform} scale(${b} ${x}) translate(${me.svgRound(o)} ${me.svgRound(l)}) scale(${g} ${v}) translate(${me.svgRound(-o)} ${me.svgRound(-l)})`}}}getPathResizedSVGProperties([t,n,r,i]){const[o,l]=P(this,zn,po).call(this),h=u(this,us),[d,p,m,g]=h;if(h[0]=t,h[1]=n,h[2]=r,h[3]=i,Math.abs(m-o)<=me.PRECISION||Math.abs(g-l)<=me.PRECISION){const E=t+r/2-(d+m/2),R=n+i/2-(p+g/2);for(const{line:C,points:D}of u(this,rr))me._translate(C,E,R,C),me._translate(D,E,R,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${me.svgRound(t)} ${me.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(r-2*o)/(m-2*o),b=(i-2*l)/(g-2*l),x=-v*(d+o)+t+o,A=-b*(p+l)+n+l;if(v!==1||b!==1||x!==0||A!==0)for(const{line:E,points:R}of u(this,rr))me._rescale(E,x,A,v,b,E),me._rescale(R,x,A,v,b,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${me.svgRound(t)} ${me.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],r){const[i,o]=r,l=u(this,us),h=t-l[0],d=n-l[1];if(u(this,zi)===i&&u(this,Hi)===o)for(const{line:p,points:m}of u(this,rr))me._translate(p,h,d,p),me._translate(m,h,d,m);else{const p=u(this,zi)/i,m=u(this,Hi)/o;S(this,zi,i),S(this,Hi,o);for(const{line:g,points:v}of u(this,rr))me._rescale(g,h,d,p,m,g),me._rescale(v,h,d,p,m,v);l[2]*=p,l[3]*=m}return l[0]=t,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${me.svgRound(t)} ${me.svgRound(n)}`}}}get defaultSVGProperties(){const t=u(this,us);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${me.svgRound(t[0])} ${me.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}us=new WeakMap,Zg=new WeakMap,ey=new WeakMap,rr=new WeakMap,zi=new WeakMap,Hi=new WeakMap,af=new WeakMap,lf=new WeakMap,_u=new WeakMap,zn=new WeakSet,po=function(t=u(this,_u)){const n=u(this,ey)+t/2*u(this,af);return u(this,lf)%180===0?[n/u(this,zi),n/u(this,Hi)]:[n/u(this,Hi),n/u(this,zi)]},bI=function(){const[t,n,r,i]=u(this,us),[o,l]=P(this,zn,po).call(this,0);return[t+o,n+l,r-2*o,i-2*l]},xI=function(){const t=S(this,us,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of u(this,rr)){if(i.length<=12){for(let h=4,d=i.length;h<d;h+=6)ge.pointBoundingBox(i[h],i[h+1],t);continue}let o=i[4],l=i[5];for(let h=6,d=i.length;h<d;h+=6){const[p,m,g,v,b,x]=i.subarray(h,h+6);ge.bezierBoundingBox(o,l,p,m,g,v,b,x,t),o=b,l=x}}const[n,r]=P(this,zn,po).call(this);t[0]=ns(t[0]-n,0,1),t[1]=ns(t[1]-r,0,1),t[2]=ns(t[2]+n,0,1),t[3]=ns(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},SI=function(t){const[n,r]=P(this,zn,po).call(this);S(this,_u,t);const[i,o]=P(this,zn,po).call(this),[l,h]=[i-n,o-r],d=u(this,us);return d[0]-=l,d[1]-=h,d[2]+=2*l,d[3]+=2*h,d};class qw extends vI{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:xt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new qw(this._viewParameters);return e.updateAll(this),e}}var Pw,_I;const Oh=class Oh extends cw{constructor(t){super({...t,name:"inkEditor"});k(this,Pw);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){xt.initialize(t,n),this._defaultDrawingOptions=new qw(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return $e(this,"typesMap",new Map([[Ke.INK_THICKNESS,"stroke-width"],[Ke.INK_COLOR,"stroke"],[Ke.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,r,i,o){return new Y6(t,n,r,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,r,i,o,l){return gy.deserialize(t,n,r,i,o,l)}static async deserialize(t,n,r){let i=null;if(t instanceof VE){const{data:{inkLists:l,rect:h,rotation:d,id:p,color:m,opacity:g,borderStyle:{rawWidth:v},popupRef:b,richText:x,contentsObj:A,creationDate:E,modificationDate:R},parent:{page:{pageNumber:C}}}=t;i=t={annotationType:Ie.INK,color:Array.from(m),thickness:v,opacity:g,paths:{points:l},boxes:null,pageIndex:C-1,rect:h.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:b,richText:x,comment:(A==null?void 0:A.str)||null,creationDate:E,modificationDate:R}}const o=await super.deserialize(t,n,r);return o._initialData=i,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new ow(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Ke.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=Oh.getDefaultDrawingOptions({stroke:ge.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":l}}=this,h=Object.assign(super.serialize(t),{color:xt._colorManager.convert(i),opacity:o,thickness:l,paths:{lines:n,points:r}});return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!P(this,Pw,_I).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};Pw=new WeakSet,_I=function(t){const{color:n,thickness:r,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,h)=>l!==n[h])||t.thickness!==r||t.opacity!==i||t.pageIndex!==o},te(Oh,"_type","ink"),te(Oh,"_editorType",Ie.INK),te(Oh,"_defaultDrawingOptions",null);let kA=Oh;class CA extends gy{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Zv=8,_p=3;var Au,st,TA,oi,AI,EI,PA,N0,kI,CI,TI,RA,LA,PI;class Ki{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},i,o,l,h){let d=new OffscreenCanvas(1,1),p=d.getContext("2d",{alpha:!1});const m=200,g=p.font=`${n} ${r} ${m}px ${t}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:b,actualBoundingBoxAscent:x,actualBoundingBoxDescent:A,fontBoundingBoxAscent:E,fontBoundingBoxDescent:R,width:C}=p.measureText(e),D=1.5,N=Math.ceil(Math.max(Math.abs(v)+Math.abs(b)||0,C)*D),I=Math.ceil(Math.max(Math.abs(x)+Math.abs(A)||m,Math.abs(E)+Math.abs(R)||m)*D);d=new OffscreenCanvas(N,I),p=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=g,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,N,I),p.fillStyle="black",p.fillText(e,N*(D-1)/2,I*(3-D)/2);const j=P(this,st,RA).call(this,p.getImageData(0,0,N,I).data),F=P(this,st,TI).call(this,j),W=P(this,st,LA).call(this,F),K=P(this,st,PA).call(this,j,N,I,W);return this.processDrawnLines({lines:{curves:K,width:N,height:I},pageWidth:i,pageHeight:o,rotation:l,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,i){const[o,l,h]=P(this,st,PI).call(this,e),[d,p]=P(this,st,CI).call(this,o,l,h,Math.hypot(l,h)*u(this,Au).sigmaSFactor,u(this,Au).sigmaR,u(this,Au).kernelSize),m=P(this,st,LA).call(this,p),g=P(this,st,PA).call(this,d,l,h,m);return this.processDrawnLines({lines:{curves:g,width:l,height:h},pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:o,areContours:l}){r%180!==0&&([t,n]=[n,t]);const{curves:h,width:d,height:p}=e,m=e.thickness??0,g=[],v=Math.min(t/d,n/p),b=v/t,x=v/n,A=[];for(const{points:R}of h){const C=o?P(this,st,kI).call(this,R):R;if(!C)continue;A.push(C);const D=C.length,N=new Float32Array(D),I=new Float32Array(3*(D===2?2:D-2));if(g.push({line:I,points:N}),D===2){N[0]=C[0]*b,N[1]=C[1]*x,I.set([NaN,NaN,NaN,NaN,N[0],N[1]],0);continue}let[j,F,W,K]=C;j*=b,F*=x,W*=b,K*=x,N.set([j,F,W,K],0),I.set([NaN,NaN,NaN,NaN,j,F],0);for(let J=4;J<D;J+=2){const ie=N[J]=C[J]*b,ce=N[J+1]=C[J+1]*x;I.set(me.createBezierPoints(j,F,W,K,ie,ce),(J-2)*3),[j,F,W,K]=[W,K,ie,ce]}}if(g.length===0)return null;const E=l?new CA:new gy;return E.build(g,t,n,1,r,l?0:m,i),{outline:E,newCurves:A,areContours:l,thickness:m,width:d,height:p}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:r,height:i}){let o=1/0,l=-1/0,h=0;for(const C of e){h+=C.length;for(let D=2,N=C.length;D<N;D++){const I=C[D]-C[D-2];o=Math.min(o,I),l=Math.max(l,I)}}let d;o>=-128&&l<=127?d=Int8Array:o>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const p=e.length,m=Zv+_p*p,g=new Uint32Array(m);let v=0;g[v++]=m*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*d.BYTES_PER_ELEMENT,g[v++]=0,g[v++]=r,g[v++]=i,g[v++]=t?0:1,g[v++]=Math.max(0,Math.floor(n??0)),g[v++]=p,g[v++]=d.BYTES_PER_ELEMENT;for(const C of e)g[v++]=C.length-2,g[v++]=C[0],g[v++]=C[1];const b=new CompressionStream("deflate-raw"),x=b.writable.getWriter();await x.ready,x.write(g);const A=d.prototype.constructor;for(const C of e){const D=new A(C.length-2);for(let N=2,I=C.length;N<I;N++)D[N-2]=C[N]-C[N-2];x.write(D)}x.close();const E=await new Response(b.readable).arrayBuffer(),R=new Uint8Array(E);return EM(R)}static async decompressSignature(e){try{const t=xW(e),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,l=0;for await(const C of n)o||(o=new Uint8Array(new Uint32Array(C.buffer,0,4)[0])),o.set(C,l),l+=C.length;const h=new Uint32Array(o.buffer,0,o.length>>2),d=h[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const p=h[2],m=h[3],g=h[4]===0,v=h[5],b=h[6],x=h[7],A=[],E=(Zv+_p*b)*Uint32Array.BYTES_PER_ELEMENT;let R;switch(x){case Int8Array.BYTES_PER_ELEMENT:R=new Int8Array(o.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:R=new Int16Array(o.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:R=new Int32Array(o.buffer,E);break}l=0;for(let C=0;C<b;C++){const D=h[_p*C+Zv],N=new Float32Array(D+2);A.push(N);for(let I=0;I<_p-1;I++)N[I]=h[_p*C+Zv+I+1];for(let I=0;I<D;I++)N[I+2]=N[I]+R[l++]}return{areContours:g,thickness:v,outlines:A,width:p,height:m}}catch(t){return Oe(`decompressSignature: ${t}`),null}}}Au=new WeakMap,st=new WeakSet,TA=function(e,t,n,r){return n-=e,r-=t,n===0?r>0?0:4:n===1?r+6:2-r},oi=new WeakMap,AI=function(e,t,n,r,i,o,l){const h=P(this,st,TA).call(this,n,r,i,o);for(let d=0;d<8;d++){const p=(-d+h-l+16)%8,m=u(this,oi)[2*p],g=u(this,oi)[2*p+1];if(e[(n+m)*t+(r+g)]!==0)return p}return-1},EI=function(e,t,n,r,i,o,l){const h=P(this,st,TA).call(this,n,r,i,o);for(let d=0;d<8;d++){const p=(d+h+l+16)%8,m=u(this,oi)[2*p],g=u(this,oi)[2*p+1];if(e[(n+m)*t+(r+g)]!==0)return p}return-1},PA=function(e,t,n,r){const i=e.length,o=new Int32Array(i);for(let p=0;p<i;p++)o[p]=e[p]<=r?1:0;for(let p=1;p<n-1;p++)o[p*t]=o[p*t+t-1]=0;for(let p=0;p<t;p++)o[p]=o[t*n-1-p]=0;let l=1,h;const d=[];for(let p=1;p<n-1;p++){h=1;for(let m=1;m<t-1;m++){const g=p*t+m,v=o[g];if(v===0)continue;let b=p,x=m;if(v===1&&o[g-1]===0)l+=1,x-=1;else if(v>=1&&o[g+1]===0)l+=1,x+=1,v>1&&(h=v);else{v!==1&&(h=Math.abs(v));continue}const A=[m,p],E=x===m+1,R={isHole:E,points:A,id:l,parent:0};d.push(R);let C;for(const J of d)if(J.id===h){C=J;break}C?C.isHole?R.parent=E?C.parent:h:R.parent=E?h:C.parent:R.parent=E?h:0;const D=P(this,st,AI).call(this,o,t,p,m,b,x,0);if(D===-1){o[g]=-l,o[g]!==1&&(h=Math.abs(o[g]));continue}let N=u(this,oi)[2*D],I=u(this,oi)[2*D+1];const j=p+N,F=m+I;b=j,x=F;let W=p,K=m;for(;;){const J=P(this,st,EI).call(this,o,t,W,K,b,x,1);N=u(this,oi)[2*J],I=u(this,oi)[2*J+1];const ie=W+N,ce=K+I;A.push(ce,ie);const Y=W*t+K;if(o[Y+1]===0?o[Y]=-l:o[Y]===1&&(o[Y]=l),ie===p&&ce===m&&W===j&&K===F){o[g]!==1&&(h=Math.abs(o[g]));break}else b=W,x=K,W=ie,K=ce}}}return d},N0=function(e,t,n,r){if(n-t<=4){for(let j=t;j<n-2;j+=2)r.push(e[j],e[j+1]);return}const i=e[t],o=e[t+1],l=e[n-4]-i,h=e[n-3]-o,d=Math.hypot(l,h),p=l/d,m=h/d,g=p*o-m*i,v=h/l,b=1/d,x=Math.atan(v),A=Math.cos(x),E=Math.sin(x),R=b*(Math.abs(A)+Math.abs(E)),C=b*(1-R+R**2),D=Math.max(Math.atan(Math.abs(E+A)*C),Math.atan(Math.abs(E-A)*C));let N=0,I=t;for(let j=t+2;j<n-2;j+=2){const F=Math.abs(g-p*e[j+1]+m*e[j]);F>N&&(I=j,N=F)}N>(d*D)**2?(P(this,st,N0).call(this,e,t,I+2,r),P(this,st,N0).call(this,e,I,n,r)):r.push(i,o)},kI=function(e){const t=[],n=e.length;return P(this,st,N0).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},CI=function(e,t,n,r,i,o){const l=new Float32Array(o**2),h=-2*r**2,d=o>>1;for(let x=0;x<o;x++){const A=(x-d)**2;for(let E=0;E<o;E++)l[x*o+E]=Math.exp((A+(E-d)**2)/h)}const p=new Float32Array(256),m=-2*i**2;for(let x=0;x<256;x++)p[x]=Math.exp(x**2/m);const g=e.length,v=new Uint8Array(g),b=new Uint32Array(256);for(let x=0;x<n;x++)for(let A=0;A<t;A++){const E=x*t+A,R=e[E];let C=0,D=0;for(let I=0;I<o;I++){const j=x+I-d;if(!(j<0||j>=n))for(let F=0;F<o;F++){const W=A+F-d;if(W<0||W>=t)continue;const K=e[j*t+W],J=l[I*o+F]*p[Math.abs(K-R)];C+=K*J,D+=J}}const N=v[E]=Math.round(C/D);b[N]++}return[v,b]},TI=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},RA=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let l=0,h=n.length;l<h;l++){const d=n[l]=e[l<<2];r=Math.max(r,d),i=Math.min(i,d)}const o=255/(r-i);for(let l=0,h=n.length;l<h;l++)n[l]=(n[l]-i)*o;return n},LA=function(e){let t,n=-1/0,r=-1/0;const i=e.findIndex(h=>h!==0);let o=i,l=i;for(t=i;t<256;t++){const h=e[t];h>n&&(t-o>r&&(r=t-o,l=t-1),n=h,o=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},PI=function(e){const t=e,{width:n,height:r}=e,{maxDim:i}=u(this,Au);let o=n,l=r;if(n>i||r>i){let g=n,v=r,b=Math.log2(Math.max(n,r)/i);const x=Math.floor(b);b=b===x?x-1:x;for(let E=0;E<b;E++){o=Math.ceil(g/2),l=Math.ceil(v/2);const R=new OffscreenCanvas(o,l);R.getContext("2d").drawImage(e,0,0,g,v,0,0,o,l),g=o,v=l,e!==t&&e.close(),e=R.transferToImageBitmap()}const A=Math.min(i/o,i/l);o=Math.round(o*A),l=Math.round(l*A)}const d=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,o,l),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,o,l);const p=d.getImageData(0,0,o,l).data;return[P(this,st,RA).call(this,p),o,l]},k(Ki,st),k(Ki,Au,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),k(Ki,oi,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class HE extends vI{constructor(){super(),super.updateProperties({fill:xt._defaultLineColor,"stroke-width":0})}clone(){const e=new HE;return e.updateAll(this),e}}class WE extends qw{constructor(e){super(e),super.updateProperties({stroke:xt._defaultLineColor,"stroke-width":1})}clone(){const e=new WE(this._viewParameters);return e.updateAll(this),e}}var xl,Wi,Sl,Eu;const Vs=class Vs extends cw{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});k(this,xl,!1);k(this,Wi,null);k(this,Sl,null);k(this,Eu,null);this._willKeepAspectRatio=!0,S(this,Sl,t.signatureData||null),S(this,Wi,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){xt.initialize(t,n),this._defaultDrawingOptions=new HE,this._defaultDrawnSignatureOptions=new WE(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return $e(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,Wi)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(u(this,Sl)){const{lines:i,mustSmooth:o,areContours:l,description:h,uuid:d,heightInPage:p}=u(this,Sl),{rawDims:{pageWidth:m,pageHeight:g},rotation:v}=this.parent.viewport,b=Ki.processDrawnLines({lines:i,pageWidth:m,pageHeight:g,rotation:v,innerMargin:Vs._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(b,p,h,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,Wi)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){S(this,Eu,t),this.addEditToolbar()}getUuid(){return u(this,Eu)}get description(){return u(this,Wi)}set description(t){S(this,Wi,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:r,width:i,height:o}=u(this,Sl),l=Math.max(i,o),h=Ki.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:r,width:i,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,r,i){const{x:o,y:l}=this,{outline:h}=S(this,Sl,t);S(this,xl,h instanceof CA),this.description=r;let d;u(this,xl)?d=Vs.getDefaultDrawingOptions():(d=Vs._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:d});const[,p]=this.pageDimensions;let m=n/p;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return Ki.process(t,n,r,i,Vs._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return Ki.extractContoursFromText(t,n,r,i,o,Vs._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return Ki.processDrawnLines({lines:t,pageWidth:n,pageHeight:r,rotation:i,innerMargin:Vs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Vs.getDefaultDrawingOptions():(this._drawingOptions=Vs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:u(this,xl),color:[0,0,0],thickness:u(this,xl)?0:i});return this.addComment(o),t?(o.paths={lines:n,points:r},o.uuid=u(this,Eu),o.isCopy=!0):o.lines=n,u(this,Wi)&&(o.accessibilityData={type:"Figure",alt:u(this,Wi)}),o}static deserializeDraw(t,n,r,i,o,l){return l.areContours?CA.deserialize(t,n,r,i,o,l):gy.deserialize(t,n,r,i,o,l)}static async deserialize(t,n,r){var o;const i=await super.deserialize(t,n,r);return S(i,xl,t.areContours),i.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",S(i,Eu,t.uuid),i}};xl=new WeakMap,Wi=new WeakMap,Sl=new WeakMap,Eu=new WeakMap,te(Vs,"_type","signature"),te(Vs,"_editorType",Ie.SIGNATURE),te(Vs,"_defaultDrawingOptions",null);let DA=Vs;var Lt,kn,_l,qo,Al,cf,Ko,ku,Gi,ir,uf,Qe,Wp,Gp,I0,O0,j0,NA,F0,RI;class MA extends xt{constructor(t){super({...t,name:"stampEditor"});k(this,Qe);k(this,Lt,null);k(this,kn,null);k(this,_l,null);k(this,qo,null);k(this,Al,null);k(this,cf,"");k(this,Ko,null);k(this,ku,!1);k(this,Gi,null);k(this,ir,!1);k(this,uf,!1);S(this,qo,t.bitmapUrl),S(this,Al,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){xt.initialize(t,n)}static isHandlingMimeForPasting(t){return tw.includes(t)}static paste(t,n){n.pasteEditor({mode:Ie.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,h=await r.guess({name:"altText",request:{data:i,width:o,height:l,channels:i.length/(o*l)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const d=h.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var t;u(this,kn)&&(S(this,Lt,null),this._uiManager.imageManager.deleteId(u(this,kn)),(t=u(this,Ko))==null||t.remove(),S(this,Ko,null),u(this,Gi)&&(clearTimeout(u(this,Gi)),S(this,Gi,null))),super.remove()}rebuild(){if(!this.parent){u(this,kn)&&P(this,Qe,I0).call(this);return}super.rebuild(),this.div!==null&&(u(this,kn)&&u(this,Ko)===null&&P(this,Qe,I0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,_l)||u(this,Lt)||u(this,qo)||u(this,Al)||u(this,kn)||u(this,ku))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,ku)||(u(this,Lt)?P(this,Qe,O0).call(this):P(this,Qe,I0).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(S(this,kn,r),i&&S(this,Lt,i),S(this,ku,!1),P(this,Qe,O0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,Gi)!==null&&clearTimeout(u(this,Gi)),S(this,Gi,setTimeout(()=>{S(this,Gi,null),P(this,Qe,NA).call(this)},200))}copyCanvas(t,n,r=!1){t||(t=224);const{width:i,height:o}=u(this,Lt),l=new fi;let h=u(this,Lt),d=i,p=o,m=null;if(n){if(i>n||o>n){const j=Math.min(n/i,n/o);d=Math.floor(i*j),p=Math.floor(o*j)}m=document.createElement("canvas");const v=m.width=Math.ceil(d*l.sx),b=m.height=Math.ceil(p*l.sy);u(this,ir)||(h=P(this,Qe,j0).call(this,v,b));const x=m.getContext("2d");x.filter=this._uiManager.hcmFilter;let A="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":AW.isDarkMode&&(A="#8f8f9d",E="#42414d");const R=15,C=R*l.sx,D=R*l.sy,N=new OffscreenCanvas(C*2,D*2),I=N.getContext("2d");I.fillStyle=A,I.fillRect(0,0,C*2,D*2),I.fillStyle=E,I.fillRect(0,0,C,D),I.fillRect(C,D,C,D),x.fillStyle=x.createPattern(N,"repeat"),x.fillRect(0,0,v,b),x.drawImage(h,0,0,h.width,h.height,0,0,v,b)}let g=null;if(r){let v,b;if(l.symmetric&&h.width<t&&h.height<t)v=h.width,b=h.height;else if(h=u(this,Lt),i>t||o>t){const E=Math.min(t/i,t/o);v=Math.floor(i*E),b=Math.floor(o*E),u(this,ir)||(h=P(this,Qe,j0).call(this,v,b))}const A=new OffscreenCanvas(v,b).getContext("2d",{willReadFrequently:!0});A.drawImage(h,0,0,h.width,h.height,0,0,v,b),g={width:v,height:b,data:A.getImageData(0,0,v,b).data}}return{canvas:m,width:d,height:p,imageData:g}}static async deserialize(t,n,r){var A;let i=null,o=!1;if(t instanceof GN){const{data:{rect:E,rotation:R,id:C,structParent:D,popupRef:N,richText:I,contentsObj:j,creationDate:F,modificationDate:W},container:K,parent:{page:{pageNumber:J}},canvas:ie}=t;let ce,Y;ie?(delete t.canvas,{id:ce,bitmap:Y}=r.imageManager.getFromCanvas(K.id,ie),ie.remove()):(o=!0,t._hasNoCanvas=!0);const ue=((A=await n._structTree.getAriaAttributes(`${ME}${C}`))==null?void 0:A.get("aria-label"))||"";i=t={annotationType:Ie.STAMP,bitmapId:ce,bitmap:Y,pageIndex:J-1,rect:E.slice(0),rotation:R,annotationElementId:C,id:C,deleted:!1,accessibilityData:{decorative:!1,altText:ue},isSvg:!1,structParent:D,popupRef:N,richText:I,comment:(j==null?void 0:j.str)||null,creationDate:F,modificationDate:W}}const l=await super.deserialize(t,n,r),{rect:h,bitmap:d,bitmapUrl:p,bitmapId:m,isSvg:g,accessibilityData:v}=t;o?(r.addMissingCanvas(t.id,l),S(l,ku,!0)):m&&r.imageManager.isValidId(m)?(S(l,kn,m),d&&S(l,Lt,d)):S(l,qo,p),S(l,ir,g);const[b,x]=l.pageDimensions;return l.width=(h[2]-h[0])/b,l.height=(h[3]-h[1])/x,v&&(l.altTextData=v),l._initialData=i,t.comment&&l.setCommentData(t),S(l,uf,!!i),l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:u(this,kn),isSvg:u(this,ir)});if(this.addComment(r),t)return r.bitmapUrl=P(this,Qe,F0).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const h=P(this,Qe,RI).call(this,r);return h.isSame?null:(h.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(n===null)return r;n.stamps||(n.stamps=new Map);const l=u(this,ir)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(u(this,kn)))n.stamps.set(u(this,kn),{area:l,serialized:r}),r.bitmap=P(this,Qe,F0).call(this,!1);else if(u(this,ir)){const h=n.stamps.get(u(this,kn));l>h.area&&(h.area=l,h.serialized.bitmap.close(),h.serialized.bitmap=P(this,Qe,F0).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Lt=new WeakMap,kn=new WeakMap,_l=new WeakMap,qo=new WeakMap,Al=new WeakMap,cf=new WeakMap,Ko=new WeakMap,ku=new WeakMap,Gi=new WeakMap,ir=new WeakMap,uf=new WeakMap,Qe=new WeakSet,Wp=function(t,n=!1){if(!t){this.remove();return}S(this,Lt,t.bitmap),n||(S(this,kn,t.id),S(this,ir,t.isSvg)),t.file&&S(this,cf,t.file.name),P(this,Qe,O0).call(this)},Gp=function(){if(S(this,_l,null),this._uiManager.enableWaiting(!1),!!u(this,Ko)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Lt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Lt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},I0=function(){if(u(this,kn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,kn)).then(r=>P(this,Qe,Wp).call(this,r,!0)).finally(()=>P(this,Qe,Gp).call(this));return}if(u(this,qo)){const r=u(this,qo);S(this,qo,null),this._uiManager.enableWaiting(!0),S(this,_l,this._uiManager.imageManager.getFromUrl(r).then(i=>P(this,Qe,Wp).call(this,i)).finally(()=>P(this,Qe,Gp).call(this)));return}if(u(this,Al)){const r=u(this,Al);S(this,Al,null),this._uiManager.enableWaiting(!0),S(this,_l,this._uiManager.imageManager.getFromFile(r).then(i=>P(this,Qe,Wp).call(this,i)).finally(()=>P(this,Qe,Gp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=tw.join(",");const n=this._uiManager._signal;S(this,_l,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),P(this,Qe,Wp).call(this,i)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>P(this,Qe,Gp).call(this))),t.click()},O0=function(){var d;const{div:t}=this;let{width:n,height:r}=u(this,Lt);const[i,o]=this.pageDimensions,l=.75;if(this.width)n=this.width*i,r=this.height*o;else if(n>l*i||r>l*o){const p=Math.min(l*i/n,l*o/r);n*=p,r*=p}this._uiManager.enableWaiting(!1);const h=S(this,Ko,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/i,this.height=r/o,this.setDims(),(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),P(this,Qe,NA).call(this),u(this,uf)||(this.parent.addUndoableEditor(this),S(this,uf,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,cf)&&this.div.setAttribute("aria-description",u(this,cf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},j0=function(t,n){const{width:r,height:i}=u(this,Lt);let o=r,l=i,h=u(this,Lt);for(;o>2*t||l>2*n;){const d=o,p=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const m=new OffscreenCanvas(o,l);m.getContext("2d").drawImage(h,0,0,d,p,0,0,o,l),h=m.transferToImageBitmap()}return h},NA=function(){const[t,n]=this.parentDimensions,{width:r,height:i}=this,o=new fi,l=Math.ceil(r*t*o.sx),h=Math.ceil(i*n*o.sy),d=u(this,Ko);if(!d||d.width===l&&d.height===h)return;d.width=l,d.height=h;const p=u(this,ir)?u(this,Lt):P(this,Qe,j0).call(this,l,h),m=d.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(p,0,0,p.width,p.height,0,0,l,h)},F0=function(t){if(t){if(u(this,ir)){const i=this._uiManager.imageManager.getSvgUrl(u(this,kn));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=u(this,Lt),n.getContext("2d").drawImage(u(this,Lt),0,0),n.toDataURL()}if(u(this,ir)){const[n,r]=this.pageDimensions,i=Math.round(this.width*n*ra.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*ra.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,o);return l.getContext("2d").drawImage(u(this,Lt),0,0,u(this,Lt).width,u(this,Lt).height,0,0,i,o),l.transferToImageBitmap()}return structuredClone(u(this,Lt))},RI=function(t){var l;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===n,o=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},te(MA,"_type","stamp"),te(MA,"_editorType",Ie.STAMP);var Cu,hf,El,kl,Xo,Ds,Cl,df,ff,ai,Yo,Cn,Jo,Tl,pf,Ae,Pl,gt,IA,LI,Si,OA,jA,B0;const Xr=class Xr{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:i,annotationLayer:o,drawLayer:l,textLayer:h,viewport:d,l10n:p}){k(this,gt);k(this,Cu);k(this,hf,!1);k(this,El,null);k(this,kl,null);k(this,Xo,null);k(this,Ds,new Map);k(this,Cl,!1);k(this,df,!1);k(this,ff,!1);k(this,ai,null);k(this,Yo,null);k(this,Cn,null);k(this,Jo,null);k(this,Tl,null);k(this,pf,-1);k(this,Ae);const m=[...u(Xr,Pl).values()];if(!Xr._initialized){Xr._initialized=!0;for(const g of m)g.initialize(p,e)}e.registerEditorTypes(m),S(this,Ae,e),this.pageIndex=t,this.div=n,S(this,Cu,i),S(this,El,o),this.viewport=d,S(this,Cn,h),this.drawLayer=l,this._structTree=r,u(this,Ae).addLayer(this)}get isEmpty(){return u(this,Ds).size===0}get isInvisible(){return this.isEmpty&&u(this,Ae).getMode()===Ie.NONE}updateToolbar(e){u(this,Ae).updateToolbar(e)}updateMode(e=u(this,Ae).getMode()){switch(P(this,gt,B0).call(this),e){case Ie.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ie.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ie.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Ie.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of u(Xr,Pl).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,Cn))==null?void 0:t.div)}setEditingState(e){u(this,Ae).setEditingState(e)}addCommands(e){u(this,Ae).addCommands(e)}cleanUndoStack(e){u(this,Ae).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,El))==null||t.div.classList.toggle("disabled",!e)}async enable(){var n;S(this,ff,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=u(this,Tl))==null||n.abort(),S(this,Tl,null);const e=new Set;for(const r of u(this,gt,IA))r.enableEditing(),r.show(!0),r.annotationElementId&&(u(this,Ae).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=u(this,El);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),u(this,Ae).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}S(this,ff,!1),u(this,Ae)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var n;if(S(this,df,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),u(this,Cn)&&!u(this,Tl)){S(this,Tl,new AbortController);const r=u(this,Ae).combinedSignal(u(this,Tl));u(this,Cn).div.addEventListener("pointerdown",i=>{const{clientX:l,clientY:h,timeStamp:d}=i,p=u(this,pf);if(d-p>500){S(this,pf,d);return}S(this,pf,-1);const{classList:m}=this.div;m.toggle("getElements",!0);const g=document.elementsFromPoint(l,h);if(m.toggle("getElements",!1),!this.div.contains(g[0]))return;let v;const b=new RegExp(`^${pm}[0-9]+$`);for(const A of g)if(b.test(A.id)){v=A.id;break}if(!v)return;const x=u(this,Ds).get(v);(x==null?void 0:x.annotationElementId)===null&&(i.stopPropagation(),i.preventDefault(),x.dblclick(i))},{signal:r,capture:!0})}const e=u(this,El);if(e){const r=new Map,i=new Map;for(const l of u(this,gt,IA)){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(e);continue}if(l.serialize()!==null){r.set(l.annotationElementId,l);continue}else i.set(l.annotationElementId,l);(n=this.getEditableAnnotation(l.annotationElementId))==null||n.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:h}=l.data;if(u(this,Ae).isDeletedAnnotationElement(h)){l.updateEdited({deleted:!0});continue}let d=i.get(h);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=r.get(h),d&&(u(this,Ae).addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}P(this,gt,B0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const r of u(Xr,Pl).values())t.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,df,!1)}getEditableAnnotation(e){var t;return((t=u(this,El))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,Ae).getActive()!==e&&u(this,Ae).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,Cn))!=null&&e.div&&!u(this,Jo)){S(this,Jo,new AbortController);const t=u(this,Ae).combinedSignal(u(this,Jo));u(this,Cn).div.addEventListener("pointerdown",P(this,gt,LI).bind(this),{signal:t}),u(this,Cn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,Cn))!=null&&e.div&&u(this,Jo)&&(u(this,Jo).abort(),S(this,Jo,null),u(this,Cn).div.classList.remove("highlighting"))}enableClick(){if(u(this,kl))return;S(this,kl,new AbortController);const e=u(this,Ae).combinedSignal(u(this,kl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,kl))==null||e.abort(),S(this,kl,null)}attach(e){u(this,Ds).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,Ae).isDeletedAnnotationElement(t)&&u(this,Ae).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,Ds).delete(e.id),(t=u(this,Cu))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,df)&&e.annotationElementId&&u(this,Ae).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,Ae).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,Ae).addDeletedAnnotationElement(e.annotationElementId),xt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,Ae).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,ff)),u(this,Ae).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,Xo)&&(e._focusEventsAllowed=!1,S(this,Xo,setTimeout(()=>{S(this,Xo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,Ae)._signal}),t.focus())},0))),e._structTreeParentId=(n=u(this,Cu))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of u(this,Ds).values())if(t.uid===e)return t;return null}getNextId(){return u(this,Ae).getId()}combinedSignal(e){return u(this,Ae).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,gt,Si))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await u(this,Ae).updateMode(e.mode);const{offsetX:n,offsetY:r}=P(this,gt,jA).call(this),i=this.getNextId(),o=P(this,gt,OA).call(this,{parent:this,id:i,x:n,y:r,uiManager:u(this,Ae),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=u(Xr,Pl).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,Ae)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),i=P(this,gt,OA).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:u(this,Ae),isCentered:t,...n});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(P(this,gt,jA).call(this),!0,e)}setSelected(e){u(this,Ae).setSelected(e)}toggleSelected(e){u(this,Ae).toggleSelected(e)}unselect(e){u(this,Ae).unselect(e)}pointerup(e){var r;const{isMac:t}=Tn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!u(this,Cl)||(S(this,Cl,!1),(r=u(this,gt,Si))!=null&&r.isDrawer&&u(this,gt,Si).supportMultipleDrawings))return;if(!u(this,hf)){S(this,hf,!0);return}const n=u(this,Ae).getMode();if(n===Ie.STAMP||n===Ie.SIGNATURE){u(this,Ae).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(u(this,Ae).getMode()===Ie.HIGHLIGHT&&this.enableTextSelection(),u(this,Cl)){S(this,Cl,!1);return}const{isMac:t}=Tn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(S(this,Cl,!0),(r=u(this,gt,Si))!=null&&r.isDrawer){this.startDrawingSession(e);return}const n=u(this,Ae).getActive();S(this,hf,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),u(this,ai)){u(this,gt,Si).startDrawing(this,u(this,Ae),!1,e);return}u(this,Ae).setCurrentDrawingSession(this),S(this,ai,new AbortController);const t=u(this,Ae).combinedSignal(u(this,ai));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(S(this,Yo,null),this.commitOrRemove())},{signal:t}),u(this,gt,Si).startDrawing(this,u(this,Ae),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&S(this,Yo,t);return}u(this,Yo)&&setTimeout(()=>{var t;(t=u(this,Yo))==null||t.focus(),S(this,Yo,null)},0)}endDrawingSession(e=!1){return u(this,ai)?(u(this,Ae).setCurrentDrawingSession(null),u(this,ai).abort(),S(this,ai,null),S(this,Yo,null),u(this,gt,Si).endDrawing(e)):null}findNewParent(e,t,n){const r=u(this,Ae).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return u(this,ai)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,ai)&&u(this,gt,Si).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,Ae).getActive())==null?void 0:e.parent)===this&&(u(this,Ae).commitOrRemove(),u(this,Ae).setActiveEditor(null)),u(this,Xo)&&(clearTimeout(u(this,Xo)),S(this,Xo,null));for(const n of u(this,Ds).values())(t=u(this,Cu))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,u(this,Ds).clear(),u(this,Ae).removeLayer(this)}render({viewport:e}){this.viewport=e,Nl(this.div,e);for(const t of u(this,Ae).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,Ae).commitOrRemove(),P(this,gt,B0).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Nl(this.div,{rotation:n}),t!==n)for(const r of u(this,Ds).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,Ae).viewParameters.realScale}};Cu=new WeakMap,hf=new WeakMap,El=new WeakMap,kl=new WeakMap,Xo=new WeakMap,Ds=new WeakMap,Cl=new WeakMap,df=new WeakMap,ff=new WeakMap,ai=new WeakMap,Yo=new WeakMap,Cn=new WeakMap,Jo=new WeakMap,Tl=new WeakMap,pf=new WeakMap,Ae=new WeakMap,Pl=new WeakMap,gt=new WeakSet,IA=function(){return u(this,Ds).size!==0?u(this,Ds).values():u(this,Ae).getEditors(this.pageIndex)},LI=function(e){u(this,Ae).unselectAll();const{target:t}=e;if(t===u(this,Cn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,Cn).div.contains(t)){const{isMac:n}=Tn.platform;if(e.button!==0||e.ctrlKey&&n)return;u(this,Ae).showAllEditors("highlight",!0,!0),u(this,Cn).div.classList.add("free"),this.toggleDrawing(),lw.startHighlighting(this,u(this,Ae).direction==="ltr",{target:u(this,Cn).div,x:e.x,y:e.y}),u(this,Cn).div.addEventListener("pointerup",()=>{u(this,Cn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,Ae)._signal}),e.preventDefault()}},Si=function(){return u(Xr,Pl).get(u(this,Ae).getMode())},OA=function(e){const t=u(this,gt,Si);return t?new t.prototype.constructor(e):null},jA=function(){const{x:e,y:t,width:n,height:r}=this.boundingClientRect,i=Math.max(0,e),o=Math.max(0,t),l=Math.min(window.innerWidth,e+n),h=Math.min(window.innerHeight,t+r),d=(i+l)/2-e,p=(o+h)/2-t,[m,g]=this.viewport.rotation%180===0?[d,p]:[p,d];return{offsetX:m,offsetY:g}},B0=function(){for(const e of u(this,Ds).values())e.isEmpty()&&e.remove()},te(Xr,"_initialized",!1),k(Xr,Pl,new Map([gA,kA,MA,lw,DA].map(e=>[e._editorType,e])));let uw=Xr;var li,hs,Tu,ty,Rw,DI,Ji,FA,MI,BA;const fn=class fn{constructor({pageIndex:e}){k(this,Ji);k(this,li,null);k(this,hs,new Map);k(this,Tu,new Map);this.pageIndex=e}setParent(e){if(!u(this,li)){S(this,li,e);return}if(u(this,li)!==e){if(u(this,hs).size>0)for(const t of u(this,hs).values())t.remove(),e.append(t);S(this,li,e)}}static get _svgFactory(){return $e(this,"_svgFactory",new xm)}draw(e,t=!1,n=!1){const r=un(fn,ty)._++,i=P(this,Ji,FA).call(this),o=fn._svgFactory.createElement("defs");i.append(o);const l=fn._svgFactory.createElement("path");o.append(l);const h=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",h),l.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,Tu).set(r,l);const d=n?P(this,Ji,MI).call(this,o,h):null,p=fn._svgFactory.createElement("use");return i.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(i,e),u(this,hs).set(r,i),{id:r,clipPathId:`url(#${d})`}}drawOutline(e,t){const n=un(fn,ty)._++,r=P(this,Ji,FA).call(this),i=fn._svgFactory.createElement("defs");r.append(i);const o=fn._svgFactory.createElement("path");i.append(o);const l=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let h;if(t){const m=fn._svgFactory.createElement("mask");i.append(m),h=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",h),m.setAttribute("maskUnits","objectBoundingBox");const g=fn._svgFactory.createElement("rect");m.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const v=fn._svgFactory.createElement("use");m.append(v),v.setAttribute("href",`#${l}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const d=fn._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${l}`),h&&d.setAttribute("mask",`url(#${h})`);const p=d.cloneNode();return r.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,e),u(this,hs).set(n,r),n}finalizeDraw(e,t){u(this,Tu).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var h;if(!t)return;const{root:n,bbox:r,rootClass:i,path:o}=t,l=typeof e=="number"?u(this,hs).get(e):e;if(l){if(n&&P(this,Ji,BA).call(this,l,n),r&&P(h=fn,Rw,DI).call(h,l,r),i){const{classList:d}=l;for(const[p,m]of Object.entries(i))d.toggle(p,m)}if(o){const p=l.firstChild.firstChild;P(this,Ji,BA).call(this,p,o)}}}updateParent(e,t){if(t===this)return;const n=u(this,hs).get(e);n&&(u(t,li).append(n),u(this,hs).delete(e),u(t,hs).set(e,n))}remove(e){u(this,Tu).delete(e),u(this,li)!==null&&(u(this,hs).get(e).remove(),u(this,hs).delete(e))}destroy(){S(this,li,null);for(const e of u(this,hs).values())e.remove();u(this,hs).clear(),u(this,Tu).clear()}};li=new WeakMap,hs=new WeakMap,Tu=new WeakMap,ty=new WeakMap,Rw=new WeakSet,DI=function(e,[t,n,r,i]){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*i}%`},Ji=new WeakSet,FA=function(){const e=fn._svgFactory.create(1,1,!0);return u(this,li).append(e),e.setAttribute("aria-hidden",!0),e},MI=function(e,t){const n=fn._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const i=fn._svgFactory.createElement("use");return n.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},BA=function(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)},k(fn,Rw),k(fn,ty,0);let hw=fn;globalThis._pdfjsTestingUtils={HighlightOutliner:vA};globalThis.pdfjsLib={AbortException:sa,AnnotationEditorLayer:uw,AnnotationEditorParamsType:Ke,AnnotationEditorType:Ie,AnnotationEditorUIManager:Il,AnnotationLayer:zE,AnnotationMode:qi,AnnotationType:Jt,applyOpacity:RM,build:NN,ColorPicker:bm,createValidAbsoluteUrl:RE,CSSConstants:PM,DOMSVGFactory:xm,DrawLayer:hw,FeatureTest:Tn,fetchData:Pf,findContrastColor:LM,getDocument:BE,getFilenameFromUrl:kM,getPdfFilenameFromUrl:CM,getRGB:Rf,getUuid:DE,getXfaPageViewport:TM,GlobalWorkerOptions:ur,ImageKind:Zp,InvalidPDFException:ew,isDataScheme:fy,isPdfFile:Ww,isValidExplicitDest:uN,MathClamp:ns,noContextMenu:dr,normalizeUnicode:AM,OPS:gf,OutputScale:fi,PasswordResponses:SM,PDFDataRangeTransport:$E,PDFDateString:ym,PDFWorker:yf,PermissionFlag:xM,PixelsPerInch:ra,RenderingCancelledException:Hw,renderRichText:IE,ResponseException:mm,setLayerDimensions:Nl,shadow:$e,SignatureExtractor:Ki,stopEvent:jt,SupportedImageMimeTypes:tw,TextLayer:wm,TouchManager:vm,updateUrlHash:LE,Util:ge,VerbosityLevel:uy,version:MN,XfaLayer:NE};const J6=Object.freeze(Object.defineProperty({__proto__:null,AbortException:sa,AnnotationEditorLayer:uw,AnnotationEditorParamsType:Ke,AnnotationEditorType:Ie,AnnotationEditorUIManager:Il,AnnotationLayer:zE,AnnotationMode:qi,AnnotationType:Jt,CSSConstants:PM,ColorPicker:bm,DOMSVGFactory:xm,DrawLayer:hw,FeatureTest:Tn,GlobalWorkerOptions:ur,ImageKind:Zp,InvalidPDFException:ew,MathClamp:ns,OPS:gf,OutputScale:fi,PDFDataRangeTransport:$E,PDFDateString:ym,PDFWorker:yf,PasswordResponses:SM,PermissionFlag:xM,PixelsPerInch:ra,RenderingCancelledException:Hw,ResponseException:mm,SignatureExtractor:Ki,SupportedImageMimeTypes:tw,TextLayer:wm,TouchManager:vm,Util:ge,VerbosityLevel:uy,XfaLayer:NE,applyOpacity:RM,build:NN,createValidAbsoluteUrl:RE,fetchData:Pf,findContrastColor:LM,getDocument:BE,getFilenameFromUrl:kM,getPdfFilenameFromUrl:CM,getRGB:Rf,getUuid:DE,getXfaPageViewport:TM,isDataScheme:fy,isPdfFile:Ww,isValidExplicitDest:uN,noContextMenu:dr,normalizeUnicode:AM,renderRichText:IE,setLayerDimensions:Nl,shadow:$e,stopEvent:jt,updateUrlHash:LE,version:MN},Symbol.toStringTag,{value:"Module"}));var xR=Object.prototype.hasOwnProperty;function SR(s,e,t){for(t of s.keys())if($h(t,e))return t}function $h(s,e){var t,n,r;if(s===e)return!0;if(s&&e&&(t=s.constructor)===e.constructor){if(t===Date)return s.getTime()===e.getTime();if(t===RegExp)return s.toString()===e.toString();if(t===Array){if((n=s.length)===e.length)for(;n--&&$h(s[n],e[n]););return n===-1}if(t===Set){if(s.size!==e.size)return!1;for(n of s)if(r=n,r&&typeof r=="object"&&(r=SR(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(s.size!==e.size)return!1;for(n of s)if(r=n[0],r&&typeof r=="object"&&(r=SR(e,r),!r)||!$h(n[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)s=new Uint8Array(s),e=new Uint8Array(e);else if(t===DataView){if((n=s.byteLength)===e.byteLength)for(;n--&&s.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===e.byteLength)for(;n--&&s[n]===e[n];);return n===-1}if(!t||typeof s=="object"){n=0;for(t in s)if(xR.call(s,t)&&++n&&!xR.call(e,t)||!(t in e)||!$h(s[t],e[t]))return!1;return Object.keys(e).length===n}}return s!==s&&e!==e}function yy(s){let e=!1;return{promise:new Promise((n,r)=>{s.then(i=>!e&&n(i)).catch(i=>!e&&r(i))}),cancel(){e=!0}}}const Q6=["onCopy","onCut","onPaste"],Z6=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],eG=["onFocus","onBlur"],tG=["onInput","onInvalid","onReset","onSubmit"],nG=["onLoad","onError"],sG=["onKeyDown","onKeyPress","onKeyUp"],rG=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],iG=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],oG=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],aG=["onSelect"],lG=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],cG=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uG=["onScroll"],hG=["onWheel"],dG=["onAnimationStart","onAnimationEnd","onAnimationIteration"],fG=["onTransitionEnd"],pG=["onToggle"],mG=["onChange"],gG=[...Q6,...Z6,...eG,...tG,...nG,...sG,...rG,...iG,...oG,...aG,...lG,...cG,...uG,...hG,...dG,...fG,...mG,...pG];function NI(s,e){const t={};for(const n of gG){const r=s[n];r&&(e?t[n]=(i=>r(i,e(n))):t[n]=r)}return t}var yG="Invariant failed";function mt(s,e){if(!s)throw new Error(yG)}var RS,_R;function vG(){if(_R)return RS;_R=1;var s=function(){};return RS=s,RS}var wG=vG();const ss=zA(wG),II=M.createContext(null),bG="noopener noreferrer nofollow";class xG{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return mt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){mt(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||bG,e.target=n?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{mt(this.pdfDocument),mt(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{mt(Array.isArray(t));const n=t[0];new Promise(r=>{mt(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(i=>{r(i)}).catch(()=>{mt(!1)}):typeof n=="number"?r(n):mt(!1)}).then(r=>{const i=r+1;mt(this.pdfViewer),mt(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:i})})})}goToPage(e){const t=e-1;mt(this.pdfViewer),mt(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Uh({children:s,type:e}){return T.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:s})}const AR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function SG(s,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function vf(){return M.useReducer(SG,{value:void 0,error:void 0})}const Kw=typeof window<"u",OI=Kw&&window.location.protocol==="file:";function _G(s){return typeof s<"u"}function nc(s){return _G(s)&&s!==null}function AG(s){return typeof s=="string"}function EG(s){return s instanceof ArrayBuffer}function kG(s){return mt(Kw),s instanceof Blob}function $A(s){return AG(s)&&/^data:/.test(s)}function ER(s){mt($A(s));const[e="",t=""]=s.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function CG(){return Kw&&window.devicePixelRatio||1}const jI="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function kR(){ss(!OI,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${jI}`)}function TG(){ss(!OI,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${jI}`)}function Du(s){s!=null&&s.cancel&&s.cancel()}function UA(s,e){return Object.defineProperty(s,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),s}function FI(s){return s.name==="AbortException"||s.name==="RenderingCancelledException"}function PG(s){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:i}=r.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}const{PDFDataRangeTransport:RG}=J6,LG=(s,e)=>{switch(e){case AR.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");s(t);break}case AR.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");s(t);break}}};function CR(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const BI=M.forwardRef(function({children:e,className:t,error:n="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:i,file:o,inputRef:l,imageResourcesPath:h,loading:d="Loading PDF",noData:p="No PDF file specified.",onItemClick:m,onLoadError:g,onLoadProgress:v,onLoadSuccess:b,onPassword:x=LG,onSourceError:A,onSourceSuccess:E,options:R,renderMode:C,rotate:D,scale:N,...I},j){const[F,W]=vf(),{value:K,error:J}=F,[ie,ce]=vf(),{value:Y,error:ue}=ie,Z=M.useRef(new xG),X=M.useRef([]),V=M.useRef(void 0),re=M.useRef(void 0);o&&o!==V.current&&CR(o)&&(ss(!$h(o,V.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),V.current=o),R&&R!==re.current&&(ss(!$h(R,re.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),re.current=R);const ne=M.useRef({scrollPageIntoView:rt=>{const{dest:nt,pageNumber:Ct,pageIndex:Rn=Ct-1}=rt;if(m){m({dest:nt,pageIndex:Rn,pageNumber:Ct});return}const $t=X.current[Rn];if($t){$t.scrollIntoView();return}ss(!1,`An internal link leading to page ${Ct} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});M.useImperativeHandle(j,()=>({linkService:Z,pages:X,viewer:ne}),[]);function U(){E&&E()}function q(){J&&(ss(!1,J.toString()),A&&A(J))}function oe(){W({type:"RESET"})}M.useEffect(oe,[o,W]);const de=M.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return $A(o)?{data:ER(o)}:(kR(),{url:o});if(o instanceof RG)return{range:o};if(EG(o))return{data:o};if(Kw&&kG(o))return{data:await PG(o)};if(mt(typeof o=="object"),mt(CR(o)),"url"in o&&typeof o.url=="string"){if($A(o.url)){const{url:rt,...nt}=o;return{data:ER(rt),...nt}}kR()}return o},[o]);M.useEffect(()=>{const rt=yy(de());return rt.promise.then(nt=>{W({type:"RESOLVE",value:nt})}).catch(nt=>{W({type:"REJECT",error:nt})}),()=>{Du(rt)}},[de,W]),M.useEffect(()=>{if(!(typeof K>"u")){if(K===!1){q();return}U()}},[K]);function Ce(){Y&&(b&&b(Y),X.current=new Array(Y.numPages),Z.current.setDocument(Y))}function Re(){ue&&(ss(!1,ue.toString()),g&&g(ue))}M.useEffect(function(){ce({type:"RESET"})},[ce,K]),M.useEffect(function(){if(!K)return;const nt=R?{...K,...R}:K,Ct=BE(nt);v&&(Ct.onProgress=v),x&&(Ct.onPassword=x);const Rn=Ct;return Rn.promise.then($t=>{Rn.destroyed||ce({type:"RESOLVE",value:$t})}).catch($t=>{Rn.destroyed||ce({type:"REJECT",error:$t})}),()=>{Rn.destroy()}},[R,ce,K]),M.useEffect(()=>{if(!(typeof Y>"u")){if(Y===!1){Re();return}Ce()}},[Y]),M.useEffect(function(){Z.current.setViewer(ne.current),Z.current.setExternalLinkRel(r),Z.current.setExternalLinkTarget(i)},[r,i]);const he=M.useCallback((rt,nt)=>{X.current[rt]=nt},[]),Fe=M.useCallback(rt=>{delete X.current[rt]},[]),ze=M.useMemo(()=>({imageResourcesPath:h,linkService:Z.current,onItemClick:m,pdf:Y,registerPage:he,renderMode:C,rotate:D,scale:N,unregisterPage:Fe}),[h,m,Y,he,C,D,N,Fe]),Ze=M.useMemo(()=>NI(I,()=>Y),[I,Y]);function We(){function rt(Ct){return!!(Ct!=null&&Ct.pdf)}if(!rt(ze))throw new Error("pdf is undefined");const nt=typeof e=="function"?e(ze):e;return T.jsx(II.Provider,{value:ze,children:nt})}function Pn(){return o?Y==null?T.jsx(Uh,{type:"loading",children:typeof d=="function"?d():d}):Y===!1?T.jsx(Uh,{type:"error",children:typeof n=="function"?n():n}):We():T.jsx(Uh,{type:"no-data",children:typeof p=="function"?p():p})}return T.jsx("div",{className:_f("react-pdf__Document",t),ref:l,...Ze,children:Pn()})});function $I(){return M.useContext(II)}function UI(){for(var s=[],e=0;e<arguments.length;e++)s[e]=arguments[e];var t=s.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(i){for(var o=0,l=t;o<l.length;o++){var h=l[o];typeof h=="function"?h(i):h&&(h.current=i)}}}const VI=M.createContext(null);function Xw(){return M.useContext(VI)}function DG(){const s=$I(),e=Xw();mt(e);const t={...s,...e},{filterAnnotations:n,imageResourcesPath:r,linkService:i,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:d,page:p,pdf:m,renderForms:g,rotate:v,scale:b=1}=t;mt(m),mt(p),mt(i);const[x,A]=vf(),{value:E,error:R}=x,C=M.useRef(null);ss(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function D(){E&&l&&l(E)}function N(){R&&(ss(!1,R.toString()),o&&o(R))}M.useEffect(function(){A({type:"RESET"})},[A,p]),M.useEffect(function(){if(!p)return;const K=yy(p.getAnnotations()),J=K;return K.promise.then(ie=>{A({type:"RESOLVE",value:ie})}).catch(ie=>{A({type:"REJECT",error:ie})}),()=>{Du(J)}},[A,p]),M.useEffect(()=>{if(E!==void 0){if(E===!1){N();return}D()}},[E]);function I(){d&&d()}function j(W){ss(!1,`${W}`),h&&h(W)}const F=M.useMemo(()=>p.getViewport({scale:b,rotation:v}),[p,v,b]);return M.useEffect(function(){if(!m||!p||!i||!E)return;const{current:K}=C;if(!K)return;const J=F.clone({dontFlip:!0}),ie={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:m.annotationStorage,commentManager:null,div:K,l10n:null,linkService:i,page:p,structTreeLayer:null,viewport:J},ce={annotations:n?n({annotations:E}):E,annotationStorage:m.annotationStorage,div:K,imageResourcesPath:r,linkService:i,page:p,renderForms:g,viewport:J};K.innerHTML="";try{new zE(ie).render(ce),I()}catch(Y){j(Y)}return()=>{}},[E,n,r,i,p,m,g,F]),T.jsx("div",{className:_f("react-pdf__Page__annotations","annotationLayer"),ref:C})}const zI={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},MG=/^H(\d+)$/;function NG(s){return s in zI}function Yw(s){return"children"in s}function HI(s){return Yw(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function IG(s){const e={};if(Yw(s)){const{role:t}=s,n=t.match(MG);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(NG(t)){const r=zI[t];r&&(e.role=r)}}return e}function WI(s){const e={};if(Yw(s)){if(s.alt!==void 0&&(e["aria-label"]=s.alt),s.lang!==void 0&&(e.lang=s.lang),HI(s)){const[t]=s.children;if(t){const n=WI(t);return{...e,...n}}}}else"id"in s&&(e["aria-owns"]=s.id);return e}function OG(s){return s?{...IG(s),...WI(s)}:null}function GI({className:s,node:e}){const t=M.useMemo(()=>OG(e),[e]),n=M.useMemo(()=>!Yw(e)||HI(e)?null:e.children.map((r,i)=>T.jsx(GI,{node:r},i)),[e]);return T.jsx("span",{className:s,...t,children:n})}function jG(){const s=Xw();mt(s);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=s,[n,r]=vf(),{value:i,error:o}=n,{customTextRenderer:l,page:h}=s;function d(){i&&t&&t(i)}function p(){o&&(ss(!1,o.toString()),e&&e(o))}return M.useEffect(function(){r({type:"RESET"})},[r,h]),M.useEffect(function(){if(l||!h)return;const g=yy(h.getStructTree()),v=g;return g.promise.then(b=>{r({type:"RESOLVE",value:b})}).catch(b=>{r({type:"REJECT",error:b})}),()=>Du(v)},[l,h,r]),M.useEffect(()=>{if(i!==void 0){if(i===!1){p();return}d()}},[i]),i?T.jsx(GI,{className:"react-pdf__Page__structTree structTree",node:i}):null}const TR=qi;function FG(s){const e=Xw();mt(e);const t={...e,...s},{_className:n,canvasBackground:r,devicePixelRatio:i=CG(),onRenderError:o,onRenderSuccess:l,page:h,renderForms:d,renderTextLayer:p,rotate:m,scale:g}=t,{canvasRef:v}=s;mt(h);const b=M.useRef(null);function x(){h&&l&&l(UA(h,g))}function A(D){FI(D)||(ss(!1,D.toString()),o&&o(D))}const E=M.useMemo(()=>h.getViewport({scale:g*i,rotation:m}),[i,h,m,g]),R=M.useMemo(()=>h.getViewport({scale:g,rotation:m}),[h,m,g]);M.useEffect(function(){if(!h)return;h.cleanup();const{current:N}=b;if(!N)return;N.width=E.width,N.height=E.height,N.style.width=`${Math.floor(R.width)}px`,N.style.height=`${Math.floor(R.height)}px`,N.style.visibility="hidden";const I={annotationMode:d?TR.ENABLE_FORMS:TR.ENABLE,canvas:N,canvasContext:N.getContext("2d",{alpha:!1}),viewport:E};r&&(I.background=r);const j=h.render(I),F=j;return j.promise.then(()=>{N.style.visibility="",x()}).catch(A),()=>Du(F)},[r,h,d,E,R]);const C=M.useCallback(()=>{const{current:D}=b;D&&(D.width=0,D.height=0)},[]);return M.useEffect(()=>C,[C]),T.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:UI(v,b),style:{display:"block",userSelect:"none"},children:p?T.jsx(jG,{}):null})}function BG(s){return"str"in s}function $G(){const s=Xw();mt(s);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:r,onRenderTextLayerSuccess:i,page:o,pageIndex:l,pageNumber:h,rotate:d,scale:p}=s;mt(o);const[m,g]=vf(),{value:v,error:b}=m,x=M.useRef(null);ss(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function A(){v&&n&&n(v)}function E(){b&&(ss(!1,b.toString()),t&&t(b))}M.useEffect(function(){g({type:"RESET"})},[o,g]),M.useEffect(function(){if(!o)return;const F=yy(o.getTextContent()),W=F;return F.promise.then(K=>{g({type:"RESOLVE",value:K})}).catch(K=>{g({type:"REJECT",error:K})}),()=>Du(W)},[o,g]),M.useEffect(()=>{if(v!==void 0){if(v===!1){E();return}A()}},[v]);const R=M.useCallback(()=>{i&&i()},[i]),C=M.useCallback(j=>{FI(j)||(ss(!1,j.toString()),r&&r(j))},[r]);function D(){const j=x.current;j&&j.classList.add("selecting")}function N(){const j=x.current;j&&j.classList.remove("selecting")}const I=M.useMemo(()=>o.getViewport({scale:p,rotation:d}),[o,d,p]);return M.useLayoutEffect(function(){if(!o||!v)return;const{current:F}=x;if(!F)return;F.innerHTML="";const W=o.streamTextContent({includeMarkedContent:!0}),K={container:F,textContentSource:W,viewport:I},J=new wm(K),ie=J;return J.render().then(()=>{const ce=document.createElement("div");ce.className="endOfContent",F.append(ce);const Y=F.querySelectorAll('[role="presentation"]');if(e){let ue=0;v.items.forEach((Z,X)=>{if(!BG(Z))return;const V=Y[ue];if(!V)return;const re=e({pageIndex:l,pageNumber:h,itemIndex:X,...Z});V.innerHTML=re,ue+=Z.str&&Z.hasEOL?2:1})}R()}).catch(C),()=>Du(ie)},[e,C,R,o,l,h,v,I]),T.jsx("div",{className:_f("react-pdf__Page__textContent","textLayer"),onMouseUp:N,onMouseDown:D,ref:x})}const PR=1;function qI(s){const t={...$I(),...s},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:i,canvasRef:o,children:l,className:h,customRenderer:d,customTextRenderer:p,devicePixelRatio:m,error:g="Failed to load the page.",filterAnnotations:v,height:b,inputRef:x,loading:A="Loading page",noData:E="No page specified.",onGetAnnotationsError:R,onGetAnnotationsSuccess:C,onGetStructTreeError:D,onGetStructTreeSuccess:N,onGetTextError:I,onGetTextSuccess:j,onLoadError:F,onLoadSuccess:W,onRenderAnnotationLayerError:K,onRenderAnnotationLayerSuccess:J,onRenderError:ie,onRenderSuccess:ce,onRenderTextLayerError:Y,onRenderTextLayerSuccess:ue,pageIndex:Z,pageNumber:X,pdf:V,registerPage:re,renderAnnotationLayer:ne=!0,renderForms:U=!1,renderMode:q="canvas",renderTextLayer:oe=!0,rotate:de,scale:Ce=PR,unregisterPage:Re,width:he,...Fe}=t,[ze,Ze]=vf(),{value:We,error:Pn}=ze,rt=M.useRef(null);mt(V);const nt=nc(X)?X-1:Z??null,Ct=X??(nc(Z)?Z+1:null),Rn=de??(We?We.rotate:null),$t=M.useMemo(()=>{if(!We)return null;let Os=1;const Zi=Ce??PR;if(he||b){const ys=We.getViewport({scale:1,rotation:Rn});he?Os=he/ys.width:b&&(Os=b/ys.height)}return Zi*Os},[b,We,Rn,Ce,he]);M.useEffect(function(){return()=>{nc(nt)&&r&&Re&&Re(nt)}},[r,V,nt,Re]);function vy(){if(W){if(!We||!$t)return;W(UA(We,$t))}if(r&&re){if(!nc(nt)||!rt.current)return;re(nt,rt.current)}}function Lf(){Pn&&(ss(!1,Pn.toString()),F&&F(Pn))}M.useEffect(function(){Ze({type:"RESET"})},[Ze,V,nt]),M.useEffect(function(){if(!V||!Ct)return;const Zi=yy(V.getPage(Ct)),ys=Zi;return Zi.promise.then(eo=>{Ze({type:"RESOLVE",value:eo})}).catch(eo=>{Ze({type:"REJECT",error:eo})}),()=>Du(ys)},[Ze,V,Ct]),M.useEffect(()=>{if(We!==void 0){if(We===!1){Lf();return}vy()}},[We,$t]);const Qi=M.useMemo(()=>nc(nt)&&Ct&&nc(Rn)&&nc($t)?{_className:n,canvasBackground:i,customTextRenderer:p,devicePixelRatio:m,filterAnnotations:v,onGetAnnotationsError:R,onGetAnnotationsSuccess:C,onGetStructTreeError:D,onGetStructTreeSuccess:N,onGetTextError:I,onGetTextSuccess:j,onRenderAnnotationLayerError:K,onRenderAnnotationLayerSuccess:J,onRenderError:ie,onRenderSuccess:ce,onRenderTextLayerError:Y,onRenderTextLayerSuccess:ue,page:We,pageIndex:nt,pageNumber:Ct,renderForms:U,renderTextLayer:oe,rotate:Rn,scale:$t}:null,[n,i,p,m,v,R,C,D,N,I,j,K,J,ie,ce,Y,ue,We,nt,Ct,U,oe,Rn,$t]),ca=M.useMemo(()=>NI(Fe,()=>We&&($t?UA(We,$t):void 0)),[Fe,We,$t]),ua=`${nt}@${$t}/${Rn}`;function wy(){switch(q){case"custom":return mt(d),T.jsx(d,{},`${ua}_custom`);case"none":return null;case"canvas":default:return T.jsx(FG,{canvasRef:o},`${ua}_canvas`)}}function by(){return oe?T.jsx($G,{},`${ua}_text`):null}function xy(){return ne?T.jsx(DG,{},`${ua}_annotations`):null}function Sy(){function Os(ys){return!!(ys!=null&&ys.page)}if(!Os(Qi))throw new Error("page is undefined");const Zi=typeof l=="function"?l(Qi):l;return T.jsxs(VI.Provider,{value:Qi,children:[wy(),by(),xy(),Zi]})}function Df(){return Ct?V===null||We===void 0||We===null?T.jsx(Uh,{type:"loading",children:typeof A=="function"?A():A}):V===!1||We===!1?T.jsx(Uh,{type:"error",children:typeof g=="function"?g():g}):Sy():T.jsx(Uh,{type:"no-data",children:typeof E=="function"?E():E})}return T.jsx("div",{className:_f(n,h),"data-page-number":Ct,ref:UI(x,rt),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${$t}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...ca,children:Df()})}TG();ur.workerSrc="pdf.worker.mjs";ur.workerSrc=new URL("/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();function KI({material:s,onDelete:e}){const{user:t}=Mu(),[n,r]=M.useState(!1),[i,o]=M.useState(!1),[l,h]=M.useState(!1),[d,p]=M.useState(!1),m=(t==null?void 0:t.id)===s.user_id,g=s.file_url.toLowerCase().includes(".pdf"),v=s.file_url.match(/\.(jpeg|jpg|gif|png)$/i)!=null,b=async()=>{if(confirm("Are you sure you want to delete this material?")){r(!0);try{const C=new URL(s.file_url).pathname.split("/"),D=C[C.length-1],N=`${s.user_id}/${D}`;await Ns.storage.from("materials").remove([N]);const{error:I}=await Ns.from("materials").delete().eq("id",s.id);if(I)throw I;e&&e(s.id)}catch(R){console.error("Error deleting material:",R),alert("Failed to delete material")}finally{r(!1)}}},x=()=>{h(!0)},A=()=>{navigator.clipboard.writeText(s.file_url),p(!0),setTimeout(()=>p(!1),2e3)},E=new Date(s.created_at).toLocaleDateString("en-GB");return T.jsxs(T.Fragment,{children:[T.jsx(Ll.div,{whileHover:{y:-5},transition:{type:"spring",stiffness:300},children:T.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow border border-gray-100 overflow-hidden flex flex-col h-full",children:T.jsxs("div",{className:"flex flex-row p-4 gap-4 h-full",children:[T.jsxs("div",{className:"flex-1 flex flex-col justify-between space-y-3",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"text-lg font-bold text-gray-900 leading-tight line-clamp-2",children:s.title||s.subject||"Untitled"}),T.jsxs("div",{className:"mt-3 space-y-1.5 text-sm text-gray-600",children:[s.subject&&T.jsxs("p",{children:[T.jsx("span",{className:"text-gray-500",children:"Subject:"})," ",s.subject]}),s.module&&T.jsxs("p",{children:[T.jsx("span",{className:"text-gray-500",children:"@Module:"})," ",s.module.replace("Module ","")]}),s.semester&&T.jsxs("p",{children:[T.jsx("span",{className:"text-gray-500",children:"Semester:"})," ",s.semester.replace("Semester ","")]}),s.college_details&&T.jsxs("p",{className:"line-clamp-1",children:[T.jsx("span",{className:"text-gray-500",children:"Details:"})," ",s.college_details]})]}),T.jsxs("p",{className:"mt-3 text-sm font-semibold text-green-700 uppercase tracking-wide",children:["By: ",s.uploader_name||"Unknown"]})]}),T.jsxs("div",{className:"flex items-center justify-between mt-4",children:[T.jsx(en,{asChild:!0,size:"sm",className:"bg-black hover:bg-gray-800 text-white rounded-md px-4 py-1 h-8 text-xs font-medium",children:T.jsx(Is,{to:`/material/${s.id}`,children:"View Note"})}),T.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[T.jsx("button",{onClick:x,className:"hover:text-green-600 transition-colors",children:T.jsx(qS,{className:"w-5 h-5 cursor-pointer"})}),T.jsx(MV,{className:"w-5 h-5 cursor-pointer hover:text-yellow-500"}),m&&T.jsx("button",{onClick:b,disabled:n,className:"text-red-400 hover:text-red-600",children:n?T.jsx(lm,{className:"w-4 h-4 animate-spin"}):T.jsx(f3,{className:"w-4 h-4"})})]})]})]}),T.jsxs("div",{className:"w-24 sm:w-32 shrink-0 flex flex-col items-center justify-start pt-1",children:[T.jsx("div",{className:"w-full aspect-[3/4] bg-gray-50 border rounded-md flex items-center justify-center overflow-hidden relative shadow-inner group",children:v?T.jsx("img",{src:s.file_url,alt:"Preview",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}):g&&!i?T.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white overflow-hidden pointer-events-none",children:T.jsx(BI,{file:s.file_url,onLoadError:()=>o(!0),loading:T.jsxs("div",{className:"flex flex-col items-center gap-1",children:[T.jsx(lm,{className:"w-5 h-5 animate-spin text-gray-400"}),T.jsx("span",{className:"text-[10px] text-gray-400",children:"Loading PDF..."})]}),error:T.jsxs("div",{className:"text-[10px] text-red-400 flex flex-col items-center",children:[T.jsx(DT,{className:"w-6 h-6 mb-1"}),"Error"]}),className:"flex justify-center items-center w-full h-full",children:T.jsx(qI,{pageNumber:1,width:140,renderTextLayer:!1,renderAnnotationLayer:!1,className:"shadow-sm"})})}):T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"absolute inset-0 bg-white p-2 flex flex-col gap-2 opacity-50",children:[T.jsx("div",{className:"h-2 w-full bg-gray-200 rounded-sm"}),T.jsx("div",{className:"h-2 w-3/4 bg-gray-200 rounded-sm"}),T.jsx("div",{className:"h-2 w-full bg-gray-200 rounded-sm"}),T.jsx("div",{className:"h-2 w-5/6 bg-gray-200 rounded-sm"}),T.jsx("div",{className:"h-2 w-full bg-gray-200 rounded-sm"})]}),T.jsx(DT,{className:"w-8 h-8 text-gray-400 z-10"})]})}),T.jsx("p",{className:"mt-2 text-xs text-gray-400 font-medium",children:E})]})]})})}),l&&T.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:[T.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 relative animate-in zoom-in-95 duration-200",onClick:R=>R.stopPropagation(),children:[T.jsx("button",{onClick:()=>h(!1),className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 transition-colors",children:T.jsx(w3,{className:"w-5 h-5"})}),T.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Share Material"}),T.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Share this note with your friends or classmates."}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex gap-2",children:[T.jsx("div",{className:"relative flex-1",children:T.jsx("input",{type:"text",readOnly:!0,value:s.file_url,className:"w-full h-10 pl-3 pr-3 rounded-md border border-gray-200 bg-gray-50 text-sm text-gray-600 focus:outline-none"})}),T.jsx(en,{onClick:A,className:"bg-black hover:bg-gray-800 text-white min-w-[100px]",children:d?T.jsxs(T.Fragment,{children:[T.jsx(IV,{className:"w-4 h-4 mr-2"}),"Copied"]}):T.jsxs(T.Fragment,{children:[T.jsx(HV,{className:"w-4 h-4 mr-2"}),"Copy"]})})]}),T.jsx("div",{className:"flex justify-end pt-2",children:T.jsxs("a",{href:`https://wa.me/?text=Check out this note: ${encodeURIComponent(s.title||"Note")} - ${encodeURIComponent(s.file_url)}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-600 hover:text-green-700 font-medium flex items-center gap-2",children:[T.jsx(qS,{className:"w-4 h-4"})," Share on WhatsApp"]})})]})]}),T.jsx("div",{className:"absolute inset-0 -z-10",onClick:()=>h(!1)})]})]})}function Jw(){const s=M.useRef(null);return M.useEffect(()=>{const e=s.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let n,r=0;const i=()=>{e.width=window.innerWidth,e.height=window.innerHeight};window.addEventListener("resize",i),i();const o=25,l=1.2,h="#3B82F6",d=()=>{r+=.015,t.clearRect(0,0,e.width,e.height);const p=Math.ceil(e.width/o),m=Math.ceil(e.height/o);for(let g=0;g<p;g++)for(let v=0;v<m;v++){const b=g*o,x=v*o,A=(Math.sin(b*.01+r)+Math.cos(x*.01+r))*.5,E=Math.max(.1,l+A),R=Math.max(.1,(1+Math.sin(b*.005+x*.005+r))/2);t.fillStyle=h,t.globalAlpha=R*.6,t.beginPath(),t.arc(b,x,E,0,Math.PI*2),t.fill()}n=requestAnimationFrame(d)};return d(),()=>{window.removeEventListener("resize",i),cancelAnimationFrame(n)}},[]),T.jsx("canvas",{ref:s,className:"fixed inset-0 -z-10 bg-[#FDFBF7] pointer-events-none"})}function UG(){const[s,e]=M.useState([]),[t,n]=M.useState([]),[r,i]=M.useState(!0),{user:o}=Mu(),[l,h]=M.useState(""),[d,p]=M.useState(""),[m,g]=M.useState(""),[v,b]=M.useState(""),x=["Computer Science","AIML","Information Technology","Electronics & Telecommunication","Mechanical Engineering","Civil Engineering","Electrical Engineering","Mathematics","Physics"],A=["Semester 1","Semester 2","Semester 3","Semester 4","Semester 5","Semester 6","Semester 7","Semester 8"],E=["Module 1","Module 2","Module 3","Module 4","Module 5"];M.useEffect(()=>{R()},[]),M.useEffect(()=>{C()},[l,d,m,v,s]);const R=async()=>{try{i(!0);const{data:I,error:j}=await Ns.from("materials").select("*").order("created_at",{ascending:!1});if(j)throw j;e(I||[]),n(I||[])}catch(I){console.error("Error fetching materials:",I)}finally{i(!1)}},C=()=>{let I=[...s];if(l){const j=l.toLowerCase();I=I.filter(F=>{var W,K,J;return((W=F.subject)==null?void 0:W.toLowerCase().includes(j))||((K=F.title)==null?void 0:K.toLowerCase().includes(j))||((J=F.uploader_name)==null?void 0:J.toLowerCase().includes(j))})}d&&(I=I.filter(j=>j.branch===d||j.subject===d)),m&&(I=I.filter(j=>j.module===m)),v&&(I=I.filter(j=>j.semester===v)),n(I)},D=()=>{h(""),p(""),g(""),b("")},N=I=>{const j=s.filter(F=>F.id!==I);e(j)};return T.jsxs("div",{className:"flex min-h-screen flex-col relative overflow-hidden",children:[T.jsx(Jw,{}),T.jsxs("header",{className:"sticky top-0 z-50 w-full bg-white/70 backdrop-blur-md px-4 lg:px-6 h-16 flex items-center justify-between border-b border-gray-100/50 supports-[backdrop-filter]:bg-white/50",children:[T.jsx("div",{className:"flex items-center",children:T.jsx("div",{className:"flex items-center gap-2",children:T.jsxs("span",{className:"font-bold text-xl tracking-tight text-gray-900",children:["Notes",T.jsx("span",{className:"text-blue-600",children:"Pathv"})]})})}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx(Is,{to:"/upload",children:T.jsxs(en,{className:"bg-black hover:bg-gray-800 text-white shadow-lg rounded-full px-6 transition-all hover:scale-105",children:[T.jsx(IL,{className:"w-4 h-4 mr-2"}),"Upload notes"]})}),o?T.jsx("div",{className:"flex items-center gap-2",children:T.jsx(Is,{to:"/profile",children:T.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 overflow-hidden border border-gray-200 shadow-sm hover:ring-2 hover:ring-blue-100 transition-all",children:T.jsx("img",{src:`https://api.dicebear.com/7.x/pixel-art/svg?seed=${o.email}&gender=male`,alt:"User",className:"w-full h-full object-cover"})})})}):T.jsx(Is,{to:"/auth",children:T.jsx(en,{variant:"ghost",size:"sm",className:"font-medium text-gray-600 hover:text-gray-900",children:"Sign In"})})]})]}),T.jsxs("main",{className:"flex-1 container px-4 md:px-6 py-12 mx-auto max-w-7xl relative z-10",children:[T.jsx("div",{className:"mb-16 md:mb-24 max-w-4xl mx-auto text-left md:text-left mt-8",children:T.jsxs(Ll.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[T.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold tracking-tight text-gray-900 leading-[1.1] mb-6",children:["A smart repository ",T.jsx("br",{}),T.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600",children:"for engineering notes."})]}),T.jsx("p",{className:"text-xl md:text-2xl text-gray-500 max-w-2xl leading-relaxed",children:"Share, discover, and learn with peers from college."})]})}),T.jsxs(Ll.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"relative overflow-hidden bg-white/40 backdrop-blur-xl border border-black/60 rounded-3xl md:rounded-full py-4 md:py-2 px-4 md:px-3 mb-12 shadow-xl shadow-blue-900/5 flex flex-col md:flex-row gap-4 md:gap-2 items-center ring-1 ring-white/60 max-w-5xl mx-auto",children:[T.jsxs("div",{className:"relative flex-1 w-full md:min-w-[300px]",children:[T.jsx(MT,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),T.jsx("input",{type:"text",placeholder:"Search notes...",className:"w-full h-10 pl-10 pr-4 rounded-full border border-gray-200/50 md:border-none focus:outline-none focus:ring-2 focus:ring-blue-500/20 md:focus:ring-0 text-gray-700 bg-white/50 md:bg-transparent placeholder:text-gray-400 transition-all",value:l,onChange:I=>h(I.target.value)})]}),T.jsx("div",{className:"h-6 w-px bg-gray-300 hidden md:block mx-2"}),T.jsx("div",{className:"w-full h-px bg-gray-200 md:hidden"}),T.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto",children:[T.jsxs("div",{className:"relative w-full md:w-auto",children:[T.jsxs("select",{className:"h-10 px-4 py-2 rounded-full border border-gray-200 bg-white/50 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500/50 w-full md:w-auto hover:bg-white/80 transition-colors cursor-pointer appearance-none",value:d,onChange:I=>p(I.target.value),children:[T.jsx("option",{value:"",children:"Select Branch"}),x.map(I=>T.jsx("option",{value:I,children:I},I))]}),T.jsx("div",{className:"absolute right-3 top-3 pointer-events-none",children:T.jsx(rS,{className:"h-4 w-4 text-gray-500"})})]}),T.jsxs("div",{className:"relative w-full md:w-auto",children:[T.jsxs("select",{className:"h-10 px-4 py-2 rounded-full border border-gray-200 bg-white/50 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500/50 w-full md:w-auto hover:bg-white/80 transition-colors cursor-pointer appearance-none",value:m,onChange:I=>g(I.target.value),children:[T.jsx("option",{value:"",children:"Module"}),E.map(I=>T.jsx("option",{value:I,children:I},I))]}),T.jsx("div",{className:"absolute right-3 top-3 pointer-events-none",children:T.jsx(rS,{className:"h-4 w-4 text-gray-500"})})]}),T.jsxs("div",{className:"relative w-full md:w-auto",children:[T.jsxs("select",{className:"h-10 px-4 py-2 rounded-full border border-gray-200 bg-white/50 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500/50 w-full md:w-auto hover:bg-white/80 transition-colors cursor-pointer appearance-none",value:v,onChange:I=>b(I.target.value),children:[T.jsx("option",{value:"",children:"Semester"}),A.map(I=>T.jsx("option",{value:I,children:I},I))]}),T.jsx("div",{className:"absolute right-3 top-3 pointer-events-none",children:T.jsx(rS,{className:"h-4 w-4 text-gray-500"})})]})]}),T.jsx("div",{className:"w-full h-px bg-gray-200 md:hidden"}),T.jsx(en,{variant:"ghost",className:"w-full md:w-auto rounded-full text-xs text-rose-500 hover:bg-rose-50 hover:text-rose-600 px-4",onClick:D,children:"Reset Filters"})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"flex items-center justify-between px-2",children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Recent Uploads"}),T.jsxs("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[t.length," results"]})]}),r?T.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3",children:[...Array(6)].map((I,j)=>T.jsx("div",{className:"h-[250px] rounded-xl border bg-gray-100 animate-pulse"},j))}):t.length>0?T.jsx(Ll.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3",children:t.map((I,j)=>T.jsx(Ll.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:j*.05},children:T.jsx(KI,{material:I,onDelete:N})},I.id))}):T.jsxs("div",{className:"text-center py-20 bg-white/50 rounded-2xl border border-dashed border-gray-200 backdrop-blur-sm",children:[T.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mb-4",children:T.jsx(MT,{className:"w-6 h-6 text-gray-300"})}),T.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No notes found"}),T.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Try adjusting your filters or search query."}),T.jsx(en,{variant:"outline",onClick:D,children:"Clear all filters"})]})]})]}),T.jsx("footer",{className:"py-12 relative z-10 border-t border-gray-100 bg-white/40 backdrop-blur-sm mt-12",children:T.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[T.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:T.jsxs("div",{className:"text-center md:text-left",children:[T.jsxs("span",{className:"font-bold text-xl tracking-tight text-gray-900",children:["Notes",T.jsx("span",{className:"text-blue-600",children:"Pathv"})]}),T.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-xs",children:"Empowering students to share knowledge and ace their exams together."})]})}),T.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200/50 flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-gray-400",children:[T.jsx("p",{children:" 2026 NotesPathv. All rights reserved."}),T.jsxs("p",{className:"flex items-center ",children:["Made with ",T.jsx("span",{className:"text-rose-500",children:""})," by",T.jsx("a",{href:"https://anishlandage.fun",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-black transition-colors font-medium",children:"Anish Landage"})]})]})]})})]})}const gc=M.forwardRef(({className:s,type:e,...t},n)=>T.jsx("input",{type:e,className:Ru("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:n,...t}));gc.displayName="Input";function VG(){const[s,e]=M.useState(""),[t,n]=M.useState(""),[r,i]=M.useState(!1),[o,l]=M.useState(!0),[h,d]=M.useState(null),p=sy(),m=async g=>{g.preventDefault(),i(!0),d(null);try{if(o){const{error:v}=await Ns.auth.signInWithPassword({email:s,password:t});if(v)throw v;p("/dashboard")}else{const{error:v}=await Ns.auth.signUp({email:s,password:t});if(v)throw v;p("/dashboard")}}catch(v){d(v.message)}finally{i(!1)}};return T.jsxs("div",{className:"min-h-screen flex flex-col relative overflow-hidden font-sans",children:[T.jsx(Jw,{}),T.jsx("header",{className:"absolute top-0 left-0 w-full z-20 p-6",children:T.jsxs(Is,{to:"/",className:"inline-flex items-center gap-2 text-gray-500 hover:text-black transition-colors bg-white/50 backdrop-blur-sm px-4 py-2 rounded-full border border-white/60 shadow-sm hover:shadow-md",children:[T.jsx(Fw,{className:"w-4 h-4"}),T.jsx("span",{className:"font-medium text-sm",children:"Back to Home"})]})}),T.jsx("main",{className:"flex-1 flex items-center justify-center py-20 px-4 relative z-10",children:T.jsx(Ll.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:T.jsxs("div",{className:"relative overflow-hidden bg-white/60 backdrop-blur-2xl border border-white/50 rounded-3xl p-8 shadow-2xl shadow-blue-900/5 ring-1 ring-white/60",children:[T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-blue-600/20 transform rotate-3",children:o?T.jsx(e3,{className:"w-6 h-6 text-white"}):T.jsx(g3,{className:"w-6 h-6 text-white"})}),T.jsx("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:o?"Welcome back":"Create an account"}),T.jsx("p",{className:"text-sm text-gray-500 mt-2",children:o?"Enter your credentials to access your account":"Enter your details to get started"})]}),T.jsxs("form",{onSubmit:m,className:"space-y-4",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider ml-1",children:"Email"}),T.jsxs("div",{className:"relative",children:[T.jsx(s3,{className:"absolute left-3 top-3.5 h-4 w-4 text-gray-400"}),T.jsx(gc,{type:"email",placeholder:"m@example.com",required:!0,value:s,onChange:g=>e(g.target.value),className:"pl-10 bg-white/50 border-gray-200 focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 h-11 rounded-xl transition-all"})]})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider ml-1",children:"Password"}),T.jsxs("div",{className:"relative",children:[T.jsx(QV,{className:"absolute left-3 top-3.5 h-4 w-4 text-gray-400"}),T.jsx(gc,{type:"password",placeholder:"",required:!0,value:t,onChange:g=>n(g.target.value),className:"pl-10 bg-white/50 border-gray-200 focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 h-11 rounded-xl transition-all"})]})]}),h&&T.jsxs("div",{className:"p-3 rounded-lg bg-red-50 border border-red-100 flex items-start gap-2 text-red-600 text-sm animate-in fade-in slide-in-from-top-2",children:[T.jsx(FV,{className:"w-4 h-4 mt-0.5 shrink-0"}),T.jsx("span",{className:"leading-snug",children:h})]}),T.jsxs(en,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2.5 rounded-xl h-11 shadow-lg shadow-blue-600/20 hover:shadow-blue-600/30 transition-all mt-2",type:"submit",disabled:r,children:[r&&T.jsx(lm,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Sign In":"Sign Up"]})]}),T.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200/50 text-center",children:T.jsxs("p",{className:"text-sm text-gray-500",children:[o?"Don't have an account? ":"Already have an account? ",T.jsx("button",{onClick:()=>l(!o),className:"font-semibold text-blue-600 hover:text-blue-700 hover:underline transition-colors focus:outline-none",children:o?"Sign Up":"Login"})]})}),T.jsxs("div",{className:"mt-6 flex justify-center text-xs text-gray-400 gap-4",children:[T.jsxs("span",{className:"flex items-center gap-1",children:[T.jsx(h3,{className:"w-3 h-3"})," Secure"]}),T.jsx("span",{children:""}),T.jsx("span",{className:"hover:text-gray-600 cursor-pointer transition-colors",children:"Privacy"}),T.jsx("span",{children:""}),T.jsx("span",{className:"hover:text-gray-600 cursor-pointer transition-colors",children:"Terms"})]})]})})})]})}function zG(){const[s,e]=M.useState([]),[t,n]=M.useState(!0),{user:r}=Mu();M.useEffect(()=>{i()},[r]);const i=async()=>{try{n(!0);const{data:o,error:l}=await Ns.from("materials").select("*").order("created_at",{ascending:!1});if(l)throw l;e(o||[])}catch(o){console.error("Error fetching materials:",o)}finally{n(!1)}};return T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),T.jsx("p",{className:"text-muted-foreground",children:"Manage and view your uploaded materials."})]}),T.jsx(Is,{to:"/upload",children:T.jsxs(en,{children:[T.jsx(a3,{className:"mr-2 h-4 w-4"}),"Upload New"]})})]}),t?T.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[...Array(4)].map((o,l)=>T.jsx("div",{className:"h-[300px] rounded-lg border bg-muted animate-pulse"},l))}):s.length>0?T.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s.map(o=>T.jsx(KI,{material:o},o.id))}):T.jsx("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed p-8 text-center animate-in fade-in-50",children:T.jsxs("div",{className:"mx-auto flex max-w-[420px] flex-col items-center justify-center text-center",children:[T.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No materials found"}),T.jsx("p",{className:"mb-4 mt-2 text-sm text-muted-foreground",children:"You haven't uploaded any materials yet."}),T.jsx(Is,{to:"/upload",children:T.jsx(en,{variant:"outline",children:"Upload your first material"})})]})})]})}function HG(){const[s,e]=M.useState(""),[t,n]=M.useState(""),[r,i]=M.useState(""),[o,l]=M.useState(""),[h,d]=M.useState(""),[p,m]=M.useState(""),[g,v]=M.useState(""),[b,x]=M.useState(null),[A,E]=M.useState(!1),[R,C]=M.useState(null),{user:D}=Mu(),N=sy(),I=["Computer Science","AIML","Information Technology","Electronics & Telecommunication","Mechanical Engineering","Civil Engineering","Electrical Engineering"],j=["Semester 1","Semester 2","Semester 3","Semester 4","Semester 5","Semester 6","Semester 7","Semester 8"],F=["Module 1","Module 2","Module 3","Module 4","Module 5"],[W,K]=M.useState([]),J={"Computer Science":["Data Structures","Algorithms","Database Management Systems","Operating Systems","Computer Networks","Object Oriented Programming","Discrete Mathematics","Digital Logic Design","Theory of Computation","Compiler Design"],AIML:["Artificial Intelligence","Machine Learning","Deep Learning","Data Science","Natural Language Processing","Statistics for Data Science","Python Programming"],"Information Technology":["Web Development","Software Engineering","Information Security","Cloud Computing","Data Mining","E-Commerce"],"Electronics & Telecommunication":["Analog Circuits","Digital Circuits","Signals and Systems","Control Systems","Microprocessors","Communication Systems","Electromagnetics"],"Mechanical Engineering":["Thermodynamics","Fluid Mechanics","Strength of Materials","Kinematics of Machines","Dynamics of Machinery","Heat Transfer","Manufacturing Processes"],"Civil Engineering":["Structural Analysis","Geotechnical Engineering","Fluid Mechanics","Surveying","Transportation Engineering","Environmental Engineering","Concrete Technology"],"Electrical Engineering":["Circuit Theory","Electrical Machines","Power Systems","Control Systems","Power Electronics","Analog and Digital Electronics"],Mathematics:["Engineering Mathematics I","Engineering Mathematics II","Engineering Mathematics III","Engineering Mathematics IV","Probability and Statistics"],Physics:["Engineering Physics","Quantum Physics","Optics","Solid State Physics"]};M.useEffect(()=>{if(!t){K([]);return}(async()=>{let ue=new Set;(J[t]||[]).forEach(X=>ue.add(X));try{const{data:X,error:V}=await Ns.from("materials").select("subject").eq("branch",t);if(V)throw V;X&&X.forEach(re=>{re.subject&&ue.add(re.subject)})}catch(X){console.error("Error fetching subjects:",X)}finally{K(Array.from(ue).sort())}})()},[t]);const ie=Y=>{Y.target.files&&Y.target.files[0]&&x(Y.target.files[0])},ce=async Y=>{if(Y.preventDefault(),!(!b||!D)){if(!s){C("Please enter a title");return}if(!t){C("Please select a branch");return}if(!r){C("Please enter a subject");return}E(!0),C(null);try{const ue=b.name.split(".").pop(),Z=`${Math.random().toString(36).substring(2,15)}_${Date.now()}.${ue}`,X=`${D.id}/${Z}`,{error:V}=await Ns.storage.from("materials").upload(X,b);if(V)throw V;const{data:{publicUrl:re}}=Ns.storage.from("materials").getPublicUrl(X),{error:ne}=await Ns.from("materials").insert({title:s,description:p,file_url:re,user_id:D.id,branch:t,subject:r,semester:o,module:h,college_details:p,uploader_name:g});if(ne)throw ne;N("/")}catch(ue){console.error(ue),C(ue.message||"Error uploading material")}finally{E(!1)}}};return T.jsxs("div",{className:"min-h-screen flex flex-col relative overflow-hidden",children:[T.jsx(Jw,{}),T.jsx("header",{className:"absolute top-0 left-0 w-full z-20 p-6",children:T.jsxs(Is,{to:"/",className:"inline-flex items-center gap-2 text-gray-500 hover:text-black transition-colors bg-white/50 backdrop-blur-sm px-4 py-2 rounded-full border border-white/60 shadow-sm hover:shadow-md",children:[T.jsx(Fw,{className:"w-4 h-4"}),T.jsx("span",{className:"font-medium text-sm",children:"Back to Home"})]})}),T.jsx("main",{className:"flex-1 flex items-center justify-center py-20 px-4 relative z-10",children:T.jsx(Ll.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-2xl relative",children:T.jsxs("div",{className:"relative overflow-hidden bg-white/70 backdrop-blur-xl border border-white/60 rounded-3xl p-8 md:p-10 shadow-2xl shadow-blue-900/10 ring-1 ring-white/80",children:[T.jsxs("div",{className:"mb-8 text-center",children:[T.jsx("h2",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Upload Material"}),T.jsx("p",{className:"text-gray-500 mt-2",children:"Share your knowledge and help others learn."})]}),T.jsxs("div",{className:`mb-8 border-2 border-dashed rounded-2xl p-8 flex flex-col items-center justify-center text-center cursor-pointer transition-all relative group ${b?"border-green-500/50 bg-green-50/50":"border-gray-300 hover:border-blue-500/50 hover:bg-white/60"}`,children:[T.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",onChange:ie,required:!b}),b?T.jsxs("div",{className:"flex flex-col items-center gap-3 text-green-700 z-20 animate-in zoom-in-50 duration-300",children:[T.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center shadow-sm",children:T.jsx($V,{className:"w-8 h-8"})}),T.jsxs("div",{className:"flex flex-col items-center",children:[T.jsx("span",{className:"font-semibold text-lg max-w-[250px] truncate",children:b.name}),T.jsxs("span",{className:"text-xs text-green-600/80",children:[(b.size/1024/1024).toFixed(2)," MB"]})]}),T.jsx(en,{type:"button",variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-600 hover:bg-red-50 mt-2",onClick:Y=>{Y.preventDefault(),x(null)},children:"Change File"})]}):T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-50 group-hover:scale-110 transition-transform flex items-center justify-center mb-4 shadow-sm border border-blue-100",children:T.jsx(VV,{className:"w-8 h-8 text-blue-500"})}),T.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Click to upload or drag and drop"}),T.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"PDF, DOC, Images (Max 10MB)"})]})]}),T.jsxs("form",{onSubmit:ce,className:"space-y-5",children:[T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider ml-1",children:"Title"}),T.jsx(gc,{placeholder:"e.g. Data Structures Unit 1 Notes",value:s,onChange:Y=>e(Y.target.value),className:"bg-white/50 border-gray-200 focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 h-12 rounded-xl",required:!0})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider ml-1",children:"Branch"}),T.jsxs("div",{className:"relative",children:[T.jsxs("select",{className:"flex h-12 w-full rounded-xl border border-gray-200 bg-white/50 px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white disabled:cursor-not-allowed disabled:opacity-50 appearance-none transition-all",value:t,onChange:Y=>n(Y.target.value),required:!0,children:[T.jsx("option",{value:"",disabled:!0,selected:!0,children:"Select Branch"}),I.map(Y=>T.jsx("option",{value:Y,children:Y},Y))]}),T.jsx("div",{className:"absolute right-3 top-4 pointer-events-none",children:T.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider ml-1",children:"Subject"}),T.jsx(gc,{placeholder:"Search or type subject...",value:r,onChange:Y=>i(Y.target.value),className:"bg-white/50 border-gray-200 focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 h-12 rounded-xl",required:!0,list:"subject-suggestions"}),T.jsx("datalist",{id:"subject-suggestions",children:W.map(Y=>T.jsx("option",{value:Y},Y))})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row gap-5",children:[T.jsxs("div",{className:"space-y-1 w-full sm:w-1/2",children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider ml-1",children:"Semester"}),T.jsxs("div",{className:"relative",children:[T.jsxs("select",{className:"flex h-12 w-full rounded-xl border border-gray-200 bg-white/50 px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white appearance-none transition-all",value:o,onChange:Y=>l(Y.target.value),children:[T.jsx("option",{value:"",disabled:!0,selected:!0,children:"Select Semester"}),j.map(Y=>T.jsx("option",{value:Y,children:Y},Y))]}),T.jsx("div",{className:"absolute right-3 top-4 pointer-events-none",children:T.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),T.jsxs("div",{className:"space-y-1 w-full sm:w-1/2",children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider ml-1",children:"Module"}),T.jsxs("div",{className:"relative",children:[T.jsxs("select",{className:"flex h-12 w-full rounded-xl border border-gray-200 bg-white/50 px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white appearance-none transition-all",value:h,onChange:Y=>d(Y.target.value),children:[T.jsx("option",{value:"",disabled:!0,selected:!0,children:"Select Module"}),F.map(Y=>T.jsx("option",{value:Y,children:Y},Y))]}),T.jsx("div",{className:"absolute right-3 top-4 pointer-events-none",children:T.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider ml-1",children:"College Details"}),T.jsx(gc,{placeholder:"e.g. IIT Bombay, Prof. Sharma",value:p,onChange:Y=>m(Y.target.value),className:"bg-white/50 border-gray-200 focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 h-12 rounded-xl"})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider ml-1",children:"Your Name"}),T.jsx(gc,{placeholder:"Enter your name (Optional)",value:g,onChange:Y=>v(Y.target.value),className:"bg-white/50 border-gray-200 focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 h-12 rounded-xl"})]}),R&&T.jsx("div",{className:"p-3 rounded-lg bg-red-50 border border-red-100 text-red-600 text-sm text-center animate-in fade-in slide-in-from-top-2",children:R}),T.jsxs(en,{type:"submit",className:"w-full bg-black hover:bg-gray-800 text-white font-bold py-3 rounded-xl h-14 shadow-lg shadow-black/5 hover:shadow-black/10 hover:scale-[1.01] transition-all mt-4",disabled:A,children:[A&&T.jsx(lm,{className:"mr-2 h-5 w-5 animate-spin"}),A?"Uploading...":"Publish Note"]})]})]})})})]})}function WG(s,e=[]){let t=[];function n(i,o){const l=M.createContext(o);l.displayName=i+"Context";const h=t.length;t=[...t,o];const d=m=>{var E;const{scope:g,children:v,...b}=m,x=((E=g==null?void 0:g[s])==null?void 0:E[h])||l,A=M.useMemo(()=>b,Object.values(b));return T.jsx(x.Provider,{value:A,children:v})};d.displayName=i+"Provider";function p(m,g){var x;const v=((x=g==null?void 0:g[s])==null?void 0:x[h])||l,b=M.useContext(v);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[d,p]}const r=()=>{const i=t.map(o=>M.createContext(o));return function(l){const h=(l==null?void 0:l[s])||i;return M.useMemo(()=>({[`__scope${s}`]:{...l,[s]:h}}),[l,h])}};return r.scopeName=s,[n,GG(r,...e)]}function GG(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const n=s.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=n.reduce((l,{useScope:h,scopeName:d})=>{const m=h(i)[`__scope${d}`];return{...l,...m}},{});return M.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function qG(s){const e=M.useRef(s);return M.useEffect(()=>{e.current=s}),M.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}var VA=globalThis!=null&&globalThis.document?M.useLayoutEffect:()=>{},KG=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],GE=KG.reduce((s,e)=>{const t=wL(`Primitive.${e}`),n=M.forwardRef((r,i)=>{const{asChild:o,...l}=r,h=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),T.jsx(h,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...s,[e]:n}},{}),LS={exports:{}},DS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RR;function XG(){if(RR)return DS;RR=1;var s=Lw();function e(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var t=typeof Object.is=="function"?Object.is:e,n=s.useState,r=s.useEffect,i=s.useLayoutEffect,o=s.useDebugValue;function l(m,g){var v=g(),b=n({inst:{value:v,getSnapshot:g}}),x=b[0].inst,A=b[1];return i(function(){x.value=v,x.getSnapshot=g,h(x)&&A({inst:x})},[m,v,g]),r(function(){return h(x)&&A({inst:x}),m(function(){h(x)&&A({inst:x})})},[m]),o(v),v}function h(m){var g=m.getSnapshot;m=m.value;try{var v=g();return!t(m,v)}catch{return!0}}function d(m,g){return g()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return DS.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:p,DS}var LR;function YG(){return LR||(LR=1,LS.exports=XG()),LS.exports}var JG=YG();function QG(){return JG.useSyncExternalStore(ZG,()=>!0,()=>!1)}function ZG(){return()=>{}}var qE="Avatar",[e8]=WG(qE),[t8,XI]=e8(qE),YI=M.forwardRef((s,e)=>{const{__scopeAvatar:t,...n}=s,[r,i]=M.useState("idle");return T.jsx(t8,{scope:t,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:T.jsx(GE.span,{...n,ref:e})})});YI.displayName=qE;var JI="AvatarImage",QI=M.forwardRef((s,e)=>{const{__scopeAvatar:t,src:n,onLoadingStatusChange:r=()=>{},...i}=s,o=XI(JI,t),l=n8(n,i),h=qG(d=>{r(d),o.onImageLoadingStatusChange(d)});return VA(()=>{l!=="idle"&&h(l)},[l,h]),l==="loaded"?T.jsx(GE.img,{...i,ref:e,src:n}):null});QI.displayName=JI;var ZI="AvatarFallback",eO=M.forwardRef((s,e)=>{const{__scopeAvatar:t,delayMs:n,...r}=s,i=XI(ZI,t),[o,l]=M.useState(n===void 0);return M.useEffect(()=>{if(n!==void 0){const h=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(h)}},[n]),o&&i.imageLoadingStatus!=="loaded"?T.jsx(GE.span,{...r,ref:e}):null});eO.displayName=ZI;function DR(s,e){return s?e?(s.src!==e&&(s.src=e),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function n8(s,{referrerPolicy:e,crossOrigin:t}){const n=QG(),r=M.useRef(null),i=n?(r.current||(r.current=new window.Image),r.current):null,[o,l]=M.useState(()=>DR(i,s));return VA(()=>{l(DR(i,s))},[i,s]),VA(()=>{const h=m=>()=>{l(m)};if(!i)return;const d=h("loaded"),p=h("error");return i.addEventListener("load",d),i.addEventListener("error",p),e&&(i.referrerPolicy=e),typeof t=="string"&&(i.crossOrigin=t),()=>{i.removeEventListener("load",d),i.removeEventListener("error",p)}},[i,t,e]),o}var tO=YI,nO=QI,sO=eO;const rO=M.forwardRef(({className:s,...e},t)=>T.jsx(tO,{ref:t,className:Ru("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...e}));rO.displayName=tO.displayName;const iO=M.forwardRef(({className:s,...e},t)=>T.jsx(nO,{ref:t,className:Ru("aspect-square h-full w-full",s),...e}));iO.displayName=nO.displayName;const oO=M.forwardRef(({className:s,...e},t)=>T.jsx(sO,{ref:t,className:Ru("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...e}));oO.displayName=sO.displayName;function s8(){var t,n;const{user:s,signOut:e}=Mu();return s?T.jsxs("div",{className:"min-h-screen flex flex-col relative overflow-hidden font-sans",children:[T.jsx(Jw,{}),T.jsx("header",{className:"absolute top-0 left-0 w-full z-20 p-6",children:T.jsxs(Is,{to:"/",className:"inline-flex items-center gap-2 text-gray-500 hover:text-black transition-colors bg-white/50 backdrop-blur-sm px-4 py-2 rounded-full border border-white/60 shadow-sm hover:shadow-md",children:[T.jsx(Fw,{className:"w-4 h-4"}),T.jsx("span",{className:"font-medium text-sm",children:"Back to Home"})]})}),T.jsx("main",{className:"flex-1 flex items-center justify-center py-20 px-4 relative z-10",children:T.jsx(Ll.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},className:"w-full max-w-md",children:T.jsxs("div",{className:"relative overflow-hidden bg-white/60 backdrop-blur-2xl border border-white/50 rounded-3xl p-8 shadow-2xl shadow-blue-900/5 ring-1 ring-white/60 flex flex-col items-center text-center",children:[T.jsx("div",{className:"w-24 h-24 rounded-full bg-white p-1 shadow-lg ring-1 ring-gray-100 mb-6 relative group transform transition-transform hover:scale-105",children:T.jsxs(rO,{className:"w-full h-full",children:[T.jsx(iO,{src:`https://api.dicebear.com/7.x/pixel-art/svg?seed=${s.email}&gender=male`}),T.jsx(oO,{className:"text-2xl bg-blue-50 text-blue-600 font-bold",children:(t=s.email)==null?void 0:t.charAt(0).toUpperCase()})]})}),T.jsx("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight mb-1",children:(n=s.email)==null?void 0:n.split("@")[0]}),T.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-50 border border-blue-100 text-blue-700 text-xs font-medium mb-8",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500 mr-2 animate-pulse"}),s.email]}),T.jsxs("div",{className:"w-full space-y-3",children:[T.jsxs(en,{variant:"outline",className:"w-full h-12 rounded-xl bg-white/50 hover:bg-white border-gray-200 text-gray-700 hover:text-black justify-start px-4 transition-all hover:shadow-sm group",children:[T.jsx("div",{className:"p-1.5 rounded-lg bg-gray-100 group-hover:bg-gray-200 mr-3 transition-colors",children:T.jsx(OL,{className:"w-4 h-4 text-gray-500 group-hover:text-gray-700"})}),T.jsx("span",{className:"font-medium",children:"Edit Profile"}),T.jsx("span",{className:"ml-auto text-xs text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full",children:"Coming Soon"})]}),T.jsxs(en,{variant:"destructive",onClick:e,className:"w-full h-12 rounded-xl bg-red-50 hover:bg-red-100 text-red-600 border border-red-100 hover:border-red-200 justify-start px-4 transition-all hover:shadow-sm group",children:[T.jsx("div",{className:"p-1.5 rounded-lg bg-red-100 group-hover:bg-red-200 mr-3 transition-colors",children:T.jsx(NL,{className:"w-4 h-4 text-red-500 group-hover:text-red-700"})}),T.jsx("span",{className:"font-medium",children:"Sign Out"})]})]}),T.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200/50 w-full text-center",children:T.jsxs("p",{className:"text-xs text-gray-400 font-medium",children:["Member since ",new Date().getFullYear()]})})]})})})]}):null}ur.workerSrc=new URL("/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();function r8(){const{id:s}=eF(),e=sy(),[t,n]=M.useState(null),[r,i]=M.useState(!0),[o,l]=M.useState(null);M.useEffect(()=>{(async()=>{if(s)try{const{data:g,error:v}=await Ns.from("materials").select("*").eq("id",s).single();if(v)throw v;n(g)}catch(g){console.error("Error fetching material:",g)}finally{i(!1)}})()},[s]);function h({numPages:m}){l(m)}if(r)return T.jsx("div",{className:"flex h-[calc(100vh-4rem)] items-center justify-center",children:T.jsx(lm,{className:"h-8 w-8 animate-spin text-primary"})});if(!t)return T.jsxs("div",{className:"flex h-[calc(100vh-4rem)] flex-col items-center justify-center gap-4",children:[T.jsx("h2",{className:"text-xl font-semibold",children:"Material not found"}),T.jsx(en,{onClick:()=>e("/dashboard"),children:"Go to Dashboard"})]});const d=t.file_url.toLowerCase().includes(".pdf"),p=t.file_url.match(/\.(jpeg|jpg|gif|png)$/i)!=null;return T.jsxs("div",{className:"h-[calc(100vh-5rem)] flex flex-col gap-4",children:[T.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded-lg border shadow-sm",children:[T.jsxs(en,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"gap-2",children:[T.jsx(Fw,{className:"h-4 w-4"})," Back"]}),T.jsx("div",{className:"flex items-center gap-2",children:T.jsxs("span",{className:"text-sm font-medium text-gray-500 hidden sm:inline-block",children:[t.subject," ",t.module&&`| ${t.module}`]})}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("a",{href:`https://wa.me/?text=Check out this note: ${encodeURIComponent(t.title||"Note")} - ${encodeURIComponent(t.file_url)}`,target:"_blank",rel:"noopener noreferrer",children:T.jsx(en,{variant:"ghost",size:"icon",title:"Share on WhatsApp",children:T.jsx(qS,{className:"h-4 w-4 text-green-600"})})}),T.jsx("a",{href:t.file_url,download:!0,target:"_blank",rel:"noopener noreferrer",children:T.jsx(en,{variant:"ghost",size:"icon",title:"Download",children:T.jsx(GV,{className:"h-4 w-4"})})})]})]}),T.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 h-full overflow-hidden",children:[T.jsxs("div",{className:"flex-1 bg-black/90 rounded-xl overflow-hidden shadow-lg flex items-center justify-center relative group",children:[T.jsx("div",{className:"absolute top-4 right-4 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:T.jsx("a",{href:t.file_url,target:"_blank",rel:"noreferrer",children:T.jsx(en,{size:"icon",variant:"secondary",children:T.jsx(i3,{className:"h-4 w-4"})})})}),T.jsxs("div",{className:"w-full h-full overflow-auto flex justify-center p-4 scrollbar-hide",children:[p&&T.jsx("img",{src:t.file_url,alt:t.title,className:"max-w-full max-h-full object-contain shadow-2xl"}),d&&T.jsx(BI,{file:t.file_url,onLoadSuccess:h,className:"max-w-full",children:Array.from(new Array(o),(m,g)=>T.jsx(qI,{pageNumber:g+1,width:window.innerWidth>1024?600:window.innerWidth-40,className:"mb-4 shadow-xl",renderTextLayer:!1,renderAnnotationLayer:!1},`page_${g+1}`))}),!p&&!d&&T.jsxs("div",{className:"text-white text-center",children:[T.jsx("p",{className:"mb-4",children:"Preview not available for this file type."}),T.jsx(en,{asChild:!0,variant:"secondary",children:T.jsx("a",{href:t.file_url,target:"_blank",rel:"noopener noreferrer",children:"Download to View"})})]})]})]}),T.jsx("div",{className:"w-full lg:w-80 xl:w-96 bg-[#FFFBE6] rounded-xl border border-yellow-100 shadow-sm flex flex-col overflow-hidden shrink-0",children:T.jsxs("div",{className:"p-4 border-b border-yellow-200/50 bg-[#FFFBE6]",children:[T.jsx("h1",{className:"font-serif text-2xl font-bold text-gray-800 leading-tight",children:t.title}),T.jsxs("div",{className:"mt-4 space-y-2 text-sm text-gray-700 font-mono",children:[t.subject&&T.jsxs("p",{children:[T.jsx("span",{className:"text-gray-400",children:"Subject:"})," ",t.subject]}),t.module&&T.jsxs("p",{children:[T.jsx("span",{className:"text-gray-400",children:"Module:"})," ",t.module]}),t.semester&&T.jsxs("p",{children:[T.jsx("span",{className:"text-gray-400",children:"Sem:"})," ",t.semester]}),T.jsxs("p",{className:"pt-2 text-xs text-gray-400",children:["Uploaded by ",t.uploader_name||"Anonymous"," on ",new Date(t.created_at).toLocaleDateString()]})]})]})})]})]})}function MS({children:s}){const{session:e,loading:t}=Mu();return t?T.jsx("div",{children:"Loading..."}):e?T.jsx(T.Fragment,{children:s}):T.jsx(YR,{to:"/auth"})}function i8(){return T.jsx($F,{children:T.jsx(TU,{children:T.jsxs(gF,{children:[T.jsx(uo,{path:"/",element:T.jsx(UG,{})}),T.jsx(uo,{path:"/auth",element:T.jsx(VG,{})}),T.jsxs(uo,{element:T.jsx(b3,{}),children:[T.jsx(uo,{path:"/dashboard",element:T.jsx(MS,{children:T.jsx(zG,{})})}),T.jsx(uo,{path:"/upload",element:T.jsx(MS,{children:T.jsx(HG,{})})}),T.jsx(uo,{path:"/profile",element:T.jsx(MS,{children:T.jsx(s8,{})})})]}),T.jsx(uo,{path:"/material/:id",element:T.jsx(r8,{})}),T.jsx(uo,{path:"*",element:T.jsx(YR,{to:"/"})})]})})})}mj.createRoot(document.getElementById("root")).render(T.jsx(IR.StrictMode,{children:T.jsx(i8,{})}));
